var WP3=function(e){"use strict";function t(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new w(r||[]);return i(o,"_invoke",{value:_(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function f(){}function p(){}function g(){}var v={};u(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(C([])));y&&y!==t&&n.call(y,o)&&(v=y);var A=g.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(i,a,o,s){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return I()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=d(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=g,i(A,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:p,configurable:!0}),p.displayName=u(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},b(E.prototype),u(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new E(c(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(A),u(A,l,"Generator"),u(A,o,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,l,"next",e)}function l(e){o(a,i,r,s,l,"throw",e)}s(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S(i.key),i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=y(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},A.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function C(e,t,n){return t=x(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,G(i.key),i)}}function D(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))||t){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function P(e,t,n){return(t=G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=H(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},O.apply(null,arguments)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function j(e,t,n,i){var r=O(x(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}function K(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function Y(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q=function(){var e,t,n,i,r,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,y=/([A-Z])/g,A=["val","css","html","text","data","width","height","offset"],b=c.createElement("table"),E=c.createElement("tr"),_={tr:c.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:E,th:E,"*":c.createElement("div")},k=/complete|loaded|interactive/,T=/^[\w-]*$/,S={},w=S.toString,C={},I=c.createElement("div"),R={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(e){return e instanceof Array};function L(e){return null==e?String(e):S[w.call(e)]||"object"}function P(e){return"function"==L(e)}function O(e){return null!=e&&e==e.window}function x(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==L(e)}function N(e){return M(e)&&!O(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!O(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||f[F(e)]?t:t+"px"}function H(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function j(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function K(n,i,r){for(t in i)r&&(N(i[t])||D(i[t]))?(N(i[t])&&!N(n[t])&&(n[t]={}),D(i[t])&&!D(n[t])&&(n[t]=[]),K(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function G(e,t){return null==t?n(e):n(e).filter(t)}function W(e,t,n,i){return P(t)?t.call(e,n,i):t}function Y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function z(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function q(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function $(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)$(e.childNodes[n],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=I).appendChild(e),i=~C.qsa(r,t).indexOf(e),a&&I.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},C.fragment=function(t,i,r){var a,o,s;return g.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(v,"<$1></$2>")),i===e&&(i=p.test(t)&&RegExp.$1),i in _||(i="*"),(s=_[i]).innerHTML=""+t,a=n.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),N(r)&&(o=n(a),n.each(r,(function(e,t){A.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new j(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,i){var r,a;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&p.test(t))r=C.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}else{if(P(t))return n(c).ready(t);if(C.isZ(t))return t;if(D(t))a=t,r=l.call(a,(function(e){return null!=e}));else if(M(t))r=[t],t=null;else if(p.test(t))r=C.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}}return C.Z(r,t)},(n=function(e,t){return C.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){K(e,n,t)})),e},C.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,o=T.test(a);return e.getElementById&&o&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=L,n.isFunction=P,n.isWindow=O,n.isArray=D,n.isPlainObject=N,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var i,r,a,o,s=[];if(B(e))for(r=0;r<e.length;r++)null!=(i=t(e[r],r))&&s.push(i);else for(a in e)null!=(i=t(e[a],a))&&s.push(i);return(o=s).length>0?n.fn.concat.apply([],o):o},n.each=function(e,t){var n,i;if(B(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){S["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return k.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var i=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):B(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return M(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return o.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:C.matches(a,e));)a=a!==t&&!x(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!x(e)&&t.indexOf(e)<0)return t.push(e),e}));return G(t,e)},parent:function(e){return G(a(this.pluck("parentNode")),e)},children:function(e){return G(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return G(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(i){var r=n(this),a=r.contents(),o=t?e.call(this,i):e;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append(W(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=W(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(n))for(t in n)Y(this,t,n[t]);else Y(this,n,W(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Y(this,e)}),this)}))},prop:function(e,t){return e=R[e]||e,1 in arguments?this.each((function(n){this[e]=W(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=R[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(y,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?q(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=W(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=W(this,e,t,i.offset()),a=i.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(D(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return n.each(e,(function(e,t){o[t]=a.style[r(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==L(e))i||0===i?l=F(e)+":"+V(e,i):this.each((function(){this.style.removeProperty(F(e))}));else for(t in e)e[t]||0===e[t]?l+=F(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(F(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(z(e))}),U(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=z(this);W(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&z(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return z(this,"");i=z(this),W(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(U(e)," ")})),z(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);W(this,t,r,z(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=m.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!m.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,o=this[0];return r===e?O(o)?o["inner"+i]:x(o)?o.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(o=n(this)).css(t,W(this,r,e,o[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,o=n.map(arguments,(function(i){var r=[];return"array"==(t=L(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(C.fragment(t)))})),r):"object"==t||null==i?i:C.fragment(i)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&$(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),C.Z.prototype=j.prototype=n.fn,C.uniq=a,C.deserializeValue=q,n.zepto=C,n}();window.Zepto=q,void 0===window.$&&(window.$=q),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i,a){if(t.global)return function(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}(n||r,i,a)}function f(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===h(t,n,"ajaxBeforeSend",[e,t]))return!1;h(t,n,"ajaxSend",[e,t])}function p(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),h(n,r,"ajaxSuccess",[t,n,e]),v(a,t,n)}function g(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),h(i,a,"ajaxError",[n,i,e||t]),v(t,n,i)}function v(t,n,i){var r=i.context;i.complete.call(r,n,t),h(i,r,"ajaxComplete",[n,i]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(i)}function m(){}function y(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function A(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&a?p(a[0],h,t,n):g(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===f(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:m,success:m,error:m,complete:m,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:m},e.ajax=function(i){var a,v,A=e.extend({},i||{}),b=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===A[t]&&(A[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(A),A.crossDomain||((a=r.createElement("a")).href=A.url,a.href=a.href,A.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),A.url||(A.url=window.location.toString()),(v=A.url.indexOf("#"))>-1&&(A.url=A.url.slice(0,v)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=y(t.url,t.data),t.data=void 0)}(A);var E=A.dataType,_=/\?.+=\?/.test(A.url);if(_&&(E="jsonp"),!1!==A.cache&&(i&&!0===i.cache||"script"!=E&&"jsonp"!=E)||(A.url=y(A.url,"_="+Date.now())),"jsonp"==E)return _||(A.url=y(A.url,A.jsonp?A.jsonp+"=?":!1===A.jsonp?"":"callback=?")),e.ajaxJSONP(A,b);var k,T=A.accepts[E],S={},w=function(e,t){S[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(A.url)?RegExp.$1:window.location.protocol,I=A.xhr(),R=I.setRequestHeader;if(b&&b.promise(I),A.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",T||"*/*"),(T=A.mimeType||T)&&(T.indexOf(",")>-1&&(T=T.split(",",2)[0]),I.overrideMimeType&&I.overrideMimeType(T)),(A.contentType||!1!==A.contentType&&A.data&&"GET"!=A.type.toUpperCase())&&w("Content-Type",A.contentType||"application/x-www-form-urlencoded"),A.headers)for(n in A.headers)w(n,A.headers[n]);if(I.setRequestHeader=w,I.onreadystatechange=function(){if(4==I.readyState){I.onreadystatechange=m,clearTimeout(k);var t,n=!1;if(I.status>=200&&I.status<300||304==I.status||0==I.status&&"file:"==C){if(E=E||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}(A.mimeType||I.getResponseHeader("content-type")),"arraybuffer"==I.responseType||"blob"==I.responseType)t=I.response;else{t=I.responseText;try{t=function(e,t,n){if(n.dataFilter==m)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(t,E,A),"script"==E?(0,eval)(t):"xml"==E?t=I.responseXML:"json"==E&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return g(n,"parsererror",I,A,b)}p(t,I,A,b)}else g(I.statusText||null,I.status?"error":"abort",I,A,b)}},!1===f(I,A))return I.abort(),g(null,"abort",I,A,b),I;var D=!("async"in A)||A.async;if(I.open(A.type,A.url,D,A.username,A.password),A.xhrFields)for(n in A.xhrFields)I[n]=A.xhrFields[n];for(n in S)R.apply(I,S[n]);return A.timeout>0&&(k=setTimeout((function(){I.onreadystatechange=m,I.abort(),g(null,"timeout",I,A,b)}),A.timeout)),I.send(A.data?A.data:null),I},e.get=function(){return e.ajax(A.apply(null,arguments))},e.post=function(){var t=A.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=A.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),l=A(t,n,i),u=l.success;return s.length>1&&(l.url=s[0],r=s[1]),l.success=function(t){o.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(l),this};var b=encodeURIComponent;function E(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?E(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(b(t)+"="+b(n))},E(i,t,n),i.join("&").replace(/%20/g,"+")}}(q),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,r,a,o,s,l=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,i=!0,s=a||0,a=0,o=l.length,r=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:d.disable())},d={add:function(){if(l){var i=l.length,s=function(n){e.each(n,(function(e,n){"function"==typeof n?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),r?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&e.each(arguments,(function(t,n){for(var i;(i=e.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=o&&--o,i<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d}}(q),function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var s=e.isFunction(t[i])&&t[i];o[r[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,o=s?[t]:arguments;n[r[0]+"With"](i,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(i,(function(e,t){var n=t[2],s=t[3];a[t[1]]=n.add,s&&n.add((function(){r=s}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=n.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(i){var r,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=n}(q),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=f(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e,t){return e.del&&!l&&e.e in u||!!t}function g(e){return c[e]||l&&u[e]||e}function v(n,i,r,a,s,l,u){var h=d(n),v=o[h]||(o[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var o=f(i);o.fn=r,o.sel=s,o.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=l;var d=l||r;o.proxy=function(e){if(!(e=_(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},o.i=v.length,v.push(o),"addEventListener"in n&&n.addEventListener(g(o.e),o.proxy,p(o,u))}))}function m(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,p(t,r))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:v,remove:m},e.proxy=function(t,n){var o=2 in arguments&&i.call(arguments,2);if(r(t)){var s=function(){return t.apply(n,o?o.concat(i.call(arguments)):arguments)};return s._zid=d(t),s}if(a(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var y=function(){return!0},A=function(){return!1},b=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function _(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(E,(function(e,t){var r=i[e];n[e]=function(){return this[t]=y,r&&r.apply(i,arguments)},n[t]=A})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=y)),n}function k(e){var n,i={originalEvent:e};for(n in e)b.test(n)||e[n]===t||(i[n]=e[n]);return _(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,o,s,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||r(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=A),h.each((function(t,r){u&&(c=function(e){return m(r,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var n,a=e(t.target).closest(o,r).get(0);if(a&&a!==r)return n=e.extend(k(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),v(r,n,l,s,o,d||c)})))},e.fn.off=function(n,i,o){var s=this;return n&&!a(n)?(e.each(n,(function(e,t){s.off(e,i,t)})),s):(a(i)||r(o)||!1===o||(o=i,i=t),!1===o&&(o=A),s.each((function(){m(this,n,o,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):_(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(o,s){(i=k(a(t)?e.Event(t):t))._args=n,i.target=s,e.each(h(s,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),_(n)}}(q),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=o.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var s=Number(i);i=isNaN(s)?i.replace(/^["']|["']$/g,""):s}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(q);var $=z(q);Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var X,Q,J,Z={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},ee=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],te=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],ne={},ie=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},re=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},ae=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}}(navigator.userAgent);ne.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),ne.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!ne.isEdge,ne.isSafari=/Safari/i.test(navigator.userAgent)&&!ne.isChrome&&!ne.isEdge,ne.isFirefox=/Firefox/i.test(navigator.userAgent),ne.isLegacyIE=!!window.ActiveXObject,ne.isIE=ne.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),ne.isIE11=/trident.*rv:11/i.test(navigator.userAgent),ne.isChromecast=ne.isChrome&&/CrKey/i.test(navigator.userAgent),ne.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),ne.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),ne.isAndroid=/Android/i.test(navigator.userAgent),ne.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),ne.isWin8App=/MSAppHost/i.test(navigator.userAgent),ne.isWiiU=/WiiU/i.test(navigator.userAgent),ne.isPS4=/PlayStation 4/i.test(navigator.userAgent),ne.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),ne.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),ne.name=ae.name,ne.version=ae.version,ne.userAgent=navigator.userAgent,ne.data=function(){var e,t={},n=ne.userAgent.toLowerCase(),i=L(ee);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&ie(o[1],t)}else ie(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t}(),ne.os=function(){var e,t={},n=ne.userAgent.toLowerCase(),i=L(te);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)re(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])re(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&re(o[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t}(),ne.isWindows=/^Windows$/i.test(ne.os.group),ne.isMacOS=/^Mac OS$/i.test(ne.os.group),ne.isLinux=/^Linux$/i.test(ne.os.group),ne.viewport=((X={}).width=$(window).width(),X.height=$(window).height(),X),ne.device=(Q=ne.userAgent,(J=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(Q))&&(J[1]||J[2])||""),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:ne.viewport.orientation="landscape";break;default:ne.viewport.orientation="portrait"}}();var oe={},se=[],le=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),ue=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function ce(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function de(e,t){var n=function(e){function n(){var e;I(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=C(this,n,[].concat(r)),t.initialize&&t.initialize.apply(e,r),e}return M(n,e),D(n)}(e);return ce(n.prototype,t),n}var he={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},fe=function(){return D((function e(){I(this,e)}),null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return ne.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(ne.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}])}(),pe=function(){return D((function e(){I(this,e)}),null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}])}();function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=pe.params[e]||pe.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}function ve(e){return oe[e]||(oe[e]=0),e+ ++oe[e]}function me(e){return e-parseFloat(e)+1>=0}function ye(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function Ae(){return window.navigator&&window.navigator.language}function be(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:Z.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var Ee=function(){return D((function e(){I(this,e)}),null,[{key:"configure",value:function(e){this.options=$.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&se.length>0?se.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&($(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),se.push(e))}}])}();Ee.options={recycleVideo:!1};var _e=function(){return D((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;I(this,e),this.delay=t,this.lastTime=0}),[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}])}(),ke={Config:fe,Fullscreen:he,QueryString:pe,DomRecycler:Ee,assign:ce,extend:de,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",r<1&&(o+="00:")),(r&&r>0||t)&&(o+=("0"+r).slice(-2)+":"),o+=("0"+i).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()},seekStringToSeconds:ge,uniqueId:ve,currentScriptUrl:ye,isNumber:me,requestAnimationFrame:le,cancelAnimationFrame:ue,getBrowserLanguage:Ae,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))},canAutoPlayMedia:be,Media:Z,DoubleEventHandler:_e},Te="font-weight: bold; font-size: 13px;",Se="color: #ff8000;"+Te,we="color: #ff0000;"+Te,Ce=["color: #0000ff;"+Te,"color: #006600;"+Te,Se,we,we],Ie=["debug","info","warn","error","disabled"],Re=function(){return D((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;I(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress","core:mousemove"],this.level=t,this.previousLevel=this.level,this.offLevel=n}),[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+Ie[this.level],Se)}},{key:"log",value:function(e,t,n){if(!(t<this.level||this.EXCLUDE_LIST.indexOf(n[0])>=0)){n||(n=e,e=null);var i=Ce[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+Ie[t]+"]"+r,i].concat(n))}}}])}();Re.LEVEL_DEBUG=0,Re.LEVEL_INFO=1,Re.LEVEL_WARN=2,Re.LEVEL_ERROR=3,Re.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},Re.setLevel=function(e){this.getInstance().level=e},Re.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},Re.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},Re.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},Re.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var De=Array.prototype.slice,Le=/\s+/,Pe=function(e,t,n,i){if(!n)return!0;if("object"===W(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(Le.test(n)){for(var a=n.split(Le),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},Oe=function(e,t,n,i){var r,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++a<o;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s);return;case 2:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l);return;case 3:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l,u);return;default:for(;++a<o;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){Re.error.apply(Re,[n,"error on event",i,"trigger","-",e]),c()}}()},xe=function(){function e(){I(this,e)}return D(e,[{key:"on",value:function(e,t,n){return Pe(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!Pe(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},i._callback=t,this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,o,s,l,u,c;if(!this._events||!Pe(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=0,l=(o=e?[e]:Object.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(Re.debug.apply(Re,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=De.call(arguments,1);if(!Pe(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&Oe(i,n,t,e),r&&Oe(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==W(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):Re.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}])}();xe.prototype.listenTo=function(e,t,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=ve("l"))]=e,n||"object"!==W(t)||(n=this),e.on(t,n,this),this},xe.prototype.listenToOnce=function(e,t,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=ve("l"))]=e,n||"object"!==W(t)||(n=this),e.once(t,n,this),this},xe.PLAYER_READY="ready",xe.PLAYER_RESIZE="resize",xe.PLAYER_FULLSCREEN="fullscreen",xe.PLAYER_PLAY="play",xe.PLAYER_PAUSE="pause",xe.PLAYER_STOP="stop",xe.PLAYER_ENDED="ended",xe.PLAYER_SEEK="seek",xe.PLAYER_ERROR="playererror",xe.ERROR="error",xe.PLAYER_TIMEUPDATE="timeupdate",xe.PLAYER_VOLUMEUPDATE="volumeupdate",xe.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",xe.PLAYBACK_PIP_ENTER="playback:picture-in-picture:enter",xe.PLAYBACK_PIP_EXIT="playback:picture-in-picture:exit",xe.PLAYBACK_PROGRESS="playback:progress",xe.PLAYBACK_TIMEUPDATE="playback:timeupdate",xe.PLAYBACK_READY="playback:ready",xe.PLAYBACK_BUFFERING="playback:buffering",xe.PLAYBACK_BUFFERFULL="playback:bufferfull",xe.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",xe.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",xe.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",xe.PLAYBACK_BITRATE="playback:bitrate",xe.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",xe.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",xe.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",xe.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",xe.PLAYBACK_DVR="playback:dvr",xe.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",xe.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",xe.PLAYBACK_ENDED="playback:ended",xe.PLAYBACK_PLAY_INTENT="playback:play:intent",xe.PLAYBACK_PLAY="playback:play",xe.PLAYBACK_PAUSE="playback:pause",xe.PLAYBACK_SEEK="playback:seek",xe.PLAYBACK_SEEKED="playback:seeked",xe.PLAYBACK_STOP="playback:stop",xe.PLAYBACK_ERROR="playback:error",xe.PLAYBACK_STATS_ADD="playback:stats:add",xe.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",xe.PLAYBACK_FRAGMENT_BUFFERED="playback:fragment:buffered",xe.PLAYBACK_LEVEL_SWITCH="playback:level:switch",xe.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",xe.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",xe.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",xe.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",xe.PLAYBACK_RESIZE="playback:resize",xe.CORE_CONTAINERS_CREATED="core:containers:created",xe.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",xe.CORE_OPTIONS_CHANGE="core:options:change",xe.CORE_READY="core:ready",xe.CORE_FULLSCREEN="core:fullscreen",xe.CORE_RESIZE="core:resize",xe.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",xe.CORE_MOUSE_MOVE="core:mousemove",xe.CORE_MOUSE_LEAVE="core:mouseleave",xe.CONTAINER_PLAYBACKSTATE="container:playbackstate",xe.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",xe.CONTAINER_BITRATE="container:bitrate",xe.CONTAINER_STATS_REPORT="container:stats:report",xe.CONTAINER_DESTROYED="container:destroyed",xe.CONTAINER_READY="container:ready",xe.CONTAINER_RESIZE="container:resize",xe.CONTAINER_ERROR="container:error",xe.CONTAINER_LOADEDMETADATA="container:loadedmetadata",xe.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",xe.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",xe.CONTAINER_AUDIO_AVAILABLE="container:audio:available",xe.CONTAINER_AUDIO_CHANGED="container:audio:changed",xe.CONTAINER_TIMEUPDATE="container:timeupdate",xe.CONTAINER_PROGRESS="container:progress",xe.CONTAINER_PLAY="container:play",xe.CONTAINER_STOP="container:stop",xe.CONTAINER_PAUSE="container:pause",xe.CONTAINER_ENDED="container:ended",xe.CONTAINER_CLICK="container:click",xe.CONTAINER_DBLCLICK="container:dblclick",xe.CONTAINER_CONTEXTMENU="container:contextmenu",xe.CONTAINER_MOUSE_ENTER="container:mouseenter",xe.CONTAINER_MOUSE_LEAVE="container:mouseleave",xe.CONTAINER_MOUSE_UP="container:mouseup",xe.CONTAINER_MOUSE_DOWN="container:mousedown",xe.CONTAINER_PIP_ENTER="container:picture-in-picture:enter",xe.CONTAINER_PIP_EXIT="container:picture-in-picture:exit",xe.CONTAINER_SEEK="container:seek",xe.CONTAINER_SEEKED="container:seeked",xe.CONTAINER_VOLUME="container:volume",xe.CONTAINER_FULLSCREEN="container:fullscreen",xe.CONTAINER_STATE_BUFFERING="container:state:buffering",xe.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",xe.CONTAINER_SETTINGSUPDATE="container:settingsupdate",xe.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",xe.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",xe.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",xe.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",xe.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",xe.CONTAINER_STATS_ADD="container:stats:add",xe.CONTAINER_OPTIONS_CHANGE="container:options:change",xe.MEDIACONTROL_RENDERED="mediacontrol:rendered",xe.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",xe.MEDIACONTROL_SHOW="mediacontrol:show",xe.MEDIACONTROL_HIDE="mediacontrol:hide",xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",xe.MEDIACONTROL_PLAYING="mediacontrol:playing",xe.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",xe.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",xe.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Me=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I(this,t),(e=C(this,t,[n]))._options=n,e.uniqueId=ve("o"),e}return M(t,e),D(t,[{key:"options",get:function(){return this._options}}])}(xe),Ne={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Be=/(.)^/,Fe={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ue=/\\|'|\r|\n|\t|\u2028|\u2029/g,Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},He=new RegExp("[&<>\"']","g"),je=function(e){return null===e?"":(""+e).replace(He,(function(e){return Ve[e]}))},Ke=0,Ge=function(e,t){var n,i=new RegExp([(Ne.escape||Be).source,(Ne.interpolate||Be).source,(Ne.evaluate||Be).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(Ue,(function(e){return"\\"+Fe[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t})),a+="';\n",Ne.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Ke+++"]";try{n=new Function(Ne.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,je);var o=function(e){return n.call(this,e,je)};return o.source="function("+(Ne.variable||"obj")+"){\n"+a+"}",o};Ge.settings=Ne;var We={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return $('<style class="clappr-style"></style>').html(Ge(e.toString())(t))}},Ye=/^(\S+)\s*(.*)$/,ze=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e])).cid=ve("c"),n._ensureElement(),n.delegateEvents(),n}return M(t,e),D(t,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=$.zepto.isZ(e)?e:$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(Ye),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=$.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=$(Ee.create(this.tagName)).attr(e);this.setElement(t,!1)}}},{key:"onResize",value:function(){return this}},{key:"resize",value:function(e){var t=me(e.width)?"".concat(e.width,"px"):"".concat(e.width),n=me(e.height)?"".concat(e.height,"px"):"".concat(e.height);return this.el.style.width=t,this.el.style.height=n,this.onResize(e),this}}])}(Me),qe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return I(this,t),(e=C(this,t,[n])).core=i,e}return M(t,e),D(t,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(xe.ERROR,e):Re.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}])}(Me),$e={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),o={description:"",level:qe.Levels.FATAL,origin:i,scope:n,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(r&&s.level==qe.Levels.FATAL&&!s.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):Re.warn(i,"PlayerError is not defined. Error: ",s),s}},Xe=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e.options])).core=e,n.enabled=!0,n.bindEvents(),n.render(),n}return M(t,e),D(t,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}])}(ze);Object.assign(Xe.prototype,$e),Xe.extend=function(e){return de(Xe,e)},Xe.type="core";var Qe=function(e){function t(e,n,i){var r;return I(this,t),(r=C(this,t,[e]))._i18n=n,r.currentTime=0,r.volume=100,r.playback=e.playback,r.playerError=i,r.settings=$.extend(!0,{},r.playback.settings),r.isReady=!1,r.mediaControlDisabled=!1,r.plugins=[r.playback],r.dblTapHandler=new _e(500),r.clickTimer=null,r.clickDelay=200,r.actionsMetadata={},r.bindEvents(),r}return M(t,e),D(t,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"isPiPActive",get:function(){return this.playback.isPiPActive}},{key:"bindEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,xe.PLAYBACK_READY,this.ready),this.listenTo(this.playback,xe.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,xe.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,xe.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,xe.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,xe.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,xe.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,xe.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,xe.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,xe.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,xe.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,xe.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,xe.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,xe.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,xe.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,xe.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,xe.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,xe.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,xe.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,xe.PLAYBACK_AUDIO_CHANGED,this.audioChanged),this.listenTo(this.playback,xe.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,xe.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"subtitleAvailable",value:function(){this.trigger(xe.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(xe.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(xe.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(xe.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(xe.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(xe.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(xe.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(xe.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(xe.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),this.undelegateEvents()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"ready",value:function(){this.isReady=!0,this.trigger(xe.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(xe.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(xe.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(xe.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[xe.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(xe.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(xe.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(xe.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(xe.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(xe.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(xe.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(xe.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(xe.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(xe.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(xe.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(xe.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(xe.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(xe.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"onEnterPiP",value:function(){this.trigger(xe.CONTAINER_PIP_ENTER,this.name)}},{key:"onExitPiP",value:function(){this.trigger(xe.CONTAINER_PIP_EXIT,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_DOWN)}},{key:"enterPiP",value:function(){this.playback.enterPiP()}},{key:"exitPiP",value:function(){this.playback.exitPiP()}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(xe.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(xe.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(xe.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(xe.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(xe.CONTAINER_RESIZE,e))}},{key:"onResize",value:function(e){return this.playback.resize(e),this}},{key:"configure",value:function(e){this._options=$.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(xe.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=We.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}])}(ze);Object.assign(Qe.prototype,$e);var Je=function(e){function t(e,n,i){var r;return I(this,t),(r=C(this,t,[e])).settings={},r._i18n=n,r.playerError=i,r._consented=!1,r}return M(t,e),D(t,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"latency",get:function(){return null}},{key:"currentProgramDateTime",get:function(){return null}},{key:"isPiPActive",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"enterPiP",value:function(){}},{key:"exitPiP",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return t.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=$.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"onResize",value:function(e){return this.trigger(xe.PLAYBACK_RESIZE,e),this}}])}(ze);Object.assign(Je.prototype,$e),Je.extend=function(e){return de(Je,e)},Je.canPlay=function(e,t){return!1},Je.VOD="vod",Je.AOD="aod",Je.LIVE="live",Je.NO_OP="no_op",Je.type="playback";var Ze=function(e){function t(e,n,i,r){var a;return I(this,t),(a=C(this,t,[e]))._i18n=i,a.loader=n,a.playerError=r,a}return M(t,e),D(t,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var e=this;return $.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===W(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=F(F({},this.options),{},{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new Je;i=F(F({},i),{},{playback:a});var o=new Qe(i,this._i18n,this.playerError),s=$.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,xe.CONTAINER_READY,(function(){return s.resolve(o)})),o}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}])}(Me),et=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e])).playerError=new qe(e,n),n.configureDomRecycler(),n.firstResize=!0,n.styleRendered=!1,n.plugins=[],n.containers=[],n._boundFullscreenHandler=function(){return n.handleFullscreenChange()},n._boundHandleWindowResize=function(e){return n.handleWindowResize(e)},$(document).bind("fullscreenchange",n._boundFullscreenHandler),$(document).bind("MSFullscreenChange",n._boundFullscreenHandler),$(document).bind("mozfullscreenchange",n._boundFullscreenHandler),ne.isMobile&&$(window).bind("resize",n._boundHandleWindowResize),n}return M(t,e),D(t,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Xe(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(xe.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el&&this.activePlayback.$el.find("video")[0]||this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;Ee.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=$.Deferred(),this.defer.promise(this),this.containerFactory=new Ze(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){ne.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:$(window).width(),height:$(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:$(window).width(),height:$(window).height()},this.resize(this.currentSize)}},{key:"onResize",value:function(e){return this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize),this}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function(){var t,n,i=null!==(t=e.el.clientWidth)&&void 0!==t?t:e.options.width,r=null!==(n=e.el.clientHeight)&&void 0!==n?n:e.options.height;e.triggerResize({width:i,height:r})}),500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(xe.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;$.when.apply($,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(xe.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=$.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),$(document).unbind("fullscreenchange",this._boundFullscreenHandler),$(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),$(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),ne.isMobile&&$(window).unbind("resize",this._boundHandleWindowResize),this.stopListening(),this.undelegateEvents()}},{key:"handleFullscreenChange",value:function(){this.trigger(xe.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t,n,i=window.innerWidth>window.innerHeight?"landscape":"portrait";if(this._screenOrientation!==i){this._screenOrientation=i;var r=null!==(t=this.el.clientWidth)&&void 0!==t?t:this.options.width,a=null!==(n=this.el.clientHeight)&&void 0!==n?n:this.options.height;this.triggerResize({width:r,height:a}),this.trigger(xe.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation})}}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containerFactory.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,xe.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(xe.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=he.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen()){var t=ne.isiOS?this.activePlaybackEl:document;he.cancelFullscreen(t),!ne.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var n=ne.isiOS?this.activePlaybackEl:this.el;if(!n)return;ne.isSafari||ne.isiOS?he.requestFullscreen(n):he.requestFullscreen(n).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!ne.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(xe.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(xe.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=$.extend(!0,this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(xe.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"appendStyles",value:function(){if(!this.styleRendered){var e=We.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl});if(this.$el.append(e[0]),this.options.includeResetStyle){var t=We.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0])}this.styleRendered=!0}}},{key:"render",value:function(){this.appendStyles(),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}])}(ze);Object.assign(et.prototype,$e);var tt,nt,it=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e.options])).player=e,n}return M(t,e),D(t,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new et(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}])}(Me),rt=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,at=function(){function e(t,n,i){I(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return D(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(rt)||[],i=V(n,4),r=i[1],a=i[2],o=i[3];return void 0===r?null:new e(r,a,o)}}])}(),ot=function(e,t){return e&&t?Object.entries(e).filter((function(e){return V(e,2)[1].type===t})).reduce((function(e,t){var n=V(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},st=(tt={plugins:{},playbacks:[]},nt="0.11.5",function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;I(this,e),this.playerId=n,this.playbackPlugins=K(tt.playbacks);var i=e.registeredPlugins,r=i.core,a=i.container;this.containerPlugins=Object.values(a),this.corePlugins=Object.values(r),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return D(e,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(t){var n="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,i="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var r=t.playback.filter((function(t){return e.checkVersionSupport(t),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(t.container){var a=t.container.filter((function(t){return e.checkVersionSupport(t),!0}));this.containerPlugins=n?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var o=t.core.filter((function(t){return e.checkVersionSupport(t),!0}));this.corePlugins=n?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}],[{key:"registeredPlaybacks",get:function(){return K(tt.playbacks)}},{key:"registeredPlugins",get:function(){var e=tt.plugins;return{core:ot(e,"core"),container:ot(e,"container")}}},{key:"checkVersionSupport",value:function(e){var t=e.prototype,n=t.supportedVersion,i=t.name;if(!n||!n.min)return Re.warn("Loader","missing version information for ".concat(i)),!1;var r=n.max?at.parse(n.max):at.parse(n.min).inc("minor"),a=at.parse(n.min);return!!at.parse(nt).satisfies(a,r)||(Re.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(nt," does not match required range [").concat(a,",").concat(r,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return Re.warn("Loader","missing information to register plugin: ".concat(t)),!1;e.checkVersionSupport(t);var n=tt.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&Re.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;e.checkVersionSupport(t);var n=tt.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var r=n[i];n.splice(i,1),Re.warn("Loader","overriding playback entry: ".concat(r.name," - ").concat(r))}return tt.playbacks=[t].concat(K(n)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=tt.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(e){if(!e)return!1;var t=tt.playbacks,n=t.findIndex((function(t){return t.prototype.name===e}));return!(n<0||(t.splice(n,1),tt.playbacks=t,0))}},{key:"clearPlugins",value:function(){tt.plugins={}}},{key:"clearPlaybacks",value:function(){tt.playbacks=[]}}])}()),lt=ye().replace(/\/[^/]+$/,""),ut=function(e){function t(e){var n;I(this,t),n=C(this,t,[e]);var i={playerId:ve(""),persistConfig:!0,width:640,height:360,baseUrl:lt,allowUserInteraction:ne.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};n._options=$.extend(!0,i,e),n.options.sources=n._normalizeSources(e),n.options.chromeless||(n.options.allowUserInteraction=!0),n.options.allowUserInteraction||(n.options.disableKeyboardShortcuts=!0),n._registerOptionEventListeners(n.options.events),n._coreFactory=new it(n);var r=n._getParentElement(n.options);return r&&n.attachTo(r),n}return M(t,e),D(t,[{key:"loader",get:function(){return this._loader||(this._loader=new st(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:xe.PLAYER_READY,onResize:xe.PLAYER_RESIZE,onPlay:xe.PLAYER_PLAY,onPause:xe.PLAYER_PAUSE,onStop:xe.PLAYER_STOP,onEnded:xe.PLAYER_ENDED,onSeek:xe.PLAYER_SEEK,onError:xe.PLAYER_ERROR,onTimeUpdate:xe.PLAYER_TIMEUPDATE,onVolumeUpdate:xe.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:xe.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(e){var t=e.parentId,n=e.parent;return t?document.querySelector(t):n}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,xe.CORE_READY,this._onReady),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,xe.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,xe.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,xe.CONTAINER_PLAY,this._onPlay),this.listenTo(e,xe.CONTAINER_PAUSE,this._onPause),this.listenTo(e,xe.CONTAINER_STOP,this._onStop),this.listenTo(e,xe.CONTAINER_ENDED,this._onEnded),this.listenTo(e,xe.CONTAINER_SEEK,this._onSeek),this.listenTo(e,xe.CONTAINER_ERROR,this._onError),this.listenTo(e,xe.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,xe.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,xe.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(t).length>0;return i&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(xe.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(xe.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(xe.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(xe.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(xe.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(xe.PLAYER_PLAY,t)}},{key:"_onPause",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(xe.PLAYER_PAUSE,t)}},{key:"_onStop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(xe.PLAYER_STOP,this.getCurrentTime(),e)}},{key:"_onEnded",value:function(){this.trigger(xe.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(xe.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(xe.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(xe.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.play(e),this}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.pause(e),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.stop(e),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}])}(Me);Object.assign(ut.prototype,$e);var ct=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e.options])).container=e,n.enabled=!0,n.bindEvents(),n}return M(t,e),D(t,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}])}(Me);Object.assign(ct.prototype,$e),ct.extend=function(e){return de(ct,e)},ct.type="container";var dt=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e.options])).core=e,n.enabled=!0,n.bindEvents(),n}return M(t,e),D(t,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}])}(Me);Object.assign(dt.prototype,$e),dt.extend=function(e){return de(dt,e)},dt.type="core";var ht=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e.options])).container=e,n.enabled=!0,n.bindEvents(),n}return M(t,e),D(t,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}])}(ze);Object.assign(ht.prototype,$e),ht.extend=function(e){return de(ht,e)},ht.type="container";var ft={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};ft.ogv=ft.ogg,ft["3gp"]=ft["3gpp"];var pt={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},gt=Object.keys(pt).reduce((function(e,t){return[].concat(K(e),K(pt[t]))}),[]),vt={code:"unknown",message:"unknown"},mt=function(e){function t(){var e;I(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=C(this,t,[].concat(i)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._playheadMovingCheckEnabled=!e.options.disablePlayheadMovingCheck,e._setupSrc(e.options.src),e._playheadMovingCheckInterval=e.options.playheadMovingCheckInterval||500,e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var a,o=e.options.playback,s=o.preload||(ne.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?a=e.options.poster:"string"==typeof e.options.poster.url&&(a=e.options.poster.url)),$.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:a,preload:s||"metadata",crossOrigin:o.crossOrigin,"x-webkit-playsinline":o.playInline}),(o.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),o.playInline&&e.$el.attr({playsinline:"playsinline"}),o.crossOrigin&&e.$el.attr({crossorigin:o.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],o.externalTracks&&e._setupExternalTracks(o.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return M(t,e),D(t,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,n=t._mimeTypesForUrl(e,pt,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||gt.indexOf(n[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting",enterpictureinpicture:"_onEnterPiP",leavepictureinpicture:"_onExitPiP"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isPiPActive",get:function(){return this.el===document.pictureInPictureElement}},{key:"isLive",get:function(){return this.getPlaybackType()===Je.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"sourceMedia",get:function(){return this._src}},{key:"configure",value:function(e){j(t,"configure",this)([e]),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&Re.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};ne.isMobile&&Ee.options.recycleVideo&&(t.element=this.el),be(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"load",value:function(e){this._setupSrc(e)}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==Je.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===Je.VOD||this.getPlaybackType()===Je.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(xe.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?Je.AOD:Je.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?Je.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var n=this;if(this.isPlaying()||this.el._consented)j(t,"consent",this)([e]);else{var i=function(){n.el.removeEventListener("loadedmetadata",i,!1),n.el.removeEventListener("error",i,!1),n.el._consented=!0,j(t,"consent",n)([e])};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){var e=this;this.trigger(xe.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();return t&&t.catch&&t.catch((function(t){return Re.warn(e.name,"HTML5 play failed",t)})),t}},{key:"pause",value:function(){this.el.pause()}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&this._playheadMovingCheckEnabled&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),this._playheadMovingCheckInterval))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this.dvrEnabled&&this._updateDvr(!0),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){var e=this.getCurrentTime();this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),this.trigger(xe.PLAYBACK_SEEK,e),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_ENDED,this.name)}},{key:"_onEnterPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_ENTER,this.name)}},{key:"_onExitPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_EXIT,this.name)}},{key:"enterPiP",value:function(){var e=this;this.el.requestPictureInPicture().then((function(){Re.info(e.name,"enter PIP success")})).catch((function(t){Re.warn(e.name,"enter PIP failed",t)}))}},{key:"exitPiP",value:function(){var e=this;document.exitPictureInPicture().then((function(){Re.info(e.name,"exit PIP success")})).catch((function(t){Re.warn(e.name,"exit PIP failed",t)}))}},{key:"_handleBufferingEvents",value:function(){var e=this._loadStarted&&!this.el.ended&&!this._stopped,t=this.el.readyState<this.el.HAVE_FUTURE_DATA,n=!this.el.ended&&!this.el.paused&&!this._playheadMoving,i=e&&t;this._playheadMovingCheckEnabled&&(i=i||e&&n),this._isBuffering!==i&&(this._isBuffering=i,i?this.trigger(xe.PLAYBACK_BUFFERING,this.name):this.trigger(xe.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||vt,t=e.code,n=e.message,i=t===vt.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?qe.Levels.WARN:qe.Levels.FATAL});i?Re.warn(this.name,"HTML5 unknown error: ",r):this.trigger(xe.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this._stopPlayheadMovingChecks(),this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),this.$el.off("contextmenu"),j(t,"destroy",this)([]),this.el.removeAttribute("src"),this.el.load(),this._src=null,Ee.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(xe.PLAYBACK_DVR,e),this.trigger(xe.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(Re.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=ge();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(xe.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(K(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(xe.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var n=t._mimeTypesForUrl(e,ft,this.options.mimeType);return 0===n.length&&(n=t._mimeTypesForUrl(e,pt,this.options.mimeType)),(n[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(xe.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(xe.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(xe.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===t.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(t){return{id:e++,name:t.label,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(me(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(xe.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return Ge('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=We.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}])}(Je);mt._mimeTypesForUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=n||i&&t[i.toLowerCase()]||[];return r.constructor===Array?r:[r]},mt._canPlay=function(e,t,n,i){var r=mt._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},mt.canPlay=function(e,t){return mt._canPlay("audio",pt,e,t)||mt._canPlay("video",ft,e,t)};var yt=function(e){function t(){return I(this,t),C(this,t,arguments)}return M(t,e),D(t,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(xe.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return Je.AOD}}])}(mt);yt.canPlay=function(e,t){return mt._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};var At=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e])).el.src=e.src,n}return M(t,e),D(t,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return Je.NO_OP}},{key:"render",value:function(){var e=We.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(xe.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(xe.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(xe.PLAYBACK_ERROR,{message:t},this.name)}}])}(Je);At.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var bt=function(e){function t(){var e;I(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=C(this,t,[].concat(i)))._noiseFrameNum=-1,e}return M(t,e),D(t,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=We.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(xe.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<r;){if(o<0)o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24;o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=le((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(ue(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}])}(Je);bt.canPlay=function(e){return!0};var Et=function(e){function t(e){var n;return I(this,t),(n=C(this,t,[e]))._initializeMessages(),n}return M(t,e),D(t,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||Ae()}},{key:"_initializeMessages",value:function(){this._messages=$.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não suporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}])}(dt),_t=function(e){function t(){return I(this,t),C(this,t,arguments)}return M(t,e),D(t,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}}])}(dt),kt="0.11.5";st.registerPlugin(Et),st.registerPlugin(_t),st.registerPlayback(bt),st.registerPlayback(At),st.registerPlayback(yt),st.registerPlayback(mt);var Tt,St,wt,Ct,It,Rt={Player:ut,Events:xe,Browser:ne,ContainerPlugin:ct,UIContainerPlugin:ht,CorePlugin:dt,UICorePlugin:Xe,Playback:Je,Container:Qe,Core:et,PlayerError:qe,Loader:st,BaseObject:Me,UIObject:ze,Utils:ke,HTML5Audio:yt,HTML5Video:mt,HTMLImg:At,Log:Re,Styler:We,version:kt,template:Ge,$:$},Dt=Object.freeze({__proto__:null,$:$,BaseObject:Me,Browser:ne,Container:Qe,ContainerPlugin:ct,Core:et,CorePlugin:dt,Events:xe,HTML5Audio:yt,HTML5Video:mt,HTMLImg:At,Loader:st,Log:Re,Playback:Je,Player:ut,PlayerError:qe,Styler:We,UIContainerPlugin:ht,UICorePlugin:Xe,UIObject:ze,Utils:ke,default:Rt,template:Ge,version:kt});ne.isCrawlerBot=(Tt=window.navigator.userAgent,St=/Applebot/i.test(Tt),wt=/YandexBot|YandexRenderResourcesBot/i.test(Tt),Ct=/Googlebot|AdsBot-Google/i.test(Tt),It=/BingPreview|bingbot/i.test(Tt),St||Ct||wt||It),ne.supportsFakeLocation=/puffin/i.test(navigator.userAgent),ne.supportsTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,ne.isHybridDevice=ne.supportsTouchEvents&&!ne.isMobile,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(n[a]===e)return!0;a++}return!1}}),Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Lt=function(){function e(){l(this,e)}return c(e,null,[{key:"s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"generate",value:function(){return"".concat(this.s4()+this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4()).concat(this.s4()).concat(this.s4())}}]),e}(),Pt=function(e){try{if("object"===a(e))return JSON.stringify(e)}catch(e){}return e};function Ot(e,t){return"".concat(e).concat(t>1?"s":"")}var xt=ke.formatTime,Mt=function(e){return e&&"function"==typeof e.getTime?Math.trunc(e.getTime()/1e3):NaN};var Nt=!ne.isChrome&&!ne.isChromecast&&!ne.isSmartTvEnvironment,Bt="playback.video.globo.com/v4/video-session",Ft="playback2.video.globo.com/v4/video-session",Ut="playback.video.dev.globoi.com/v4/video-session",Vt="internal-playback.backstage.globoi.com/internal/v4/video-session",Ht="internal-playback.backstage.dev.globoi.com/internal/v4/video-session",jt="playback-dr.video.globo.com/v4/video-session",Kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.httpOnly=t,this.protocol="http".concat(t?"":"s"),this.customEnv=n}return c(e,[{key:"blackVideoUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mp4")}},{key:"blackVideoStreamingUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.m3u8")}},{key:"blackDashUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mpd")}},{key:"browserReportScript",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/cdn/libs/browser-report/3.5.0/browser-report.min.js")}},{key:"googleImaSdkUrl",get:function(){return"".concat(this.protocol,"://imasdk.googleapis.com/js/sdkloader/ima3_dai.js")}},{key:"googleDaiSSBUrlTemplate",get:function(){return"".concat(this.protocol,"://dai.google.com/linear/v1/hls/event/<%= ASSET_KEY %>/stream")}},{key:"googleDaiPodSsbUrlTemplate",get:function(){return"".concat(this.protocol,"://dai.google.com/ssai/pods/api/v1/network/<%= NETWORK_CODE %>/custom_asset/<%= CUSTOM_ASSET_KEY %>/stream")}},{key:"googleAnalyticsTagScript",get:function(){return"".concat(this.protocol,"://www.googletagmanager.com/gtag/js")}},{key:"googleMeasurementProtocolUrl",get:function(){return"https://www.google-analytics.com/mp/collect"}},{key:"googleDisplayAdApiUrl",get:function(){return"".concat(this.protocol,"://securepubads.g.doubleclick.net/gampad/adx")}},{key:"frameAdScheduleConfigUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_730024e469044cbdb092899c9576f101/v2")}},{key:"shortIoUrl",get:function(){return"https://api.short.io/links/public"}},{key:"globoplayAPIDomain",get:function(){return"".concat(this.protocol,"://apis-globoplay.globo.com")}}],[{key:"isInternal",get:function(){return/(ef(-.*)?|publish\.api\.video|player)(\.qa01|\.local|\.dev)?\.globoi\.com$/.test(location.hostname)}},{key:"isLocalhost",get:function(){return["localhost","127.0.0.1"].includes(location.hostname)}},{key:"isGloboiDomain",get:function(){return/\.globoi\.com$/.test(location.hostname)}},{key:"isGloboDomain",get:function(){return!this.isInternal&&/\.globo\.com$/.test(location.hostname)}},{key:"playerId",get:function(){return this._playerId||(this._playerId=Lt.generate()),this._playerId}},{key:"hashQueryString",get:function(){var e="&version=".concat("1.90.0"),t="hash?".concat("resource_id=<%= resourceId %>").concat("<%= callback ? '&callback=' + callback : '' %>").concat(e).concat("&player=<%= player %>").concat("&tz=<%= tz %>").concat("&cdn=<%= cdn %>").concat("&profile=<%= profile %>").concat("<% if (flatUrl) { %>&flat_url=true<% } %>");return Nt&&(t+="&ts=<%= ts %>"),t}},{key:"get",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"qa1"===t&&(t="dev"),t=e.isInternal?"dev"===t?"internalDev":"internal":t||"prod",new e[t=r?"disasterRecovery":t](n,i)}}]),e}();Kt.local=ke.extend(Kt,{get name(){return"local"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://").concat(Bt)},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Ft)},get hashTemplate(){return Ge("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Kt.hashQueryString))},get playlistTemplate(){return Ge("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ge("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Kt.dev=ke.extend(Kt,{get name(){return"dev"},get securityHost(){return"".concat(this.protocol,"://security.video.dev.globoi.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://").concat(Ut)},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Ut)},get hashTemplate(){return Ge("".concat(this.protocol,"://security.video.dev.globoi.com/videos/<%= videoId %>/").concat(Kt.hashQueryString))},get playlistTemplate(){return Ge("".concat(this.protocol,"://api.globovideos.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ge("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Kt.internalDev=ke.extend(Kt,{get name(){return"internalDev"},get securityHost(){return"".concat(this.protocol,"://api.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://").concat(Ht)},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Ht)},get hashTemplate(){return Ge("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(Kt.hashQueryString))},get playlistTemplate(){return Ge("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ge("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Kt.internal=ke.extend(Kt,{get name(){return"internal"},get securityHost(){return"".concat(this.protocol,"://api.video.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://").concat(Vt)},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Vt)},get hashTemplate(){return Ge("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(Kt.hashQueryString))},get playlistTemplate(){return Ge("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ge("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Kt.prod=ke.extend(Kt,{get name(){return"prod"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://playback.video.globo.com/v4/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Ft)},get hashTemplate(){return Ge("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Kt.hashQueryString))},get playlistTemplate(){return Ge("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ge("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Kt.custom=ke.extend(Kt.prod,{get name(){return"custom"},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v4/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Ft)}}),Kt.disasterRecovery=ke.extend(Kt.prod,{get CDNRouterHost(){return"".concat(this.protocol,"://").concat(jt)},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(jt)}});var Gt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.options=n,this.id=t.id,this.title=t.title,this.kind=t.kind,this.program=t.program,this.channel=t.channel,this.category=t.category,this.createdAt=t.created_at,this.exhibitedAt=t.exhibited_at,this.programId=t.program_id,this.channelId=t.channel_id,this.duration=t.duration,this.serviceId=t.service_id,this.providerId=t.provider_id,this.providerUrl=t.provider_url,this.type=t.type,this.affiliate=t.affiliate,this.geofencing=!!t.geofencing,this.isSubscriberOnly=!!t.subscriber_only,this.encrypted=!!t.encrypted,this.isArchived=t.archived,this.urlForConsumption=t.url_for_consumption,this.adult=t.adult,this.contentRating=t.content_rating,this.contentRatingCriteria=t.content_rating_criteria,this.isSelfRated=t.self_rated,this.verifyContentRating=t.verify_content_rating,this.maxHeight=t.max_height,this.codec=t.codec,this.adUnit=t.ad_unit,this.adCustomData=t.ad_custom_data,this.adAccountId=t.ad_account_id,this.adCmsId=t.ad_cms_id,this.cuepoints=t.cuepoints,this.mediaRights=t.media_rights||t.media_right_ids,this.rawData=t,this.rawData.videos=[t],this.selectedLevel=n.selectedLevel,this.preferredLevel=n.preferredLevel,this.preferredCDN=n.preferredCDN,this.posterImageUrls=this.createPosterImageUrl(),this.drm=e.getDRMProtocol()}return c(e,[{key:"isLive",get:function(){return"Live"===this.type}},{key:"posterTemplate",get:function(){var e;return null===(e=this.options.env)||void 0===e?void 0:e.posterTemplate}},{key:"createPosterImageUrl",value:function(){var e=this,t=this.posterTemplate;if(t){var n=Number(this.id)%4+1,i={};return[240,360,720].forEach((function(r){i[r]=t({domainNumber:n,size:"x".concat(r),videoId:e.id})})),i}}}],[{key:"getDRMProtocol",value:function(){var t=(e.overrides||{}).getDRMProtocol;return"function"==typeof t?t():ne.isSmartTvEnvironment?"playready":e.getDesktopDRMProtocol()}},{key:"getDesktopDRMProtocol",value:function(){return ne.isSafari||ne.isiOS?"fairplay":ne.isChrome||ne.isFirefox||ne.isChromecast||ne.isEdge?"widevine":"playready"}},{key:"getPlayerType",value:function(){var t=(e.overrides||{}).getPlayerType;return"function"==typeof t?t():ne.isMobile?ne.isAndroid?ne.preventUsingCookies?"android_flat":"android":ne.isiOS?"safari_mobile":ne.isWindowsPhone?"windows_phone":"html5":ne.isChromecast?"chromecast":ne.isSafari?"safari":ne.preventUsingCookies?"desktop_flat":"desktop"}}]),e}(),Wt=function(e,t){var n=t+1-e.toString().length;return new Array(Math.max(0,n)).join("0")+e},Yt="0123456789abcdef",zt=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=Yt.charAt(i>>>4&15)+Yt.charAt(15&i)}return t},qt=function(){return new Date},$t=function(){return qt().getTime()},Xt=function(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(t){return!(t&&void 0===(e=e[t]))}))?e:n},Qt=function(){var e=-qt().getTimezoneOffset(),t=Math.abs(e)/60,n=Math.abs(e)%60;return"".concat(0===e?"":e>0?"+":"-").concat(Wt(t,2),":").concat(Wt(n,2))},Jt=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?window.unescape(t[2]):null},Zt=function(){return window.performance&&window.performance.now&&performance.now()||Date.now()},en=function(e){var t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},n=function(e,n,i,r,a,o){return t((s=t(t(n,e),t(r,o)))<<(l=a)|s>>>32-l,i);var s,l},i=function(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)},r=function(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)},a=function(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)},o=function(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)};return function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var s=1732584193,l=-271733879,u=-1732584194,c=271733878,d=0;d<e.length;d+=16){var h=s,f=l,p=u,g=c;s=i(s,l,u,c,e[d+0],7,-680876936),c=i(c,s,l,u,e[d+1],12,-389564586),u=i(u,c,s,l,e[d+2],17,606105819),l=i(l,u,c,s,e[d+3],22,-1044525330),s=i(s,l,u,c,e[d+4],7,-176418897),c=i(c,s,l,u,e[d+5],12,1200080426),u=i(u,c,s,l,e[d+6],17,-1473231341),l=i(l,u,c,s,e[d+7],22,-45705983),s=i(s,l,u,c,e[d+8],7,1770035416),c=i(c,s,l,u,e[d+9],12,-1958414417),u=i(u,c,s,l,e[d+10],17,-42063),l=i(l,u,c,s,e[d+11],22,-1990404162),s=i(s,l,u,c,e[d+12],7,1804603682),c=i(c,s,l,u,e[d+13],12,-40341101),u=i(u,c,s,l,e[d+14],17,-1502002290),l=i(l,u,c,s,e[d+15],22,1236535329),s=r(s,l,u,c,e[d+1],5,-165796510),c=r(c,s,l,u,e[d+6],9,-1069501632),u=r(u,c,s,l,e[d+11],14,643717713),l=r(l,u,c,s,e[d+0],20,-373897302),s=r(s,l,u,c,e[d+5],5,-701558691),c=r(c,s,l,u,e[d+10],9,38016083),u=r(u,c,s,l,e[d+15],14,-660478335),l=r(l,u,c,s,e[d+4],20,-405537848),s=r(s,l,u,c,e[d+9],5,568446438),c=r(c,s,l,u,e[d+14],9,-1019803690),u=r(u,c,s,l,e[d+3],14,-187363961),l=r(l,u,c,s,e[d+8],20,1163531501),s=r(s,l,u,c,e[d+13],5,-1444681467),c=r(c,s,l,u,e[d+2],9,-51403784),u=r(u,c,s,l,e[d+7],14,1735328473),l=r(l,u,c,s,e[d+12],20,-1926607734),s=a(s,l,u,c,e[d+5],4,-378558),c=a(c,s,l,u,e[d+8],11,-2022574463),u=a(u,c,s,l,e[d+11],16,1839030562),l=a(l,u,c,s,e[d+14],23,-35309556),s=a(s,l,u,c,e[d+1],4,-1530992060),c=a(c,s,l,u,e[d+4],11,1272893353),u=a(u,c,s,l,e[d+7],16,-155497632),l=a(l,u,c,s,e[d+10],23,-1094730640),s=a(s,l,u,c,e[d+13],4,681279174),c=a(c,s,l,u,e[d+0],11,-358537222),u=a(u,c,s,l,e[d+3],16,-722521979),l=a(l,u,c,s,e[d+6],23,76029189),s=a(s,l,u,c,e[d+9],4,-640364487),c=a(c,s,l,u,e[d+12],11,-421815835),u=a(u,c,s,l,e[d+15],16,530742520),l=a(l,u,c,s,e[d+2],23,-995338651),s=o(s,l,u,c,e[d+0],6,-198630844),c=o(c,s,l,u,e[d+7],10,1126891415),u=o(u,c,s,l,e[d+14],15,-1416354905),l=o(l,u,c,s,e[d+5],21,-57434055),s=o(s,l,u,c,e[d+12],6,1700485571),c=o(c,s,l,u,e[d+3],10,-1894986606),u=o(u,c,s,l,e[d+10],15,-1051523),l=o(l,u,c,s,e[d+1],21,-2054922799),s=o(s,l,u,c,e[d+8],6,1873313359),c=o(c,s,l,u,e[d+15],10,-30611744),u=o(u,c,s,l,e[d+6],15,-1560198380),l=o(l,u,c,s,e[d+13],21,1309151649),s=o(s,l,u,c,e[d+4],6,-145523070),c=o(c,s,l,u,e[d+11],10,-1120210379),u=o(u,c,s,l,e[d+2],15,718787259),l=o(l,u,c,s,e[d+9],21,-343485551),s=t(s,h),l=t(l,f),u=t(u,p),c=t(c,g)}return[s,l,u,c]}(function(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}(function(e,t){var n,i,r="",a=-1;for(e+=t.substr(1,8);++a<e.length;)n=e.charCodeAt(a),i=a+1<e.length?e.charCodeAt(a+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((1023&n)<<10)+(1023&i),a++),n<=127?r+=String.fromCharCode(n):n<=2047?r+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r}(e,"=0xAC10FD"))},tn={applySizeClass:function(e,t,n){if(t&&"number"==typeof t){if(e.removeClass("w960 w640 w540 w480 w360 h720 h1080"),n&&"number"==typeof n){var i=n<=720?"h720":"h1080";e.addClass(i)}t<=360?e.addClass("w360"):t<=480?e.addClass("w480"):t<540?e.addClass("w540"):t<=640?e.addClass("w640"):e.addClass("w960")}},toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},embedScript:function(e){var t=$.Deferred(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){t.resolve()},n.onerror=function(e){t.reject(e)},document.head.appendChild(n),t.promise()},get:Xt,getCookie:Jt,getCurrentDate:qt,getCurrentTime:$t,getExpiresDateInGMT:function(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},getHostname:function(){return location.hostname},getHostAndPathName:function(){var e=(location.pathname||"").split("/")||[];return location.hostname+(e.length>0?"/".concat(e[1]):"")},isNaN:function(e){return e!=e},iso8601TimezoneOffset:Qt,loadUrlAsImage:function(e){var t=$.Deferred(),n=new Image;return n.onload=function(){return t.resolve()},n.onerror=function(){return t.resolve()},n.src=e,t.promise()},now:Zt,percent:function(e,t){return 0===e?e:e/t*100},toDurationString:function(e){var t,n=e/6e4,i=[0,1,2,3,4,5,7,10];for(t=0;t<i.length&&!(n<i[t]);t++);return t<i.length?"".concat(Wt(i[t-1],2),":0").concat(0===t?0:1," - ").concat(Wt(i[t],2),":00"):"10:01 +"},secondsToMillis:function(e){return 1e3*e>>0},copyToClipboard:function(e,t){if(t){var n=$('<textarea style="opacity:0" class="copytextarea"/>');n.text(e),t.append(n[0]);var i=t.find(".copytextarea")[0],r=document.activeElement;i.focus(),i.select();var a=document.execCommand("copy");return n.remove(),r.focus(),a}},mergePlugins:function(e,t){var n=[];return e.concat(t).filter((function(e){if(!e)return!1;var t=e.prototype.name,i=-1===n.indexOf(t);return i&&n.push(t),i}))},hexGrf:function(e){return zt(en(e))}},nn={jsonp:function(e){var t=new $.Deferred;e.callbackName=e.callbackName||"json_callback",e.timeout=e.timeout||15e3,window[e.callbackName]=function(e){nn.isErrorObject(e)?t.reject(e):t.resolve(e)};var n=$("head")[0],i=document.createElement("script");return i.setAttribute("src",e.url),i.setAttribute("async","async"),i.onload=i.onreadystatechange=function(t){i.readyState&&!/loaded|complete/.test(i.readyState)||(e.timeoutId&&window.clearTimeout(e.timeoutId),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=void 0)},i.onerror=function(){t.reject({error:!0,message:"jsonp load error"})},n.insertBefore(i,n.firstChild),e.error&&(e.timeoutId=window.setTimeout(e.error,e.timeout)),t.promise()},isErrorObject:function(e){return e&&e.http_status_code&&200!==e.http_status_code}},rn={isFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.webkitDisplayingFullscreen},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}},an=new Set,on=function(){function e(){l(this,e),this.loadScriptsIntervalId=null,this.loadScriptsAttempts=5}return c(e,[{key:"ready",value:function(){return!Array.from(an).filter((function(e){return void 0===Xt(window,e,void 0)})).length}},{key:"isAvailable",value:function(){var e=this,t=new $.Deferred;return this.loadScriptsIntervalId=setInterval((function(){e.ready()?(clearInterval(e.loadScriptsIntervalId),t.resolve()):e.loadScriptsAttempts--,e.loadScriptsAttempts||(clearInterval(e.loadScriptsIntervalId),t.reject())}),200),t.promise()}}]),e}(),sn=window.WM&&window.WM.version||"legacy_api",ln=function(e){return"object"===a(e.playerExperiments)},un=function(e,t){return e.playerExperiments&&e.playerExperiments[t]},cn=function(){function e(){l(this,e)}return c(e,null,[{key:"keyspaceFor",value:function(e){return"wm.player.".concat(e)}},{key:"load",value:function(e,t){return this.loadRaw(this.keyspaceFor(e),t)}},{key:"loadRaw",value:function(e,t){if(ne.hasLocalstorage&&localStorage[e])return t?t(localStorage[e]):localStorage[e]}},{key:"store",value:function(e,t){return this.storeRaw(this.keyspaceFor(e),t)}},{key:"storeRaw",value:function(e,t){if(ne.hasLocalstorage)try{return localStorage[e]=t,!0}catch(e){return!1}return!1}}]),e}(),dn={code:"default-error",clientCode:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0},hn={DEFAULT_ERROR:dn,AUTH_REQUIRED:i(i({},dn),{},{code:"login-required",clientCode:"login-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:i(i({},dn),{},{code:"player-type-not-supported",clientCode:"webmedia-service-error",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:i(i({},dn),{},{code:"geo-fencing",clientCode:"geo-fencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:i(i({},dn),{},{code:"geo-block",clientCode:"geo-block",description:"This video cannot be played in the current region.",reportAs:"INFO"}),PLAYER_NOT_RECOGNIZED:i(i({},dn),{},{code:"PNR",clientCode:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:i(i({},dn),{},{code:"resource-load-error",clientCode:"webmedia-service-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:i(i({},dn),{},{code:"location-unavailable",clientCode:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:i(i({},dn),{},{code:"not-allowed-domain",clientCode:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:i(i({},dn),{},{code:"video-not-found",clientCode:"video-not-found",description:"Content not available.",reportAs:"INFO"}),USER_BLOCKED:i(i({},dn),{},{code:"user-blocked",clientCode:"user-blocked",description:"User is blocked.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:i(i({},dn),{},{code:"playlist-load-error",clientCode:"webmedia-service-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:i(i({},dn),{},{code:"restricted-content-error",clientCode:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:i(i({},dn),{},{code:"simultaneous-access-exceeded",clientCode:"simultaneous-access-exceeded",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:i(i({},dn),{},{code:"streaming-pause-time-expired",clientCode:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:i(i({},dn),{},{code:"user-not-authorized",clientCode:"user-not-authorized",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:i(i({},dn),{},{code:"unsupported-browser",clientCode:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:i(i({},dn),{},{code:"unsupported-mobile-device",clientCode:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:i(i({},dn),{},{code:"timestamp-error",clientCode:"webmedia-service-error",description:"Timestamp error.",reportAs:"INFO"})},fn=function(){function e(){l(this,e)}return c(e,null,[{key:"getLocation",value:function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(i({error:e},hn.LOCATION_UNAVAILABLE))})):t(hn.LOCATION_UNAVAILABLE)}))}}]),e}(),pn=function(){function e(){l(this,e)}return c(e,null,[{key:"params",get:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1),a={};e=n.exec(r);)a[i(e[1]).toLowerCase()]=i(e[2]);return a}}]),e}(),gn=function(){var e=0,t=pn.params.s||"",n=t.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else t&&(e=parseInt(t,10));return e},vn=function(){function e(){l(this,e)}return c(e,null,[{key:"uid",get:function(){var e="user.uid",t=cn.load(e);return t||(t=Lt.generate(),cn.store(e,t)),t}},{key:"getProviderCookieName",value:function(e){return e?"WMPTOKEN_".concat(e):"GLBID"}},{key:"hasGlbId",value:function(){var e=Jt("GLBID");return"string"==typeof e&&e.length>10}},{key:"hasTokenForProvider",value:function(e){if(!e)return this.hasGlbId();var t=this.getProviderCookieName(e);return!!t&&"string"==typeof Jt(t)}},{key:"isExperimentEnabled",value:function(e,t){var n="experiment.".concat(e),i=cn.load(n,parseFloat);return i||(i=Math.random(),cn.store(n,i)),i<=t}}]),e}(),mn={hasPlayerElement:function(e){if(e&&e.childNodes.length>0){var t=Array.prototype.slice.call(e.childNodes).find((function(e){return"DIV"===e.tagName&&-1!==e.id.indexOf("wp3-player-")}));return t&&!!document.getElementById(t.id)}return!1},hasChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=e.id||"function"==typeof e.attr&&e.attr("id"),i="#".concat(n," ").concat(t),r=!!document.querySelectorAll(i).length;return r}},isIframe:function(){return window.top!==window}},yn=new(function(){function e(){l(this,e),this.sessions={}}return c(e,[{key:"startSession",value:function(e){if(e){var t=this.sessions[e]||{};this.sessions[e]=i(i({},t),{},{sessionId:Lt.generate()})}}},{key:"getVideoSessionId",value:function(e){if(this.sessions[e])return this.sessions[e].sessionId}},{key:"storeLockId",value:function(e,t){this.sessions[e]&&t&&(this.sessions[e].lockId=t)}},{key:"getLockId",value:function(e){if(this.sessions[e])return this.sessions[e].lockId}}]),e}()),An="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO=document.createElement("video"),window.WM_PLAYER_VIDEO_TAG_TEST_MUTE=document.createElement("video");var bn=function(){function e(){l(this,e),this._deferred=new $.Deferred,this.playerHasConsent=!1,this._setBrowserFlags()}return c(e,[{key:"canAutoPlayMuted",get:function(){return this.isAvailable(!0)}},{key:"canAutoPlayUnmuted",get:function(){return this.isAvailable(!1)}},{key:"isAutoPlayMutedAllowed",value:function(e){return this.isAvailable(!0)&&e.autoPlay}},{key:"allowAutoplay",value:function(e){return e.autoPlay&&this.canAutoPlayMuted||ne.isSmartTvEnvironment&&e.autoPlay||ne.isChromecast}},{key:"onAutoplayAvailable",value:function(e,t,n){var i=this;return this._deferred.then((function(){i.allowAutoplay(t)?e():null==n||n()}))}},{key:"isAvailable",value:function(e){return!ne.isCrawlerBot&&(ne.isSmartTvEnvironment||this.playerHasConsent||this.isAllowedWithAudio||e&&this.isAllowedWithoutAudio)}},{key:"consent",value:function(){this.playerHasConsent=!0}},{key:"_setBrowserFlags",value:function(){var e=this;if(ne.isSmartTvEnvironment||ne.isChromecast)this._deferred.resolve();else{var t=this._createVideoElement(An,!1),n=this._createVideoElement(An,!0);ne.isMobile?this.isAllowedWithAudio=!1:this._setFlag(t,"isAllowedWithAudio"),this._setFlag(n,"isAllowedWithoutAudio"),setTimeout((function(){return e._deferred.resolve()}),5e3)}}},{key:"_setFlag",value:function(e,t){var n=this,i=e.play();i?i.then((function(){n[t]=!0}),(function(){n[t]=!1})).then((function(){return n._resolve()})):(this[t]=!ne.isMobile,this._resolve())}},{key:"_resolve",value:function(){"isAllowedWithAudio"in this&&"isAllowedWithoutAudio"in this&&this._deferred.resolve()}},{key:"_createVideoElement",value:function(e,t){var n=t?window.WM_PLAYER_VIDEO_TAG_TEST_MUTE:window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO;return n.src=e,n.muted=t,n.playsInline=!0,n}}]),e}(),En=new bn,_n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n[e]&&n[e](t)},kn=function(e,t){return t&&"function"==typeof t.getTime?Math.trunc(t.getTime()/1e3+e):NaN},Tn=function(e){if(!e.getProgramDateTime&&!e.dvrEnabled)return Math.trunc((new Date).getTime()/1e3);var t=e.getCurrentTime(),n=Sn(e);return kn(t,n)},Sn=function(e){return e.getProgramDateTime?new Date(e.getProgramDateTime()):null},wn=function(e,t){return Tn(e)-t},Cn=function(e,t){return e.getCurrentTime()-wn(e,t)},In=/^\d+$/,Rn=Object.freeze({VIDEO_ID:"application/vnd.globo.videoid"}),Dn=function(e,t){return In.test(e)||t===Rn.VIDEO_ID},Ln=Re.getInstance(),Pn=function(){function e(){l(this,e)}return c(e,[{key:"Keys",get:function(){return Ln.warn("Device","Keys","not implemented on this device")}},{key:"defaultOptions",get:function(){return{}}},{key:"HLSv3Required",get:function(){return Ln.info("Device","HLSv3Required","not implemented on this device, using default"),!0}},{key:"isDAISSBRequired",get:function(){return!1}},{key:"isDVRSupported",get:function(){return!1}},{key:"maxResolution",get:function(){Ln.info("Device","maxResolution","not implemented on this device")}},{key:"dynamicRanges",get:function(){Ln.info("Device","dynamicRanges","not implemented on this device")}},{key:"runtime",get:function(){Ln.info("Device","Runtime","not implemented on this device.")}},{key:"kind",get:function(){Ln.info("Device","kind","not implemented on this device")}},{key:"hasLowLatency",get:function(){return Ln.info("Device","lowLatency","using default."),!1}},{key:"isDAIPodServingEnabled",get:function(){return!1}},{key:"UUID",value:function(){return Ln.info("Device","UUID","not implemented on this device")}},{key:"test",value:function(){return!0}},{key:"osName",value:function(){Ln.info("Device","osName","not implemented on this device")}},{key:"osVersion",value:function(){Ln.info("Device","osVersion","not implemented on this device")}},{key:"deviceYear",value:function(){Ln.info("Device","deviceYear","not implemented on this device")}},{key:"deviceBrand",value:function(){Ln.info("Device","deviceBrand","not implemented on this device")}},{key:"deviceModel",value:function(){Ln.info("Device","deviceModel","not implemented on this device")}},{key:"deviceVersion",value:function(){Ln.info("Device","deviceVersion","not implemented on this device")}},{key:"deviceType",value:function(){Ln.info("Device","deviceType","not implemented on this device")}},{key:"sdkVersion",value:function(){Ln.info("Device","sdkVersion","not implemented on this device")}},{key:"playerType",value:function(){Ln.warn("Device","playerType","not implemented on this device")}},{key:"supportsHTTPSStreams",value:function(){return!0}},{key:"supportsHTTPSLicenseServers",value:function(){return!0}},{key:"supportsUHD",value:function(){return!1}},{key:"supportsHDR",value:function(){return!1}},{key:"supportsPointerEvents",value:function(){return!1}},{key:"type",value:function(){Ln.info("Device","Type","not implemented on this device.")}},{key:"supportsMultipleAudioTracks",value:function(){return!ne.isSmartTvEnvironment}}],[{key:"getInstance",value:function(){return void 0===this._instance&&(this._instance=new this),this._instance}},{key:"Keys",get:function(){return this.getInstance().Keys}},{key:"defaultOptions",get:function(){return this.getInstance().defaultOptions}},{key:"useProgressiveAd",get:function(){return!1}},{key:"HLSv3Required",get:function(){return this.getInstance().HLSv3Required}},{key:"isTransitionStyleSupported",get:function(){return!1}},{key:"isDAISupported",get:function(){return!1}},{key:"isDAISSBRequired",get:function(){return this.getInstance().isDAISSBRequired}},{key:"isDVRSupported",get:function(){return this.getInstance().isDVRSupported}},{key:"maxResolution",get:function(){return this.getInstance().maxResolution}},{key:"dynamicRanges",get:function(){return this.getInstance().dynamicRanges}},{key:"runtime",get:function(){return this.getInstance().runtime}},{key:"kind",get:function(){return this.getInstance().kind}},{key:"hasLowLatency",get:function(){return this.getInstance().hasLowLatency}},{key:"isDAIPodServingEnabled",get:function(){return this.getInstance().isDAIPodServingEnabled}},{key:"UUID",value:function(){return this.getInstance().UUID()}},{key:"test",value:function(e){return this.getInstance().test(e)}},{key:"getDeviceInfo",value:function(){Ln.info("Device","getDeviceInfo","not implemented on this device")}},{key:"osName",value:function(){return this.getInstance().osName()}},{key:"osVersion",value:function(){return this.getInstance().osVersion()}},{key:"deviceYear",value:function(){return this.getInstance().deviceYear()}},{key:"deviceBrand",value:function(){return this.getInstance().deviceBrand()}},{key:"deviceModel",value:function(){return this.getInstance().deviceModel()}},{key:"deviceVersion",value:function(){return this.getInstance().deviceVersion()}},{key:"deviceType",value:function(){return this.getInstance().deviceType()}},{key:"sdkVersion",value:function(){return this.getInstance().sdkVersion()}},{key:"playerType",value:function(){return this.getInstance().playerType()}},{key:"supportsHTTPSStreams",value:function(){return this.getInstance().supportsHTTPSStreams()}},{key:"supportsHTTPSLicenseServers",value:function(){return this.getInstance().supportsHTTPSLicenseServers()}},{key:"supportsUHD",value:function(){return this.getInstance().supportsUHD()}},{key:"supportsHDR",value:function(){return this.getInstance().supportsHDR()}},{key:"supportsPointerEvents",value:function(){return this.getInstance().supportsPointerEvents()}},{key:"type",value:function(){return this.getInstance().type()}},{key:"supportsMultipleAudioTracks",value:function(){return this.getInstance().supportsMultipleAudioTracks()}}]),e}(),On="mobile",xn="desktop",Mn="web",Nn={VK_BREAK:[3],VK_BACK:[8],VK_TAB:[9],VK_CLEAR:[12],VK_ENTER:[13],VK_SHIFT:[16],VK_CTRL:[17],VK_ALT:[18],VK_PAUSE:[19],VK_CAPS_LOCK:[20],VK_ESCAPE:[27],VK_SPACE_BAR:[32],VK_LEFT:[37],VK_UP:[38],VK_RIGHT:[39],VK_DOWN:[40],VK_0:[48],VK_1:[49],VK_2:[50],VK_3:[51],VK_4:[52],VK_5:[53],VK_6:[54],VK_7:[55],VK_8:[56],VK_9:[57],VK_A:[65],VK_B:[66],VK_C:[67],VK_D:[68],VK_E:[69],VK_F:[70],VK_G:[71],VK_H:[72],VK_I:[73],VK_J:[74],VK_K:[75],VK_L:[76],VK_M:[77],VK_N:[78],VK_O:[79],VK_P:[80],VK_Q:[81],VK_R:[82],VK_S:[83],VK_T:[84],VK_U:[85],VK_V:[86],VK_W:[87],VK_X:[88],VK_Y:[89],VK_Z:[90],VK_SUBTITLE:[112],VK_PLAY_PAUSE:[402],VK_RED:[403],VK_GREEN:[404],VK_YELLOW:[405],VK_BLUE:[406],VK_STOP:[413],VK_PLAY:[415],VK_FAST_FWD:[417],VK_REWIND:[424]},Bn=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"Keys",get:function(){return Nn}},{key:"defaultOptions",get:function(){return{enableCustomAdPlayback:!0,overrides:{getDRMProtocol:function(){return"widevine"}}}}},{key:"isDVRSupported",get:function(){return!0}},{key:"HLSv3Required",get:function(){return!1}},{key:"kind",get:function(){return Mn}},{key:"runtime",get:function(){return{browser:{name:ne.name,version:ne.version}}}},{key:"hasLowLatency",get:function(){return!0}},{key:"isDAIPodServingEnabled",get:function(){return!0}},{key:"test",value:function(){return!0}},{key:"playerType",value:function(){return"desktop"}},{key:"supportsPointerEvents",value:function(){return!0}},{key:"deviceType",value:function(){return ne.isMobile?On:xn}},{key:"deviceModel",value:function(){}},{key:"osVersion",value:function(){}},{key:"osName",value:function(){var e;return null===(e=ne.os)||void 0===e?void 0:e.group}},{key:"supportsMultipleAudioTracks",value:function(){return!0}}],[{key:"isTransitionStyleSupported",get:function(){return!0}},{key:"isDAISupported",get:function(){return!0}}]),n}(Pn);function Fn(e,t){var n;return!(!(null==t||null===(n=t.selectedResource)||void 0===n?void 0:n.dai)||null!=t&&t.isLive)&&(!Bn.isDAISSBRequired&&(Bn.isDAISupported&&e.enableDAIVoD&&!e.skipDFP))}var Un=null,Vn=null,Hn=function(e){if(e){var t=function(e){if("string"!=typeof e)return;var t=/^(.*), (.*) (.*) (.*) (.*) GMT$/,n={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},i=b(e.match(t),6),r=i[2],a=i[3],o=i[4],s=i[5];return"".concat(o,"-").concat(n[a],"-").concat(r,"T").concat(s,"Z")}(e);Un=new Date(t).getTime(),Vn=Zt()}};var jn=i(i({},tn),{},{Ajax:nn,getExperimentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ln(e))return[];var t=Object.keys(e.playerExperiments)||[],n=t.map((function(t){var n=e.playerExperiments[t];return n&&n.alternative||""}))||[];return n=n.filter((function(e){return""!==e}))},getExperimentAlternative:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!ln(e))return"";var n=un(e,t);return n&&n.alternative||""},getExperimentProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=un(e,t);return n&&n.properties||{}},Fullscreen:rn,getDeviceType:function(){return ne.isChromecast?"cast":ne.isSmartTvEnvironment?"tv":ne.isMobile?"mobile":"desktop"},getPlatformName:function(e){return"web-".concat(e)},isNaN:isNaN,LocalStorage:cn,Location:fn,QueryString:pn,toQueryString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return e[t]||""===e[t]||0===e[t]},n=encodeURIComponent,i=Object.keys(e);return i.filter(t).map((function(t){return"".concat(n(t),"=").concat(n(e[t]))})).join("&")},seekStringToSeconds:gn,rstr2hex:zt,rstr2b64:function(e){for(var t="",n=e.length,i=0;i<n;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),a=0;a<4;a++)8*i+6*a>8*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-a)&63);return t},zeroPad:Wt,User:vn,Uid:Lt,registerGlobal:function(e){an.add(e)},GlobalsManager:on,getUnixTimestamp:Mt,truncateTimeSeconds:function(e){var t=new Date(1e3*e);return t.setSeconds(0,0),Mt(t)},isTimestampOnHashNeeded:Nt,getTimeValues:function(e){return xt(e,!0).split(":").map(Number)},getLiteralTimeValues:function(e,t,n){return{hoursText:e>0?" ".concat(e," ").concat(Ot("hora",e),","):"",minutesText:"".concat(t," ").concat(Ot("minuto",t)),secondsText:"".concat(n," ").concat(Ot("segundo",n))}},secondsToHHMMSS:function(e){if(e<0)return"00:00:00";var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,r=function(e){return String(e).padStart(2,"0")};return"".concat(r(t),":").concat(r(n),":").concat(r(i))},DOM:mn,API_VERSION:sn,convertToString:Pt,pluralize:Ot,autoplayManager:En,session:yn,checkRecoverableError:_n,getTimeFromPosition:kn,getCurrentTime:Tn,getLiveDifferenceFromTime:wn,getPositionFromTime:Cn,isVideoId:Dn,isDAIVoDEnabled:Fn,getServerDateTime:function(){return Un},setServerDateTime:Hn,currentServerDateTime:function(){return Un&&Vn?new Date(Un+Math.round(Zt()-Vn)):null}}),Kn={getStyleFrom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""},n=t||{},i=Ge(e.toString())(n);return n.playerId&&(i=i.replace(/\#wp3-player-0/g,"#wp3-player-".concat(n.playerId))),$('<style class="clappr-style"></style>').html(i)}},Gn=c((function e(){l(this,e)}));Gn.WM_PLAY_REQUESTED="wm:play:requested",Gn.WM_USER_PLAY_REQUESTED="wm:user:play:requested",Gn.WM_PLAY_REQUESTED_READY="wm:play:requested:ready",Gn.CHROMECAST_SCRIPT_ERROR="chromecast:script:error",Gn.CHROMECAST_SCRIPT_LOADED="chromecast:script:loaded",Gn.CHROMECAST_API_ERROR="chromecast:api:error",Gn.CHROMECAST_API_READY="chromecast:api:ready",Gn.CHROMECAST_INITIALIZE_ERROR="chromecast:initialize:error",Gn.CHROMECAST_INITIALIZE_SUCCESS="chromecast:initialize:success",Gn.CHROMECAST_AVAILABLE="chromecast:available",Gn.CHROMECAST_UNAVAILABLE="chromecast:unavailable",Gn.CHROMECAST_LAUNCH_REQUEST="chromecast:launch:request",Gn.CHROMECAST_LAUNCH_ERROR="chromecast:launch:error",Gn.CHROMECAST_LAUNCH_SUCCESS="chromecast:launch:success",Gn.CHROMECAST_MEDIA_LOAD_ERROR="chromecast:mediaload:error",Gn.CHROMECAST_MEDIA_LOAD_SUCCESS="chromecast:mediaload:success",Gn.CHROMECAST_MEDIA_WATCHING="chromecast:media:watching",Gn.CHROMECAST_MEDIA_STOP_WATCHING="chromecast:mediastop:watching",Gn.CHROMECAST_AD_BREAK_CLIP_CAN_SKIP="chromecast:ad:break:clip:canskip",Gn.CHROMECAST_AD_BREAK_CLIP_ENDED="chromecast:ad:break:clip:ended",Gn.DID_START_ADS_MANAGER="did:startads:manager",Gn.ADS_REQUEST_READY="ads:request:ready",Gn.ADS_REQUEST_ERROR="ads:request:error",Gn.DFP_MANAGER_LOADED="dfp:manager:loaded",Gn.DFP_ENABLE="dfp:enable",Gn.DFP_DISABLE="dfp:disable",Gn.DFP_AD_REQUESTED="dfp:ad:requested",Gn.DFP_AD_LOADED="dfp:ad:loaded",Gn.DFP_AD_CLOSED="dfp:ad:closed",Gn.DFP_AD_STARTED="dfp:ad:started",Gn.DFP_AD_BUFFERING="dfp:ad:buffering",Gn.DFP_AD_BUFFERFULL="dfp:ad:bufferfull",Gn.DFP_AD_RESUME="dfp:playback:resume",Gn.DFP_AD_PAUSE="dfp:playback:pause",Gn.DFP_AD_CLICKED="dfp:ad:clicked",Gn.DFP_AD_COMPLETED="dfp:ad:completed",Gn.DFP_AD_SKIPPED="dfp:ad:skipped",Gn.DFP_AD_NOTSERVED="dfp:ad:notserved",Gn.DFP_AD_ERROR="dfp:ad:error",Gn.DFP_AD_METADATA="dfp:metadata",Gn.DFP_ALL_ADS_COMPLETED="dfp:allads:completed",Gn.DFP_CONTENT_PAUSE="dfp:content:pause",Gn.DFP_CONTENT_RESUME="dfp:content:resume",Gn.DFP_CONTENT_STARTED="dfp:content:started",Gn.DFP_CONTENT_ENDED="dfp:content:ended",Gn.DFP_FINISHED="dfp:finished",Gn.DFP_AD_BREAK_READY="dfp:adbreak:ready",Gn.DFP_INVALID_AD="dfp:invalid:ad",Gn.WILL_SET_AD_PLAYBACK="will:setad:playback",Gn.DID_SET_AD_PLAYBACK="did:setad:playback",Gn.YOUBORA_TIMEMARK="youbora:timemark",Gn.DID_LOAD_CUEPOINTS="wm:didloadcuepoints",Gn.DID_REACH_CUEPOINT="wm:didreachcuepoint",Gn.DID_LOAD_EPG="wm:didloadepg",Gn.DID_CHANGE_CURRENT_PROGRAM="wm:didchangecurrentprogram",Gn.DID_REACH_LIVE_STOP_TIME="didReachLiveStopTime",Gn.WM_STREAMING_DATA_LOADED="wm:streamingdata:loaded",Gn.WM_VIDEO_METADATA_REQUEST_COMPLETE="wm:videometadata:request:complete",Gn.WM_VIDEO_METADATA_LOADED="wm:videometadata:loaded",Gn.WM_VIDEO_METADATA_ERROR="wm:videometadata:error",Gn.WM_RESOURCE_LOADED="wm:resource:loaded",Gn.WM_RESOURCE_SELECTED="wm:resource:selected",Gn.WM_RESOURCE_REQUEST_STATS="wm:resource:request:stats",Gn.WM_AUTOPLAY_BLOCKED="wm:autoplay:blocked",Gn.WM_REQUEST_HASH="wm:request:hash",Gn.WM_HASH_RECEIVED="wm:hash:received",Gn.WM_RESOURCE_READY="wm:resource:ready",Gn.WM_RESOURCE_ERROR="wm:resource:error",Gn.WM_SETTINGS_SHOW="wm:settings:show",Gn.WM_VOLUME_SHOW="wm:volume:show",Gn.WM_VOLUME_HIDE="wm:volume:hide",Gn.WM_MUTED="wm:muted",Gn.WM_UNMUTED="wm:unmuted",Gn.WM_SHARE_SHOW="wm:share:show",Gn.WM_SHARE_HIDE="wm:share:hide",Gn.WM_SPINNER_START="wm:spinner:start",Gn.WM_SPINNER_STOP="wm:spinner:stop",Gn.WM_SETTINGS_HIDE="wm:settings:hide",Gn.WM_SETTINGS_OPTIONS_CHANGED="wm:settings:options:changed",Gn.WM_AUDIOSELECTOR_READY="wm:audioselector:ready",Gn.STREAMSENSE_READY="streamsense:ready",Gn.WM_SUBTITLE_CHANGED="wm:subtitle:changed",Gn.WM_SUBTITLE_CONTENT_CHANGED="wm:subtitle:content:changed",Gn.WM_SUBTITLE_AVAILABLE="wm:subtitle:available",Gn.WM_AUDIO_CHANGED="wm:audio:changed",Gn.WM_AUDIO_AVAILABLE="wm:audio:available",Gn.WM_WROOM_WAITING="wm:waiting:wroom",Gn.WM_PLAYBACK_CAN_PLAY="wm:playback:canplay",Gn.WM_PLAYBACK_WILL_PLAY="wm:playback:willplay",Gn.WM_PIP_ADDED="wm:pip:added",Gn.WM_PIP_DISCARDED="wm:pip:discarded",Gn.WM_MASTER_ADDED="wm:master:added",Gn.WM_MASTER_CHANGED="wm:master:changed",Gn.WM_PIPTOMASTER="wm:piptomaster",Gn.WM_MASTERTOPIP="wm:mastertopip",Gn.WM_STATS_REPORTED="wm:stats:reported",Gn.WM_LOCATION_AVAILABLE="wm:location:available",Gn.WM_GA_UNTRACKED_EVENT="wm:ga:untracked:event",Gn.NETWORK_DISCONNECT="wm:check:connect:ping",Gn.NETWORK_CHECK_COMPLETED="wm:check:connect:return",Gn.WILL_CHANGE_SOURCE="willChangeSource",Gn.WILL_SELECT_FALLBACK_SOURCE="will:select:fallback:source",Gn.FALLBACK_SOURCE_SELECTED="fallback:source:selected",Gn.WILL_RENEW_RESOURCE="willRenewResource",Gn.PLAYER_PIP_ADDED="player:pip:added",Gn.PLAYER_PIP_DISCARDED="player:pip:discarded",Gn.PLAYER_MASTER_ADDED="player:master:added",Gn.PLAYER_MASTER_CHANGED="player:master:changed",Gn.PLAYER_PIPTOMASTER="player:piptomaster",Gn.PLAYER_CAN_PLAY="player:canplay",Gn.WILL_SHOW_MODAL_ELEMENT="will:show:mediacontrol:element:modal",Gn.DID_HIDE_MODAL_ELEMENT="did:hide:mediacontrol:element:modal",Gn.MEDIACONTROL_MODAL_SHOW="mediacontrol:showmodal",Gn.MEDIACONTROL_MODAL_HIDE="mediacontrol:hidemodal",Gn.MEDIACONTROL_KEEPVISIBLE="mediacontrol:keepvisible",Gn.MEDIACONTROL_ITEMCLICKED="mediacontrol:itemclicked",Gn.MEDIACONTROL_DOUBLE_TAP="mediacontrol:doubletap",Gn.MEDIACONTROL_KEYDOWN="mediacontrol:keydown",Gn.WILL_QUICK_SEEK="will:quickseek",Gn.WILL_SHOW_QUICK_SEEK_HINT="will:show:quick:seek:hint",Gn.WILL_HIDE_QUICK_SEEK_HINT="will:hide:quick:seek:hint",Gn.PLAYER_MEDIACONTROL_SHOW="player:mediacontrol:show",Gn.PLAYER_MEDIACONTROL_HIDE="player:mediacontrol:hide",Gn.SKIP_BUTTON_SHOW="skip:button:show",Gn.SKIP_BUTTON_HIDE="skip:button:hide",Gn.SKIP_BUTTON_CLICKED="skip:button:clicked",Gn.SKIP_CLICK_TIMEOUT="player:skip:click:timeout",Gn.STICKY_MODE_ENABLED="sticky:mode:enabled",Gn.STICKY_MODE_DISABLED="sticky:mode:disabled",Gn.BACK_BUTTON_CLICKED="back:button:clicked",Gn.TAP_TO_UNMUTE_CLICKED="taptounmute:clicked",Gn.WILL_AUTO_SKIP_RECAP="will:auto:skip:recap",Gn.START_DRAGGING_SEEKBAR="start:dragging:seekbar",Gn.STOP_DRAGGING_SEEKBAR="stop:dragging:seekbar",Gn.SIMULCAST_PING="simulcastPing",Gn.SHOW_DRAWER="show:drawer",Gn.WILL_SHOW_DRAWER="will:show:drawer",Gn.DID_SHOW_DRAWER="did:show:drawer",Gn.DID_SHOW_DRAWER_HINT="did:show:drawer:hint",Gn.WILL_HIDE_DRAWER="will:hide:drawer",Gn.DID_HIDE_DRAWER="did:hide:drawer",Gn.DID_HIDE_DRAWER_HINT="did:hide:drawer:hint",Gn.HIDE_DRAWER_REQUESTED="hide:drawer:requested",Gn.SHOW_DRAWER_REQUESTED="show:drawer:requested",Gn.DRAWER_HAS_PLACEHOLDER="drawer:has:placeholder",Gn.SYNC_DRAWER_STATE_REQUEST="sync:drawer:state:request",Gn.SYNC_DRAWER_STATE_RESPONSE="sync:drawer:state:response",Gn.WILL_RESTART_PLAYBACK="will:restart:playback",Gn.DID_RESTART_PLAYBACK="did:restart:playback",Gn.TRACE_VIEW_TRACKING_POINT="trace_view_tracking:point",Gn.WATCH_SESSION_START="watchsession:start",Gn.WATCH_SESSION_END="watchsession:end",Gn.LANGUAGE_MENU_WILL_OPEN="language:menu:will:open",Gn.LANGUAGE_MENU_WILL_CLOSE="language:menu:will:close",Gn.WILL_SEND_ENVIRONMENT_REPORT="will:send:environment:report",Gn.DID_SEND_ENVIRONMENT_REPORT="did:send:environment:report",Gn.ENVIRONMENT_REPORT_ERROR="error:environment:report",Gn.ACTING_DRAWER_FOCUSED="acting:drawer:focused",Gn.ACTING_DRAWER_ENABLED="acting:drawer:enabled",Gn.ACTING_DRAWER_DISABLED="acting:drawer:disabled",Gn.FRAME_AD_INFO="configFrameAd",Gn.WILL_FRAME_AD="willFrameAd",Gn.DID_FRAME_AD="didFrameAd",Gn.WILL_GAM_FRAME_AD="willGAMFrameAd",Gn.DID_GAM_FRAME_AD="didGAMFrameAd",Gn.GAM_FRAME_AD_ERROR="error:gam:framead",Gn.WILL_URL_FRAME_AD="willURLFrameAd",Gn.DID_URL_FRAME_AD="didURLFrameAd",Gn.URL_FRAME_AD_ERROR="error:url:framead",Gn.WILL_IMAGE_FRAME_AD="willImageFrameAd",Gn.DID_IMAGE_FRAME_AD="didImageFrameAd",Gn.IMAGE_FRAME_AD_ERROR="error:image:framead",Gn.WILL_QRCODE_FRAME_AD="willQRCodeFrameAd",Gn.DID_QRCODE_FRAME_AD="didQRCodeFrameAd",Gn.QRCODE_FRAME_AD_ERROR="error:qrcode:framead",Gn.WILL_PIXEL_FRAME_AD="willPixelFrameAd",Gn.DID_PIXEL_FRAME_AD="didPixelFrameAd",Gn.PIXEL_FRAME_AD_ERROR="error:pixel:framead",Gn.WILL_TRACKER_FRAME_AD="willTrackerFrameAd",Gn.DID_TRACKER_FRAME_AD="didTrackerFrameAd",Gn.TRACKER_FRAME_AD_ERROR="error:tracker:framead",Gn.WILL_DISPLAY_FRAME_AD="willDisplayFrameAd",Gn.DID_DISPLAY_FRAME_AD="didDisplayFrameAd",Gn.DISPLAY_FRAME_AD_ERROR="error:display:framead",Gn.WILL_HIDE_FRAME_AD="willHideFrameAd",Gn.DID_HIDE_FRAME_AD="didHideFrameAd",Gn.HIDE_FRAME_AD_ERROR="error:hide:framead",Gn.ERROR_FRAME_AD="error:framead",Gn.SKIP_FRAME_AD="skipFrameAd",Gn.MOSAIC_SHOW="mosaic:show",Gn.MOSAIC_HIDE="mosaic:hide",Gn.MOSAIC_ENABLED="wm:smartMosaicEnabled",Gn.REPORT_STATS_TOGGLE_REQUEST="reportStats:toggle:request",Gn.CHANGE_VIDEO_TOGGLE_REQUEST="changeVideo:toggle:request",Gn.LATENCY_INFO_TOGGLE_REQUEST="latencyInfo:toggle:request",Gn.FRAME_ADS_INFO_TOGGLE_REQUEST="frameAdsInfo:toggle:request",Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST="easterEggsMenuActive:toggle:request";var Wn=window.WM&&window.WM.Settings||{},Yn={hlsMinimumDvrSize:120,playback:{controls:!0,preload:"none",playInline:!0,recycleVideo:ne.isMobile},allowLocation:!1,disableVideoTagContextMenu:!0,maxQualityLevel:"max",skipWaitingRoom:!1,playerExperiments:Wn.PlayerExperiments||{}},zn=jn.session,qn=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"eventsMapping",get:function(){return Object.assign(A(f(n.prototype),"eventsMapping",this),{onCanPlay:Gn.PLAYER_CAN_PLAY,onWatchSessionEnded:Gn.WATCH_SESSION_END,onWillShowFrameAd:Gn.WILL_DISPLAY_FRAME_AD,onDidShowFrameAd:Gn.DID_DISPLAY_FRAME_AD,onWillHideFrameAd:Gn.WILL_HIDE_FRAME_AD,onDidHideFrameAd:Gn.DID_HIDE_FRAME_AD,onDidReachLiveStopTime:Gn.DID_REACH_LIVE_STOP_TIME,onAdStarted:Gn.DFP_AD_STARTED,onAdSkipped:Gn.DFP_AD_SKIPPED,onAdCompleted:Gn.DFP_AD_COMPLETED,onAdBreakStarted:Gn.DFP_CONTENT_PAUSE,onAdBreakEnded:Gn.DFP_CONTENT_RESUME})}},{key:"defaultOptions",get:function(){return Yn}},{key:"_addEventListeners",value:function(){A(f(n.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,Gn.WILL_DISPLAY_FRAME_AD,this.onWillDisplayFrameAd),this.listenTo(this.core,Gn.DID_DISPLAY_FRAME_AD,this.onDidShowFrameAd),this.listenTo(this.core,Gn.WILL_HIDE_FRAME_AD,this.onWillHideFrameAd),this.listenTo(this.core,Gn.DID_HIDE_FRAME_AD,this.onDidHideFrameAd)}},{key:"_addContainerEventListeners",value:function(){A(f(n.prototype),"_addContainerEventListeners",this).call(this);var e=this.core.getCurrentPlayback(),t=this.core.getCurrentContainer();this.listenToOnce(e,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(e,Gn.WM_PLAYBACK_CAN_PLAY,this.onCanPlay),this.listenTo(t,Gn.DID_REACH_LIVE_STOP_TIME,this.onDidReachLiveStopTime),this.listenToOnce(t,Gn.WATCH_SESSION_END,this.onWatchSessionEnded),this.listenTo(t,Gn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(t,Gn.DFP_AD_SKIPPED,this.onAdSkipped),this.listenTo(t,Gn.DFP_AD_COMPLETED,this.onAdCompleted),this.listenTo(t,Gn.DFP_CONTENT_PAUSE,this.onAdBreakStarted),this.listenTo(t,Gn.DFP_CONTENT_RESUME,this.onAdBreakEnded)}},{key:"onCanPlay",value:function(){this.trigger(Gn.PLAYER_CAN_PLAY)}},{key:"onDidReachLiveStopTime",value:function(){this.trigger(Gn.DID_REACH_LIVE_STOP_TIME)}},{key:"onWatchSessionEnded",value:function(){this.trigger(Gn.WATCH_SESSION_END)}},{key:"onWillDisplayFrameAd",value:function(){this.trigger(Gn.WILL_DISPLAY_FRAME_AD)}},{key:"onDidShowFrameAd",value:function(){this.trigger(Gn.DID_DISPLAY_FRAME_AD)}},{key:"onWillHideFrameAd",value:function(){this.trigger(Gn.WILL_HIDE_FRAME_AD)}},{key:"onDidHideFrameAd",value:function(){this.trigger(Gn.DID_HIDE_FRAME_AD)}},{key:"onAdStarted",value:function(){this.trigger(Gn.DFP_AD_STARTED)}},{key:"onAdSkipped",value:function(){this.trigger(Gn.DFP_AD_SKIPPED)}},{key:"onAdCompleted",value:function(){this.trigger(Gn.DFP_AD_COMPLETED)}},{key:"onAdBreakStarted",value:function(){this.trigger(Gn.DFP_CONTENT_PAUSE)}},{key:"onAdBreakEnded",value:function(){this.trigger(Gn.DFP_CONTENT_RESUME)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.core.createError(e)}},{key:"_onError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.level===qe.Levels.FATAL){var r=i(i({},t),{},{videoSessionId:zn.getVideoSessionId(this.options.playerId)});A(f(n.prototype),"_onError",this).call(this,r),this.options.onError&&this.options.onError(r),this.container&&setTimeout((function(){e.container.disableMediaControl(),e.container.stop(),e.container.destroy()}))}}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}},{key:"resize",value:function(e){$(this.element).css({width:e.width,height:e.height}),this.core&&A(f(n.prototype),"resize",this).call(this,e)}}],[{key:"version",get:function(){return"1.90.0"}},{key:"allVersions",get:function(){return{Player:n.version,Clappr:Rt.version}}}]),n}(Rt.Player);if(!window.console){window.console={log:function(){}}}Rt.Log.setLevel(Rt.Log.LEVEL_WARN);var $n=window.WM&&window.WM.Settings||{},Xn=$n&&$n.Domains||[],Qn=jn.DOM.isIframe,Jn=function(e){h(n,e);var t=m(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,n);var r=i(i({},Yn),e);r._env=Kt.get(r.env,r.httpOnly,r.customEnv,r.disasterRecoveryMode),Gt.overrides=r.overrides||{};var a=!1,o=Kt.isLocalhost&&a,s=!Kt.isGloboDomain,u=ne.isSafari||ne.isiOS||ne.isSmartTvEnvironment,c=ne.isMobile&&(Qn()||r.isIFrame),d=window.location&&"https:"!==window.location.protocol;return ne.preventUsingCookies=(s||u||c||d)&&!o,t.call(this,r)}return c(n,[{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"_renderCustomStyles",value:function(e,t){var n=this;Object.values(t).forEach((function(t){var i=Kn.getStyleFrom(t,{playerId:n.options.playerId});$(e).append(i)}))}}]),n}(qn);ne.supportsFakeLocation=/puffin/i.test(navigator.userAgent),Jn.isAllowedDomain=function(e){return!$n.Domains||Xn.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Rt;var Zn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function ei(){throw new Error("setTimeout has not been defined")}function ti(){throw new Error("clearTimeout has not been defined")}var ni=ei,ii=ti;function ri(e){if(ni===setTimeout)return setTimeout(e,0);if((ni===ei||!ni)&&setTimeout)return ni=setTimeout,setTimeout(e,0);try{return ni(e,0)}catch(t){try{return ni.call(null,e,0)}catch(t){return ni.call(this,e,0)}}}"function"==typeof Zn.setTimeout&&(ni=setTimeout),"function"==typeof Zn.clearTimeout&&(ii=clearTimeout);var ai,oi=[],si=!1,li=-1;function ui(){si&&ai&&(si=!1,ai.length?oi=ai.concat(oi):li=-1,oi.length&&ci())}function ci(){if(!si){var e=ri(ui);si=!0;for(var t=oi.length;t;){for(ai=oi,oi=[];++li<t;)ai&&ai[li].run();li=-1,t=oi.length}ai=null,si=!1,function(e){if(ii===clearTimeout)return clearTimeout(e);if((ii===ti||!ii)&&clearTimeout)return ii=clearTimeout,clearTimeout(e);try{ii(e)}catch(t){try{return ii.call(null,e)}catch(t){return ii.call(this,e)}}}(e)}}function di(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];oi.push(new hi(e,t)),1!==oi.length||si||ri(ci)}function hi(e,t){this.fun=e,this.array=t}hi.prototype.run=function(){this.fun.apply(null,this.array)};var fi=Zn.performance||{};fi.now||fi.mozNow||fi.msNow||fi.oNow||fi.webkitNow,xe.register("PLAYBACK_METADATA_TRACK_CUE_CHANGE");var pi=function(e){h(n,e);var t=m(n);function n(){var e;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:120,e.onAddTrack=e.onAddTrack.bind(g(e)),e}return c(n,[{key:"name",get:function(){return"html5"}},{key:"isLive",get:function(){return this.getPlaybackType()===Je.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"_updateDvr",value:function(e){this.trigger(xe.PLAYBACK_DVR,e),this.trigger(xe.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){var t=e;e<0&&(Re.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(xe.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"onAddTrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(){var e,i=T(n.activeCues);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=d({},r.value.key,r.value.data);t.trigger(xe.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,a)}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"destroy",value:function(){this.el.textTracks.removeEventListener("addtrack",this.onAddTrack),A(f(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return A(f(n.prototype),"render",this).call(this),this.el.textTracks.addEventListener("addtrack",this.onAddTrack),this}}]),n}(mt),gi=/{{deviceId}}/g,vi=function(e,t){return(t?e.replace("https://","http://"):e).replace(gi,"ZDY4NDM5MDgtMzQ4Mi0zZGU5LThlZDQtYjRiNWM5ZjBmOWU5")},mi=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.drm||{},i=e.selectedResource.contentProtection,r={};return r[n]=vi(i.server,t),{shakaConfiguration:{drm:{servers:{"com.microsoft.playready":r.playready||"","com.widevine.alpha":r.widevine||""}}},fairplay:{server:r.fairplay||"",certificate:i&&i.cert},html5TvsPlayback:r.playready&&{drm:{licenseServerURL:r.playready}},licenseServer:r}},yi=function(e,t,n){return t.loader.playbackPlugins.find((function(i){return i.canPlay(e.toString(),"",n,Fn(t,n))}))},Ai=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=this,a=!ne.isChromecast&&t&&t.url,o=e||a||n,s=this.video&&this.video.encrypted,l=ne.isiOS&&!s&&pi.canPlay(o.toString(),"",this.video),u=l?pi:yi(o,r.options,this.video),c=t&&t.contentProtection,d=s&&c?mi(this.video,r.options.httpOnly):{},h=d.shakaConfiguration&&d.shakaConfiguration.drm||{},f=r.options.shakaConfiguration&&r.options.shakaConfiguration.drm||{},p={drm:i(i({},h),f)},g=i(i(i({},r.options),d),{},{html5TvsPlayback:i(i({},d.html5TvsPlayback||{}),r.options.html5TvsPlayback),shakaConfiguration:i(i(i({},r.options.shakaConfiguration||{}),d.shakaConfiguration||{}),p),autoPlay:!1,isLivePlayback:"live"===r.getPlaybackType(),src:o});return new u(g,r.i18n,r.playerError)},bi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.customErrors?t.customErrors:hn,a="function"==typeof t.onUnauthorized;return e.code===r.NOT_FOUND.code||"Not found"===e.message?r.NOT_FOUND:e.code===r.SUBSCRIBERS_ONLY.code?(a&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r.SUBSCRIBERS_ONLY):e.code===r.AUTH_REQUIRED.code?(a&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r.AUTH_REQUIRED):e.code===r.GEO_BLOCKED.code?r.GEO_BLOCKED:e.code===r.SIMULTANEOUS_ACCESS.code?r.SIMULTANEOUS_ACCESS:e.code===r.DEVICE_NOT_SUPPORTED.code?r.DEVICE_NOT_SUPPORTED:e.code===r.GEOFENCING.code||400===e.http_status_code&&"SRF"===e.code?r.GEOFENCING:e.code===r.TIMESTAMP_ERROR.code?i(i({},r.TIMESTAMP_ERROR),{},{description:"".concat(r.TIMESTAMP_ERROR.description,", ts: ").concat(Math.trunc($t()/1e3))}):e.code===r.LOCATION_UNAVAILABLE.code?r.LOCATION_UNAVAILABLE:e.code===r.RESTRICTED_CONTENT.code?r.RESTRICTED_CONTENT:e.code===r.NOT_ALLOWED_DOMAIN.code?r.NOT_ALLOWED_DOMAIN:e.code===r.UNSUPPORTED_BROWSER.code?r.UNSUPPORTED_BROWSER:e.code===r.PLAYER_NOT_RECOGNIZED.code?r.PLAYER_NOT_RECOGNIZED:e.code===r.USER_BLOCKED.code?r.USER_BLOCKED:r.DEFAULT_ERROR},Ei=Rt.Log.getInstance();xe.register("PLAYBACK_AUTHORIZED"),xe.register("PLAYBACK_INNER_CREATED");var _i=function(e){h(n,e);var t=m(n);function n(){var e;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReady=!1,e.bindEvents(),e.$el.css("height","100%"),e.settings=e.defaultSettings,e.options.swfBasePath=e.options.baseUrl,e.options.startFromBitrate=4e5,e.currentVolume=null,e.currentTime=0,e.duration=0,e.isRenewingResource=!1,e.skipWaitingGlobals=!1,e.actionsMetadata={},e.globalsManager=new on,e.setupSession(),e}return c(n,[{key:"name",get:function(){return"id_playback"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"attributes",get:function(){return{class:"id-playback","data-id-playback":""}}},{key:"srcUrl",get:function(){var e=this.playback&&this.playback.options&&this.playback.options.src,t=this.playback&&this.playback._src;return e||t||this.options.src}},{key:"blackResourceUrl",get:function(){return ne.isChromecast?this.options._env.blackVideoUrl:ne.isiOS||ne.isSafari||!this.video.encrypted?this.options._env.blackVideoStreamingUrl:this.options._env.blackDashUrl}},{key:"src",get:function(){return this.options.src}},{key:"selectedResource",get:function(){return this.video&&this.video.selectedResource}},{key:"isEncrypted",get:function(){return this.video&&this.video.encrypted}},{key:"isReady",get:function(){return this._isReady}},{key:"defaultSettings",get:function(){return{seekEnabled:!0}}},{key:"dvrEnabled",get:function(){return!!this.playback&&!!this.playback.dvrEnabled}},{key:"levels",get:function(){return this.playback.levels}},{key:"buffering",get:function(){return this.playback&&this.playback.buffering}},{key:"videoEl",get:function(){return this.playback&&this.playback.el}},{key:"innerPlaybackName",get:function(){return this.playback&&this.playback.name||""}},{key:"isPiPActive",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.isPiPActive}},{key:"isLive",get:function(){return this.getPlaybackType()===Je.LIVE}},{key:"liveInitialPosition",get:function(){return Cn(this.playback,this.options.liveStartTime)}},{key:"currentTimestamp",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.currentTimestamp}},{key:"isMultipleAudioRequired",value:function(){var e;return!(null===(e=this.selectedResource)||void 0===e||!e.smart_mosaic)}},{key:"useSingleAudioUrls",get:function(){var e=this.isMultipleAudioRequired()&&Bn.supportsMultipleAudioTracks();return ne.isSmartTvEnvironment&&!e}},{key:"audioTracks",get:function(){var e,t;return this.useSingleAudioUrls?(null===(e=this.selectedResource)||void 0===e||null===(t=e.audios)||void 0===t?void 0:t.audioTracksForSingleAudioUrls)||[]:this.playback&&this.playback.audioTracks||[]}},{key:"currentAudioTrack",get:function(){var e,t,n=this.selectedResource||{},r=n.shouldPlayWithDAI,a=n.shouldPlayWithDAIPodServing,o=(r||a)&&this.useSingleAudioUrls,s=(a?this.selectedResource.signPODStreamUrl:this.selectedResource.signDAIUrl).bind(this.selectedResource),l=o?s(null===(e=this.currentAudio)||void 0===e?void 0:e.url):null===(t=this.currentAudio)||void 0===t?void 0:t.url;return i(i({},this.currentAudio),{},{url:l})}},{key:"bandwidthEstimate",get:function(){return this.playback&&this.playback.bandwidthEstimate}},{key:"bindEvents",value:function(){this.on(Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.on(Gn.WM_VIDEO_METADATA_ERROR,this.onVideoMetadataError),this.on(Gn.WM_RESOURCE_READY,this.onResourceReady),this.on(Gn.WM_RESOURCE_ERROR,this.onResourceLoadError),this.on(Gn.WM_PLAYBACK_WILL_PLAY,this.onBeforePlay),this.on(Gn.DID_RESTART_PLAYBACK,this.onPlaybackRestarted),this.on(Gn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onPlaybackRestarted",value:function(){this.isRestarting=!1}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(Gn.WM_PLAY_REQUESTED),this.actionsMetadata.playEvent=t,this.isRestarting&&this.trigger(Gn.DID_RESTART_PLAYBACK),this.canRequestPlay()?(this.loadingResource=!0,setTimeout((function(){return e.trigger(Gn.WM_PLAY_REQUESTED_READY,e.video)}))):this.checkingAutoplayPermission?this.isStopped?this.onBeforePlay():this.isPaused?this.playWhenReady():Ei.debug(this.name,"Call to play was ignored"):this.startAutoPlayCheck({autoPlay:!0})}},{key:"canRequestPlay",value:function(){var e=this.waitToPlay()||this.playbackError||this.isPlaying(),t=this.video&&!this._resourceReady&&!this.loadingResource,n=En.isAvailable(this.options.mute)||this.mutedAutoplay||ne.isSmartTvEnvironment;return!e&&t&&n}},{key:"playWhenReady",value:function(){var e=this;this.isReady?(this.clearPlayWhenReadyTimeOutID(),this.playWhenReadyTimeOutID=setTimeout((function(){return e.playback.play()}))):this.listenToOnce(this,Gn.WM_PLAYBACK_WILL_PLAY,this.playWhenReady)}},{key:"onBeforePlay",value:function(){!this.isRestarting&&this.disablePlayWhenReady||this.playWhenReady()}},{key:"consent",value:function(){this.playback.consent(),En.consent(),this.mutedAutoplay=!1}},{key:"waitToPlay",value:function(){var e=this,t=!0,n=this.skipWaitingGlobals||this.globalsManager.ready(),i=!(ne.isSmartTvEnvironment||this.video&&this.playback);return n?i?this.listenToOnce(this,Gn.WM_VIDEO_METADATA_LOADED,this.play):t=!1:(this.globalsManager.isAvailable().then((function(){return e.play()}),(function(){return e.play()})),this.skipWaitingGlobals=!0),t}},{key:"isPlaying",value:function(){return!!this.playback&&this.playback.isPlaying()}},{key:"setInitialTime",value:function(e){var t=this;Bn.skipResumeAt||(ne.isChromecast||ne.isiOS||!this.isPlaying()?this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,(function(){return t.seek(e)})):this.seek(e))}},{key:"getDuration",value:function(){return this.playback&&this.playback.getDuration()}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.stopAndClearPlayback(),this.playback&&this.trigger(xe.PLAYBACK_STOP,this.name,this.actionsMetadata.stopEvent)}},{key:"stopAndClearPlayback",value:function(){this.playback&&(this.playback.stop(),this.currentTime=0)}},{key:"mute",value:function(){this.playback&&this.playback.mute()}},{key:"unmute",value:function(){this.playback&&this.playback.unmute()}},{key:"volume",value:function(e){var t=this;this.playback&&(this.playback.isReady?(this.playback.volume(e),this.currentVolume=e):this.listenToOnce(this.playback,xe.PLAYBACK_READY,(function(){return t.volume(e)})))}},{key:"getVolume",value:function(){return this.currentVolume}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback&&this.playback.pause()}},{key:"switchAudioTrack",value:function(e){if(this.useSingleAudioUrls){var t=this.audioTracks.find((function(t){return t.id===e||t.language===e}));if(!t||!this.currentAudioTrack||t.id===this.currentAudioTrack.id)return;this.currentAudio=t,this.load(t.url),this.trigger(xe.PLAYBACK_AUDIO_CHANGED,t)}else this.playback&&this.playback.switchAudioTrack(e)}},{key:"getInitialAudioTrack",value:function(){var e=this.options.defaultAudio||{},t=e.language,n=e.role,i=this.findAudioTrack(t,n),r=this.findAudioTrack(t),a=this.findAudioTrack("por"),o=b(this.audioTracks,1)[0];return i||r||a||o}},{key:"findAudioTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.audioTracks.find((function(n){return n.keys.includes(e)&&n.role===t}))}},{key:"seek",value:function(e){var t=this.playback&&this.playback.getCurrentTime(),n=Math.round(t)!==Math.round(e);this.playback&&n&&this.playback.seek(e)}},{key:"getStartTimeOffset",value:function(){return this.playback&&"function"==typeof this.playback.getStartTimeOffset?this.playback.getStartTimeOffset():0}},{key:"isPip",value:function(e){this.onPip=e}},{key:"clearPlayWhenReadyTimeOutID",value:function(){this.playWhenReadyTimeOutID&&clearTimeout(this.playWhenReadyTimeOutID),this.playWhenReadyTimeOutID=null}},{key:"destroy",value:function(){this.clearPlayWhenReadyTimeOutID(),this.playback&&(this.stopListening(this.playback),this.playback.stop(),this.playback.destroy(),this.playback=null),this.$el.remove()}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.validateRestrictedContent(),this.setPlaybackConfig(),!ne.isSmartTvEnvironment&&this.initInnerPlayback(),this.onIdPlaybackReady(),this.options.autoPlay&&this.startAutoPlayCheck()}},{key:"setPlaybackConfig",value:function(){var e,t,n,i;null===(e=this.options.playback)||void 0===e||null===(t=e.setHLSJSConfig)||void 0===t||t.call(e,this.options,this),null===(n=this.options.playback)||void 0===n||null===(i=n.setShakaConfig)||void 0===i||i.call(n,this.options,this)}},{key:"validateRestrictedContent",value:function(){this.video.adult&&!this.options.allowRestrictedContent&&this.onError(hn.RESTRICTED_CONTENT)}},{key:"onPlaybackReady",value:function(){var e=this;this.playback.isReady?this.ready():this.playback.once(xe.PLAYBACK_READY,(function(){return e.ready()}))}},{key:"onVideoMetadataError",value:function(e){this.onError(e,hn.PLAYLIST_LOAD_ERROR)}},{key:"onResourceLoadError",value:function(e){var t=i(i({},hn.RESOURCE_LOAD_ERROR),{},{description:"".concat(hn.RESOURCE_LOAD_ERROR.description," ").concat(e.message||Pt(e)),raw:e});this.onError(e,t)}},{key:"onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ei.warn(this.name,"id playback error:",e),this.playbackError=bi(e,this.options,this.video);var n=this.playbackError.code===hn.DEFAULT_ERROR.code,i=n&&t;i&&(this.playbackError=t);var r={useCodePrefix:!1};this.trigger(xe.PLAYBACK_ERROR,this.createError(this.playbackError,r))}},{key:"onResourceReady",value:function(e){var t,n,i,r,a=this;(this.video=e,this._resourceReady=!0,this.loadingResource=!1,null===(t=this.options.playback)||void 0===t||null===(n=t.setHLSJSlowLatencyConfig)||void 0===n||n.call(t,this.options,this),ne.isSmartTvEnvironment)&&(!this.playback&&this.initInnerPlayback(),this.configureSmartTvResourceParams(),null===(i=this.options.playback)||void 0===i||null===(r=i.setHLSJSlowLatencyConfigTv)||void 0===r||r.call(i,this.options,this));this.useSingleAudioUrls&&(this.currentAudio=this.getInitialAudioTrack(),this.trigger(xe.PLAYBACK_AUDIO_AVAILABLE,this.audioTracks)),setTimeout((function(){return a.setupAuthorized()}))}},{key:"setupAuthorized",value:function(){!this.disableAuthorized&&this._resourceReady&&this.trigger(xe.Custom.PLAYBACK_AUTHORIZED)}},{key:"setupVideoResource",value:function(e){this.setupPlayback(e),this.onPlaybackReady()}},{key:"configureSmartTvResourceParams",value:function(){var e=this.video&&this.video.encrypted,t=this.selectedResource&&this.selectedResource.contentProtection,n=e&&t?mi(this.video,this.options.httpOnly):{};this.playback&&this.playback.configure(i(i({contentProtection:t},n),{},{shakaConfiguration:i(i({},this.options.shakaConfiguration),n.shakaConfiguration)}))}},{key:"getPlaybackType",value:function(){if(this.video)return"Live"===this.video.type||this.video.isLive?"live":"vod"}},{key:"initInnerPlayback",value:function(e){if(this.playback=Ai.call(this,e,this.selectedResource,this.blackResourceUrl),"no_op"===this.playback.name&&!ne.isCrawlerBot)return this.onError(hn.DEVICE_NOT_SUPPORTED);this.bindPlaybackEvents(),this.renderInnerPlayback(),this.onInnerPlaybackCreated()}},{key:"startAutoPlayCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,n=void 0===t?this.options.autoPlay:t;this.checkingAutoplayPermission=!0,En.onAutoplayAvailable(this.onAutoplaySuccess.bind(this),i(i({},this.options),{},{autoPlay:n}),this.onAutoplayFail.bind(this))}},{key:"onAutoplaySuccess",value:function(){var e=this;En.canAutoPlayUnmuted?di((function(){return e.play()})):this.playMuted()}},{key:"onAutoplayFail",value:function(){this.trigger(Gn.WM_AUTOPLAY_BLOCKED)}},{key:"playMuted",value:function(){var e=this;this.mutedAutoplay=!0,this.playback&&(this.playback.volume(0),this.currentVolume=0),di((function(){return e.play()}))}},{key:"setupPlayback",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedResource.url,n=this.useSingleAudioUrls&&(null===(e=this.currentAudioTrack)||void 0===e?void 0:e.url),i=n||t;if(this.trigger(xe.PLAYBACK_STATS_ADD,{midia:this.options.src,url:i}),this.configureInnerPlaybackDRM(),"Tizen"===this.innerPlaybackName){var r=this.video.maxHeight;this.playback.isUHDContent=2160===r}if(this.playback.load(i),this.options.selectedLevel)try{this.play()}catch(e){Ei.warn(this.name,"play()",e)}else this.onPip&&this.playWhenReady()}},{key:"configureInnerPlaybackDRM",value:function(){if(this.isEncrypted){var e=mi(this.video,this.options.httpOnly);this.playback.options.fairplay=e.fairplay,"dash_shaka_playback"===this.playback.name&&(this.playback._options.shakaConfiguration.drm=i(i({},e.shakaConfiguration.drm),this.playback._options.shakaConfiguration.drm))}}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_SETTINGSUPDATE,this.settingsupdate),this.listenTo(this.playback,xe.PLAYBACK_LOADEDMETADATA,this.loadedmetadata),this.listenTo(this.playback,xe.PLAYBACK_PLAYBACKSTATE,this.playbackstate),this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.onInnerPlaybackError),this.listenTo(this.playback,xe.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this.timeupdate),this.listenTo(this.playback,xe.PLAYBACK_PLAY_INTENT,this.playintent),this.listenTo(this.playback,xe.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,xe.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,xe.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,xe.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,xe.PLAYBACK_STATS_ADD,this.statsAdd),this.listenTo(this.playback,xe.PLAYBACK_DVR,this.onDvr),this.listenTo(this.playback,xe.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,xe.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,xe.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,xe.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.ended),this.listenTo(this.playback,xe.PLAYBACK_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.playback,xe.PLAYBACK_AUDIO_AVAILABLE,this.onAudioAvailable),this.listenTo(this.playback,xe.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,xe.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"onEnterPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_ENTER)}},{key:"onExitPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_EXIT)}},{key:"enterPiP",value:function(){ne.isSafari?this.videoEl.webkitSetPresentationMode("picture-in-picture"):this.playback.enterPiP()}},{key:"exitPiP",value:function(){ne.isSafari?this.videoEl.webkitSetPresentationMode("inline"):this.playback.exitPiP()}},{key:"playbackstate",value:function(e){this.trigger(xe.PLAYBACK_PLAYBACKSTATE,e)}},{key:"updateBitrate",value:function(e){this.trigger(xe.PLAYBACK_BITRATE,e)}},{key:"progress",value:function(e){this.trigger(xe.PLAYBACK_PROGRESS,e)}},{key:"statsAdd",value:function(e){this.trigger(xe.PLAYBACK_STATS_ADD,e)}},{key:"onDvr",value:function(e){this.trigger(xe.PLAYBACK_DVR,e)}},{key:"timeupdate",value:function(e){if(e.current){this.currentTime=e.current,this.duration=e.total;var t=this.duration-this.currentTime<=5;this.trigger(xe.PLAYBACK_TIMEUPDATE,i(i({},e),{},{playbackType:this.getPlaybackType(),dvrState:{isOnEdge:t,isDvr:this.isLive&&this.dvrEnabled}}))}}},{key:"ready",value:function(){this._isReady=!0,this.settingsupdate(),this.trigger(Gn.WM_PLAYBACK_WILL_PLAY,this.name)}},{key:"onSeek",value:function(){this.trigger(xe.PLAYBACK_SEEK,this.name)}},{key:"onSeeked",value:function(){this.trigger(xe.PLAYBACK_SEEKED,this.name),this.isPaused&&this.trigger(xe.PLAYBACK_PAUSE,this.name)}},{key:"onBuffering",value:function(){this.trigger(xe.PLAYBACK_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(xe.PLAYBACK_BUFFERFULL,this.name)}},{key:"settingsupdate",value:function(){var e=this.getPlaybackType();e&&("ad"===e?this.settings=this.playback.settings:(this.settings=i({},this.defaultSettings),"vod"!==e&&this.playback&&!this.playback.dvrEnabled&&(this.settings.seekEnabled=!1)),this.trigger(xe.PLAYBACK_SETTINGSUPDATE))}},{key:"loadedmetadata",value:function(e){this.trigger(xe.PLAYBACK_LOADEDMETADATA,e),this.checkInitialSeek()}},{key:"checkInitialSeek",value:function(){var e=this.isLive?this.options.liveStartTime&&this.liveInitialPosition:this.options.resumeAt||gn();e&&e>0&&this.setInitialTime(e)}},{key:"setupSession",value:function(){yn.startSession(this.options.playerId)}},{key:"stopped",value:function(){this.isStopped=!0}},{key:"ended",value:function(){var e=this;this.stopAndClearPlayback(),this.isStopped=!0,this.trigger(xe.PLAYBACK_ENDED,this.name),di((function(){return e.setupSession()}))}},{key:"onAudioChanged",value:function(e){this.useSingleAudioUrls||(this.currentAudio=e,this.trigger(xe.PLAYBACK_AUDIO_CHANGED,e))}},{key:"onAudioAvailable",value:function(e){if(!this.useSingleAudioUrls){this.currentAudio=this.playback.currentAudioTrack,this.trigger(xe.PLAYBACK_AUDIO_AVAILABLE,e);var t=this.getInitialAudioTrack();t&&this.playback.switchAudioTrack(t.id)}}},{key:"playintent",value:function(){this.trigger(xe.PLAYBACK_PLAY_INTENT,this.name)}},{key:"playing",value:function(){this.isPaused=!1,this.isStopped=!1,this.trigger(xe.PLAYBACK_PLAY,this.name,this.actionsMetadata.playEvent)}},{key:"paused",value:function(){this.isPaused=!0,this.trigger(xe.PLAYBACK_PAUSE,this.name,this.actionsMetadata.pauseEvent)}},{key:"onInnerPlaybackError",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.selectedResource.hasFallbackSource(),i=null===(e=this.options.playback)||void 0===e?void 0:e.recoverableErros,r=ne.isSmartTvEnvironment||_n(this.playback.name,t,i);if(!this.isRenewingResource)return r&&n?this.useFallbackSource(t):this.renewResource(t);t.clientCode="playback-error",this.trigger(xe.PLAYBACK_ERROR,t)}},{key:"useFallbackSource",value:function(e){var t=e.code,n=e.description;Ei.info(this.name,"Will select fallback source, previous: ".concat(this.srcUrl)),this.trigger(Gn.WILL_SELECT_FALLBACK_SOURCE,{recoveredError:JSON.stringify({code:t,description:n}),currentSrc:this.srcUrl}),this.selectedResource.nextFallbackSource(),this.trigger(Gn.WILL_CHANGE_SOURCE,{source:this.selectedResource.url,errorCode:t,errorMessage:n}),this.currentAudio=this.getInitialAudioTrack(),this.trigger(Gn.FALLBACK_SOURCE_SELECTED,{currentSrc:this.selectedResource.url}),Ei.info(this.name,"Fallback source selected: ".concat(this.srcUrl))}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.load(t)}},{key:"renewResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initPlaybackRestart(),this.isRenewingResource=!0,this.trigger(Gn.WILL_RENEW_RESOURCE,{renewReason:e.code,description:e.description}),this.listenToOnce(this,xe.PLAYBACK_PLAY,this.onResourceRenewed)}},{key:"onResourceRenewed",value:function(){this.isRenewingResource=!1}},{key:"onInnerPlaybackCreated",value:function(){this.trigger(xe.Custom.PLAYBACK_INNER_CREATED,this.name)}},{key:"onIdPlaybackReady",value:function(){var e=this;this.trigger(xe.PLAYBACK_READY,this.name),di((function(){return e.trigger(Gn.WM_PLAYBACK_CAN_PLAY,e.name)}))}},{key:"load",value:function(e){this.initPlaybackRestart(),this.setupVideoResource(e)}},{key:"initPlaybackRestart",value:function(){this._isReady=!1,this.resetOptions(),this.isRestarting=!0}},{key:"resetOptions",value:function(){var e={resumeAt:this.currentTime};this.currentAudio&&(e.defaultAudio={language:this.currentAudio.language,role:this.currentAudio.role}),this.currentSubtitle&&(e.defaultSubtitle={language:this.currentSubtitle.language,role:this.currentSubtitle.role}),this.playback&&this.playback.configure($.extend(this.options,e))}},{key:"resize",value:function(e){var t;return null===(t=this.playback)||void 0===t||t.resize(e),A(f(n.prototype),"resize",this).call(this,e)}},{key:"renderInnerPlayback",value:function(){this.playback.render(),this.playback.el.id=this.cid,this.playback.el.controlsList="nodownload noremoteplayback",this.playback.el.removeAttribute("src"),this.$el.html(this.playback.el);var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Kn.getStyleFrom(".clappr-player#wp3-player-0 .id-playback.cover-viewport video {\n  -o-object-fit: cover;\n     object-fit: cover;\n}".toString(),e);this.$el.append(t[0]),this.toggleBlackBars({preventBlackBars:this.options.preventBlackBars})}},{key:"toggleBlackBars",value:function(e){var t="cover-viewport";return e.preventBlackBars?this.$el.addClass(t):this.$el.removeClass(t)}}]),n}(Je);_i.canPlay=function(e){return Dn(e.toString())};var ki=Re.getInstance(),Ti=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).options.src&&Dn(i.options.src)?(En.onAutoplayAvailable(i.onAutoPlayAvailable.bind(g(i)),i.options,i.onAutoPlayDisabled.bind(g(i))),i):v(i)}return c(n,[{key:"name",get:function(){return"video_metadata"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"callbackPrefix",get:function(){return"wmPlayerPlaylistLoaded"}},{key:"playback",get:function(){return this.container.playback}},{key:"metadataOptions",get:function(){return{selectedLevel:this.options.selectedLevel,preferredLevel:this.options.preferredLevel,preferredCDN:this.options.cdn,env:this.options._env,profile:this.options.maxQualityLevel,getPlayerType:this.options.overrides&&this.options.overrides.getPlayerType}}},{key:"onAutoPlayAvailable",value:function(){this.listenToOnce(this.playback,Gn.WM_VIDEO_METADATA_REQUEST_COMPLETE,this.parseMetadataRequest)}},{key:"onAutoPlayDisabled",value:function(){var e=this;this.setRequestData(),this.load().then((function(t){return e.playback.trigger(Gn.WM_VIDEO_METADATA_LOADED,t)}),(function(t){return e.playback.trigger(Gn.WM_VIDEO_METADATA_ERROR,t)}))}},{key:"setRequestData",value:function(){var e=this.options.src,t=this.options._env;this.callback=this.callbackPrefix+this.options.playerId+e,this.url=t.playlistTemplate({videoId:e,callback:this.callback})}},{key:"load",value:function(){var e=this;return ki.info(this.name,"loading playlist from:",this.url),nn.jsonp({callbackName:this.callback,url:this.url}).then((function(t){return e.parsePlaylist(t)}))}},{key:"parsePlaylist",value:function(e){var t=new $.Deferred;if(this.isValidPlaylist(e)){var n=this.getMetadataModel(e.videos[0],this.metadataOptions);t.resolve(n)}else ki.warn(this.name,"error on playlist: ",e),t.reject(e);return t}},{key:"isValidPlaylist",value:function(e){return!!e&&!!e.videos&&e.videos.length>0}},{key:"getMetadataModel",value:function(e,t){var n=new Gt(e,t);return ki.info(this.name,"video:",n),n}},{key:"parseMetadataRequest",value:function(e){var t=e.metadata,n=this.getMetadataModel(t,this.metadataOptions);this.playback.trigger(Gn.WM_VIDEO_METADATA_LOADED,n)}}]),n}(ct),Si={d:function(e,t){for(var n in t)Si.o(t,n)&&!Si.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},wi={};Si.d(wi,{U:function(){return Ci}});var Ci=function(e){var t=e.action,n=e.maxAttempts,i=void 0===n?3:n,r=e.baseDelay,a=void 0===r?100:r,o=e.backOffFactor,s=void 0===o?2:o,l=e.retryableErrors,u=void 0===l?null:l,c=0,d=[];return function e(){return t&&"function"==typeof t?t().then((function(e){return{retryResponse:e,retryHistory:d}})).catch((function(t){if(u&&!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.includes(t)}(u,t.statusCode))return Promise.reject({retryError:t,retryHistory:d});var n,r,o;if(d.push((n={},o=t,(r="attempt_".concat(c))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)),c===i)return Promise.reject({retryError:t,retryHistory:d});c++;var l=Math.pow(s,c-1)*a,h=l*function(e){return!e||Number.isNaN(e)?1:Math.random()+e}(.5);return console.log("Retrying...\nIf the retries fail we delay the next attempt in ".concat(l/1e3," seconds\n Fuzz factor for retry: ").concat(h)),new Promise((function(t){setTimeout((function(){t(e())}),h)}))})):Promise.reject({retryError:"Action must be defined and a function",retryHistory:d})}()},Ii=wi.U,Ri=function(){function e(){l(this,e)}return c(e,null,[{key:"BROWSER_NAME_ALLOWED_LIST",get:function(){return"safari"}},{key:"OS_NAME_ALLOWED_LIST",get:function(){return["android","kepler","netrange","orsay","tizen","webos","vidaa","titanos"]}},{key:"OS_VERSION_ALLOWED_LIST",get:function(){return["lte2017"]}}]),e}();function Di(e,t,n){return n&&(e[t]=n),e}var Li=["low","mid","high","max"],Pi=function(){function e(t){l(this,e),this.options=t}return c(e,[{key:"version",get:function(){return 2}},{key:"consumption",get:function(){return"streaming"}},{key:"maxQualityLevel",get:function(){var e=this;return Li.find((function(t){var n;return t===(null===(n=e.options)||void 0===n?void 0:n.maxQualityLevel)}))}},{key:"os",get:function(){var e,t,n,i,r={};if(Bn.isNativeTV)return r;var a=null===(e=Bn.osName())||void 0===e||null===(t=e.toLowerCase)||void 0===t?void 0:t.call(e),o=null===(n=Bn.osVersion())||void 0===n||null===(i=n.toLowerCase)||void 0===i?void 0:i.call(n),s=a&&Ri.OS_NAME_ALLOWED_LIST.includes(a),l=o&&Ri.OS_VERSION_ALLOWED_LIST.includes(o);return s&&(r=Di(r,"name",a)),l&&(r=Di(r,"version",o)),r}},{key:"device",get:function(){var e,t,n={type:Bn.deviceType(),os:this.os},i=null===(e=Bn.deviceBrand())||void 0===e||null===(t=e.toLowerCase)||void 0===t?void 0:t.call(e),r=this.os.name;return r&&Ri.OS_NAME_ALLOWED_LIST.includes(r)||Bn.isNativeTV||(n=Di(n,"vendor",i)),n}},{key:"metadata",get:function(){var e,t,n,i,r={name:Bn.kind,device:this.device},a=null==Bn||null===(e=Bn.runtime)||void 0===e||null===(t=e.browser)||void 0===t||null===(n=t.name)||void 0===n||null===(i=n.toLowerCase)||void 0===i?void 0:i.call(n);return a&&Ri.BROWSER_NAME_ALLOWED_LIST.includes(a)&&(r=Di(r,"browser",a)),r}},{key:"capabilities",get:function(){var e={low_latency:Bn.hasLowLatency,smart_mosaic:Bn.supportsMultipleAudioTracks(),dvr:Bn.isDVRSupported};return e=Di(e,"max_resolution",this.maxQualityLevel||Bn.maxResolution),e=Di(e,"dynamic_range",Bn.dynamicRanges)}}]),e}(),Oi=new Pi,xi=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).options.src&&Dn(i.options.src)?(En.onAutoplayAvailable(i.onAutoPlayAvailable.bind(g(i)),i.options,i.onAutoPlayDisabled.bind(g(i))),i):v(i)}return c(n,[{key:"name",get:function(){return"cdn_router"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"retryableErrors",get:function(){return[0,500,501,502,503,504]}},{key:"retrySettings",get:function(){var e=window.WM&&window.WM.Settings||{};return{maxAttempts:e.maxAttempts,baseDelay:e.baseDelay,backOffFactor:e.backOffFactor}}},{key:"onAutoPlayAvailable",value:function(){this.loadMetadataFromRequest=!0,this.loadResource()}},{key:"onAutoPlayDisabled",value:function(){this.loadMetadataFromRequest=!1,this.listenToOnce(this.playback,Gn.WM_PLAY_REQUESTED_READY,this.loadResource)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.playback,Gn.WILL_RENEW_RESOURCE,this.loadResource),this.listenToOnce(this.playback,Gn.WM_PLAY_REQUESTED_READY,(function(){return e.playRequestedReady=!0}))}},{key:"loadResource",value:function(){var e=this;return this.createPayload().then((function(t){return e.getResource(t)})).then((function(t){return e.onResourceLoaded(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mountAjaxErrorBody(t);try{n=i(i({},n),JSON.parse(t.xhr.response))}catch(e){}e.onResourceError(n)}))}},{key:"createPayload",value:function(){var e=this;return new Promise((function(t){var n={player_type:Gt.getPlayerType(),video_id:"".concat(e.options.src),quality:e.options.maxQualityLevel||"max",content_protection:Gt.getDRMProtocol(),vsid:yn.getVideoSessionId(e.options.playerId),tz:Qt(),capabilities:Oi.capabilities,consumption:Oi.consumption,metadata:Oi.metadata,version:Oi.version};"boolean"==typeof e.options.httpOnly&&(n.ho=e.options.httpOnly),Nt&&(n.ts=Math.trunc($t())),e.options.allowLocation?e.getLocation().then((function(e){t(i(i({},n),{},{lat:"".concat(e.latitude),long:"".concat(e.longitude)}))})).catch((function(){return t(n)})):t(n)}))}},{key:"getLocation",value:function(){var e=this;if(Kt.isGloboiDomain&&this.options.lat&&this.options.long){var t={latitude:this.options.lat,longitude:this.options.long};return this.container.trigger(Gn.WM_LOCATION_AVAILABLE,t),new Promise((function(e){return e(t)}))}return new Promise((function(t,n){fn.getLocation().then((function(n){var i={latitude:n.coords.latitude,longitude:n.coords.longitude};e.container.trigger(Gn.WM_LOCATION_AVAILABLE,i),t(i)})).catch((function(t){Re.warn(e.name,"Failed to get location. We make the request to /cdn without passing lat/long params",t),n(t)}))}))}},{key:"getResource",value:function(e){var t=this;return this.sendRequestWithRetry(this.options._env.CDNRouterHost,e).then((function(e){var n=e.retryResponse,i=e.retryHistory;return t.onResourceRequestFinished(i,i.length+1,!1),n})).catch((function(n){var i=n.retryError,r=n.retryHistory;return t.retryableErrors.includes(i.statusCode)?t.sendRequest(t.options._env.CDNRouterFallbackHost,e).then((function(e){return t.onResourceRequestFinished(r,r.length+1,!0),e})).catch((function(e){return t.onResourceRequestFinished([].concat(E(r),[i]),r.length+1,!0),Promise.reject(e)})):(t.onResourceRequestFinished(r,Math.max(r.length,1),!1),Promise.reject(i))}))}},{key:"sendRequest",value:function(e,t){var n=yn.getLockId(this.options.playerId),r={url:e,type:"POST",contentType:"application/json",xhrFields:{withCredentials:!0},data:JSON.stringify(t)},a=this.options.token||Jt("GLBID");return a&&(r.headers={Authorization:"Bearer ".concat(a)}),n&&(r.headers=i(i({},r.headers),{},{"X-Session-ID":n})),this.executeAjaxRequest(r)}},{key:"sendRequestWithRetry",value:function(e,t){var n=this,i=this.retrySettings,r={action:function(){return n.sendRequest(e,t)},maxAttempts:i.maxAttempts,baseDelay:i.baseDelay,backOffFactor:i.backOffFactor,retryableErrors:this.retryableErrors};return Ii(r)}},{key:"executeAjaxRequest",value:function(e){var t=this;return new Promise((function(n,r){$.ajax(e).then((function(e,i,r){Hn(t.getServerDate(r)),e.playback_api_version=t.getPlaybackApiVersion(r),n({resource:e})}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=i({},t),o=a[0],s=a[1],l=a[2],u=o.status;r({xhr:o,status:s,error:l,statusCode:u})}))}))}},{key:"getServerDate",value:function(e){var t=e.getResponseHeader("Date");return t||Re.warn(this.name,"Date Header from Server not available"),t}},{key:"getPlaybackApiVersion",value:function(e){return e.getResponseHeader("x-app-version")}},{key:"mountAjaxErrorBody",value:function(e){var t=e.xhr,n=e.status,i=e.error;return{status:n,error:t&&t.statusText||i,url:t&&t.responseURL||this.options._env.CDNRouterHost,http_status_code:t&&t.status}}},{key:"onResourceLoaded",value:function(e){var t=this,n=e.resource,i=void 0===n?{}:n,r=i.session;r&&yn.storeLockId(this.options.playerId,r);var a=function(){return setTimeout((function(){return t.playback.trigger(Gn.WM_RESOURCE_LOADED,i)}))};this.loadMetadataFromRequest&&!this.playRequestedReady?(this.listenToOnce(this.playback,Gn.WM_PLAY_REQUESTED_READY,a),this.playback.trigger(Gn.WM_VIDEO_METADATA_REQUEST_COMPLETE,i)):a()}},{key:"onResourceError",value:function(e){if("CDN not available"===e.message)return this.playback.trigger(Gn.WM_WROOM_WAITING,e);this.playback.trigger(Gn.WM_RESOURCE_ERROR,e)}},{key:"onResourceRequestFinished",value:function(e,t,n){this.container.trigger(Gn.WM_RESOURCE_REQUEST_STATS,{retries:e,totalAttempts:t,usedFallback:n})}}]),n}(ct),Mi={pt_br:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},pt_pt:{label:"Português (Portugal)",language:"pt-pt",languageISO_639_2B:"",keys:["pt-pt","pt-PT"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},Ni=function(){function e(){l(this,e)}return c(e,[{key:"_createResourceModel",value:function(e){var t=e.id,n=e.languageISO_639_2B,i=e.role,r=e.url,a=e.type,o=e.kind,s=e.asset_key,l={id:t,role:i,url:r};return void 0!==a&&(l.type=a),void 0!==o&&(l.kind=o),void 0!==s&&(l.asset_key=s),this._formatLanguageResource(l,n)}},{key:"_findLanguageByKey",value:function(e){return Object.values(Mi).find((function(t){return t.keys.includes(e)}))}},{key:"_formatLanguageResource",value:function(e,t){var n=this._findLanguageByKey(t.toLowerCase());return i(n?i({},n):{label:t,language:t,languageISO_639_2B:t,keys:[t]},e)}}]),e}(),Bi=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).audioTracks=[].concat(E(i._formatSingleAudioTracks(null==e?void 0:e.original)),E(i._formatSingleAudioTracks(null==e?void 0:e.description,!0))),i.audioTracksForSingleAudioUrls=i.audioTracks.map((function(e,t){var n=e.language,r=e.role,a=e.url,o=e.asset_key;return i._createResourceModel({id:String(t),kind:r?"description":"main",languageISO_639_2B:n,role:r,url:a,asset_key:o})})),i}return c(n,[{key:"_formatSingleAudioTracks",value:function(e,t){return e?Object.keys(e).map((function(n){return{language:n,url:e[n].url,asset_key:e[n].asset_key,role:t?"description":""}})):[]}}]),n}(Ni),Fi=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),i=t.call(this),e?(i.sourceText=e||{},i.srt=i._buildSubtitles("srt"),i.webVTT=i._buildSubtitles("webvtt"),i):v(i,[])}return c(n,[{key:"_buildSubtitles",value:function(e){var t=this,n=this._formatSubtitlesCaptions(e),i=n.subtitles,r=n.captions;return[].concat(E(Object.values(i)),E(Object.values(r))).map((function(n,i){return t._createResourceModel({id:String(i),languageISO_639_2B:n.language,role:n.role,url:n.url,type:e})}))}},{key:"_formatSubtitlesCaptions",value:function(e){var t=this;return Object.keys(this.sourceText).reduce((function(n,i){var r,a,o,s,l=null===(r=t.sourceText[i].subtitle)||void 0===r||null===(a=r[e])||void 0===a?void 0:a.url;l&&(n.subtitles[i]=t._formatBaseResource(i,l,"subtitle"));var u=null===(o=t.sourceText[i].caption)||void 0===o||null===(s=o[e])||void 0===s?void 0:s.url;return u&&(n.captions[i]=t._formatBaseResource(i,u,"caption")),n}),{subtitles:{},captions:{}})}},{key:"_formatBaseResource",value:function(e,t,n){return{language:e,url:t,role:n}}}]),n}(Ni),Ui=function(){function e(t){var n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(l(this,e),t&&t.sources&&t.resource)&&(this.options=r,this.sources=t.sources,this.contentProtection=t.resource.content_protection||{},this.signal=t.resource.signal,this.thumbUrl=t.thumbs_preview_base_url,this.session=t.session,this.rawData=t,this.hasLowLatency=(null===(n=t.metadata)||void 0===n?void 0:n.low_latency)||!1,this.playbackApiVersion=t.playback_api_version,this._isDAIEnabled=!1,this.smart_mosaic=null===(i=t.metadata)||void 0===i?void 0:i.smart_mosaic,this.options.forceDRMServer&&this.forceDRMServer(),this.setExpirationTime(),this.useSource(this.sources[0]))}return c(e,[{key:"cdn",get:function(){return this.resourceCDN}},{key:"isGloboCDN",get:function(){return"globo"===this.cdn}},{key:"url",get:function(){return this.shouldPlayWithDAI?this.shouldPlayWithDAIPodServing?this.signPODStreamUrl(this.originalURL):this.signDAIUrl(this.originalURL):this.originalURL}},{key:"shouldLoadDAIPodServing",get:function(){return!!(this.dai&&this.customAssetKey&&this.networkCode&&Bn.isDAIPodServingEnabled)}},{key:"shouldPlayWithDAIPodServing",get:function(){return!(!this._isDAIEnabled||!this.shouldLoadDAIPodServing)}},{key:"shouldPlayWithDAI",get:function(){return!(!this.dai||!this._isDAIEnabled||!this.daiURL&&!this.shouldPlayWithDAIPodServing)}},{key:"forceGloboCDN",get:function(){return ne.isiOS&&!ne.isSafari||ne.isSmartTvEnvironment}},{key:"useFlatURL",get:function(){return ne.preventUsingCookies&&this.isGloboCDN||this.dai}},{key:"subtitles",get:function(){return this.subtitleResource}},{key:"sourceIndex",get:function(){return this.sources.indexOf(this.source)}},{key:"fallbackSourceIndex",get:function(){return this.sourceIndex+1}},{key:"audios",get:function(){return this.audioResource}},{key:"isDAIEnabled",get:function(){return this._isDAIEnabled},set:function(e){this._isDAIEnabled=e}},{key:"daiURL",get:function(){return this._daiURL},set:function(e){this._daiURL=e}},{key:"streamId",get:function(){return this._streamId},set:function(e){this._streamId=e}},{key:"setExpirationTime",value:function(){var e=(new Date).getTime();this.sources.forEach((function(t){t.expirationDate=t.expiration_time&&e+t.expiration_time}))}},{key:"hasFallbackSource",value:function(){if(this.fallbackSourceIndex>=this.sources.length)return!1;var e=(new Date).getTime(),t=this.sources[this.fallbackSourceIndex];return e<(null==t?void 0:t.expirationDate)}},{key:"nextFallbackSource",value:function(){var e=this.sources[this.fallbackSourceIndex];this.hasFallbackSource()&&this.useSource(e)}},{key:"useSource",value:function(e){this.source=e,this.originalURL=e.url,this.resourceCDN=e.cdn,this.resourcePOP=e.pop,this.dai=e.dai,this.assetKey=e.asset_key,this.contentSourceId=e.content_source_id,this.customAssetKey=e.custom_asset_key,this.networkCode=e.network_code,this.token=e.token,this.contentSourceId=e.content_source_id,this.audioResource=new Bi(e.audio),this.subtitleResource=new Fi(e.text)}},{key:"signPODStreamUrl",value:function(e){return"".concat(e,"?custom_asset_key=").concat(this.customAssetKey,"&network_code=").concat(this.networkCode,"&stream_id=").concat(this.streamId)}},{key:"signDAIUrl",value:function(e){var t=Ge.settings.interpolate;Ge.settings.interpolate=/\{\{(.+?)\}\}/g;var n=Ge("".concat(e,"{{ queryString }}"))({queryString:{queryString:this.daiURL.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/)[6]||""}.queryString});return Ge.settings.interpolate=t,n}},{key:"forceDRMServer",value:function(){this.contentProtection.server=this.options.forceDRMServer}}]),e}(),Vi=c((function e(t){l(this,e),this.id=t.transmission_id,this.affiliate={code:t.affiliate_code},this.signal=t.signal})),Hi=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"resource"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isDAIAvailable",get:function(){return this.options.enableDAIResourceLoader}},{key:"bindEvents",value:function(){this.idPlayback=this.playback,this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,Gn.WM_RESOURCE_LOADED,this.onResourceLoaded),this.listenTo(this.playback,Gn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenTo(this.playback,xe.Custom.PLAYBACK_AUTHORIZED,this.onPlaybackAuthorized),this.listenToOnce(this.container,xe.Custom.DAI_RESOURCE_LOADED,this.onDAIResourceLoaded)}},{key:"onPlaybackAuthorized",value:function(){if(this.isDAIAvailable)return this.setupDAIResource();this.setupVideoResource()}},{key:"setupDAIResource",value:function(){if(Re.info(this.name,"Setting up DAI resource. Is DAI resource ready? ".concat(this.DAIResourceReady)),!this.DAIResourceReady)return this.listenToOnce(this.container,xe.Custom.DAI_RESOURCE_LOADED,this.setupDAIResource),void this.listenToOnce(this.container,xe.Custom.DAI_ERROR,this.onDAIError);this.video.selectedResource.daiURL=this.DAIUrlTemplate,this.video.selectedResource.isDAIEnabled=!0,this.video.selectedResource.streamId=this.streamId,this.setupVideoResource()}},{key:"onDAIResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.streamId;this.DAIResourceReady=!0,this.DAIUrlTemplate=t,this.streamId=n}},{key:"onDAIError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Re.warn(this.name,"Skipping DAI. Loading original resource. DAI Error: ",e),this.video.selectedResource.isDAIEnabled=!1,this.setupVideoResource()}},{key:"setupVideoResource",value:function(){this.idPlayback.setupVideoResource(this.video.selectedResource.url)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onResourceLoaded",value:function(e){this.resource=new Ui(e,this.options),this.selectResource()}},{key:"selectResource",value:function(){this.video.selectedResource=this.resource,this.video.isLive&&(this.video.transmission=new Vi(this.video.selectedResource.rawData.resource)),this.playback.trigger(Gn.WM_RESOURCE_SELECTED,this.video,this.resource)}},{key:"onResourceSelected",value:function(e){this.video=e,this.video.cdn=this.resource.cdn,this.video.maxHeight=this.video.maxHeight||this.resource.rawData.metadata.max_height,this.video.codec=this.video.codec||this.resource.rawData.metadata.codec,this.isResourceValid()&&this.playback.trigger(Gn.WM_RESOURCE_READY,this.video)}},{key:"isResourceValid",value:function(){return!Array.isArray(this.resource)||(this.trigger(xe.PLAYBACK_ERROR,hn.PLAYLIST_LOAD_ERROR),!1)}}]),n}(ct),ji={VideoMetadata:Ti,CDNRouter:xi,Resource:Hi};st.registerPlayback(_i),Object.values(ji).forEach((function(e){return st.registerPlugin(e)}));var Ki={Video:Gt};var Gi=Function.prototype,Wi=Object.prototype,Yi=Gi.toString,zi=Wi.hasOwnProperty,qi=Yi.call(Object),$i=Wi.toString,Xi=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var Qi=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=$i.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Xi(e);if(null===t)return!0;var n=zi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Yi.call(n)==qi},Ji=function(){function e(){l(this,e)}return c(e,null,[{key:"stringify",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n],r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}},{key:"parse",value:function(e){return e.split(/&/).reduce((function(e,t){var n=b(t.split(/=/),2),i=n[0],r=n[1];return e[i]=r,e}),{})}}]),e}(),Zi=jn.LocalStorage;function er(e){return e?Qi(e)?e:Ji.parse(e):{}}function tr(){var e=Zi.loadRaw("nvgpersona13574",JSON.parse),t={};return e&&(t.nvg_gender=e.gender,t.nvg_age=e.age,t.nvg_income=e.income),t}function nr(){var e=Zi.loadRaw("permutive-id"),t=Zi.loadRaw("_pdfps",JSON.parse),n={};return e&&t&&(n["permutive-id"]=e,n.permutive=t),n}function ir(e,t){return i(i({},er(e.adCustomData)),t)}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=tr(),a=nr(t.isSubscriberOnly),o=er(e.adCustomData),s=i(i(i(i({video_subscription:!!t.isSubscriberOnly},r),a),o),n);return e.adUnit||(s=ir(t,s)),s}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji.stringify(rr(e,t,n))}var or=1/0,sr=NaN,lr=4294967295,ur=/^\s+|\s+$/g,cr=/^[-+]0x[0-9a-f]+$/i,dr=/^0b[01]+$/i,hr=/^0o[0-7]+$/i,fr=parseInt;var pr=Object.prototype.toString,gr=Math.min;function vr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function mr(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==pr.call(e)}(e))return sr;if(vr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ur,"");var n=dr.test(e);return n||hr.test(e)?fr(e.slice(2),n?2:8):cr.test(e)?sr:+e}(e))===or||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function yr(e){return e}var Ar=function(e,t){if(e=function(e){var t=mr(e),n=t%1;return t==t?n?t-n:t:0}(e),e<1||e>9007199254740991)return[];var n=lr,i=gr(e,lr);e-=lr;for(var r=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(i,t="function"==typeof t?t:yr);++n<e;)t(n);return r},br=function(){function e(){l(this,e)}return c(e,null,[{key:"Full",get:function(){return""}},{key:"Overlay",get:function(){return"dfp-ad-overlay--overlay-mode dfp-ad-overlay--over-media-control"}},{key:"Hidden",get:function(){return"dfp-ad-overlay--poster-mode"}},{key:"HiddenMobile",get:function(){return"dfp-ad-overlay--poster-mobile-mode"}}]),e}(),Er=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).setHiddenMode(),i.dfp||i.disable(),i}return c(n,[{key:"name",get:function(){return"dfp_ad_overlay"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"attributes",get:function(){return{class:"dfp-ad-overlay"}}},{key:"bindEvents",value:function(){this.dfp=this.core.options.dfp,this.listenTo(this.dfp,Gn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.dfp,Gn.DFP_AD_CLOSED,this.setHiddenMode),this.listenTo(this.dfp,Gn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.dfp,Gn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.dfp,Gn.DFP_ALL_ADS_COMPLETED,this.adEnded),this.listenTo(this.dfp,Gn.DFP_CONTENT_STARTED,this.setHiddenMode),this.listenTo(this.dfp,Gn.DFP_CONTENT_ENDED,this.setHiddenMode),this.listenTo(this.core,xe.CORE_RESIZE,this.updateSize),this.listenToOnce(this.core,xe.CORE_READY,this.bindMediaControlPluginsEvents),this.bindMediaControlEvents()}},{key:"bindMediaControlEvents",value:function(){this.unbindMediaControlEvents(),this.listenTo(this.core,xe.MEDIACONTROL_SHOW,this.mediaControlShow),this.listenTo(this.core,xe.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.removeClass("dfp-ad-overlay--notransition")}},{key:"unbindMediaControlEvents",value:function(){this.stopListening(this.core,xe.MEDIACONTROL_SHOW,this.mediaControlShow),this.stopListening(this.core,xe.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.addClass("dfp-ad-overlay--notransition")}},{key:"bindMediaControlPluginsEvents",value:function(){this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.mediaControlInteractionEnd),this.listenTo(this.core.mediaControl,Gn.MEDIACONTROL_MODAL_SHOW,this.mediaControlModalShow),this.listenTo(this.core.mediaControl,Gn.MEDIACONTROL_MODAL_HIDE,this.mediaControlModalHide),this.listenTo(this.core.mediaControl,Gn.WM_VOLUME_SHOW,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,Gn.WM_VOLUME_HIDE,this.mediaControlInteractionEnd)}},{key:"adStarted",value:function(e){var t=e.isLinear();this.setMode(t?br.Full:br.Overlay),t&&(this.unbindMediaControlEvents(),this.mediaControlHide()),ne.isMobile&&!t&&this.mediaControlShow()}},{key:"adEnded",value:function(e){this.setHiddenMode(),e&&this.bindMediaControlEvents()}},{key:"setHiddenMode",value:function(){this.setMode(ne.isMobile?br.HiddenMobile:br.Hidden)}},{key:"mediaControlShow",value:function(){this.$el.addClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlHide",value:function(){this.$el.removeClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlModalShow",value:function(){this._modalVisible=!0,this.mediaControlInteractionStart()}},{key:"mediaControlModalHide",value:function(){this._modalVisible=!1,this.mediaControlInteractionEnd()}},{key:"mediaControlInteractionStart",value:function(){this._mode==br.Overlay&&this.$el.removeClass("dfp-ad-overlay--over-media-control")}},{key:"mediaControlInteractionEnd",value:function(){this._modalVisible||this._mode==br.Overlay&&this.$el.addClass("dfp-ad-overlay--over-media-control")}},{key:"setMode",value:function(e){var t=this;this._mode=e,this.$el.removeClass(br.Overlay),this.$el.removeClass(br.Hidden),this.$el.removeClass(br.HiddenMobile),e&&(this.$el.addClass(e),di((function(){return t.updateSize()})))}},{key:"updateSize",value:function(){var e=this.$el.width(),t=this.$el.height();this.dfp.adsManager&&e&&t&&this.dfp.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"render",value:function(){return this.$el.append(Kn.getStyleFrom(".clappr-player#wp3-player-0 .dfp-ad-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 994;\n  transform: translateY(0);\n  transition: transform 0.3s ease;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--notransition {\n  transition: none !important;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mode {\n  visibility: hidden !important;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mobile-mode {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--overlay-mode {\n  transform: translateY(-20px);\n  height: 80px;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--over-media-control {\n  z-index: 998;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--media-control-show {\n  transform: translateY(-80px);\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay video {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}",{playerId:this.core.options.playerId})[0]),this}}],[{key:"Mode",get:function(){return br}}]),n}(Xe),_r=function(e){h(n,e);var t=m(n);function n(e,i){var r;l(this,n);var o=(r=t.call(this,e)).core.options.adUnit,s=r.core.options.adCompanion;if(s&&i&&o){var u=("object"===a(s)&&Object.keys(s)||[])[0];r.unitcode="/".concat(i,"/").concat(o),r.companionWidth=+u.split("x")[0],r.companionHeight=+u.split("x")[1],r.companionDiv=s[u],r.embedScript(),r.setup(),r.show()}else r.disable();return r}return c(n,[{key:"name",get:function(){return"dfp_companion"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Gn.DFP_CONTENT_RESUME,this.hide),this.listenTo(this.core.options.dfp,Gn.DFP_AD_ERROR,this.hide),this.listenTo(this.core.options.dfp,Gn.DFP_CONTENT_ENDED,this.hide)}},{key:"embedScript",value:function(){var e="//www.googletagservices.com/tag/js/gpt.js";if(0===$('script[src="'.concat(e,'"]')).length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",e),document.head.appendChild(t)}}},{key:"setup",value:function(){var e=this;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){googletag.defineSlot(e.unitcode,[e.companionWidth,e.companionHeight],e.companionDiv).addService(googletag.companionAds()).addService(googletag.pubads()).addService(googletag.content()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()}))}},{key:"show",value:function(){var e=this;googletag.cmd.push((function(){googletag.display(e.companionDiv)}))}},{key:"hide",value:function(){$("#".concat(this.companionDiv)).hide()}}]),n}(dt),kr=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).core=e,i}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return"center"}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin(this.mediaControlName))}},{key:"destroy",value:function(){this._mediaControl=null,A(f(n.prototype),"destroy",this).call(this)}}]),n}(Xe),Tr=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).$el.on("click",(function(e){e.stopPropagation(),i.mediaControl.trigger(Gn.MEDIACONTROL_ITEMCLICKED)})),i.$el.addClass("media-control-element"),i}return c(n,[{key:"mediaControlName",get:function(){return"globo_media_control"}},{key:"kibo",get:function(){return this.mediaControl.kibo}},{key:"isSticky",get:function(){return this.el.classList.contains("media-control-element--sticky")}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&$(e).find("svg path").css("fill",this.buttonsColor)}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.mediaControl.show(),t()}))}},{key:"triggerWillShowModalElement",value:function(){this.core.trigger(Gn.WILL_SHOW_MODAL_ELEMENT,{name:this.name})}},{key:"triggerDidHideModalElement",value:function(){this.core.trigger(Gn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"setSticky",value:function(){this.core.trigger(Gn.STICKY_MODE_ENABLED),this.el.classList.add("media-control-element--sticky")}},{key:"resetSticky",value:function(){this.core.trigger(Gn.STICKY_MODE_DISABLED),this.el.classList.remove("media-control-element--sticky")}},{key:"destroy",value:function(){this._mediaControl=null,A(f(n.prototype),"destroy",this).call(this)}}]),n}(kr),Sr=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).core=e,i.message={"-1":"Este anúncio encerra em",0:"O seu vídeo começa em",midroll:"O seu vídeo continua em"},i}return c(n,[{key:"name",get:function(){return"dfp_countdown"}},{key:"template",get:function(){return Ge('<div class="dfp-countdown__text"><%= message %></div>\n<div class="dfp-countdown__time"><%= remainingTime %></div>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"attributes",get:function(){return{class:"dfp-countdown"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Gn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.core.options.dfp,Gn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.core.options.dfp,Gn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.core.options.dfp,Gn.DFP_AD_ERROR,this.adEnded),this.listenTo(this.core,xe.CORE_RESIZE,this.updateCountdownText),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.adEnded),this.mediaControl&&this.listenTo(this.mediaControl,xe.MEDIACONTROL_RENDERED,this.appendToMediaControl)}},{key:"adStarted",value:function(e){e.isLinear()&&(this.playback=this.core.activePlayback,this.renderCountdown(),this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this.updateCountdown),this.$el.removeClass("dfp-countdown--hidden"))}},{key:"adEnded",value:function(){this.stopListening(this.playback,xe.PLAYBACK_TIMEUPDATE),this.$el.addClass("dfp-countdown--hidden")}},{key:"renderCountdown",value:function(){var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .dfp-countdown {\n  display: none;\n  position: relative;\n  z-index: 998;\n  pointer-events: none;\n  font-family: "Opensans", sans-serif;\n  font-size: 13px;\n  line-height: 13px;\n  color: #e5e886;\n  transition: transform 0.3s ease-out;\n}\n.clappr-player#wp3-player-0 .dfp-countdown.media-control-element {\n  padding-left: 0;\n  padding-right: 0;\n}\n.clappr-player#wp3-player-0 .dfp-countdown__text {\n  display: inline-block;\n}\n.clappr-player#wp3-player-0 .dfp-countdown__text--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .dfp-countdown__time {\n  display: inline-block;\n}\n.clappr-player#wp3-player-0 .dfp-countdown--hidden {\n  display: none;\n}',{playerId:this.container.options.playerId}),t="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$el.html(this.template({message:this.message[this.core.options.dfp.podIndex]||this.message.midroll,remainingTime:ke.formatTime(t)})),this.$el.append(e[0]),this.$duration=this.$el.find(".dfp-countdown__time"),this.$message=this.$el.find(".dfp-countdown__text"),this.updateResponsiveTextMode(),this.appendToMediaControl()}},{key:"appendToMediaControl",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__left");e[0]&&!this.isRendered&&(e.append(this.el),this.isRendered=!0)}},{key:"updateCountdown",value:function(){var e="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$duration.text(ke.formatTime(e)),this.$message.text(this.message[this.core.options.dfp.podIndex]||this.message.midroll)}},{key:"updateCountdownText",value:function(e){var t=e.width;t&&"number"==typeof t&&(this.hiddenTextMode=t<=360,this.updateResponsiveTextMode())}},{key:"updateResponsiveTextMode",value:function(){if(this.$message){var e="dfp-countdown__text--hidden";this.hiddenTextMode?this.$message.addClass(e):this.$message.removeClass(e)}}},{key:"destroy",value:function(){this.stopListening(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(Tr),wr=function(e){h(n,e);var t=m(n);function n(e,i){var r,a,o;return l(this,n),(o=t.call(this,e)).dfp=i,o.settings=o.defaultSettings,o.onEnterPiP=o.onEnterPiP.bind(g(o)),o.onExitPiP=o.onExitPiP.bind(g(o)),null===(r=o.dfpVideoEl)||void 0===r||r.addEventListener("enterpictureinpicture",o.onEnterPiP),null===(a=o.dfpVideoEl)||void 0===a||a.addEventListener("leavepictureinpicture",o.onExitPiP),o.bindEvents(),o}return c(n,[{key:"name",get:function(){return"dfp_playback"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"video"}},{key:"attributes",get:function(){return{"data-dfp-playback":""}}},{key:"adsManager",get:function(){return this.dfp&&this.dfp.adsManager}},{key:"defaultSettings",get:function(){return{seekEnabled:!1}}},{key:"dfpLimaVideoEl",get:function(){var e,t;return null===(e=this.dfp.dfpAdOverlay.el.querySelector("lima-video"))||void 0===e||null===(t=e.shadowRoot)||void 0===t?void 0:t.querySelector("video")}},{key:"dfpVideoEl",get:function(){return this.dfp.dfpAdOverlay.el.querySelector("video")||this.dfpLimaVideoEl}},{key:"isPiPActive",get:function(){return this.dfpVideoEl&&this.dfpVideoEl===document.pictureInPictureElement}},{key:"ready",value:function(){this.trigger(xe.PLAYBACK_READY,this.name)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.dfp,Gn.DFP_AD_LOADED,(function(t){return e.duration=t&&t.getDuration()})),this.listenTo(this,xe.PLAYBACK_PLAY,(function(){return e.playing=!0})),this.listenTo(this,xe.PLAYBACK_PAUSE,(function(){return e.playing=!1}))}},{key:"render",value:function(){return this}},{key:"getPlaybackType",value:function(){return"ad"}},{key:"getDuration",value:function(){return this.duration}},{key:"getRemainingTime",value:function(){var e;return null===(e=this.adsManager)||void 0===e?void 0:e.getRemainingTime()}},{key:"getCurrentTime",value:function(){var e=this.getRemainingTime(),t=this.getDuration();return e>=0?t-e:0}},{key:"play",value:function(){this.adsManager&&(this.adsManager.resume(),!this.updateTimer&&this.startUpdateTimer(),this.playing=!0)}},{key:"pause",value:function(){this.adsManager&&(this.adsManager.pause(),this.stopUpdateTimer(),this.playing=!1)}},{key:"stop",value:function(){var e;this.stopUpdateTimer(),this.isPiPActive&&(null===(e=this.dfpVideoEl)||void 0===e||e.pause()),A(f(n.prototype),"stop",this).call(this)}},{key:"enterPiP",value:function(){var e=this;if(!ne.isSafari)return this.dfpVideoEl?void this.dfpVideoEl.requestPictureInPicture().then((function(){Re.info(e.name,"enter PIP success")})).catch((function(t){Re.warn(e.name,"enter PIP failed",t)})):Re.warn(this.name,"video ad tag not available");this.dfpVideoEl.webkitSetPresentationMode("picture-in-picture")}},{key:"exitPiP",value:function(){var e=this;ne.isSafari?this.dfpVideoEl.webkitSetPresentationMode("inline"):document.exitPictureInPicture().then((function(){Re.info(e.name,"exit PIP success")})).catch((function(t){Re.warn(e.name,"exit PIP failed",t)}))}},{key:"onEnterPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_ENTER)}},{key:"onExitPiP",value:function(){this.trigger(xe.PLAYBACK_PIP_EXIT)}},{key:"startUpdateTimer",value:function(){var e=this;this.stopUpdateTimer(),this.updateTimer=setInterval((function(){e.trigger(xe.PLAYBACK_TIMEUPDATE,{current:e.getCurrentTime(),total:e.duration,playbackType:e.getPlaybackType()})}),100)}},{key:"stopUpdateTimer",value:function(){clearInterval(this.updateTimer),delete this.updateTimer}},{key:"isPlaying",value:function(){return this.playing}},{key:"destroy",value:function(){var e,t;this.stop(),null===(e=this.dfpVideoEl)||void 0===e||e.removeEventListener("enterpictureinpicture",this.onEnterPiP),null===(t=this.dfpVideoEl)||void 0===t||t.removeEventListener("leavepictureinpicture",this.onExitPiP),A(f(n.prototype),"destroy",this).call(this)}},{key:"volume",value:function(e){this.adsManager&&this.adsManager.setVolume(e/100)}},{key:"getVolume",value:function(){return this.adsManager?this.adsManager.getVolume():this.dfp.container.playback.getVolume()/100}}]),n}(Je),Cr=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).isServedAd=!1,i}return c(n,[{key:"name",get:function(){return"dfp_video_ad"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"videoElement",get:function(){var e=this.container.playback,t=e&&e.playback;return t&&t.el}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,xe.CONTAINER_ENDED,this.containerEnded),this.listenTo(this.container,xe.CONTAINER_STOP,this.containerEnded),this.listenTo(this.container,xe.CONTAINER_ERROR,this.containerError),this.listenTo(this.options.dfp,Gn.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.options.dfp,Gn.DFP_CONTENT_PAUSE,this.adBreakStarted),this.listenTo(this.container,Gn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,Gn.DFP_AD_RESUME,this.onDFPAdResume),this.listenTo(this.options.dfp,Gn.DFP_CONTENT_RESUME,this.adBreakEnded),this.listenTo(this.options.dfp,Gn.DFP_AD_ERROR,this.adError),this.listenTo(this.container,Gn.WM_MASTERTOPIP,this.onPip),this.listenTo(this.container,Gn.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onDFPAdResume",value:function(){this.syncVolumeWithIdPlayback()}},{key:"onSessionEnd",value:function(){this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED,this.containerPlay)}},{key:"onPlayRequestedReady",value:function(){this.container.playback.disablePlayWhenReady=!this.options.dfp.shouldSkipAd}},{key:"onPip",value:function(){this.stopListening(),this.listenTo(this.container,Gn.WM_PIPTOMASTER,this.bindEvents)}},{key:"onResourceSelected",value:function(){this.hasError=!1}},{key:"onResourceReady",value:function(){var e=this.container.playback.options;e.onPip||(this.adPlayback=new wr(e,this.options.dfp)),this.containerPlay(),this.options.dfp.contentStarted()}},{key:"containerPlay",value:function(){var e=this;this.containerPlaying=!0,this.hasError&&di((function(){return e.adBreakEnded()}))}},{key:"containerEnded",value:function(){this.options.dfp.contentEnded(),this.stopListening(),this.bindEvents(),this.containerPlaying=!1,this.hasError&&this.adPlayback&&this.adPlayback.stop()}},{key:"containerError",value:function(){this.hasError=!0}},{key:"adError",value:function(){this.hasError=!0,this.adBreakEnded()}},{key:"adLoaded",value:function(e){var t=this,n=e.isLinear();this.options.dfp.podIndex=e.getAdPodInfo().getPodIndex();var i={"-1":function(){Re.info(t.name,"Post-roll loaded"),t.adPlayback&&(t.adPlayback.duration=e.getDuration()),t.postroll=!0},0:function(){return Re.info(t.name,"Pre-roll loaded")},midroll:function(){t.adPlayback&&(t.adPlayback.duration=e.getDuration()),Re.info(t.name,"Mid-roll loaded")}};n?(i[this.options.dfp.podIndex]||i.midroll)():Re.info(this.name,"Overlay loaded")}},{key:"adBreakStarted",value:function(e){this.isServedAd=!0,this.onBreak=!0,this.hasError?this.adBreakEnded():this.container.playback.isPlaying()?this.pauseMainContent(e):this.initAdPlayback(e)}},{key:"onAdStarted",value:function(){this.container.getPlugin("click_to_pause").disable(),this.adPlayback&&this.adPlayback.play(),this.container.settingsUpdate()}},{key:"pauseMainContent",value:function(e){this.listenToOnce(this.container.playback,xe.PLAYBACK_PAUSE,this.initAdPlayback.bind(this,e)),this.container.pause()}},{key:"initAdPlayback",value:function(e){var t=this.container.playback.options;this.playback=this.container.playback,this.playback.stopListening(),this.container.stopListening(),this.adPlayback||(this.adPlayback=new wr(t,this.options.dfp),this.adPlayback.duration=e.getDuration()),this.syncVolumeWithIdPlayback(),this.container.trigger(Gn.WILL_SET_AD_PLAYBACK),this.container.playback=this.adPlayback,this.container.trigger(Gn.DID_SET_AD_PLAYBACK,this.container.playback),this.container.bindEvents(),this.adPlayback.ready()}},{key:"adBreakEnded",value:function(){var e=this;this.onBreak&&(this.container.stopListening(),this.playback.bindPlaybackEvents(),this.playback._options=i({},this.adPlayback._options),this.container.playback=this.playback,this.container.playback.volume(100*this.adPlayback.getVolume()),this.container.currentTime=this.playback.currentTime,0===this.options.dfp.podIndex&&this.playback.checkInitialSeek(),this.container.bindEvents()),this.adPlayback&&(this.adPlayback.stop(),this.adPlayback.destroy(),this.adPlayback=null),this.listenToOnce(this.container,xe.CONTAINER_PLAY,(function(){return e.container.settingsUpdate()})),this.containerPlaying||this.hasError||this.options.dfp.shouldSkipAd?(!ne.supportsTouchEvents&&this.container.getPlugin("click_to_pause").enable(),di((function(){return e.container.playback.playWhenReady()}))):this.container.getPlugin("poster").show(),this.onBreak=!1,this.hasError=!1,this.isServedAd=!1}},{key:"syncVolumeWithIdPlayback",value:function(){var e=this.playback.getVolume();null!==e&&this.adPlayback.volume(e)}},{key:"containerTimeUpdate",value:function(e){}},{key:"destroy",value:function(){var e;null===(e=this.adPlayback)||void 0===e||e.destroy(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),Ir=[{video:{playerSize:[1280,720],context:"instream"}}],Rr="Prebid",Dr=Re.getInstance(),Lr="Skipping auction because Prebid.js is not available.",Pr="Skipping auction because there is already one in progress.",Or="Auction timeout has been reached.",xr="Prebid timeout has been reached.",Mr="Video URL is empty.",Nr="Error during auction:",Br="Successful response from HB Server.",Fr="Auction finished.",Ur="Following the direct sales flow.",Vr="Ad tag URL already set. Skipping auction.",Hr="Prebid setup is not complete. Skipping auction.",jr="Prebid setup failed:",Kr=function(){function e(t){var n=t.dfp,i=t.auctionTimeout,r=void 0===i?1500:i;l(this,e),this.dfp=n,this.auctionTimeout=r,this.isAuctionRunning=!1,this.reachedTimeout=!1,this.setupComplete=!1,this.adTagUrl=null,jn.registerGlobal("pbjs.libLoaded")}var t,n;return c(e,[{key:"videoAdUnit",get:function(){return{code:"/".concat(this.dfp.adAccountId,"/").concat(this.dfp.adUnit,"/").concat(this.dfp.core.el.id),adSlotName:this.dfp.core.el.id,mediaTypes:Ir}}},{key:"extraParams",get:function(){var e,t,n,i,r,a,o;return[null!==(e=null===(t=window)||void 0===t||null===(n=t.cdaaas)||void 0===n||null===(i=n.SETTINGS)||void 0===i?void 0:i.SITE_ID)&&void 0!==e?e:"",null!==(r=null===(a=window)||void 0===a||null===(o=a.utag_data)||void 0===o?void 0:o.tipo_pagina)&&void 0!==r?r:""].filter((function(e){return e.length>0})).join("-")}},{key:"shouldSkipAuction",get:function(){return this.pbjs.libLoaded?this.setupComplete?this.isAuctionRunning?(Dr.warn(Rr,Pr),!0):!!this.adTagUrl&&(Dr.warn(Rr,Vr),!0):(Dr.warn(Rr,Hr),!0):(Dr.warn(Rr,Lr),!0)}},{key:"pbjs",get:function(){return window.pbjs=window.pbjs||{que:[]},window.pbjs}},{key:"isPrebidReady",value:function(){var e=this;if(this.pbjs.libLoaded)return Promise.resolve(!0);return Promise.race([new Promise((function(e){setTimeout((function(){e(!1)}),1500)})),new Promise((function(t){e.pbjs.que.push((function(){return t(!0)}))}))])}},{key:"runAuction",value:(n=s(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldSkipAuction){e.next=2;break}return e.abrupt("return");case 2:return this.isAuctionRunning=!0,e.prev=3,e.next=6,Promise.race([this.callPrebid(),this.callPrebidFallback()]);case 6:if(t=e.sent,this.adTagUrl=this.removeHbPbParamFromDealCampaign(t.adTagUrl),this.reachedTimeout=t.reachedTimeout,!this.reachedTimeout){e.next=12;break}return Dr.warn(Rr,Or),e.abrupt("return");case 12:if(this.adTagUrl){e.next=15;break}return Dr.warn(Rr,Mr),e.abrupt("return");case 15:Dr.info(Rr,Br),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),Dr.error(Rr,Nr,e.t0),Dr.warn(Rr,Ur);case 22:return e.prev=22,Dr.info(Rr,Fr),this.isAuctionRunning=!1,e.finish(22);case 26:case"end":return e.stop()}}),e,this,[[3,18,22,26]])}))),function(){return n.apply(this,arguments)})},{key:"reset",value:function(){this.adTagUrl=null,this.isAuctionRunning=!1}},{key:"callPrebid",value:function(){var e=this.pbjs,t=this.videoAdUnit,n=this.dfp;Dr.debug(Rr,"Running Prebid auction with the following params:"),Dr.debug(Rr,"Video Ad Unit:",t),Dr.debug(Rr,"Ad Tag URL:",n.adTagUrl);return new Promise((function(i,r){try{e.que.push((function(){e.rp.requestVideoBids({adSlotName:t.code,playerSize:[1280,720],callback:function(){return function(i,r){try{i({adTagUrl:e.adServers.dfp.buildVideoUrl({adUnit:t,url:n.adTagUrl}),reachedTimeout:!1})}catch(e){r(e)}}(i,r)}})}))}catch(e){r(e)}}))}},{key:"callPrebidFallback",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){t({adTagUrl:null,reachedTimeout:!0})}),e.auctionTimeout)}))}},{key:"removeHbPbParamFromDealCampaign",value:function(e){if(!e)return null;var t=this.extractCustomParams(e);if(!t)return e;if(!t.get("hb_deal_appnexus"))return e;t.delete("hb_pb_appnexus");var n=new URL(e);return n.searchParams.set("cust_params",t.toString()),n.toString()}},{key:"extractCustomParams",value:function(e){var t=new URL(e).searchParams.get("cust_params");return t?new URLSearchParams(t):null}},{key:"parseAdCustomData",value:function(e){var t,n;if(e){var i=new URLSearchParams(e);return{ambient:null!==(t=i.get("ambient"))&&void 0!==t?t:"",tipo_pagina:null!==(n=i.get("tipo_pagina"))&&void 0!==n?n:""}}}},{key:"setupPrebid",value:(t=s(r().mark((function e(t){var n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.setupComplete){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.isPrebidReady();case 4:if(e.sent){e.next=7;break}return Dr.warn(Rr,xr),e.abrupt("return");case 7:if(e.prev=7,n=this.parseAdCustomData(t)){e.next=11;break}return e.abrupt("return");case 11:this.pbjs.que.push((function(){a.pbjs.mergeConfig({appnexusAuctionKeywords:i({},n),ortb2:{site:{ext:{data:i({},n)}}}}),a.setupComplete=!0})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),Dr.warn(Rr,jr,e.t0);case 17:case"end":return e.stop()}}),e,this,[[7,14]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Gr=jn.embedScript,Wr=jn.DOM,Yr=jn.registerGlobal,zr=jn.autoplayManager,qr=Re.getInstance(),$r=["video/mp4","video/webm","video/x-msvideo","video/x-motion-jpeg","video/mpeg2","video/x-ms-wmv","application/x-mpegURL","application/vnd.apple.mpegurl","video/MP2T"],Xr={"in-stream":1,accompanying:2},Qr=new Promise((function(e,t){var n,i;return!(ne.isSmartTvEnvironment||null!==(n=window.google)&&void 0!==n&&null!==(i=n.ima)&&void 0!==i&&i.settings)?Gr("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(e,t):e()})),Jr=function(e){h(a,e);var t,n,i=m(a);function a(e){var t;return l(this,a),(t=i.call(this,e)).didInitBootstrapAPI=!1,t.isAllAdsCompleted=!1,t.isContainerEnded=!1,t.core.options.skipDFP&&qr.info(t.name,"Ad Skipping is Enabled."),Yr("google.ima.settings"),t.attachCorePlugins(),t.prebid=new Kr({dfp:g(t)}),t}return c(a,[{key:"name",get:function(){return"dfp"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"attributes",get:function(){return{class:"dfp"}}},{key:"imaScript",get:function(){return Qr}},{key:"dfpAdTagTemplate",get:function(){var e="".concat(this.options._env.protocol,"://pubads.g.doubleclick.net/gampad/ads?sz=1280x720&iu=/<%= adAccountId %>/<%= adUnit %>&cmsid=<%= adCmsId %>&vid=<%= videoId %>&cust_params=<%= customParams %>&ciu_szs=940x360&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url=<%= descriptionUrl %>&correlator=[timestamp]");return this.adCreativeProfile&&(e+="&pp=<%= adCreativeProfile %>"),this.adPlacement&&(e+="&plcmt=<%= adPlacement %>"),Ge(e)}},{key:"adTagUrl",get:function(){var e,t,n=this.unescapeHtml(this.adUnit),i=encodeURIComponent(this.descriptionUrl),r=encodeURIComponent(this.unescapeHtml(this.adCustomData)),a={adUnit:n,adAccountId:this.adAccountId,adCmsId:this.adCmsId,videoId:this.videoId,descriptionUrl:i,customParams:r};(this.adCreativeProfile&&(a.adCreativeProfile=this.adCreativeProfile),this.adPlacement&&(a.adPlacement=Xr[this.adPlacement]),null!==(e=this.prebid)&&void 0!==e&&e.extraParams)&&(a.customParams+="&hb_video=".concat(null===(t=this.prebid)||void 0===t?void 0:t.extraParams));return this.dfpAdTagTemplate(a)}},{key:"sizes",get:function(){return{playerWidth:this.core.el&&this.core.el.offsetWidth,defaultWidth:640,linearHeight:400,nonLinearHeight:150}}},{key:"isAutoPlayUnmutedAllowed",get:function(){return!this.options.mute&&zr.canAutoPlayUnmuted}},{key:"shouldSkipAd",get:function(){var e,t,n=this.core.options.skipDFP,i=!(null!==(e=window.google)&&void 0!==e&&null!==(t=e.ima)&&void 0!==t&&t.settings),r=Wr.hasChildElement(this.core.el,".dfp-ad-overlay");return n||i||!this.adUnit||!r}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,Gn.DFP_DISABLE,this.disable)}},{key:"enable",value:function(){this.enabled||(this.dfpAdOverlay&&this.dfpAdOverlay.enable(),this.dfpCountdown&&this.dfpCountdown.enable(),this.dfpVideoAd&&this.dfpVideoAd.enable(),this.adCompanion&&this.adCompanion.enable(),A(f(a.prototype),"enable",this).call(this),this.bindContainerEvents())}},{key:"disable",value:function(){this.enabled&&(this.dfpAdOverlay&&this.dfpAdOverlay.disable(),this.dfpCountdown&&this.dfpCountdown.disable(),this.dfpVideoAd&&this.dfpVideoAd.disable(),this.adCompanion&&this.adCompanion.disable(),A(f(a.prototype),"disable",this).call(this),this.listenToOnce(this.core,Gn.DFP_ENABLE,this.enable))}},{key:"attachCorePlugins",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0,this.core._options=Object.assign(this.core.options,{dfp:this}),this.dfpAdOverlay=new Er(this.core),this.dfpCountdown=new Sr(this.core),this.core.$el.append(this.dfpAdOverlay.el),this.core.addPlugin(this.dfpAdOverlay)}},{key:"attachContainerPlugins",value:function(){this.container&&(this.container._options=Object.assign(this.container.options,{dfp:this}),this.dfpVideoAd=new Cr(this.container),this.container.addPlugin(this.dfpVideoAd))}},{key:"configure",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0;var e=this.core.getCurrentContainer().options;this.videoId=e&&e.src||e.sources&&e.sources[0],!1!==this.core.options.useStyledNonLinearAds&&(this.core.options.useStyledNonLinearAds=!0),this.container&&(this.stopListening(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED),this.listenTo(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.init))}},{key:"init",value:function(e){var t=this,n=this.core.getCurrentContainer().options;this.adAccountId=n.adAccountId||e.adAccountId||a.DEFAULT_ACCOUNT_ID,this.adCmsId=n.adCmsId||e.adCmsId||a.DEFAULT_CMS_ID,this.descriptionUrl=e.urlForConsumption||a.DEFAULT_DESCRIPTION_URL,this.adCreativeProfile=n.adCreativeProfile,this.adPlacement=n.adPlacement,this.error=!1,this.adUnit=n.adUnit||e.adUnit,this.adUnit&&(this.adCustomData=ar(n,e),this.setupCompanion(),this.imaScript.then((function(){return!t.didInitBootstrapAPI&&t.bootstrapApi()}),(function(){return t.onAdError({type:"imaLoadError",message:"google.ima not available"})})))}},{key:"triggerContentResume",value:function(){this.trigger(Gn.DFP_CONTENT_RESUME),this.container.trigger(Gn.DFP_CONTENT_RESUME)}},{key:"bootstrapApi",value:(n=s(r().mark((function e(){var t,n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.error=!1,this.destroyIMA(),!this.shouldSkipAd){e.next=4;break}return e.abrupt("return");case 4:return this.didInitBootstrapAPI=!0,this.setupIMA(),this.setupAutoPlayConfig(),e.next=9,null===(t=this.prebid)||void 0===t?void 0:t.setupPrebid(this.adCustomData);case 9:return e.next=11,null===(n=this.prebid)||void 0===n?void 0:n.runAuction();case 11:a=(null===(i=this.prebid)||void 0===i?void 0:i.adTagUrl)||this.adTagUrl,this.requestAd(a),this.isAllAdsCompleted=!1;case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setupIMA",value:function(){if(google.ima.settings.setLocale("pt-br"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.options.adPublisherProvidedID&&google.ima.settings.setPpid(this.options.adPublisherProvidedID),this.adDisplayContainer||(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dfpAdOverlay.el,this.dfpVideoAd.videoElement)),this.adsLoader||(this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)),this.adsRenderingSettings||(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,ne.isChrome&&ne.isMobile&&(this.adsRenderingSettings.mimeTypes=$r)),!this.adsRequest){var e=Math.min(this.sizes.defaultWidth,this.sizes.playerWidth);this.adsRequest=new google.ima.AdsRequest,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=this.sizes.linearHeight,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=this.sizes.nonLinearHeight}}},{key:"setupAutoPlayConfig",value:function(){zr.allowAutoplay(this.options)?(this.adsRequest.setAdWillAutoPlay(!0),this.isAutoPlayUnmutedAllowed?this.adsRequest.setAdWillPlayMuted(!1):this.adsRequest.setAdWillPlayMuted(!0)):(this.adsRequest.setAdWillAutoPlay(!1),this.adsRequest.setAdWillPlayMuted(this.options.mute))}},{key:"setupCompanion",value:function(){Object.assign({},this.core.options,{adUnit:this.adUnit,adCustomData:this.adCustomData}),this.adCompanion&&this.adCompanion.stopListening(),this.adCompanion=new _r(this.core,this.adAccountId)}},{key:"destroyIMA",value:function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.isAllAdsCompleted||(this.adDisplayContainer&&this.adDisplayContainer.destroy(),this.adDisplayContainer=null),this.adsManager=null,this.adsLoader=null,this.adsRequest=null,this.didInitBootstrapAPI=!1}},{key:"destroyVideoAd",value:function(){this.dfpVideoAd&&(this.dfpVideoAd.stopListening(),this.dfpVideoAd.destroy(),this.dfpVideoAd=null)}},{key:"onAdError",value:function(e){if(!this.error){var t=e&&this.getErrorData(e);qr.warn(this.name,"dfp encountered an error, skipping -",t,e),this.error=!0,this.trigger(Gn.DFP_AD_ERROR,t),this.container.trigger(Gn.DFP_AD_ERROR,t)}}},{key:"getErrorData",value:function(e){var t="function"==typeof e.getError?e.getError():e;if(!t)return{};var n="function"==typeof t.getType?t.getType():t.type||t.o||t,i="function"==typeof t.getErrorCode?t.getErrorCode():"",r="function"==typeof t.getMessage?t.getMessage():t.message||t.l||t;return{type:"".concat(n).concat(i?"-"+i:""),message:r}}},{key:"onAdsManagerLoaded",value:function(e){var t=this;this.adsRenderingSettings.useStyledNonLinearAds=this.core.options.useStyledNonLinearAds,this.adsManager=e.getAdsManager(this.dfpVideoAd.videoElement,this.adsRenderingSettings),this.discardWatchedAds(this.watchedAds),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,(function(e){return t.onAdLog(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,(function(e){return t.onAdMetadata(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){return t.onContentPauseRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){return t.onContentResumeRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){return t.onAdStarted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){return t.onAdResumed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){return t.onAdPaused(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){return t.onAdSkipped(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){return t.onAdLoaded(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,(function(e){return t.onAdClosed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){return t.onAdCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){return t.onAllAdsCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){return t.onAdClicked(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BUFFERING,(function(e){return t.onAdBuffering(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_CAN_PLAY,(function(e){return t.onAdBufferfull(e)})),this.trigger(Gn.DFP_MANAGER_LOADED),this.container.trigger(Gn.DFP_MANAGER_LOADED)}},{key:"onResourceReady",value:function(){this.isContainerEnded=!1,this.shouldSkipAd?this.triggerContentResume():this.startAd()}},{key:"startAd",value:function(){if(this.adsManager)try{this.adsManager.init(this.dfpAdOverlay.$el.width(),this.dfpAdOverlay.$el.height(),google.ima.ViewMode.NORMAL),this.adsManager.start(),this.container.trigger(Gn.DID_START_ADS_MANAGER)}catch(e){this.onAdError({type:"adError",message:e&&e.message})}else this.listenToOnce(this,Gn.DFP_MANAGER_LOADED,this.startAd)}},{key:"discardWatchedAds",value:function(e){var t=this;Ar(e,(function(e){setTimeout((function(){return t.adsManager.discardAdBreak()}),500*e)}))}},{key:"onAdLog",value:function(e){var t=(e.getAdData()||{}).adError;t.getErrorCode()===google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE&&this.onAdError(t)}},{key:"onAdClicked",value:function(e){var t=e.getAd();this.container.trigger(Gn.DFP_AD_CLICKED,t)}},{key:"onAdMetadata",value:function(){this.container.trigger(Gn.DFP_AD_METADATA)}},{key:"onAdBuffering",value:function(){this.isBuffering=!0,this.container.trigger(Gn.DFP_AD_BUFFERING)}},{key:"onAdBufferfull",value:function(){this.isBuffering&&(this.container.trigger(Gn.DFP_AD_BUFFERFULL),this.isBuffering=!1)}},{key:"onAdLoaded",value:function(e){this.error=!1;var t=e.getAd();this.trigger(Gn.DFP_AD_LOADED,t),this.container.trigger(Gn.DFP_AD_LOADED,t)}},{key:"onAdStarted",value:function(e){var t=e.getAd();this.watchedAds+=1,this.container.playback.trigger(xe.PLAYBACK_PLAY),this.trigger(Gn.DFP_AD_STARTED,t),this.container.trigger(Gn.DFP_AD_STARTED,t)}},{key:"onAdResumed",value:function(e){var t=e.getAd();this.container.playback.trigger(xe.PLAYBACK_PLAY),this.container.trigger(Gn.DFP_AD_RESUME,t.isLinear())}},{key:"onAdPaused",value:function(e){var t=e.getAd();this.container.playback.trigger(xe.PLAYBACK_PAUSE),this.container.trigger(Gn.DFP_AD_PAUSE,t.isLinear())}},{key:"onAdClosed",value:function(e){var t=e.getAd();this.trigger(Gn.DFP_AD_CLOSED,t.isLinear()),this.container.trigger(Gn.DFP_AD_CLOSED,t.isLinear())}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(Gn.DFP_AD_SKIPPED,t.isLinear()),this.container.trigger(Gn.DFP_AD_SKIPPED,t.isLinear())}},{key:"onAdCompleted",value:function(e){var t=e.getAd();this.trigger(Gn.DFP_AD_COMPLETED,t.isLinear()),this.container.trigger(Gn.DFP_AD_COMPLETED,t.isLinear())}},{key:"onAllAdsCompleted",value:function(e){this.isAllAdsCompleted=!0;var t=e.getAd();this.trigger(Gn.DFP_ALL_ADS_COMPLETED,null==t?void 0:t.isLinear()),this.container.trigger(Gn.DFP_ALL_ADS_COMPLETED,null==t?void 0:t.isLinear()),this.watchedAds=0,this.triggerDfpFinished()}},{key:"onContentPauseRequested",value:function(e){var t=e.getAd();this.container.trigger(Gn.DFP_CONTENT_PAUSE,t),this.trigger(Gn.DFP_CONTENT_PAUSE,t),this.core.getCurrentContainer()||this.adsManager.stop()}},{key:"onContentResumeRequested",value:function(){this.error||(!this.dfpVideoAd.isServedAd&&this.container.trigger(Gn.DFP_AD_NOTSERVED),this.triggerContentResume())}},{key:"containerChanged",value:function(){var e;this.stopListening(this,Gn.DFP_MANAGER_LOADED),this.destroyVideoAd(),this.destroyIMA(),null===(e=this.prebid)||void 0===e||e.reset(),this.container=this.core.activeContainer;var t=this.container.playback;t.options.onPip?this.listenToOnce(this.core.getCurrentContainer().playback,Gn.WM_RESOURCE_READY,(function(){return t.play()})):(this.attachContainerPlugins(),this.configure(),this.bindContainerEvents(),this.trigger(Gn.DFP_CONTENT_ENDED),this.container.trigger(Gn.DFP_CONTENT_ENDED)),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onContainerEnded),this.listenTo(this.container,xe.CONTAINER_STOP,this.onContainerEnded),this.listenToOnce(this.container,Gn.WM_UNMUTED,this.onUnmuted)}},{key:"onUnmuted",value:function(e,t){if(this.adsManager&&t){var n=this.adsManager.getVolume();this.adsManager.setVolume(1),this.adsManager.setVolume(n)}}},{key:"triggerDfpFinished",value:function(){var e=this.isContainerEnded&&this.isAllAdsCompleted,t=this.isContainerEnded&&this.error;(e||t)&&(this.trigger(Gn.DFP_FINISHED),this.container.trigger(Gn.DFP_FINISHED))}},{key:"onContainerEnded",value:function(){this.isContainerEnded=!0,this.bindContainerEvents(),this.triggerDfpFinished()}},{key:"bindContainerEvents",value:function(){this.stopListening(this.container,Gn.WATCH_SESSION_END),this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.container,Gn.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onSessionEnd",value:function(){var e;null===(e=this.prebid)||void 0===e||e.reset(),this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED,this.restartAd)}},{key:"restartAd",value:function(){this.bootstrapApi(),this.startAd()}},{key:"contentEnded",value:function(){this.trigger(Gn.DFP_CONTENT_ENDED),this.container.trigger(Gn.DFP_CONTENT_ENDED),this.adsLoader&&this.adsLoader.contentComplete()}},{key:"contentStarted",value:function(){this.trigger(Gn.DFP_CONTENT_STARTED),this.container.trigger(Gn.DFP_CONTENT_STARTED)}},{key:"onPlayRequestedReady",value:(t=s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.didInitBootstrapAPI,!e.t0){e.next=4;break}return e.next=4,this.bootstrapApi();case 4:this.adDisplayContainer&&this.adDisplayContainer.initialize();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"requestAd",value:function(e){var t,n;this.adsRequest.adTagUrl=e,null===(t=this.adsLoader)||void 0===t||null===(n=t.requestAds)||void 0===n||n.call(t,this.adsRequest),this.container.trigger(Gn.DFP_AD_REQUESTED,this.adsRequest)}},{key:"unescapeHtml",value:function(e){return $("<div/>").html(e).text()}},{key:"destroy",value:function(){this.destroyIMA(),A(f(a.prototype),"destroy",this).call(this)}}],[{key:"DEFAULT_ACCOUNT_ID",get:function(){return 95377733}},{key:"DEFAULT_CMS_ID",get:function(){return 11413}},{key:"DEFAULT_DESCRIPTION_URL",get:function(){return"https://redeglobo.globo.com/"}}]),a}(dt),Zr="dai-error",ea="dai-client-not-available",ta="redirect-url-not-available",na=function(){function e(){l(this,e)}return c(e,[{key:"ssbURL",get:function(){return this.shouldLoadDAIPodServing?this.googleDaiPodSsbUrlTemplate.replace("<%= CUSTOM_ASSET_KEY %>",this.customAssetKey).replace("<%= NETWORK_CODE %>",this.networkCode):this.googleDaiSSBUrlTemplate.replace("<%= ASSET_KEY %>",this.assetKey)}},{key:"isClientScriptAvailable",get:function(){var e,t;return!(null===(e=window.google)||void 0===e||null===(t=e.ima)||void 0===t||!t.dai)}},{key:"load",value:function(e){var t,n,i,r=e.assetKey,a=e.customAssetKey,o=e.networkCode,s=e.adTagParameters,l=e.shouldLoadDAIPodServing,u=e.options;return this.assetKey=r,this.customAssetKey=a,this.networkCode=o,this.adTagParameters=s,this.googleDaiSSBUrlTemplate=null==u||null===(t=u._env)||void 0===t?void 0:t.googleDaiSSBUrlTemplate,this.googleDaiPodSsbUrlTemplate=null==u||null===(n=u._env)||void 0===n?void 0:n.googleDaiPodSsbUrlTemplate,this.googleImaSdkUrl=null==u||null===(i=u._env)||void 0===i?void 0:i.googleImaSdkUrl,this.shouldLoadDAIPodServing=l,Bn.isDAISSBRequired?this.loadSSB():this.loadClient()}},{key:"loadClient",value:function(){var e=this;return new Promise((function(t,n){if(e.isClientScriptAvailable)return t({isSSB:!1});jn.embedScript(e.googleImaSdkUrl).then((function(){return t({isSSB:!1})}),(function(){return e.loadSSBAsFallback(t,n)}))}))}},{key:"loadSSBAsFallback",value:function(e,t){return this.loadSSB().then((function(t){return e(i(i({},t),{},{isSSB:!0}))}),(function(){return t({errorCode:ea})}))}},{key:"loadSSB",value:function(){var e=this;return new Promise((function(t,n){$.ajax({url:e.ssbURL,type:"POST",data:i({"dai-ssb":!0},e.adTagParameters)}).done((function(e){t(i(i({},e),{},{isSSB:!0}))})).fail((function(){n({errorCode:ta})}))}))}}]),e}(),ia=new na,ra=function(){function e(t){var n=t.videoElement,i=t.adUiElement,r=t.uiSettings;l(this,e),this.API=google.ima.dai.api,this._streamManager=new this.API.StreamManager(n,i,r)}return c(e,[{key:"requestLiveStream",value:function(e,t){this.streamRequest=new this.API.LiveStreamRequest,this.streamRequest.assetKey=e,t&&(this.streamRequest.adTagParameters=t),this._streamManager.requestStream(this.streamRequest)}},{key:"requestVODStream",value:function(e,t,n){this.streamRequest=new this.API.VODStreamRequest,this.streamRequest.contentSourceId=e,this.streamRequest.videoId=t,n&&(this.streamRequest.adTagParameters=n),this._streamManager.requestStream(this.streamRequest)}},{key:"requestLivePodStream",value:function(e,t,n){this.streamRequest=new this.API.PodStreamRequest,this.streamRequest.networkCode=e,this.streamRequest.customAssetKey=t,n&&(this.streamRequest.adTagParameters=n),this._streamManager.requestStream(this.streamRequest)}},{key:"addListeners",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=b(e,2),i=n[0],r=n[1];t._streamManager.addEventListener(t.API.StreamEvent.Type[i],r,!1)}))}},{key:"removeListeners",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=b(e,2),i=n[0],r=n[1];t._streamManager.removeEventListener(t.API.StreamEvent.Type[i],r)}))}},{key:"processMetadata",value:function(){var e;return(e=this._streamManager).processMetadata.apply(e,arguments)}},{key:"onTimedMetadata",value:function(){var e;return(e=this._streamManager).onTimedMetadata.apply(e,arguments)}},{key:"reset",value:function(){var e;return(e=this._streamManager).reset.apply(e,arguments)}},{key:"contentTimeForStreamTime",value:function(){var e;return(e=this._streamManager).contentTimeForStreamTime.apply(e,arguments)}},{key:"streamTimeForContentTime",value:function(){var e;return(e=this._streamManager).streamTimeForContentTime.apply(e,arguments)}},{key:"previousCuePointForStreamTime",value:function(){var e;return(e=this._streamManager).previousCuePointForStreamTime.apply(e,arguments)}},{key:"focus",value:function(){var e;return(e=this._streamManager).focus.apply(e,arguments)}}]),e}();function aa(e){return Object.keys(e).reduce((function(t,n){var i=encodeURIComponent(e[n]),r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}function oa(e,t){var n=e.adAccountId||t.adAccountId||"95377733",i=e.adUnit||t.adUnit;return"/".concat(n,"/").concat(i)}var sa="Preroll",la="Midroll",ua="Postroll";function ca(e){return 0===e?sa:-1===e?ua:la}var da=["hls","hls_dai_vod","html5","Tizen","globoplay-sdk-playback"],ha="DAI_RESOURCE_LOADED",fa="DAI_ERROR",pa="DAI_AD_BREAK_STARTED",ga="DAI_AD_BREAK_ENDED",va=function(){function e(){l(this,e),this.cuepoints=[]}return c(e,[{key:"hasCuepoints",get:function(){return this.cuepoints.length>0}},{key:"pushAll",value:function(e){var t=this._calcDiffs(e);this.cuepoints=e.filter((function(e){return e.played})).map((function(e,n){var i=void 0!==t[n-1]?e.start-t[n-1]:e.start;return Math.floor(i)})).filter((function(e){return!!e}))}},{key:"getCuepoint",value:function(e){var t=this.cuepoints.indexOf(Math.floor(e));return this.cuepoints[t]}},{key:"_calcDiffs",value:function(e){var t=0,n=[];return e.forEach((function(e){var i=e.end-e.start;t+=i,n.push(t)})),n}}]),e}(),ma=jn.isDAIVoDEnabled,ya="dai-ad-container",Aa="dai-ad-container--hidden",ba="ssb",Ea="ima-sdk";xe.register(ha),xe.register(fa),xe.register(pa),xe.register(ga);var _a=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).onCuepointsChanged=i.onCuepointsChanged.bind(g(i)),i.render(),i}return c(n,[{key:"name",get:function(){return"dai"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.idPlayback&&this.idPlayback.playback}},{key:"isPlaybackSupported",get:function(){return da.includes(this.idPlayback.innerPlaybackName)}},{key:"attributes",get:function(){return{class:"".concat(ya," ").concat(Aa)}}},{key:"playerVersion",get:function(){return"7.154.0"}},{key:"adTagParameters",get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.adPublisherProvidedID,r=e.daiCustomData,a={},o=i(i({},void 0===r?{}:r),{},{player_version:t});return a.cust_params=aa(o),n&&(a.ppid=n),a}(this.options,this.playerVersion)}},{key:"assetKey",get:function(){var e;return this.idPlayback.useSingleAudioUrls?null===(e=this.idPlayback.currentAudioTrack)||void 0===e?void 0:e.asset_key:this.resource.assetKey}},{key:"render",value:function(){if(!Bn.isDAISSBRequired){var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .dai-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 448;\n}\n.clappr-player#wp3-player-0 .dai-ad-container--hidden {\n  display: none;\n}",{playerId:this.options.playerId});this.el.appendChild(e[0]),this.container.el.appendChild(this.el)}}},{key:"bindEvents",value:function(){this.idPlayback=this.container.playback,this.listenToOnce(this.idPlayback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.idPlayback,Gn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.idPlayback,Gn.WILL_RENEW_RESOURCE,this.onWillRenewResource),this.listenToOnce(this.idPlayback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_SHOW,this.onMediaControlShow),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_HIDE,this.onMediaControlHide),xe.Custom.NAVIGATOR_WILL_MOVE&&this.listenTo(this.container,xe.Custom.NAVIGATOR_WILL_MOVE,this.onNavigatorWillMove)}},{key:"onTimeUpdate",value:function(e){var t=e.current;if(0!==t&&!this.idPlayback.isLive&&this.playedCuePoints.hasCuepoints){var n=this.playedCuePoints.getCuepoint(t);n&&this.container.seek(n+1.1)}}},{key:"onMediaControlShow",value:function(){this.isMediaControlVisible=!0}},{key:"onMediaControlHide",value:function(){this.isMediaControlVisible=!1,this.clearSkipTimeout()}},{key:"onNavigatorWillMove",value:function(e){var t,n,i=e.event;if("ad"===(null===(t=this.innerPlayback)||void 0===t||null===(n=t.currentPlayback)||void 0===n?void 0:n.playbackType)){var r=i.detail,a=r.direction,o=r.sectionId;"right"===a&&o.includes("play_button_navigable")&&this.focusOnSkipButton()}}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onSeekEnd",value:function(){if(!this.idPlayback.isLive)if(this.innerPlayback.isSnapback)this.innerPlayback.isSnapback=!1;else{var e=this.innerPlayback.getCurrentTime(),t=this.streamManager.previousCuePointForStreamTime(e);if(t&&!t.played){var n=this.streamManager.streamTimeForContentTime(e);this.snapForwardTime=n,this.innerPlayback.isSnapback=!0,this.playback.seek(t.start)}}}},{key:"onResourceReady",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.selectedResource;if(r.dai&&this.isPlaybackSupported){var a=(null===(e=this.video)||void 0===e||null===(t=e.selectedResource)||void 0===t?void 0:t.dai)&&!(null!==(n=this.video)&&void 0!==n&&n.isLive);a&&!ma(this.options,this.video)||(this.playedCuePoints=new va,this.options.enableDAIResourceLoader=!0,this.resource=r,this.bindPlaybackEvents(),this.loadDAI())}}},{key:"onFallbackSourceSelected",value:function(){var e;null!==(e=this.resource)&&void 0!==e&&e.shouldPlayWithDAI||this.resetStreamManager()}},{key:"onWillRenewResource",value:function(){this.listenToOnce(this.idPlayback,Gn.WM_RESOURCE_READY,this.onDidResourceRenew)}},{key:"onDidResourceRenew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedResource;t.dai||this.resetStreamManager()}},{key:"bindPlaybackEvents",value:function(){switch(this.listenToOnce(this.idPlayback,xe.PLAYBACK_STOP,this.resetStreamManager),this.listenToOnce(this.idPlayback,xe.PLAYBACK_ENDED,this.resetStreamManager),this.listenToOnce(this.idPlayback,xe.PLAYBACK_ERROR,this.resetStreamManager),this.listenTo(this.idPlayback,xe.PLAYBACK_SEEKED,this.onSeekEnd),this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.idPlayback.innerPlaybackName){case"hls":case"hls_dai_vod":this.listenTo(this.innerPlayback,xe.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,this.onHLSFragParsingMetadata);break;case"html5":this.listenTo(this.innerPlayback,xe.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,this.onHTML5MetadataCueChance)}}},{key:"onHTML5MetadataCueChance",value:function(e){this.streamManager&&e&&this.streamManager.onTimedMetadata(e)}},{key:"onHLSFragParsingMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;this.streamManager&&n&&n.samples.forEach((function(t){return e.streamManager.processMetadata("ID3",t.data,t.pts)}))}},{key:"loadDAI",value:function(){var e=this;return ia.load({assetKey:this.assetKey,customAssetKey:this.resource.customAssetKey,networkCode:this.resource.networkCode,adTagParameters:this.adTagParameters,shouldLoadDAIPodServing:this.resource.shouldLoadDAIPodServing,options:this.options}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isSSB,i=t.stream_id,r=t.stream_manifest,a=t.heartbeat_url,o=t.polling_frequency;return n?(e.resource.shouldLoadDAIPodServing&&e.startPodServingSSBHeartbeating(a,o),e.onDAIResourceLoaded(r,i,ba)):e.initStreamManager()})).catch((function(t){var n=t.errorCode;e.onError({errorCode:n})}))}},{key:"initStreamManager",value:function(){var e,t=new google.ima.dai.api.UiSettings;t.setLocale("pt_br"),this.streamManager=new ra({videoElement:this.idPlayback.videoEl,adUiElement:ne.isSmartTvEnvironment&&!ma(this.options,this.video)?void 0:this.el,uiSettings:t}),null!==(e=this.innerPlayback)&&void 0!==e&&e.setStreamManager&&this.innerPlayback.setStreamManager(this.streamManager);var n={CUEPOINTS_CHANGED:this.onCuepointsChanged,STARTED:this.onAdStarted.bind(this),AD_PROGRESS:this.onAdProgress.bind(this),COMPLETE:this.onAdComplete.bind(this),PAUSED:this.onAdPaused.bind(this),RESUMED:this.onAdResumed.bind(this),SKIPPED:this.onAdSkipped.bind(this),SKIPPABLE_STATE_CHANGED:this.onAdSkippableStateChanged.bind(this)},r={STREAM_INITIALIZED:this.onStreamInitialized.bind(this)};if(this.streamManager.addListeners(i(i({LOADED:this.onDaiLoaded.bind(this),ERROR:this.onDaiError.bind(this),AD_BREAK_STARTED:this.onAdBreakStarted.bind(this),AD_BREAK_ENDED:this.onAdBreakEnded.bind(this)},this.idPlayback.isLive?{}:n),this.resource.shouldLoadDAIPodServing?r:{})),this.idPlayback.isLive)this.requestPodOrLiveStream();else{var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="https://redeglobo.globo.com/";return{iu:oa(e,t),cust_params:ar(e,t),ppid:e.adPublisherProvidedID,description_url:t.urlForConsumption||n}}(this.options,this.video);this.streamManager.requestVODStream(this.resource.contentSourceId,this.resource.assetKey,a)}}},{key:"startPodServingSSBHeartbeating",value:function(e,t){var n=this;if(e&&t){this.heartbeatIntervalId=setInterval((function(){$.ajax({url:e,type:"GET"}).then((function(){return Re.info(n.name,"Hearbeat SSB sent")}),(function(){return Re.warn(n.name,"Hearbeat SSB fail")}))}),1e3*t)}}},{key:"requestPodOrLiveStream",value:function(){var e=this.resource,t=e.customAssetKey,n=e.networkCode,i=e.assetKey;this.resource.shouldLoadDAIPodServing?this.streamManager.requestLivePodStream(n,t,this.adTagParameters):this.streamManager.requestLiveStream(i,this.adTagParameters)}},{key:"onStreamInitialized",value:function(e){var t=e.getStreamData().streamId;this.resource.streamId=t,this.onDAIResourceLoaded("",t,Ea)}},{key:"onAdSkippableStateChanged",value:function(){this.isAdSkipButtonActive=!0,this.isMediaControlVisible||this.focusOnSkipButton()}},{key:"focusOnSkipButton",value:function(){var e=this;this.isAdSkipButtonActive&&(this.streamManager.focus(),this.clearSkipTimeout(),this.skipTimeout=setTimeout((function(){e.container.trigger(Gn.SKIP_CLICK_TIMEOUT),e.skipTimeout=null}),5e3))}},{key:"clearSkipTimeout",value:function(){this.skipTimeout&&clearTimeout(this.skipTimeout),this.skipTimeout=null}},{key:"toggleContainerVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.el.classList.toggle(Aa,!e)}},{key:"onDaiLoaded",value:function(e){var t=e.getStreamData(),n=t.url,i=t.streamId;Re.info(this.name,"DAI loaded, streamId: ".concat(i)),this.onDAIResourceLoaded(n,i,Ea)}},{key:"onCuepointsChanged",value:function(e){var t,n,i,r=(null===(t=e.getStreamData())||void 0===t?void 0:t.cuepoints)||[];this.playedCuePoints.pushAll(r),0===(null===(n=r[0])||void 0===n?void 0:n.start)&&!(null!==(i=r[0])&&void 0!==i&&i.played)&&this.setAdPlayback()}},{key:"onAdBreakStarted",value:function(){this.idPlayback.isLive||(this.container.trigger(Gn.DFP_CONTENT_PAUSE),this.prepareToPlayAdBreak()),this.toggleContainerVisibility(!0),this.container.trigger(xe.Custom.DAI_AD_BREAK_STARTED)}},{key:"prepareToPlayAdBreak",value:function(){this._adPlaybackSet||(this.idPlayback.paused(),this.setAdPlayback())}},{key:"setAdPlayback",value:function(){var e,t;this._adPlaybackSet||(this._idPlayback=this.container.playback,this.container.playback.stopListening(),this.container.stopListening(),this.container.playback=this.innerPlayback,this.container.bindEvents(),this._adPlaybackSet=!0,null===(e=(t=this.playback).onAdBreakStarted)||void 0===e||e.call(t),this.container.settingsUpdate(),this.container.trigger(Gn.DID_SET_AD_PLAYBACK))}},{key:"onAdStarted",value:function(e){var t,n,r=e.getAd(),a=r.getAdPodInfo().getPodIndex(),o=0===a,s=o&&1===r.getAdPodInfo().getAdPosition(),l=-1===a,u=r.getAdPodInfo().getTotalAds(),c=r.getDuration(),d=r.getSkipTimeOffset(),h={skipOffset:-1===d?null:d,category:ca(a),creative:{duration:c},getDuration:function(){return c},isServerSide:function(){return!0},isLinear:function(){return!0},getAdId:function(){return r.getAdId()},getAdPodInfo:function(){return{getPodIndex:function(){return a},getTimeOffset:function(){return r.getSkipTimeOffset()}}},isSkippable:function(){return r.isSkippable()}};null===(t=(n=this.playback).onAdStarted)||void 0===t||t.call(n,c),this.notifyAdBreakReady(u),this.container.trigger(Gn.DFP_AD_LOADED,i(i({},r),h)),s||this.container.playback.trigger(xe.PLAYBACK_PLAY),this.container.trigger(Gn.DFP_AD_STARTED,h),this._isPreRollAdBreak=o,this._isPostRollAdBreak=l}},{key:"notifyAdBreakReady",value:function(e){this._adBreakReadyNotified||(this.container.trigger(Gn.DFP_AD_BREAK_READY,{totalAds:e}),this._adBreakReadyNotified=!0)}},{key:"onAdProgress",value:function(e){var t,n,i=e.getStreamData().adProgressData.currentTime;null===(t=(n=this.playback).onAdProgress)||void 0===t||t.call(n,i)}},{key:"onAdComplete",value:function(){this.container.trigger(Gn.DFP_AD_COMPLETED),!!this.skipTimeout&&this.container.trigger(Gn.SKIP_CLICK_TIMEOUT),this.isAdSkipButtonActive=!1,this.clearSkipTimeout()}},{key:"onAdPaused",value:function(){this.container.trigger(Gn.DFP_AD_PAUSE)}},{key:"onAdResumed",value:function(){this.container.trigger(Gn.DFP_AD_RESUME)}},{key:"onAdSkipped",value:function(){this.container.trigger(Gn.DFP_AD_SKIPPED),this.container.trigger(Gn.SKIP_CLICK_TIMEOUT),this.innerPlayback.play(),this.isAdSkipButtonActive=!1,this.clearSkipTimeout()}},{key:"onAdBreakEnded",value:function(){var e,t;this.idPlayback.isLive||(null===(e=(t=this.playback).onAdBreakEnded)||void 0===e||e.call(t),this.container.trigger(Gn.DFP_CONTENT_RESUME),this._isPostRollAdBreak&&this.container.trigger(Gn.DFP_ALL_ADS_COMPLETED),this.setContentPlayback());this.toggleContainerVisibility(!1),this.container.trigger(xe.Custom.DAI_AD_BREAK_ENDED),this.idPlayback.isLive||(this.container.settingsUpdate(),!this._isPostRollAdBreak&&this._idPlayback.playing(),this._isPreRollAdBreak&&this.idPlayback.checkInitialSeek(),this.snapForwardTime&&this.snapForwardTime>this.container.getCurrentTime()&&(this.container.seek(this.snapForwardTime),this.snapForwardTime=null))}},{key:"setContentPlayback",value:function(){this.container.stopListening(),this.container.playback=this._idPlayback,this.container.playback.bindPlaybackEvents(),this.container.bindEvents(),this._adPlaybackSet=!1,this._adBreakReadyNotified=!1}},{key:"onDaiError",value:function(e){var t=e.getStreamData().errorMessage;Re.warn(this.name,"DAI Error. Error Message: ",t),this.onError({errorCode:Zr,errorMessage:t,event:e,notifiable:!0})}},{key:"onDAIResourceLoaded",value:function(e,t,n){this.container.trigger(xe.Custom.DAI_RESOURCE_LOADED,{url:e,streamId:t,implementationType:n})}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.enableDAIResourceLoader=!1,this.container.trigger(xe.Custom.DAI_ERROR,e),this.resetStreamManager(),this.stopListening()}},{key:"resetStreamManager",value:function(){var e;null===(e=this.streamManager)||void 0===e||e.reset(),this.heartbeatIntervalId&&clearInterval(this.heartbeatIntervalId)}},{key:"destroy",value:function(){this.resetStreamManager(),this.clearSkipTimeout(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ht);function ka(e,t,n){return t=Ia(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Da()?Reflect.construct(t,n||[],Ia(e).constructor):t.apply(e,n))}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Oa(i.key),i)}}function wa(e,t,n){return t&&Sa(e.prototype,t),n&&Sa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ca(){return Ca="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=Pa(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Ca.apply(null,arguments)}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ia(e)}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&La(e,t)}function Da(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Da=function(){return!!e})()}function La(e,t){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},La(e,t)}function Pa(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ia(e)););return e}function Oa(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function xa(e){return xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xa(e)}var Ma=function(e){function t(e){return Ta(this,t),ka(this,t,[e])}return Ra(t,e),wa(t,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.11.4"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,xe.CONTAINER_CLICK,this.click),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var e=this.config.onClickPayload;(this.container.getPlaybackType()!==Je.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==Je.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}])}(ct),Na='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"/>\n</svg>',Ba='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"/>\n</svg>';$('link[rel="shortcut icon"]');var Fa=function(e){this.element=e||window.document,this.initialize()};Fa.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},Fa.KEY_CODES_BY_NAME={},function(){for(var e in Fa.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(Fa.KEY_NAMES_BY_CODE,e)&&(Fa.KEY_CODES_BY_NAME[Fa.KEY_NAMES_BY_CODE[e]]=+e)}(),Fa.MODIFIERS=["shift","ctrl","alt"],Fa.registerEvent=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,Fa.unregisterEvent=document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,Fa.stringContains=function(e,t){return-1!==e.indexOf(t)},Fa.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},Fa.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},Fa.isString=function(e){return Fa.stringContains(Object.prototype.toString.call(e),"String")},Fa.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},Fa.extractModifiers=function(e){var t,n;for(t=[],n=0;n<Fa.MODIFIERS.length;n++)Fa.stringContains(e,Fa.MODIFIERS[n])&&t.push(Fa.MODIFIERS[n]);return t},Fa.extractKey=function(e){var t,n;for(t=Fa.neatString(e).split(" "),n=0;n<t.length;n++)if(!Fa.arrayIncludes(Fa.MODIFIERS,t[n]))return t[n]},Fa.modifiersAndKey=function(e){var t,n;return Fa.stringContains(e,"any")?Fa.neatString(e).split(" ").slice(0,2).join(" "):(t=Fa.extractModifiers(e),(n=Fa.extractKey(e))&&!Fa.arrayIncludes(Fa.MODIFIERS,n)&&t.push(n),t.join(" "))},Fa.keyName=function(e){return Fa.KEY_NAMES_BY_CODE[e+""]},Fa.keyCode=function(e){return+Fa.KEY_CODES_BY_NAME[e]},Fa.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<Fa.MODIFIERS.length;e++)this.lastModifiers[Fa.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),Fa.registerEvent(this.element,"keydown",this.downHandler),Fa.registerEvent(this.element,"keyup",this.upHandler);var n="object"===xa(window.onbeforeunload)?"beforeunload":"unload";Fa.registerEvent(window,n,(function e(){Fa.unregisterEvent(t.element,"keydown",t.downHandler),Fa.unregisterEvent(t.element,"keyup",t.upHandler),Fa.unregisterEvent(window,n,e)}))},Fa.prototype.handler=function(e){var t=this;return function(n){var i,r,a;for(n=n||window.event,t.lastKeyCode=n.keyCode,i=0;i<Fa.MODIFIERS.length;i++)t.lastModifiers[Fa.MODIFIERS[i]]=n[Fa.MODIFIERS[i]+"Key"];for(Fa.arrayIncludes(Fa.MODIFIERS,Fa.keyName(t.lastKeyCode))&&(t.lastModifiers[Fa.keyName(t.lastKeyCode)]=!0),r=t["keys"+Fa.capitalize(e)],i=0;i<r.any.length;i++)!1===r.any[i](n)&&n.preventDefault&&n.preventDefault();if(r[a=t.lastModifiersAndKey()])for(i=0;i<r[a].length;i++)!1===r[a][i](n)&&n.preventDefault&&n.preventDefault()}},Fa.prototype.registerKeys=function(e,t,n){var i,r,a=this["keys"+Fa.capitalize(e)];for(Fa.isString(t)&&(t=[t]),i=0;i<t.length;i++)r=t[i],a[r=Fa.modifiersAndKey(r+"")]?a[r].push(n):a[r]=[n];return this},Fa.prototype.unregisterKeys=function(e,t,n){var i,r,a,o=this["keys"+Fa.capitalize(e)];for(Fa.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(a=t[i],a=Fa.modifiersAndKey(a+""),null===n)delete o[a];else if(o[a])for(r=0;r<o[a].length;r++)if(String(o[a][r])===String(n)){o[a].splice(r,1);break}return this},Fa.prototype.off=function(e){return this.unregisterKeys("down",e,null)},Fa.prototype.delegate=function(e,t,n){return null!==n||void 0!==n?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},Fa.prototype.down=function(e,t){return this.delegate("down",e,t)},Fa.prototype.up=function(e,t){return this.delegate("up",e,t)},Fa.prototype.lastKey=function(e){return e?this.lastModifiers[e]:Fa.keyName(this.lastKeyCode)},Fa.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<Fa.MODIFIERS.length;t++)this.lastKey(Fa.MODIFIERS[t])&&e.push(Fa.MODIFIERS[t]);return Fa.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var Ua=Fa,Va='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"/>\n</svg>',Ha='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"/>\n</svg>',ja='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"/>\n</svg>',Ka=ke.Config,Ga=ke.Fullscreen,Wa=ke.formatTime,Ya=ke.extend,za=ke.removeArrayItem,qa=function(e){function t(e){var n;return Ta(this,t),(n=ka(this,t,[e])).persistConfig=n.options.persistConfig,n.currentPositionValue=null,n.currentDurationValue=null,n.keepVisible=!1,n.fullScreenOnVideoTagSupported=null,n.setInitialVolume(),n.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},n.kibo=new Fa(n.options.focusElement),n.bindKeyEvents(),n.container?$.isEmptyObject(n.container.settings)||(n.settings=$.extend({},n.container.settings)):n.settings={},n.userDisabled=!1,(n.container&&n.container.mediaControlDisabled||n.options.chromeless)&&n.disable(),n.stopDragHandler=function(e){return n.stopDrag(e)},n.updateDragHandler=function(e){return n.updateDrag(e)},$(document).bind("mouseup",n.stopDragHandler),$(document).bind("mousemove",n.updateDragHandler),n}return Ra(t,e),wa(t,[{key:"name",get:function(){return"media_control"}},{key:"supportedVersion",get:function(){return{min:"0.11.4"}}},{key:"disabled",get:function(){var e=this.container&&this.container.getPlaybackType()===Je.NO_OP;return this.userDisabled||e}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return Ge('<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n')}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}},{key:"getExternalInterface",value:function(){var e=this;return{setVolume:this.setVolume,getVolume:function(){return e.volume}}}},{key:"bindEvents",value:function(){var e=this;this.stopListening(),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,xe.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,xe.CORE_MOUSE_LEAVE,(function(){return e.hide(e.options.hideMediaControlDelay)})),this.listenTo(this.core,xe.CORE_FULLSCREEN,this.show),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,xe.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&(this.listenTo(this.container,xe.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,xe.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,xe.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,xe.CONTAINER_ENDED,this.ended),this.listenTo(this.container,xe.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,xe.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,xe.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}},{key:"disable",value:function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}},{key:"enable",value:function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}},{key:"play",value:function(){this.container&&this.container.play()}},{key:"pause",value:function(){this.container&&this.container.pause()}},{key:"stop",value:function(){this.container&&this.container.stop()}},{key:"setInitialVolume",value:function(){var e=this.persistConfig?Ka.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)}},{key:"onVolumeChanged",value:function(){this.updateVolumeUI()}},{key:"onLoadedMetadataOnVideoTag",value:function(){var e=this.playback&&this.playback.el;!Ga.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}},{key:"updateVolumeUI",value:function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var e=this.$volumeBarContainer.width(),t=this.$volumeBarBackground.width(),n=(e-t)/2,i=t*this.volume/100+n;this.$volumeBarFill.css({width:"".concat(this.volume,"%")}),this.$volumeBarScrubber.css({left:i}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var r=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,r).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"/>\n</svg>'),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(Ha),this.applyButtonStyle(this.$volumeIcon)}}},{key:"changeTogglePlay",value:function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(Ba),this.$playStopToggle.append(Va),this.trigger(xe.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(Na),this.$playStopToggle.append(Na),this.trigger(xe.MEDIACONTROL_NOTPLAYING),ne.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}},{key:"mousemoveOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.trigger(xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"mouseleaveOnSeekBar",value:function(e){this.trigger(xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"mousemoveOnVolumeBar",value:function(e){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"playerResize",value:function(e){this.$fullscreenToggle.html("");var t=this.core.isFullscreen()?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"/>\n</svg>':ja;this.$fullscreenToggle.append(t),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(e.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}},{key:"togglePlayPause",value:function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}},{key:"togglePlayStop",value:function(){this.container.isPlaying()?this.container.stop():this.container.play()}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"getVolumeFromUIEvent",value:function(e){return(e.pageX-this.$volumeBarContainer.offset().left)/this.$volumeBarContainer.width()*100}},{key:"toggleMute",value:function(){this.setVolume(this.muted?100:0)}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!n&&Ka.persist("volume",e);var i=function(){t.container&&t.container.isReady?t.container.setVolume(e):t.listenToOnce(t.container,xe.CONTAINER_READY,(function(){t.container.setVolume(e)}))};this.container?i():this.listenToOnce(this,xe.MEDIACONTROL_CONTAINERCHANGED,(function(){return i()}))}},{key:"toggleFullscreen",value:function(){this.trigger(xe.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}},{key:"onActiveContainerChanged",value:function(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(xe.MEDIACONTROL_CONTAINERCHANGED)}},{key:"showVolumeBar",value:function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar()}),t):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return e.$volumeBarContainer.addClass("volume-bar-hide")}),t)))}},{key:"ended",value:function(){this.changeTogglePlay()}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){if(!this.draggingSeekBar){var t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.renderSeekBar()}}},{key:"renderSeekBar",value:function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==Je.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var e=Wa(this.currentPositionValue),t=Wa(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return t=Math.min(100,Math.max(t,0)),this.container&&this.container.seekPercentage(t),this.setSeekPercentage(t),!1}}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible=!0}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible=!1}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!this.disabled){var n=e&&e.clientX!==this.lastMouseX&&e.clientY!==this.lastMouseY;(!e||n||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(xe.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(xe.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return t.hide()}),2e3),e&&(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY));this.updateCursorStyle(!0)}}},{key:"hide",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isVisible()){var n=t||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var i=this.userKeepVisible||this.keepVisible,r=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(t||i||r))this.hideId=setTimeout((function(){return e.hide()}),n);else{this.trigger(xe.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(xe.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var a=!1;this.updateCursorStyle(a)}}}}},{key:"updateCursorStyle",value:function(e){e?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}},{key:"settingsUpdate",value:function(){var e=this.getSettings();!e||this.fullScreenOnVideoTagSupported||Ga.fullscreenEnabled()||(e.default&&za(e.default,"fullscreen"),e.left&&za(e.left,"fullscreen"),e.right&&za(e.right,"fullscreen")),JSON.stringify(this.settings)!==JSON.stringify(e)&&(this.settings=e,this.render())}},{key:"getSettings",value:function(){return $.extend(!0,{},this.container&&this.container.settings)}},{key:"highDefinitionUpdate",value:function(e){this.isHD=e;var t=e?"addClass":"removeClass";this.$hdIndicator[t]("enabled")}},{key:"createCachedElements",value:function(){var e=this.$el.find(".media-control-layer");this.$duration=e.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=e.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=e.find("button.media-control-button[data-playpause]"),this.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}},{key:"resetIndicators",value:function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}},{key:"initializeIcons",value:function(){var e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(Na),e.find("button.media-control-button[data-pause]").append(Ba),e.find("button.media-control-button[data-stop]").append(Va),this.$playPauseToggle.append(Na),this.$playStopToggle.append(Na),this.$volumeIcon.append(Ha),this.$fullscreenToggle.append(ja),this.$hdIndicator.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"/>\n</svg>')}},{key:"setSeekPercentage",value:function(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarPercentage!==e&&(this.displayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:"".concat(e,"%")}),this.$seekBarScrubber.css({left:"".concat(e,"%")}))}},{key:"seekRelative",value:function(e){if(this.settings.seekEnabled){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n,100),this.container.seekPercentage(i)}}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.show(),t()}))}},{key:"bindKeyEvents",value:function(){var e=this;if(!ne.isMobile&&!this.options.disableKeyboardShortcuts){this.unbindKeyEvents(),this.kibo=new Fa(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})),this.bindKeyAndShow("left",(function(){return e.seekRelative(-5)})),this.bindKeyAndShow("right",(function(){return e.seekRelative(5)})),this.bindKeyAndShow("shift left",(function(){return e.seekRelative(-10)})),this.bindKeyAndShow("shift right",(function(){return e.seekRelative(10)})),this.bindKeyAndShow("shift ctrl left",(function(){return e.seekRelative(-15)})),this.bindKeyAndShow("shift ctrl right",(function(){return e.seekRelative(15)}));["1","2","3","4","5","6","7","8","9","0"].forEach((function(t){e.bindKeyAndShow(t,(function(){e.settings.seekEnabled&&e.container&&e.container.seekPercentage(10*t)}))}))}}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}},{key:"parseColors",value:function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&$(e).find("svg path").css("fill",this.buttonsColor)}},{key:"destroy",value:function(){$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),function(e,t,n,i){var r=Ca(Ia(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"destroy",this,3)([])}},{key:"configure",value:function(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(xe.MEDIACONTROL_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=this,t=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings}));var n=We.getStyleFor('.media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: grabbing !important;\n    cursor: url("closed-hand.cur"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: grabbing !important;\n      cursor: url("closed-hand.cur"), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    will-change: transform, opacity;\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    transform: translateY(50px); }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    transform: translateY(-7px);\n    bottom: 0;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n',{baseUrl:this.options.baseUrl});this.$el.append(n[0]),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((function(){return e.hide()}),t),this.disabled&&this.hide()),ne.isSafari&&ne.isMobile&&(ne.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var i=0;return this.displayedSeekBarPercentage&&(i=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(i),setTimeout((function(){!e.settings.seekEnabled&&e.$seekBarContainer.addClass("seek-disabled"),!ne.isMobile&&!e.options.disableKeyboardShortcuts&&e.bindKeyEvents(),e.playerResize({width:e.options.width,height:e.options.height}),e.hideVolumeBar(0)}),0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(xe.MEDIACONTROL_RENDERED),this}}])}(Xe);qa.extend=function(e){return Ya(qa,e)};var $a=ke.formatTime,Xa=function(e){function t(e){var n;return Ta(this,t),(n=ka(this,t,[e])).hoveringOverSeekBar=!1,n.hoverPosition=null,n.duration=null,n.firstFragDateTime=null,n.actualLiveTime=!!n.mediaControl.options.actualLiveTime,n.actualLiveTime&&(n.mediaControl.options.actualLiveServerTime?n.actualLiveServerTimeDiff=(new Date).getTime()-new Date(n.mediaControl.options.actualLiveServerTime).getTime():n.actualLiveServerTimeDiff=0),n}return Ra(t,e),wa(t,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.11.4"}}},{key:"template",get:function(){return Ge("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===Je.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,xe.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,xe.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,xe.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),t=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),t=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(e=t-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=$a(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var n=$a(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),r=this.$el.width(),a=this.hoverPosition*i;a-=r/2,a=Math.max(0,Math.min(a,i-r)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){var e=We.getStyleFor('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}])}(Xe),Qa=jn.getHostname,Ja=jn.applySizeClass,Za=window.WM&&window.WM.Settings||{},eo=Ua,to=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).core._mediaControl=g(i),i.keepVisible=!1,i.userDisabled=!1,i.userKeepVisible=!1,i.isRendered=!1,i.focusElement=i.core.el,i.lastChromelessValue=!!i.options.chromeless,i.lastChromelessValue&&i.updateChromelessState(),i.effectiveDrawerHeightHint="0px",i.kibo=new eo(i.focusElement),i}return c(n,[{key:"name",get:function(){return"globo_media_control"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===Je.NO_OP}},{key:"hasPlaceholder",get:function(){return this._hasPlaceholder},set:function(e){this._hasPlaceholder=e}},{key:"attributes",get:function(){return{class:"media-control".concat(ne.isMobile?" mobile":"").concat(ne.supportsTouchEvents?" touch":"")}}},{key:"styles",get:function(){return'.media-control-notransition {\n  transition: none !important;\n}\n\n.clappr-player#wp3-player-0 .media-control {\n  position: absolute;\n  border-radius: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 997;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control::before, .clappr-player#wp3-player-0 .media-control::after {\n  content: "";\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 88px;\n  background: none;\n  z-index: -1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control::before {\n  top: 0;\n  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control::after {\n  bottom: 0;\n  background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control--background-hide::after, .clappr-player#wp3-player-0 .media-control--background-hide::before {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control.hide-top-background::after {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.mobile::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.6;\n  background: #000;\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::before {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  height: 88px;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.mobile::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-dragging {\n  pointer-events: auto;\n  cursor: grabbing !important;\n}\n.clappr-player#wp3-player-0 .media-control-dragging * {\n  cursor: grabbing !important;\n}\n.clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-element,\n.clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-element,\n.clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-element,\n.clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-element,\n.clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-button {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control-panel__upper {\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer {\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal {\n  opacity: 1;\n  will-change: opacity;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal.modal--hide {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide.touch .media-control-button {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-element,\n.clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-button {\n  pointer-events: none;\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide::before, .clappr-player#wp3-player-0 .media-control.media-control-hide::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-panel__front-layer {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--no-background::before {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control--panels-hide:before {\n  transition: none;\n}\n.clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__lower {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--has-placeholder::after {\n  height: 112px;\n}\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__between {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__between {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .modal-element {\n  z-index: 1000;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container .media-control-position__between {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__right {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  z-index: 300;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper .media-control-position__center {\n  flex-flow: column nowrap;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between, .clappr-player#wp3-player-0 .media-control .media-control-panel__upper {\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .media-control-position__center {\n  flex-flow: column-reverse nowrap;\n  position: relative;\n  z-index: 200;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  display: flex;\n  flex: 1;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n  flex-grow: 1;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__center, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n  padding: 0 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  padding-top: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  padding-bottom: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle > *, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__modal {\n  pointer-events: auto;\n}\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-button[data-playpause] {\n  width: 48px;\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower .media-control-element {\n  padding-top: 4px;\n}\n.clappr-player#wp3-player-0 .media-control-element {\n  padding: 12px;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-element--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control-element--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-button {\n  display: inline-block;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  background-color: transparent;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-button svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control-button:active, .clappr-player#wp3-player-0 .media-control-button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .media-control-button--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-button[data-chromecast] svg.player-cast-loading {\n  width: 24px;\n  height: 24px;\n}\n\n.clappr-player#wp3-player-0 .media-control.ad {\n  background: none;\n  visibility: visible;\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch {\n  visibility: hidden !important;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-button {\n  visibility: hidden !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__lower {\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__modal {\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel > * {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .dfp-countdown {\n  visibility: hidden;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad:after, .clappr-player#wp3-player-0 .media-control.ad:before {\n  content: "";\n  left: 0;\n  height: 48px;\n  background: none;\n  opacity: 1;\n  position: absolute;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  width: 100%;\n  will-change: opacity;\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.ad:before {\n  top: 0;\n  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.ad:after {\n  bottom: 0;\n  background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__between, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__lower .opposites-container {\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  will-change: opacity;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.media-control-hide:before, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:after {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__lower .opposites-container {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide .media-control-panel__upper {\n  pointer-events: none;\n}\n\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n  transform: scale(1);\n}\n.clappr-player#wp3-player-0 .media-control.ad .dfp-countdown {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button svg path[fill],\n.clappr-player#wp3-player-0 .media-control.ad .media-control-element svg path[fill] {\n  fill: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-share],\n.clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-settings],\n.clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-share] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .time-indicator,\n.clappr-player#wp3-player-0 .media-control.ad .live-button,\n.clappr-player#wp3-player-0 .media-control.ad .chromecast-button {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-seekbar] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container__placeholder {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] {\n  position: fixed;\n  width: 100%;\n  left: 50%;\n  transform: translate(-50%);\n  top: calc(100% - 4px);\n  height: 4px;\n  margin-bottom: 0;\n  overflow: hidden;\n  cursor: default;\n  opacity: 1;\n  transition: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] {\n  margin: 0;\n  height: 100%;\n  border-radius: 0;\n  background-color: rgba(255, 255, 255, 0.4);\n  box-shadow: none;\n  transform: scaleY(1);\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  border-radius: 0;\n}\n\n.clappr-player#wp3-player-0 .media-control.live {\n  min-height: auto;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #fff;\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.live .time-indicator {\n  display: none;\n}\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}'}},{key:"events",get:function(){var e={click:"onTap"},t={"mouseenter [data-controls]":"setUserKeepVisible","mouseleave [data-controls]":"resetUserKeepVisible",focusin:"show"},n=i(i(i({},e),t),{},{touchend:this.resetUserKeepVisible});return ne.isHybridDevice?n:ne.isMobile?e:t}},{key:"getTapSide",value:function(e){var t=this.$el.width();return e-this.$el.offset().left<t/2?"left":"right"}},{key:"onTap",value:function(e){this.resetDoubleTapTimeout(),this.checkDoubleTap(e)?this.onDoubleTap(e):this.waitForDoubleTap()}},{key:"waitForDoubleTap",value:function(){var e=this;this.doubleTapWaitingTimeout=setTimeout((function(){e.onSingleTap()}),250)}},{key:"onSingleTap",value:function(){this.toggleMediaControl()}},{key:"onDoubleTap",value:function(e){var t=this.getTapSide(e.pageX);e.preventDefault(),this.core.trigger(Gn.MEDIACONTROL_DOUBLE_TAP,{event:e,tapSide:t})}},{key:"checkDoubleTap",value:function(e){var t=this.getTapSide(e.pageX),n=(new Date).getTime(),i=n-this.lastTapTime,r=i<250&&i>0&&this.lastTapPosition===t;return this.lastTapTime=n,this.lastTapPosition=t,r}},{key:"resetDoubleTapTimeout",value:function(){this.doubleTapWaitingTimeout&&clearTimeout(this.doubleTapWaitingTimeout),this.doubleTapWaitingTimeout=null}},{key:"toggleMediaControl",value:function(){this.isVisible()?this.hideDelayed(0,!0):this.show()}},{key:"template",get:function(){return Ge('<div class="media-control-panel">\n  <div class="media-control-panel__back-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__upper">\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n    <div class="media-control-position__center"></div>\n  </div>\n  <div class="media-control-panel__middle">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__between">\n    <div class="media-control-position__wrapper">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__center"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__lower" data-controls>\n    <div class="media-control-position__center"></div>\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__between"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__front-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__modal"></div>\n</div>\n')}},{key:"getPanel",value:function(e){return this.$el.find(".media-control-panel__".concat(e))}},{key:"getExternalInterface",value:function(){return{showMediaControlPanel:this.showPanel,hideMediaControlPanel:this.hidePanel}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this.playerResize),this.listenTo(this,Gn.MEDIACONTROL_MODAL_SHOW,this.showModal),this.listenTo(this,Gn.MEDIACONTROL_MODAL_HIDE,this.hideModal),this.listenTo(this,Gn.MEDIACONTROL_KEEPVISIBLE,(function(t){return t?e.setUserKeepVisible():e.resetUserKeepVisible()})),this.listenTo(this,Gn.MEDIACONTROL_ITEMCLICKED,this.show),this.listenTo(this.core,Gn.WILL_SHOW_MODAL_ELEMENT,this.onModalElementShow),this.listenTo(this.core,Gn.DID_HIDE_MODAL_ELEMENT,this.onModalElementHide),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,Gn.WILL_SHOW_DRAWER,this.onStartExpandDrawer),this.listenTo(this.core,Gn.WILL_HIDE_DRAWER,this.onStartShrinkDrawer),this.listenTo(this.core,Gn.DRAWER_HAS_PLACEHOLDER,this.onPlaceholderRequested),this.listenTo(this.core,Gn.SYNC_DRAWER_STATE_RESPONSE,this.syncWithDrawerIsShownResponse),this.listenTo(this.core,xe.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,xe.CORE_MOUSE_LEAVE,this.hideDelayed),this.listenTo(this.core,Gn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Gn.STOP_DRAGGING_SEEKBAR,this.onStopDragginSeekbar),this.listenTo(this.core,Gn.TAP_TO_UNMUTE_CLICKED,this.resetFocus)}},{key:"onStartExpandDrawer",value:function(){this.updatePanelsVisibility({hide:!0,backgroundHide:!0,opaque:!0}),this.$modal.addClass("modal--hide")}},{key:"onStartShrinkDrawer",value:function(){this.$modal&&0==this.$modal.contents().length?(this.updatePanelsVisibility({hide:!1,backgroundHide:!1,opaque:!1}),ne.isMobile&&this.show()):this.$modal.removeClass("modal--hide")}},{key:"bindContainerEvents",value:function(){this.container&&(this.container.trigger(xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.listenTo(this.container,xe.CONTAINER_PLAY,this.updatePlaybackTypeClass),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.updatePlaybackTypeClass),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,Gn.DFP_AD_SKIPPED,this.resetFocus),this.listenTo(this.container,Gn.DFP_AD_CLICKED,this.resetFocus),this.listenTo(this.container,xe.Custom.DAI_AD_BREAK_STARTED,this.onDAIAdBreakStarted),this.listenTo(this.container,xe.Custom.DAI_AD_BREAK_ENDED,this.onDAIAdBreakEnded),ne.isMobile&&this.listenTo(this.container,Gn.WILL_QUICK_SEEK,this.hide),this.render(),this.container.mediaControlDisabled&&this.disable())}},{key:"onDAIAdBreakStarted",value:function(){this.$el.addClass("media-control--dai")}},{key:"onDAIAdBreakEnded",value:function(){this.$el.removeClass("media-control--dai")}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.lastChromelessValue=this.options.chromeless,this.options.chromeless?(this.options.allowUserInteraction=!1,this.disable(),this.$el.hide()):(this.options.allowUserInteraction=!0,this.enable(),this.$el.show())}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,(this.container&&this.container.mediaControlDisabled||this.core.options.chromeless)&&this.disable(),this.bindContainerEvents(),this.updatePlaybackTypeClass(),this.trigger(xe.MEDIACONTROL_CONTAINERCHANGED)}},{key:"createCachedElements",value:function(){this.$modal=this.$el.find(".media-control-panel__modal"),this.$lowerPanel=this.$el.find(".media-control-panel__lower"),this.$upperPanel=this.$el.find(".media-control-panel__upper")}},{key:"initMediaControlPlugins",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof Tr})).forEach((function(t){return e.renderMediaControlPlugin(t)}))}},{key:"renderMediaControlPlugin",value:function(e){var t=e.panel,n=e.position,i=e.el,r=".media-control-panel__".concat(t," ").concat(n?".media-control-position__".concat(n):"");this.$el.find(r).append(i),e.render()}},{key:"onStartDraggingSeekbar",value:function(){this.hidePanel({panel:"upper"}),this.hidePanel({panel:"between"})}},{key:"onStopDragginSeekbar",value:function(){this.showPanel({panel:"upper"}),this.showPanel({panel:"between"})}},{key:"updatePlaybackTypeClass",value:function(){if(this.container){var e=this.container.getPlaybackType();this.$el.removeClass("vod live dvr ad dvr-disabled"),e&&this.$el.addClass(e),this.addDVRClass(e),"ad"===e&&this.core.$el.removeClass("nocursor")}}},{key:"addDVRClass",value:function(e){"live"===e&&(this.container.isDvrEnabled()?this.container.isDvrInUse()&&this.$el.addClass("dvr"):this.$el.addClass("dvr-disabled"))}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0,this.trigger(Gn.MEDIACONTROL_KEEPVISIBLE,!0))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1,this.trigger(Gn.MEDIACONTROL_KEEPVISIBLE,!1))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=i({hide:!0},e),this.keepVisible=!1,this.userDisabled=!0,this.userKeepVisible=!1,e.hide&&this.hide(),this.updatePlaybackTypeClass()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isRendered&&this.render();var t=this.container.getPlaybackType(),n=Za&&Za.MediaControl||{},r=n.ShowOnStartList,a=(r||[]).find((function(e){return e.test(Qa())})),o=a||"ad"===t;e=i({show:o},e),this.options.chromeless||(this.userDisabled=!1,e.show&&!ne.supportsTouchEvents&&this.show())}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!ne.isMobile||!e||"mousemove"!==e.type){clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),3e3),this.disabled||this.isVisible()||(this.trigger(xe.MEDIACONTROL_SHOW),this.core.trigger(xe.MEDIACONTROL_SHOW),this.container.trigger(xe.CONTAINER_MEDIACONTROL_SHOW),this.$el.removeClass("media-control-hide"),this.updateCursorStyle(!0))}}},{key:"hideDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.container&&(this.isVisible()&&(!ne.supportsTouchEvents||this.container.isPlaying())||n)){var i=t||3e3;clearTimeout(this.hideId),(this.disabled||!1!==this.options.hideMediaControl)&&(!this.disabled&&(t||this.userKeepVisible||this.keepVisible)?this.hideId=setTimeout((function(){return e.hideDelayed()}),i):this.hide())}}},{key:"hide",value:function(){!this.container||this.keepVisible||this.userKeepVisible||(this.core.trigger(xe.MEDIACONTROL_HIDE),this.trigger(xe.MEDIACONTROL_HIDE),this.container.trigger(xe.CONTAINER_MEDIACONTROL_HIDE),this.$el.addClass("media-control-hide"),this.hideModal(),this.updateCursorStyle(!1))}},{key:"updateCursorStyle",value:function(e){"ad"!==this.container.getPlaybackType()&&(e||this.disabled?this.core.$el.removeClass("nocursor"):this.core.$el.addClass("nocursor"))}},{key:"showPanel",value:function(e){var t=e.panel;this.getPanel(t).removeClass("panel--hide")}},{key:"hidePanel",value:function(e){var t=e.panel;this.getPanel(t).addClass("panel--hide")}},{key:"showModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$modal.html(e),this.$modal.show().off("transitionend"),this.$modal.removeClass("modal--hide"),t.hidePanels&&this.updatePanelsVisibility({hide:!0}),this.updateClickToPausePlugin({enable:!1}),this.updateCastInfoVisibility({hidden:!0})}},{key:"hideModal",value:function(){var e=this,t=this.$modal&&this.$modal.contents();!t||t&&!t.length||(this.$modal.addClass("modal--hide").on("transitionend",(function(){e.$modal.hide().off("transitionend"),e.$modal.html("")})),this.syncWithDrawerIsShownRequest(),this.updatePanelsVisibility({hide:this.drawerOverModal}),this.updateClickToPausePlugin({enable:!0}),this.updateCastInfoVisibility({hidden:!1}))}},{key:"syncWithDrawerIsShownRequest",value:function(){this.core.trigger(Gn.SYNC_DRAWER_STATE_REQUEST)}},{key:"syncWithDrawerIsShownResponse",value:function(e){this.drawerOverModal=e}},{key:"onModalElementShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.addClass("".concat(t,"-modal--visible"))}},{key:"onModalElementHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.removeClass("".concat(t,"-modal--visible"))}},{key:"updateCastInfoVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hidden?"addClass":"removeClass";if(this.container&&this.container.$el[t]("chromecast-playback-overlay--hidden"),"boolean"==typeof e.opaque){var n=e.opaque?"addClass":"removeClass";this.$el[n]("media-control--panels-opaque")}}},{key:"onPlaceholderRequested",value:function(e){this.hasPlaceholder=!0,this.effectiveDrawerHeightHint=e}},{key:"updateClickToPausePlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable?"enable":"disable",n=this.container.getPlugin("click_to_pause");!ne.isMobile&&n&&n[t]()}},{key:"updatePanelsVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$el.toggleClass("media-control--panels-hide",!!e.hide).toggleClass("media-control--background-hide",!!e.backgroundHide)}},{key:"updateBackgroundType",value:function(){if(this.hasPlaceholder)this.$el.addClass("media-control--has-placeholder");else if(!(ne.isMobile||ne.isSmartTvEnvironment||this.disabled)){var e=this.$lowerPanel.position().top,t=this.$lowerPanel.height(),n=this.$lowerPanel.offsetParent().height(),i=Math.trunc(n-(e+t)),r=i>4;i!=this._bottomPanelPosition&&(this._bottomPanelPosition=i,r?this.$el.addClass("mobile"):this.$el.removeClass("mobile"));var a=this.$upperPanel.height();a!=this._upperPanelHeight&&(this._upperPanelHeight=a,r||0!=a?this.$el.removeClass("hide-top-background"):this.$el.addClass("hide-top-background"))}}},{key:"addResizeObserver",value:function(){var e=this;this.removeResizeObserver(),this._resizeInterval=setInterval((function(){return e.updateBackgroundType()}),500)}},{key:"removeResizeObserver",value:function(){this._resizeInterval&&clearInterval(this._resizeInterval)}},{key:"destroy",value:function(){this.removeResizeObserver(),A(f(n.prototype),"destroy",this).call(this)}},{key:"playerResize",value:function(e){Ja(this.$el,e.width,e.height)}},{key:"resetFocus",value:function(){this.focusElement.focus()}},{key:"parsedStyle",value:function(){var e=this.styles.toString();return e.replace(/drawerHeightHint/g,this.effectiveDrawerHeightHint)}},{key:"render",value:function(){if(!this.container||this.isRendered)return this;var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Kn.getStyleFrom(this.parsedStyle(),e);return this.$el.html(this.template()),this.$el.append(t[0]),this.core.$el.append(this.el),this.createCachedElements(),this.initMediaControlPlugins(),this.updatePlaybackTypeClass(),this.updateBackgroundType(),this.addResizeObserver(),this.disabled&&this.hide(),this.isRendered=!0,this.trigger(xe.MEDIACONTROL_RENDERED),this}}]),n}(Xe),no=function(e){h(n,e);var t=m(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"name",get:function(){return"play_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return ne.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return ne.supportsTouchEvents?"center":"left"}},{key:"attributes",get:function(){return{class:"media-control-button","data-playpause":""}}},{key:"events",get:function(){return{click:this.togglePlayPause}}},{key:"isPauseDisabled",get:function(){var e=this.container&&this.container.getPlaybackType()===Je.LIVE,t=this.container.playback&&!this.container.playback.dvrEnabled;return e&&t}},{key:"destroy",value:function(){this.unbindKeyEvents()}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,xe.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_ENDED,this.changeTogglePlay),this.listenTo(this.container,Gn.WM_SPINNER_START,this.hidePlayButton),this.listenTo(this.container,Gn.WM_SPINNER_STOP,this.showPlayButton))}},{key:"hidePlayButton",value:function(){ne.supportsTouchEvents&&this.$el.hide()}},{key:"showPlayButton",value:function(){ne.supportsTouchEvents&&this.$el.show()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("space")}},{key:"onContainerChanged",value:function(){this.bindContainerEvents(),this.changeTogglePlay()}},{key:"changeTogglePlay",value:function(){this.$el.html(""),this.container&&this.container.isPlaying()?(this.isPauseDisabled?this.$el.hide():(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Pausar</span>'),this.$el.removeClass("play"),this.$el.addClass("pause"),this.$el.show()),this.trigger(xe.MEDIACONTROL_PLAYING)):(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8 5v14l11-7z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir</span>'),this.$el.removeClass("stop pause"),this.$el.addClass("play"),this.$el.show(),this.trigger(xe.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$el)}},{key:"togglePlayPause",value:function(){if(!this.isPauseDisabled)return this.container.isPlaying()?this.container.pause({userInvoked:!0}):this.container.play({userInvoked:!0}),!1;!this.container.isPlaying()&&this.container.play({userInvoked:!0})}},{key:"render",value:function(){return this.bindKeyEvents(),this.changeTogglePlay(),this}}]),n}(Tr),io='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path fill="#FFF" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/>\n  </g>\n</svg>',ro=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"back_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"backButtonEnabled",get:function(){return this.options.events&&"function"==typeof this.options.events.onBackButtonClicked}},{key:"attributes",get:function(){return{class:"media-control-button","data-controls":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onClick",value:function(){this.backButtonEnabled&&this.core.trigger(Gn.BACK_BUTTON_CLICKED)}},{key:"onOptionsChange",value:function(){this.lastBackButtonValue!==!!this.backButtonEnabled&&this.updateBackButtonState()}},{key:"updateBackButtonState",value:function(){this.backButtonEnabled?this.show():this.hide(),this.lastBackButtonValue=this.backButtonEnabled}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){var e=$("<span/>").addClass("visually-hidden").text("Sair do vídeo");return this.$el.html(""),this.$el.append(io),this.$el.append(e),this.updateBackButtonState(),this}}]),n}(Tr),ao=function(e){h(n,e);var t=m(n);function n(){var e;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).isPiPActive=!1,e}return c(n,[{key:"name",get:function(){return"PIP"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"attributes",get:function(){return{class:"media-control-button","data-pip":""}}},{key:"isLive",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.isLive}},{key:"isBrowserSupportPiP",get:function(){var e=!ne.isiOS&&(ne.isChrome||ne.isEdge||ne.isSafari),t=this.isLive&&(ne.isSafari||ne.isiOS);return document.pictureInPictureEnabled&&(e||t)}},{key:"events",get:function(){return{click:this.togglePiP}}},{key:"isPiPAllowed",get:function(){return this.isBrowserSupportPiP&&!this.options.disablePiPButton}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.isPiPAllowed&&this.bindKeyEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback),this.container=this.core.activeContainer,this.idPlayback=this.container.playback,this.container&&(this.listenTo(this.idPlayback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,xe.CONTAINER_PIP_ENTER,this.onEnterPiP),this.listenTo(this.container,xe.CONTAINER_PIP_EXIT,this.onExitPiP),this.listenTo(this.container,Gn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,Gn.DFP_CONTENT_RESUME,this.onAdBreakEnded),this.isPiPActive&&this.enterPiPOnContentPlay())}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("p",(function(){return e.togglePiP()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("p")}},{key:"togglePiP",value:function(){this.isPiPActive?this.container.exitPiP():this.container.enterPiP()}},{key:"onEnterPiP",value:function(){this.isPiPActive=!0,this.updateLabel()}},{key:"onExitPiP",value:function(){this.isPiPActive=!1,this.updateLabel()}},{key:"onAdStarted",value:function(){this.isPiPActive&&this.container.enterPiP()}},{key:"onAdBreakEnded",value:function(){this.isPiPActive&&this.enterPiPOnContentPlay()}},{key:"enterPiPOnContentPlay",value:function(){var e=this;this.stopListening(this.idPlayback,xe.PLAYBACK_PLAY),this.listenToOnce(this.idPlayback,xe.PLAYBACK_PLAY,(function(){return e.container.enterPiP()}))}},{key:"onResourceReady",value:function(){this.isPiPAllowed?this.enablePiPButton():this.disablePiPButton()}},{key:"disablePiPButton",value:function(){this.isPiPActive&&document.exitPictureInPicture(),this.$el.hide()}},{key:"enablePiPButton",value:function(){this.$el.show()}},{key:"render",value:function(){var e=$("<span />").addClass("visually-hidden");this.$el.html(""),this.$el.append('<svg width="23" height="18" viewBox="0 0 23 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18.2689 8H10.2689V14H18.2689V8ZM16.2689 12H12.2689V10H16.2689V12ZM20.2689 0H2.26892C1.16892 0 0.268921 0.88 0.268921 1.98V16C0.268921 17.1 1.16892 18 2.26892 18H20.2689C21.3689 18 22.2689 17.1 22.2689 16V1.98C22.2689 0.88 21.3689 0 20.2689 0ZM20.2689 16.02H2.26892V1.97H20.2689V16.02Z" fill="#EEEEEE"/>\n</svg>'),this.$el.append(e),this.updateLabel()}},{key:"updateLabel",value:function(){var e=this.isPiPActive?"Restaurar tela cheia":"Minimizar vídeo";this.$el.find(".visually-hidden").text(e)}},{key:"destroy",value:function(){this.unbindKeyEvents(),this.isPiPActive&&document.exitPictureInPicture(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(Tr),oo=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).options.disableFullScreenButton&&i.disable(),i.fullScreenOnVideoTagSupported=null,i}return c(n,[{key:"name",get:function(){return"fullscreen_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"screenOrientationAvailable",get:function(){var e;return null===(e=screen)||void 0===e?void 0:e.orientation}},{key:"isIdle",get:function(){var e=this.container.getPlugin("poster");return e&&!e.$el.hasClass("poster--hidden")}},{key:"attributes",get:function(){return{class:"media-control-button","data-fullscreen":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"getExternalInterface",value:function(){return{toggleFullscreen:this.toggleFullscreen}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_RESIZE,this.changeToggleFullscreen),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e,t;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.fullScreenOnVideoTagSupported=null,this.container&&(this.bindKeyEvents(),this.listenTo(this.container,xe.CONTAINER_DBLCLICK,this.toggleFullscreen),ne.isiOS&&this.listenTo(this.container,Gn.WILL_SET_AD_PLAYBACK,this.toggleFullscreenForiOSAdPlayback),"video"===(null===(e=this.playback)||void 0===e||null===(t=e.videoEl)||void 0===t?void 0:t.nodeName.toLowerCase())&&this.listenToOnce(this.container,xe.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag),(ne.isIE&&!ne.isIE11||ne.supportsTouchEvents)&&this.stopListening(this.container,xe.CONTAINER_DBLCLICK))}},{key:"toggleFullscreenForiOSAdPlayback",value:function(){this.core.isFullscreen()&&this.toggleFullscreen()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("f",(function(){return e.toggleFullscreen()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("f")}},{key:"onLoadedMetadataOnVideoTag",value:function(){!ke.Fullscreen.fullscreenEnabled()&&this.playback.videoEl.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.render())}},{key:"changeToggleFullscreen",value:function(){this.$el.html(""),ke.Fullscreen.fullscreenElement()?this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M7 15h2v6H7v-4H3v-2h4zm10-8h4v2h-6V3h2v4zM7 9H3V7h4V3h2v6H7zm10 6h4v2h-4v4h-2v-6h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Sair do modo tela cheia</span>'):this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19 21h-4v-2h4v-4h2v6h-2zm0-18h2v6h-2V5h-4V3h4zM5 19h4v2H3v-6h2v4zM5 3h4v2H5v4H3V3h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Tela cheia</span>'),this.applyButtonStyle(this.$el)}},{key:"onClick",value:function(){this.toggleFullscreen()}},{key:"toggleFullscreen",value:function(){this.container.fullscreen(),this.core.toggleFullscreen(),this.mediaControl.resetUserKeepVisible()}},{key:"render",value:function(){if(this.fullScreenOnVideoTagSupported||ke.Fullscreen.fullscreenEnabled())return this.changeToggleFullscreen(),this}}]),n}(Tr),so=function(e){h(n,e);var t=m(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"name",get:function(){return"time_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"hasSizeChanged",get:function(){return this.lastSize===this.actualSize}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"events",get:function(){return{click:this.toggleTimeIndicator}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.setDuration))}},{key:"setDuration",value:function(e){var t=ke.formatTime(e.duration/1e3);this.$duration.text(t),this.$rightContainer=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__right")}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&this.$rightContainer&&(this.actualSize=e,this.shouldCollapse=this.actualSize.width-this.$rightContainer.width()<130,this.shouldCollapse?(this.$el.addClass("time-indicator--collapse"),this.$duration.hide()):(this.$el.removeClass("time-indicator--collapse"),this.$duration.show()),this.$position.show(),this.updateTimeIndicator(),this.lastSize=this.actualSize)}},{key:"onTimeUpdate",value:function(e){"ad"!==e.playbackType&&(this.currentPositionValue=e.current<0?e.total:e.current,this.currentDurationValue=e.total,null!==this.currentPositionValue&&null!==this.currentDurationValue&&this.updateTimeIndicator())}},{key:"updateTimeIndicator",value:function(){this.updatePosition(),this.shouldCollapse?this.updateRemainingTime():this.updateDuration()}},{key:"updatePosition",value:function(){if(!this.hasSizeChanged||parseInt(this.currentPositionValue)!==parseInt(this.lastPositionValue)){var e=ke.formatTime(this.currentPositionValue);this.$position.text(e),this.lastPositionValue=this.currentPositionValue}}},{key:"updateRemainingTime",value:function(){var e=-1*(this.currentPositionValue-this.currentDurationValue);if(!this.hasSizeChanged||parseInt(e)!==parseInt(this.lastRemainingTime)){var t=e>1,n="";n=(t?"-":"")+(n=ke.formatTime(t?e:0)),this.lastRemainingTime=e,this.$duration.text(n)}}},{key:"updateDuration",value:function(){if(!this.hasSizeChanged||parseInt(this.currentDurationValue)!==parseInt(this.lastDurationValue)){var e=ke.formatTime(this.currentDurationValue);this.$duration.text(e),this.lastDurationValue=this.currentDurationValue}}},{key:"toggleTimeIndicator",value:function(e){e&&e.stopPropagation(),this.shouldCollapse&&(this.$position.is(":visible")?this.$position.hide():this.$position.show(),this.$duration.is(":visible")?this.$duration.hide():this.$duration.show())}},{key:"render",value:function(){this.$position=$("<span/>").attr("data-position","").html("00:00"),this.$separator=$("<span/>").addClass("separator").html("/"),this.$duration=$("<span/>").attr("data-duration","").html("00:00"),this.$el.empty();var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .time-indicator {\n  display: flex;\n  height: 24px;\n  box-sizing: content-box;\n  align-items: center;\n  cursor: default;\n  position: relative;\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  line-height: 16px;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .time-indicator .separator {\n  display: inline;\n  margin: 0 5px;\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .time-indicator--collapse {\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .time-indicator--collapse .separator,\n.clappr-player#wp3-player-0 .time-indicator--collapse [data-duration] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control:not(.mobile) .time-indicator {\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 [data-position],\n.clappr-player#wp3-player-0 [data-duration] {\n  display: inline;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$position[0]),this.$el.append(this.$separator[0]),this.$el.append(this.$duration[0]),this}}]),n}(Tr),lo='<span class="skip-button__label"><%= label %></span>\n',uo='.clappr-player#wp3-player-0 .media-control .skip-button {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: -8px;\n  right: 0;\n  width: auto;\n  height: auto;\n  border-radius: 4px;\n  background-color: #333;\n  margin: 0 12px;\n  pointer-events: auto;\n  z-index: 400;\n  will-change: opacity, transform;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button__label {\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover, .clappr-player#wp3-player-0 .media-control .skip-button:focus {\n  background-color: #eeeeee;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button:focus .skip-button__label {\n  color: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button:focus svg path[fill] {\n  fill: #111111 !important;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--left {\n  right: auto;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button svg {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button, .clappr-player#wp3-player-0 .media-control .skip-button--start_over {\n  padding: 6px 12px;\n  background-color: #eee;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg, .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n  margin-top: 2px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg path[fill] {\n  fill: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button--start_over .skip-button__label {\n  color: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button:hover, .clappr-player#wp3-player-0 .media-control .skip-button--live_button:focus, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:hover, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:focus {\n  background-color: #cecece;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg {\n  transform: rotate(180deg);\n  margin-left: 5px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n  margin-right: 5px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--sticky {\n  transform: translateY(0px);\n}\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--force-transform-animation {\n  transition: transform 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-hide .skip-button--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control-hide.touch .skip-button--sticky {\n  transform: translateY(52px);\n}\n.clappr-player#wp3-player-0 .media-control-hide.touch.w360 .skip-button--sticky {\n  transform: translateY(60px);\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible.touch .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible.touch .skip-button {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible .skip-button {\n  opacity: 0.5;\n  z-index: 100;\n}\n.clappr-player#wp3-player-0 .media-control.settings-modal--visible .skip-button {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .skip-button {\n  visibility: hidden;\n  opacity: 0;\n}',co=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"skip_button"}},{key:"type",get:function(){return""}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ge(lo)}},{key:"label",get:function(){return""}},{key:"startCuepointType",get:function(){return""}},{key:"endCuepointType",get:function(){return""}},{key:"shouldActive",get:function(){return this.endCuepoint.time-this.startCuepoint.time>=10}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.type," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"isSticky",get:function(){return this.$el.hasClass("skip-button--sticky")}},{key:"onClick",value:function(){this.disableButton(),this.container.trigger(Gn.SKIP_BUTTON_CLICKED,{name:this.name}),this.seekToEndCuepoint()}},{key:"seekToEndCuepoint",value:function(){this.endCuepoint&&(this.container.seek(this.endCuepoint.time),!this.container.isPlaying()&&this.container.play())}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,Gn.DID_LOAD_CUEPOINTS,this.onCuepointsLoaded),this.listenTo(this.container,Gn.DFP_AD_STARTED,this.onAdStarted))}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onCuepointsLoaded",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.startCuepoint=t.find((function(t){return t.type===e.startCuepointType})),this.endCuepoint=t.find((function(t){return t.type===e.endCuepointType})),this.startCuepoint&&this.endCuepoint&&this.shouldActive&&this.listenTo(this.container.playback,xe.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.current,n=t>=this.startCuepoint.time&&t<this.endCuepoint.time,i=t>=this.startCuepoint.time&&t<this.startCuepoint.time+5;n!==this.isActive&&(n?this.enableButton():this.disableButton()),i!==this.isSticky&&(i?this.setSticky():this.resetSticky())}},{key:"enableButton",value:function(){this.container.trigger(Gn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden"),this.bindKeyEvents(),this.isActive=!0}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden").removeClass("skip-button--sticky").off("transitionend"),this.isActive=!1}},{key:"setSticky",value:function(){var e=this;if(this.mediaControl.isVisible())return this.$el.addClass("skip-button--sticky skip-button--force-transform-animation");this.$el.addClass("skip-button--sticky").on("transitionend",(function(){e.$el.addClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetSticky",value:function(){var e=this;this.$el.removeClass("skip-button--sticky").on("transitionend",(function(){e.$el.removeClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetState",value:function(){this.isActive=!1}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("enter",(function(){e.isSticky&&e.onClick()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("enter")}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Kn.getStyleFrom(uo,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.append(t[0]),this}},{key:"destroy",value:function(){this.unbindKeyEvents(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(Tr),ho=jn.seekStringToSeconds,fo=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"skip_recap"}},{key:"type",get:function(){return"recap"}},{key:"label",get:function(){return"Pular Resumo"}},{key:"startCuepointType",get:function(){return"recap_start"}},{key:"endCuepointType",get:function(){return"recap_end"}},{key:"autoSkipEnabled",get:function(){var e=this.options.resumeAt||ho();return this.options.skipRecap&&this.endCuepoint&&!e}},{key:"onCuepointsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(A(f(n.prototype),"onCuepointsLoaded",this).call(this,e),this.autoSkipEnabled){var t=this.endCuepoint.time;t&&(this.container.trigger(Gn.WILL_AUTO_SKIP_RECAP),this.container.playback.setInitialTime(t))}}}]),n}(co),po=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"skip_intro"}},{key:"type",get:function(){return"intro"}},{key:"label",get:function(){return"Pular Abertura"}},{key:"startCuepointType",get:function(){return"opening_start"}},{key:"endCuepointType",get:function(){return"opening_end"}}]),n}(co),go=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"skip_ad_cast"}},{key:"type",get:function(){return"ad_cast"}},{key:"label",get:function(){return"Pular anúncio"}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.listenTo(this.container,Gn.CHROMECAST_AD_BREAK_CLIP_CAN_SKIP,this.enableButton),this.listenTo(this.container,Gn.CHROMECAST_AD_BREAK_CLIP_ENDED,this.disableButton)}}]),n}(co),vo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yo(e,t,module){return e(module={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&module.path)}},module.exports),module.exports}function Ao(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}var bo="Expected a function",Eo=/^\s+|\s+$/g,_o=/^[-+]0x[0-9a-f]+$/i,ko=/^0b[01]+$/i,To=/^0o[0-7]+$/i,So=parseInt,wo="object"==typeof vo&&vo&&vo.Object===Object&&vo,Co="object"==typeof self&&self&&self.Object===Object&&self,Io=wo||Co||Function("return this")(),Ro=Object.prototype.toString,Do=Math.max,Lo=Math.min,Po=function(){return Io.Date.now()};function Oo(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(bo);function f(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function p(e){return u=e,s=setTimeout(v,t),c?f(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=Po();if(g(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?Lo(n,a-(e-u)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,o)}function y(){var e=Po(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return p(l);if(d)return s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=Mo(t)||0,xo(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Do(Mo(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},y.flush=function(){return void 0===s?o:m(Po())},y}function xo(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Mo(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Ro.call(e)}(e))return NaN;if(xo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Eo,"");var n=ko.test(e);return n||To.test(e)?So(e.slice(2),n?2:8):_o.test(e)?NaN:+e}var No=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(bo);return xo(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Oo(e,t,{leading:i,maxWait:t,trailing:r})},Bo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n     <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11.5 18V6L3 12l8.5 6zm.5-6l8.5 6V6L12 12z" fill="#FFF"/>\n    </g>\n</svg>',Fo=jn.getHostname,Uo=jn.getCurrentTime,Vo=jn.getTimeFromPosition,Ho=window.WM&&window.WM.Settings||{},jo=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e))._throttledPositionUpdate=No((function(){var e;return(e=i).updateButtonState.apply(e,arguments)}),5e3,{trailing:!1}),i.currentProgram={},((Ho&&Ho.StartOver||{}).Blacklist||[]).find((function(e){return e.test(Fo())}))&&i.destroy(),i}return c(n,[{key:"name",get:function(){return"start_over"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ge(lo)}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"programStartPositionOffset",get:function(){return Uo(this.innerPlayback)-this.currentProgram.startTime}},{key:"programStartPosition",get:function(){return this.innerPlayback.getCurrentTime()-this.programStartPositionOffset}},{key:"label",get:function(){var e="Início",t="Assistir do ".concat(e.toLowerCase());return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--left skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"canSeekToProgramStart",get:function(){var e=this.innerPlayback.getCurrentTime()-this.programStartPositionOffset>=0;return this.programStartPositionOffset>5&&e}},{key:"onClick",value:function(){this.container.trigger(Gn.SKIP_BUTTON_CLICKED,{name:this.name}),this.canSeekToProgramStart&&(this.seekToProgramStart(),this.updateButtonState())}},{key:"seekToProgramStart",value:function(){this.container.seek(this.programStartPosition),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.listenToOnce(this.container,Gn.DID_LOAD_EPG,this.onEPGLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onEPGLoaded",value:function(){this.listenTo(this.container,Gn.DID_CHANGE_CURRENT_PROGRAM,this.onProgramChange),this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate)}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"getCurrentPositionTime",value:function(){var e=this.innerPlayback.getCurrentTime(),t=this.innerPlayback.getProgramDateTime(),n=new Date(t);return Vo(e,n)}},{key:"onProgramChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=void 0===t?{}:t;this.currentProgram=n||{},this.updateButtonState()}},{key:"updateButtonState",value:function(){this.isActive!==this.canSeekToProgramStart&&(this.isActive=this.canSeekToProgramStart,this.isActive?this.enableButton():this.disableButton())}},{key:"enableButton",value:function(){this.container.trigger(Gn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetState",value:function(){this.isActive=!1}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Kn.getStyleFrom(uo,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.prepend(Bo),this.$el.append(t[0]),this}}]),n}(Tr),Ko=jn.getHostname,Go=window.WM&&window.WM.Settings||{},Wo=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),i=t.call(this,e),((Go&&Go.StartOver||{}).Blacklist||[]).find((function(e){return e.test(Ko())}))&&i.destroy(),i}return c(n,[{key:"name",get:function(){return"live_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ge(lo)}},{key:"events",get:function(){return{click:this.onClick}}},{key:"activePlayback",get:function(){return this.core.activePlayback}},{key:"hasLowLatency",get:function(){var e;return this.activePlayback&&(null===(e=this.activePlayback.selectedResource)||void 0===e?void 0:e.hasLowLatency)}},{key:"label",get:function(){var e=this.options&&this.options.isLiveContent?"ao vivo":"agora",t="Assistir ".concat(e);return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.toggleButton),this.listenTo(this.container,xe.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.updateState)}},{key:"toggleButton",value:function(e){this.dvrInUse=e,this.dvrInUse?this.enableButton():this.disableButton()}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"onClick",value:function(){this.core.mediaControl.container.isPlaying()||this.core.mediaControl.container.play(),this.dvrInUse&&this.seekToLive()}},{key:"seekToLive",value:function(){var e,t,n=this.core.mediaControl.container.getDuration(),i=null===(e=this.activePlayback)||void 0===e||null===(t=e.playback)||void 0===t?void 0:t._hls;if(this.hasLowLatency){if(!i)return;var r=i.levels[i.currentLevel];if(r){var a=r.details,o=a.holdBack-a.partHoldBack;this.core.mediaControl.container.seek(n+o)}}else this.core.mediaControl.container.seek(n)}},{key:"updateState",value:function(){this.dvrInUse?this.enableButton():this.disableButton()}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"enableButton",value:function(){this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"render",value:function(){var e=Kn.getStyleFrom(uo,{playerId:this.core.options.playerId});return this.$el.html(this.template({label:this.label})),this.$el.append(Bo),this.$el.append(e[0]),this}}]),n}(Tr),Yo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Silenciar som</span>',zo=jn.autoplayManager,qo=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).persistConfig=i.core.options.persistConfig,i.isUserGesture=!1,i.stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},$(document).bind("mouseup",i.stopDragHandler),$(document).bind("mousemove",i.updateDragHandler),i}return c(n,[{key:"name",get:function(){return"volume"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ge('<div class="drawer-icon-container" data-volume>\n  <button class="drawer-icon media-control-button media-control-element" data-volume></button>\n</div>\n\n<div class="bar-container" data-volume>\n  <div class="bar-background" data-volume>\n    <div class="bar-fill-1" data-volume></div>\n    <div class="bar-hover" data-volume></div>\n  </div>\n  <div class="bar-scrubber" data-volume>\n    <div class="bar-scrubber-icon" data-volume></div>\n  </div>\n</div>\n')}},{key:"volume",get:function(){return this.container.volume}},{key:"muted",get:function(){return 0===this.volume}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"attributes",get:function(){return{class:"drawer-container volume-hide","data-volume":""}}},{key:"events",get:function(){return{mouseenter:this.showVolumeBar,mouseleave:this.hideVolumeBar,"click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mousedown .bar-container[data-volume]":"startVolumeDrag"}}},{key:"mutedAutoplay",get:function(){return this.idPlayback.mutedAutoplay}},{key:"destroy",value:function(){A(f(n.prototype),"destroy",this).call(this),$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Gn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"updateContainer",value:function(){this.unbindContainerEvents(),this.container=this.core.activeContainer,this.idPlayback=this.container&&this.container.playback,this.container&&this.bindContainerEvents()}},{key:"onContainerChanged",value:function(){this.updateContainer(),this.setInitialVolume()}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,xe.CONTAINER_VOLUME,this.onContainerVolumeUpdate),this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.onContainerPlay),this.listenToOnce(this.idPlayback,Gn.WM_USER_PLAY_REQUESTED,this.setInitialVolume)}},{key:"onContainerPlay",value:function(){this.stopListening(this.idPlayback,Gn.WM_USER_PLAY_REQUESTED)}},{key:"unbindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback)}},{key:"getInitialVolume",value:function(){var e=this.persistConfig?ke.Config.restore("volume"):100;return this.lastVolume=e,(this.core.options.mute||this.mutedAutoplay)&&(e=0),this.currentVolume=e,e}},{key:"setInitialVolume",value:function(){this.setVolume(this.getInitialVolume(),{initial:!0})}},{key:"onTapToUnmuteClicked",value:function(){this.isUserGesture=!0,this.setVolume(this.lastVolume||100),this.isAd&&this.idPlayback.volume(this.lastVolume||100)}},{key:"toggleMute",value:function(e){e&&e.stopPropagation(),this.isUserGesture=!0,this.setVolume(this.muted?this.lastVolume||100:0)}},{key:"onContainerVolumeUpdate",value:function(e){e=void 0!==e&&e>=0?e:this.volume,this.updateVolumeUI(e),this.draggingVolumeBar||(this.currentVolume>0&&this.muted?this.container.trigger(Gn.WM_MUTED,this.lastVolume,this.isUserGesture):this.currentVolume<=0&&!this.muted&&(this.container.trigger(Gn.WM_UNMUTED,this.lastVolume,this.isUserGesture),this.isUserGesture&&zo.consent()),this.isUserGesture=!1,this.lastVolume=this.currentVolume!==e?this.currentVolume:this.lastVolume,this.currentVolume=e)}},{key:"updateVolumeUI",value:function(e){var t=this;this.container.isReady?this.$volumeBarContainer&&(this.updateVolumeBar(e),this.updateVolumeIcon(e)):this.listenToOnce(this.container,xe.CONTAINER_READY,(function(){return t.updateVolumeUI(e)}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initial;e=Math.min(100,Math.max(e,0)),this.persistConfig&&!i&&ke.Config.persist("volume",e);var r=function(){var n=function(e){t.container.setVolume(e),t.isAd&&t.idPlayback.volume(e)};t.stopListening(t.idPlayback,Gn.WM_PLAYBACK_WILL_PLAY),t.container.isReady?n(e):t.listenToOnce(t.idPlayback,Gn.WM_PLAYBACK_WILL_PLAY,(function(){n(t.getInitialVolume())}))};this.container?r():this.listenToOnce(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,(function(){r()}))}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"getVolumeFromUIEvent",value:function(e){var t=100*(1-(e.pageY-this.$volumeBarContainer.offset().top)/this.$volumeBarContainer.height());return Math.min(100,Math.max(t,0))}},{key:"updateVolumeBar",value:function(e){var t=this.$volumeBarContainer.height(),n=this.$volumeBarBackground.height(),i=(t-n)/2,r=n*e/100-this.$volumeBarScrubber.height()/2+i;this.$volumeBarFill.css({height:e+"%"}),this.$volumeBarScrubber.css({bottom:r})}},{key:"updateVolumeIcon",value:function(e){this.$volumeIcon.html(""),e>0?this.$volumeIcon.append(Yo):this.$volumeIcon.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Ativar som</span>')}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.mediaControl.$el.addClass("media-control-dragging"),this.mediaControl.setKeepVisible(),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingVolumeBar&&(this.mediaControl.resetKeepVisible(),this.mediaControl.$el.removeClass("media-control-dragging"),this.draggingVolumeBar=!1,this.isUserGesture=!0,this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"updateDrag",value:function(e){this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"showVolumeBar",value:function(){ne.supportsTouchEvents||(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.triggerWillShowModalElement(),this.$el.removeClass("volume-hide"),this.mediaControl&&this.mediaControl.trigger(Gn.WM_VOLUME_SHOW),this.isVolumeBarVisible=!0)}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isVolumeBarVisible&&this.$volumeBarContainer&&("number"!=typeof t.timeout&&(t.timeout=150),this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar(t)}),t.timeout):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){e.$el.addClass("volume-hide"),e.mediaControl&&e.mediaControl.trigger(Gn.WM_VOLUME_HIDE),e.isVolumeBarVisible=!1,e.triggerDidHideModalElement()}),t.timeout)))}},{key:"createCachedElements",value:function(){this.hasCachedElements=!0,this.$volumeBarContainer=this.$el.find(".bar-container"),this.$volumeIcon=this.$el.find(".drawer-icon"),this.$volumeBarBackground=this.$el.find(".bar-background"),this.$volumeBarFill=this.$el.find(".bar-fill-1"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber")}},{key:"render",value:function(){if(!this.hasCachedElements){this.$el.html(this.template());var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .drawer-container[data-volume] {\n  z-index: 300;\n  position: relative;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume] .media-control-button {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide {\n  z-index: auto;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide .bar-container[data-volume] {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .drawer-icon-container {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .drawer-icon-container .media-control-button.media-control-element.drawer-icon[data-volume] {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] {\n  will-change: visibility, opacity;\n  position: absolute;\n  bottom: 42px;\n  width: 30px;\n  height: 115px;\n  left: 8px;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.85);\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume]:after {\n  content: "";\n  width: 100%;\n  position: absolute;\n  height: 10px;\n  bottom: -10px;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] {\n  position: relative;\n  top: 15px;\n  width: 2px;\n  margin-left: 14px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  height: calc(100% - 30px);\n  overflow: hidden;\n  box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n  position: absolute;\n  bottom: 0;\n  background: #fff;\n  width: 100%;\n  height: 0;\n  transition: height 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] {\n  position: absolute;\n  left: 9px;\n  width: 12px;\n  height: 12px;\n  bottom: 40%;\n  transition: bottom 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n  width: 100%;\n  height: 100%;\n  border-radius: 6px;\n  background-color: #fff;\n  box-shadow: 0 0 1px black;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.createCachedElements(),this.$volumeIcon.html(Yo),this}}}]),n}(Tr),$o=jn.getTimeValues,Xo=jn.getLiteralTimeValues,Qo=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},ne.supportsTouchEvents&&($(document).bind("touchend",i.stopDragHandler),$(document).bind("touchmove",i.updateDragHandler)),ne.supportsTouchEvents&&!ne.isHybridDevice||($(document).bind("mouseup",i.stopDragHandler),$(document).bind("mousemove",i.updateDragHandler)),i}return c(n,[{key:"name",get:function(){return"seekbar"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"center"}},{key:"template",get:function(){return Ge('<div class="seekbar">\n  <div class="bar-background" data-seekbar tabindex="0">\n    <div class="bar-fill-1" data-seekbar></div>\n    <div class="bar-fill-2" data-seekbar></div>\n    <div class="bar-hover" data-seekbar></div>\n  </div>\n  <div class="bar-scrubber" data-seekbar role="slider" aria-valuemin="0" aria-valuemax="0" tabindex="-1" aria-valuenow="0" aria-valuetext="Ponto do vídeo, 0 minuto e 0 segundo.">\n    <div class="bar-scrubber-icon" data-seekbar></div>\n  </div>\n</div>\n<div id="seek-feedback" aria-live="polite" class="visually-hidden"></div>\n')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"isLivePlayback",get:function(){return this.container&&this.container.getPlaybackType()===Je.LIVE}},{key:"attributes",get:function(){return{class:"bar-container","data-seekbar":""}}},{key:"events",get:function(){var e={click:this.seek,touchmove:this.startActionOnSeekBar,touchend:this.leaveActionOnSeekBar,touchstart:this.startSeekDrag},t={click:this.seek,mousemove:this.startActionOnSeekBar,mouseleave:this.leaveActionOnSeekBar,"mousedown .bar-scrubber[data-seekbar]":"startSeekDrag"},n=i(i({},e),t);return ne.isHybridDevice?n:ne.supportsTouchEvents?e:t}},{key:"destroy",value:function(){A(f(n.prototype),"destroy",this).call(this),$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("touchend",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler),$(document).unbind("touchmove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,xe.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,xe.CONTAINER_SEEKED,this.updateAriaLiveText),this.setSeekPercentage(0))}},{key:"createCachedElements",value:function(){this.$seekBarContainer=this.$el,this.$seekBarHover=this.$el.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=this.$el.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=this.$el.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=this.$el.find(".bar-scrubber[data-seekbar]"),this.$seekBarScrubberIcon=this.$el.find(".bar-scrubber-icon[data-seekbar]"),this.$seekBarFeedback=this.$el.find("#seek-feedback"),ne.isMobile&&(this.$seekBarHover.addClass("bar-hover-disable"),this.$seekBarScrubber.addClass("bar-scrubber-mobile")),this.mediaControl.$seekBarContainer=this.$seekBarContainer}},{key:"onPlayerResize",value:function(){this.setSeekPercentage(this.currentSeekPercentage)}},{key:"setSeekPercentage",value:function(e){e=Math.min(e,100);var t=this.$seekBarContainer.width()*e/100-this.$seekBarScrubber.width()/2;t=Math.max(t,-(this.$seekBarScrubber.width()-this.$seekBarScrubberIcon.width())/2),t=Math.min(t,this.$seekBarContainer.width()-this.$seekBarScrubber.width()/2-this.$seekBarScrubberIcon.width()/2),this.currentSeekPercentage=e;var n=this.$seekBarScrubberIcon.width()/4;isNaN(n)||isNaN(e)||isNaN(t)||(this.$seekBarPosition.css({width:"calc(".concat(e,"% + ").concat(n,"px)")}),this.$seekBarScrubber.css({transform:"translateX(".concat(t,"px)")}))}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&(this.draggingSeekBar&&this.seek(e),this.mediaControl.$el.removeClass("media-control-dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarScrubberIcon.removeClass("bar-scrubber-icon--dragging"),this.core.trigger(Gn.STOP_DRAGGING_SEEKBAR),this.draggingSeekBar=!1,this.mediaControl.resetKeepVisible())}},{key:"lastTouchEvent",value:function(e){var t=e.originalEvent?e.originalEvent:e;return t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[t.changedTouches.length-1]:{}}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=((e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.core.trigger(Gn.START_DRAGGING_SEEKBAR),this.draggingSeekBar=!0,this.mediaControl.setKeepVisible(),this.mediaControl.$el.addClass("media-control-dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),this.$seekBarScrubberIcon.addClass("bar-scrubber-icon--dragging"),ne.supportsTouchEvents&&e&&e.preventDefault())}},{key:"startActionOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.mediaControl.trigger(xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"leaveActionOnSeekBar",value:function(e){this.mediaControl.trigger(xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX||this.lastTouchEvent(e).pageX||0,n=Math.max(0,t-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,.01)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"updateAriaLiveText",value:function(){var e=this.container.playback.currentTime,t=this.getAriaValueText(e);this.$seekBarFeedback.text(t)}},{key:"updateAriaValues",value:function(e){var t=e.current,n=e.total,i=this.getAriaValueText(t);this.$seekBarScrubber.attr("aria-valuenow",Math.round(t)),this.$seekBarScrubber.attr("aria-valuemax",Math.round(n)),this.$seekBarScrubber.attr("aria-valuetext",i)}},{key:"getAriaValueText",value:function(e){var t=b($o(e),3),n=t[0],i=t[1],r=t[2];return this.getVideoPositionText(n,i,r)}},{key:"getVideoPositionText",value:function(e,t,n){var i=Xo(e,t,n),r=i.hoursText,a=i.minutesText,o=i.secondsText;return this.container.isDvrInUse()?"Há".concat(r," ").concat(a," e ").concat(o," da transmissão."):this.isLivePlayback?"Reproduzindo Agora na TV / Ao Vivo.":"Ponto do vídeo,".concat(r," ").concat(a," e ").concat(o,".")}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){this.draggingSeekBar||(this.currentPositionValue=e.current<0?0:e.current,this.currentDurationValue=e.total,this.renderSeekBar(),this.updateAriaValues(e))}},{key:"renderSeekBar",value:function(){null!==this.currentPositionValue&&null!==this.currentDurationValue&&(this.currentSeekBarPercentage=this.isLivePlayback?100:0,this.isLivePlayback&&!this.container.isDvrInUse()||(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage))}},{key:"render",value:function(){this.$el.html(this.template());var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .media-control.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .thumb-preview {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower .bar-container[data-seekbar] {\n  padding: 12px 0;\n}\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: none;\n}\n.clappr-player#wp3-player-0 .bar-container__placeholder {\n  height: 36px;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 24px);\n  height: 24px;\n  cursor: pointer;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  touch-action: manipulation;\n  top: calc(50% + 6px);\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-self: center;\n  width: 100%;\n  height: 2px;\n  background-color: rgba(255, 255, 255, 0.2);\n  overflow: hidden;\n  top: 50%;\n  left: 50%;\n  will-change: transform;\n  transform-origin: top;\n  transform: scaleY(1) translate(-50%, -50%);\n  transition: transform 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n  background-color: rgba(255, 255, 255, 0.3);\n  transition: width 0.1s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ffffff;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: none;\n  position: absolute;\n  width: 5px;\n  height: 100%;\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: scaleY(2) translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover-disable[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: scale(1.5);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar].seek-disabled {\n  cursor: default;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n  position: relative;\n  display: flex;\n  align-self: center;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  text-align: center;\n  z-index: 200;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  display: inline-block;\n  position: absolute;\n  left: 0;\n  background-color: #fff;\n  border-radius: 50%;\n  height: 100%;\n  width: 100%;\n  will-change: transform;\n  transform: scale(1);\n  transition: transform 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon--dragging {\n  transform: scale(2) !important;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber-mobile[data-seekbar] {\n  transition: unset;\n}",{playerId:this.core.options.playerId}),t=$("<div>").addClass("bar-container__placeholder");return this.$el.append(e[0]),this.$el.parent().append(t),this.createCachedElements(),this}}]),n}(Tr),Jo=10,Zo=["1","2","3","4","5","6","7","8","9","0"],es={left:-10,right:10,"shift left":-15,"shift right":15,"shift ctrl left":-20,"shift ctrl right":20},ts=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"quick_seek"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ge('<div class="quick-seek-container">\n  <div class="quick-seek-placeholder quick-seek-placeholder--left">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--left"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= backwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label left"><%= currentSeekTime %></span>\n    </div>\n  </div>\n  <div class="quick-seek-placeholder quick-seek-placeholder--right">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--right"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= forwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label"><%= currentSeekTime %></span>\n    </div>\n  </div>\n</div>')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"willBackwardToVideoEnd",get:function(){return this.container.currentTime-3<0}},{key:"willForwardToVideoEnd",get:function(){return this.container.currentTime+Jo>this.container.getDuration()}},{key:"currentSeekTime",get:function(){return this._currentSeekTime||Jo},set:function(e){e<=990&&(this._currentSeekTime=e)}},{key:"attributes",get:function(){return{class:"quick-seek hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Gn.MEDIACONTROL_DOUBLE_TAP,this.onMediaControlDoubleTap),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.updateContainer),this.listenTo(this.mediaControl,xe.MEDIACONTROL_SHOW,this.onMediaControlShow)}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.bindKeyEvents),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onContainerEnd)}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),Object.keys(es).forEach((function(t){e.bindKeyAndShow(t,(function(){return e.onKeyPress(t)}))})),Zo.forEach((function(t){e.bindKeyAndShow(t,(function(){return e.canSeek&&e.container.seekPercentage(10*t+.1)}))})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off(Object.keys(es)),this.kibo.off(Zo))}},{key:"updateContainer",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onContainerEnd",value:function(){this.unbindKeyEvents(),this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.bindKeyEvents)}},{key:"onKeyPress",value:function(e){this.canSeek&&(this.container.trigger(Gn.WILL_QUICK_SEEK),this.seekRelative(es[e]))}},{key:"seekRelative",value:function(e){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n+.01,100),this.container.seekPercentage(i)}},{key:"onMediaControlDoubleTap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide;!this.canSeek||"left"===t&&this.willBackwardToVideoEnd||"right"===t&&this.willForwardToVideoEnd||(this.container.trigger(Gn.WILL_QUICK_SEEK),"vibrate"in navigator&&window.navigator.vibrate(15),this.feedBackInProgress?this.lastTapSide===t?this.updateQuickSeekFeedback():(this.hideQuickSeekFeedback(),this.showQuickSeekFeedback(t)):this.showQuickSeekFeedback(t),this.container.seek(this.targetSeekValue(t)))}},{key:"targetSeekValue",value:function(e){var t="right"===e?Jo:-10;return Math.min(this.container.getDuration()-1,Math.max(.1,this.container.currentTime+t))}},{key:"cacheAnimatedElements",value:function(e){this.background=this.$el.find(".quick-seek-placeholder-background--".concat(e)),this.arrow=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-arrow-placeholder .quick-seek-arrow")),this.label=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-label"))}},{key:"showQuickSeekFeedback",value:function(e){var t=this;this.lastTapSide=e,this.feedBackInProgress=!0,this.showPlugin(),this.cacheAnimatedElements(e),this.resetLabelClasses(),this.background[0].addEventListener("transitionend",(function(e){return t.onBackgroundShow(e)}),{once:!0}),setTimeout((function(){return t.background.addClass("background-show")})),this.displayArrow()}},{key:"onBackgroundShow",value:function(e){e.stopPropagation(),"opacity"!==e.propertyName&&this.background.addClass("opacity-transition")}},{key:"displayArrow",value:function(){var e=this;this.arrow[0].addEventListener("transitionend",(function(t){return e.onArrowShow(t)}),{once:!0}),setTimeout((function(){return e.arrow.addClass("visible")})),this.spinArrow()}},{key:"onArrowShow",value:function(e){e.stopPropagation(),this.displayLabel()}},{key:"spinArrow",value:function(){var e=this;"left"===this.lastTapSide?(!this.leftArrowDegrees&&(this.leftArrowDegrees=0),this.leftArrowDegrees-=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.leftArrowDegrees,"deg);")}))):(!this.rightArrowDegrees&&(this.rightArrowDegrees=0),this.rightArrowDegrees+=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.rightArrowDegrees,"deg);")})))}},{key:"displayLabel",value:function(){var e=this;this.currentSeekTime>=100&&this.label.addClass("triple-digit"),this.label.text(this.currentSeekTime),this.label[0].addEventListener("transitionend",(function(t){return e.onLabelShow(t)}),{once:!0}),setTimeout((function(){return e.label.addClass("visible")}))}},{key:"onLabelShow",value:function(e){var t=this;e.stopPropagation(),this.timeoutId=setTimeout((function(){t.hideQuickSeekFeedback()}),400)}},{key:"updateQuickSeekFeedback",value:function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.spinArrow(),this.currentSeekTime+=Jo,this.hideLabel(),990!==this.currentSeekTime&&setTimeout((function(){e.displayLabel()}),350)}},{key:"hideQuickSeekFeedback",value:function(){this.feedBackInProgress&&(clearTimeout(this.timeoutId),this.hideLabel(),this.hideArrow(),this.hideBackground(),this.currentSeekTime=Jo,this.feedBackInProgress=!1,this.hidePlugin())}},{key:"onMediaControlShow",value:function(){this.hideQuickSeekFeedback()}},{key:"hideLabel",value:function(){this.label.removeClass("visible")}},{key:"resetLabelClasses",value:function(){this.label.removeClass("triple-digit")}},{key:"hideArrow",value:function(){this.arrow.removeClass("visible")}},{key:"hideBackground",value:function(){this.background.removeClass("background-show")}},{key:"showPlugin",value:function(){this.$el.removeClass("hidden")}},{key:"hidePlugin",value:function(){this.$el.addClass("hidden")}},{key:"destroy",value:function(){A(f(n.prototype),"destroy",this).call(this),this.unbindKeyEvents()}},{key:"render",value:function(){var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label {\n  font-size: 8px;\n  margin-bottom: 5px;\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label.triple-digit {\n  font-size: 6px;\n  left: calc(50% - 6px);\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow {\n  transform-origin: 16px 17px;\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow svg {\n  width: 32px;\n  height: 32px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek.hidden {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-container {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label {\n  display: inline-block;\n  position: absolute;\n  font-weight: bold;\n  font-family: "Opensans", sans-serif;\n  font-weight: 700;\n  letter-spacing: 0px;\n  font-size: 12px;\n  color: #eee;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  margin-bottom: 8px;\n  top: 40%;\n  left: 36%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label.triple-digit {\n  font-size: 10px;\n  left: calc(50% - 9px);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label.visible {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow-placeholder {\n  position: relative;\n  display: flex;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow {\n  display: inline-block;\n  justify-content: center;\n  opacity: 0;\n  transform-origin: 24px 26px;\n  transition: transform 0.6s ease, opacity 0.3s ease;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow.visible {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow svg {\n  width: 48px;\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #eee;\n  width: 45%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: -1;\n  right: -50%;\n  bottom: 0px;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.3);\n  transform: scaleX(0.9) scaleY(1.4);\n  transform-origin: center center;\n  opacity: 0;\n  will-change: opacity, transform;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background--left {\n  left: -50%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder--left .quick-seek-arrow-placeholder {\n  flex-direction: row-reverse;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-show {\n  opacity: 1;\n  transition: transform 0.6s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek.media-control-element {\n  padding: 0;\n  opacity: 1 !important;\n}',{playerId:this.core.options.playerId});return this.$el.html(this.template({backwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2L14 12l10 10v-8c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"/>\n    </g>\n</svg>',forwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2l10 10-10 10v-8c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12h4c0 8.84-7.16 16-16 16S8 34.84 8 26s7.16-16 16-16z"/>\n    </g>\n</svg>',currentSeekTime:this.currentSeekTime})),this.$el.append(e[0]),this}}]),n}(Tr),ns=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).mouseOverSeekbar=!1,i.draggingSeekbar=!1,i.isVisible=!1,i.waitingTimeoutToShow=!1,i.waitingTimeoutToHide=!1,i}return c(n,[{key:"name",get:function(){return"quick_seek_hint"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return ne.isMobile?"upper":"lower"}},{key:"position",get:function(){return ne.isMobile?"":"between"}},{key:"template",get:function(){return Ge('<span class="quick-seek-hint__label">\n  <% if (isMobile) { %>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= backward10 %></span>\n    Toque duplo para avançar\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= forward10 %></span>\n  <% } else { %>\n    Use as teclas\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= arrow %></span>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= arrow %></span>\n  para avançar\n  <% } %>\n</span>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"shouldDisable",get:function(){return this.currentWidth<=(ne.isMobile?361:600)}},{key:"attributes",get:function(){return{class:"quick-seek-hint hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.bindSeekbarEvents()}},{key:"bindSeekbarEvents",value:function(){this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.listenTo(this.core,Gn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Gn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!0}},{key:"unbindSeekbarEvents",value:function(){this.stopListening(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.stopListening(this.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.stopListening(this.core,Gn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.stopListening(this.core,Gn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!1}},{key:"onStartDraggingSeekbar",value:function(){this.draggingSeekbar=!0}},{key:"onStopDraggingSeekbar",value:function(){this.draggingSeekbar=!1,this.waitingTimeoutToShow&&this.resetTimeoutToShow(),!this.waitingTimeoutToHide||!ne.isMobile&&this.mouseOverSeekbar||(this.resetTimeoutToHide(),this.hide())}},{key:"onMousemoveSeekbar",value:function(){var e=this;if(this.mouseOverSeekbar=!0,!(this.isVisible||this.waitingTimeoutToShow||this.draggingSeekbar&&!ne.isMobile||this.waitingMouseLeaveSeekbarAfterHide)){if(ne.isMobile)return this.show();this.waitingTimeoutToShow=!0,this.showTimeoutId=setTimeout((function(){e.showTimeoutId=null,e.waitingTimeoutToShow=!1,e.show()}),1e3)}}},{key:"onMouseLeaveSeekbar",value:function(){this.mouseOverSeekbar=!1,this.waitingMouseLeaveSeekbarAfterHide=!1,this.draggingSeekbar||(this.waitingTimeoutToHide&&this.resetTimeoutToHide(),this.waitingTimeoutToShow&&this.resetTimeoutToShow(),this.hide())}},{key:"resetTimeoutToHide",value:function(){clearTimeout(this.hideTimeoutId),this.waitingTimeoutToHide=!1,this.hideTimeoutId=null}},{key:"resetTimeoutToShow",value:function(){clearTimeout(this.showTimeoutId),this.waitingTimeoutToShow=!1,this.showTimeoutId=null}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?(this.unbindSeekbarEvents(),this.$el.addClass("quick-seek-hint--disabled")):(!this.seekbarEventsActive&&this.bindSeekbarEvents(),this.$el.removeClass("quick-seek-hint--disabled"))}},{key:"show",value:function(){this.isVisible||(this.isVisible=!0,this.core.trigger(Gn.WILL_SHOW_QUICK_SEEK_HINT),this.$el.removeClass("hidden"),ne.isMobile&&this.$el.addClass("media-control-element--sticky"),this.hideDelayed())}},{key:"hideDelayed",value:function(){var e=this;this.waitingTimeoutToHide=!0,this.hideTimeoutId=setTimeout((function(){e.hideTimeoutId=null,e.waitingTimeoutToHide=!1,e.hide()}),4e3)}},{key:"hide",value:function(){this.mouseOverSeekbar&&(this.waitingMouseLeaveSeekbarAfterHide=!0),this.isVisible&&(this.core.trigger(Gn.WILL_HIDE_QUICK_SEEK_HINT),this.$el.addClass("hidden"),ne.isMobile&&this.$el.removeClass("media-control-element--sticky"),this.isVisible=!1)}},{key:"render",value:function(){var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.ad .quick-seek-hint {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  width: 100%;\n  padding-right: 0;\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__label {\n  margin: 0 auto;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--left {\n  margin-left: 0;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--right {\n  margin-right: 0;\n  margin-left: 8px;\n  transform: rotate(0);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint--disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint.hidden {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__container {\n  display: flex;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--left {\n  margin-left: 8px;\n  margin-right: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--right {\n  margin-right: 8px;\n  transform: rotate(180deg);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__label {\n  display: flex;\n  align-items: center;\n  opacity: 0.8;\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee;\n}',{playerId:this.core.options.playerId});return this.$el.html(this.template({isMobile:ne.isMobile,arrow:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><rect stroke="#EEE" opacity=".3" x=".5" y=".5" width="19" height="19" rx="2"/><path d="M8 9h8v2H8v3l-4-4 4-4v3z" fill="#EEE"/></g></svg>',backward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>',forward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16h-.1zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'})),this.$el.append(e[0]),this}}]),n}(Tr);function is(e,t){return encodeURIComponent(e+"?utm_source=".concat(t,"&utm_medium=share-player-desktop"))}function rs(e,t){var n=500,i=window.screen.width/2-260,r=window.screen.height/2-300,a="height=".concat(n,",width=").concat(n,",left=").concat(i,",top=").concat(r,",screenX=").concat(i,",screenY=").concat(r,",\n               resizable=yes,status=no,toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");window.open(e,t,a)}var as='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Fechar</span>',os=jn.copyToClipboard,ss=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).core=e,i.shouldRender=!1,i.$el.on("click",(function(){i.showShareBox()})),i.keyDownHandler=function(e){"Escape"===e.key&&(e.preventDefault(),i.hideModal())},i.options.share&&!1===i.options.share.enabled&&i.disable(),i}return c(n,[{key:"name",get:function(){return"share"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ge('<div class="share__box" role="dialog" aria-modal="true">\n  <button class="share__close"></button>\n\n  <div class="share__button-box">\n    <% for (var i=0; i < shareItems.length; i++) { %>\n      <button class="share__button" data-share-item="<%= shareItems[i].name %>">\n        <%= shareItems[i].element %>\n      </button>\n      <% } %>\n  </div>\n\n  <h1 class="share__title">Link Copiado</h1>\n  <div class="share__item-copied-box">\n    <h2 class="share__subtitle">\n      <%= videoUrl %>\n    </h2>\n  </div>\n</div>\n')}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"attributes",get:function(){return{class:"media-control-button","data-share":"","data-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,Gn.WM_SHARE_SHOW,this.start),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"start",value:function(){var e=this,t=this.modal.find(".share__box"),n=this.modal.find(".share__close");t&&t.on("click",(function(t){t&&t.stopPropagation(),e.hideModal()})),n&&n.append(as),$(document).on("keydown",this.keyDownHandler)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Gn.WM_RESOURCE_SELECTED,this.checkUrl),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.shouldHideModal)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.shareUrl=this.video.urlForConsumption.replace(/(^\w+:|^)\/\//,"");var t=this.core.options.share&&this.core.options.share.socialList;this.loadSocialList(t||["facebook","link"])}},{key:"checkUrl",value:function(){this.shouldRender=!0,this.render()}},{key:"shouldHideModal",value:function(){var e=this.playback&&this.playback.getPlaybackType();"vod"!==e&&"live"!==e&&this.hideModal()}},{key:"loadSocialList",value:function(e){e&&e.length>0?this.socialList=this.verifySocialList(e):this.socialList=this.getDefaultSocialList(),this.socialList=this.socialList.filter((function(e){return"twitter"!==e.name}))}},{key:"verifySocialList",value:function(e){var t=this,n=[];return e.forEach((function(e){t.getDefaultSocialList().forEach((function(t){t.name===e&&n.push(t)}))})),n}},{key:"getDefaultSocialList",value:function(){var e=this;return[{name:"facebook",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M15.04 20v-6.196h2.08l.31-2.415h-2.39V9.848c0-.7.194-1.176 1.196-1.176h1.28v-2.16c-.222-.03-.981-.095-1.864-.095-1.844 0-3.106 1.125-3.106 3.192v1.78h-2.085v2.415h2.085V20H4.883C4.395 20 4 19.605 4 19.117V4.883C4 4.395 4.395 4 4.883 4h14.234c.488 0 .883.395.883.883v14.234c0 .488-.395.883-.883.883H15.04z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Facebook</span>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,i=is(t,"facebook"),r="?app_id=".concat("289255557788943","&display=popup&href=").concat(i),-1!=t.search("globoplay")&&(r+="&hashtag=".concat(encodeURIComponent("#GloboPlay"))),rs("".concat("https://www.facebook.com/dialog/share").concat(r),n)}},{name:"twitter",element:'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n    <path\n        d="M 33.703 8.95 L 38.609 8.95 L 27.89 21.203 L 40.501 37.875 L 30.626 37.875 L 22.892 27.763 L 14.043 37.875 L 9.133 37.875 L 20.599 24.77 L 8.501 8.95 L 18.626 8.95 L 25.617 18.193 L 33.703 8.95 Z M 31.981 34.938 L 34.7 34.938 L 17.149 11.733 L 14.231 11.733 L 31.981 34.938 Z"\n        fill="#FFF" />\n</svg>\n<span class="visually-hidden">Compartilhar no X</span>',onClickAction:function(){var t,n,i,r,a,o,s,l;t=e.video.urlForConsumption,n=e.video.title,i=e.video.program,r=function(e){return e?"#".concat(e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("").replace(/[-:]/g,"")):""}(i),a=-1!=t.search("globoplay")?" pelo #GloboPlay":"",o=r&&a?"Assista ".concat(r):"".concat(n),s=is(t,"twitter"),l=encodeURIComponent("".concat(o).concat(a)),rs("https://twitter.com/intent/tweet"+"?text=".concat(l,"&url=").concat(s),n)}},{name:"whatsapp",element:'<svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M24.0228 6C14.1111 6 6.04228 14.285 6.03868 24.4711C6.03688 27.7271 6.86673 30.9058 8.44009 33.7066L6 43L15.4193 40.7128C18.0457 42.1854 21.0024 42.9584 24.0123 42.9603H24.0193C33.9293 42.9603 41.9946 34.6734 42 24.4892C42.0036 19.5515 40.1352 14.9091 36.7401 11.4163C33.345 7.92536 28.833 6.00185 24.0228 6ZM24.0193 9.69998C27.8645 9.70182 31.4781 11.2425 34.1945 14.0323C36.911 16.8258 38.4032 20.5376 38.3997 24.4856C38.3961 32.633 31.9474 39.2602 24.0158 39.2602C21.6162 39.2584 19.2392 38.6392 17.1457 37.4645L15.9326 36.7851L14.593 37.1103L11.0489 37.9703L11.9139 34.6678L12.3041 33.1863L11.5587 31.8567C10.3022 29.6218 9.63725 27.0667 9.63904 24.4711C9.64262 16.3274 16.0932 9.69998 24.0193 9.69998ZM17.659 15.9438C17.3583 15.9438 16.8722 16.0594 16.46 16.5219C16.0478 16.9825 14.8848 18.0982 14.8848 20.37C14.8848 22.6418 16.4952 24.8379 16.7202 25.1468C16.9434 25.4539 19.8285 30.2632 24.3956 32.1132C28.1903 33.6506 28.961 33.3471 29.7855 33.2694C30.61 33.1936 32.4454 32.1547 32.8198 31.0762C33.1942 29.9976 33.1951 29.0699 33.0835 28.8793C32.9719 28.6869 32.6721 28.5721 32.2221 28.341C31.7739 28.1097 29.5649 26.995 29.1527 26.8414C28.7404 26.6879 28.4389 26.6102 28.1401 27.0727C27.8412 27.5352 26.9825 28.5722 26.7196 28.8793C26.4568 29.1882 26.1957 29.2298 25.7457 28.9985C25.2956 28.7654 23.8487 28.2766 22.1313 26.7041C20.7955 25.4813 19.8942 23.9725 19.6314 23.51C19.3704 23.0493 19.6068 22.7963 19.8318 22.5669C20.0334 22.3597 20.2783 22.0276 20.5034 21.7575C20.7266 21.4874 20.804 21.295 20.9534 20.9879C21.1029 20.6808 21.0264 20.4098 20.9147 20.1785C20.8031 19.9473 19.9291 17.6671 19.5295 16.7531C19.1928 15.9854 18.8373 15.9676 18.5168 15.9546C18.2558 15.9435 17.9578 15.9438 17.659 15.9438Z" fill="white"/>\n</svg>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,e.video.program,i=is(t,"whatsapp"),r="?text=".concat(i),rs("".concat("https://wa.me/").concat(r),n)}},{name:"link",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Copiar link do vídeo</span>',onClickAction:function(t){t.stopPropagation(),e.showLinkCopiedBox(),os(e.video.urlForConsumption,e.modal)}}]}},{key:"hideModal",value:function(){var e=this.modal&&this.modal.find(".share__box"),t=e&&e.contents();!t||t&&!t.length||(e.off("click"),this.mediaControl.trigger(Gn.WM_SHARE_HIDE),this.core.trigger(Gn.WM_SHARE_HIDE),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.triggerDidHideModalElement(),this.hasPlayingBeforeModal&&this.playback.play(),$(document).off("keydown",this.keyDownHandler))}},{key:"render",value:function(){if(this.shouldRender){this.shouldRender=!1,this.$el.html("");var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.w360 .share__box--link-copied .share__button[data-share-item=link] {\n  transform: translate(-286%, 0px);\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button {\n  width: 40px;\n  height: 40px;\n  padding: 4px;\n  margin-left: 32px;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button:first-child {\n  margin-left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button:nth-last-child(3) {\n  margin-right: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__close {\n  box-sizing: content-box;\n  padding: 12px;\n  top: 0;\n  right: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__close:active, .clappr-player#wp3-player-0 .media-control.w360 .share__close:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .share {\n  font-family: "Opensans", sans-serif;\n}\n.clappr-player#wp3-player-0 .share__box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__button {\n  visibility: hidden;\n  display: none;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__button[data-share-item=link] {\n  visibility: visible;\n  transition: transform 0.3s ease;\n  opacity: 1;\n  cursor: default;\n  display: block;\n  margin-left: 0;\n  margin-right: 10px;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__item-copied-box,\n.clappr-player#wp3-player-0 .share__box--link-copied .share__title {\n  transition: visibility 0.7s ease, opacity 0.7s ease;\n  visibility: visible;\n  opacity: 1;\n  display: block;\n}\n.clappr-player#wp3-player-0 .share__button {\n  padding: 0px;\n  background-color: transparent;\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n  width: 48px;\n  height: 48px;\n  margin-left: 56px;\n  box-sizing: content-box;\n}\n.clappr-player#wp3-player-0 .share__button:active, .clappr-player#wp3-player-0 .share__button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .share__button:hover, .clappr-player#wp3-player-0 .share__button:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .share__button svg {\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .share__button:first-child {\n  margin-left: 0;\n}\n.clappr-player#wp3-player-0 .share__button:nth-last-child(3) {\n  margin-right: 0;\n}\n.clappr-player#wp3-player-0 .share__item-copied-box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  position: absolute;\n  top: calc(50% + 22px);\n  left: 0;\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .share__title {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  font-size: 16px;\n  color: #ffffff;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  cursor: default;\n  visibility: hidden;\n  display: none;\n}\n.clappr-player#wp3-player-0 .share__subtitle {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  padding: 0 35px;\n  max-width: 100%;\n  word-wrap: break-word;\n  font-size: 12px;\n  letter-spacing: -0.5px;\n  color: #ffffff;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .share__close {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  transition: opacity 0.3s ease;\n  opacity: 0.6;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .share__close:hover, .clappr-player#wp3-player-0 .share__close:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .share__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .share__close:active, .clappr-player#wp3-player-0 .share__close:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .share__button[data-share-item=whatsapp] {\n  width: 44px;\n  height: 44px;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M17 16.08c-.76 0-1.44.3-1.96.77L7.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.04 9.81C6.5 9.31 5.79 9 5 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar vídeo</span>'),this}}},{key:"bindShareEvents",value:function(){var e=this;this.socialList.forEach((function(t){var n=e.modal.find(".share__button[data-share-item=".concat(t.name,"]"));"function"==typeof t.onClickAction&&n.on("click",t.onClickAction)}))}},{key:"showShareBox",value:function(e){var t=this;e&&e.stopPropagation(),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause();var n=this.template({shareItems:this.socialList,videoUrl:this.shareUrl});this.triggerWillShowModalElement(),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_SHOW,n,{hidePanels:!0}),this.mediaControl.trigger(Gn.WM_SHARE_SHOW),this.core.trigger(Gn.WM_SHARE_SHOW),this.mediaControl.setKeepVisible(),this.bindShareEvents();var i=this.modal.find(".share__button, .share__item-copied-box, .share__title");i&&i.on("click",(function(e){return e.stopPropagation()})),setTimeout((function(){t.modal.find(".share__close").focus()}),500)}},{key:"showLinkCopiedBox",value:function(){var e=this.modal.find(".share__box");e&&e.addClass("share__box--link-copied")}}]),n}(Tr),ls='<button class="unmute__button unmute__button--on unmute__button--hide" tabindex="0"><%= volumeOnIcon %></button>\n<button class="unmute__button unmute__button--off" tabindex="0"><%= volumeOffIcon %></button>\n<span class="unmute__label">Ativar som</span>\n',us=jn.autoplayManager,cs=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"tap_to_unmute"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge(ls)}},{key:"mutedAutoplay",get:function(){var e;return null===(e=this.idPlayback)||void 0===e?void 0:e.mutedAutoplay}},{key:"attributes",get:function(){return{class:"unmute unmute--hide"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_RESIZE,this.playerResize)}},{key:"bindContainerEvents",value:function(){this.hideTapToUnmute(),this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.idPlayback=this.core.activePlayback,this.container&&(this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.showTapToUnmute),this.listenToOnce(this.container,xe.CONTAINER_STOP,this.hideTapToUnmute),this.listenToOnce(this.container,Gn.WATCH_SESSION_END,this.hideTapToUnmute),this.listenToOnce(this.container,Gn.WM_UNMUTED,this.hideTapToUnmute),this.listenTo(this.container,Gn.DFP_AD_STARTED,this.updateResponsiveElements),this.listenTo(this.container,Gn.DFP_CONTENT_RESUME,this.updateResponsiveElements))}},{key:"playerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width;if(t&&"number"==typeof t){var n=421;this.shouldDisplayLabel=t>n,this.updateResponsiveElements()}}},{key:"updateResponsiveElements",value:function(){if(this.isVisible){this.shouldDisplayLabel||this.hideLabel();var e="ad"===this.container.getPlaybackType()&&!ne.isMobile;this.$el.toggleClass("unmute--hide",!!e)}}},{key:"showLabel",value:function(){this.$el.removeClass("unmute--no-label")}},{key:"hideLabel",value:function(){this.$el.addClass("unmute--no-label")}},{key:"showTapToUnmute",value:function(){var e=this,t=this.options.chromeless&&!ne.isMobile,n=this.options.mute||this.mutedAutoplay&&!us.playerHasConsent;!t&&n&&(this.renderTapToUnmute(),this.isVisible=!0,this.shouldDisplayLabel&&(this.showLabel(),this.hideLabeltimeoutId=setTimeout((function(){e.hideLabel(),e.hideLabeltimeoutId=null}),5e3)))}},{key:"renderTapToUnmute",value:function(){var e=Ge(ls)({volumeOffIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#111"/>\n    </g>\n</svg>\n<span class="visually-hidden">Ativar som</span>',volumeOnIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#111"/>\n    </g>\n</svg>\n<span class="visually-hidden">Silenciar som</span>'}),t=Kn.getStyleFrom('.clappr-player#wp3-player-0 .unmute {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  pointer-events: auto;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 134px;\n  height: 48px;\n  z-index: 998;\n  background-color: #eeeeee;\n  transition: width 0.5s ease, visibility 0.3s ease, opacity 0.3s ease;\n  box-sizing: border-box;\n  margin-top: 17px;\n  margin-left: 20px;\n  border-radius: 8px;\n}\n.clappr-player#wp3-player-0 .unmute:hover {\n  background-color: #cecece;\n}\n.clappr-player#wp3-player-0 .unmute--hide {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .unmute--no-label {\n  width: 56px;\n}\n.clappr-player#wp3-player-0 .unmute--no-label .unmute__label {\n  display: none;\n}\n.clappr-player#wp3-player-0 .unmute__button {\n  cursor: pointer;\n  background-color: transparent;\n  border: 0;\n  opacity: 1;\n  margin: 0;\n  padding: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  padding: 0 8px 0 16px;\n}\n.clappr-player#wp3-player-0 .unmute__button--hide {\n  display: none;\n}\n.clappr-player#wp3-player-0 .unmute__button:hover, .clappr-player#wp3-player-0 .unmute__button:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .unmute__button:active, .clappr-player#wp3-player-0 .unmute__button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .unmute__button svg {\n  height: 24px;\n  width: 24px;\n}\n.clappr-player#wp3-player-0 .unmute__label {\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  width: 70px;\n  height: 16px;\n  line-height: 16px;\n  color: #111111;\n  opacity: 1;\n}',{playerId:this.core.options.playerId});this.$el.removeClass("unmute--hide"),this.$el.html(e),this.core.$el.append(this.el),this.$el.append(t[0]),this.$el.on("click",this.onUnmuteButtonClick.bind(this))}},{key:"onUnmuteButtonClick",value:function(e){var t=this;e&&e.stopPropagation(),this.stopListening(this.container,Gn.WM_UNMUTED),this.core.trigger(Gn.TAP_TO_UNMUTE_CLICKED),this.hideLabel(),this.toggleUnmuteButton(),this.$el.off("click"),this.clearTimeouts(),this.timeoutId=setTimeout((function(){t.hideTapToUnmute(),t.timeoutId=null}),1e3)}},{key:"toggleUnmuteButton",value:function(){this.$el.find(".unmute__button--off").addClass("unmute__button--hide"),this.$el.find(".unmute__button--on").removeClass("unmute__button--hide")}},{key:"hideTapToUnmute",value:function(){this.isVisible&&(this.$el.off("click"),this.$el.addClass("unmute--hide"),this.isVisible=!1,this.clearTimeouts())}},{key:"render",value:function(){return this}},{key:"clearTimeouts",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.hideLabeltimeoutId&&clearTimeout(this.hideLabeltimeoutId)}},{key:"destroy",value:function(){this.clearTimeouts(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(Xe),ds=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"live_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"label",get:function(){return this.options&&this.options.isLiveContent?"AO VIVO":"AGORA"}},{key:"isLive",get:function(){return this.container&&this.container.getPlaybackType()===Je.LIVE}},{key:"attributes",get:function(){return{class:"live-indicator live-indicator--hide","aria-hidden":"true"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVRUpdated),this.listenTo(this.container,xe.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.updateState)}},{key:"onDVRUpdated",value:function(e){this.dvrInUse=e,this.updateState()}},{key:"updateState",value:function(){if(!this.isLive)return this.hide();this.dvrInUse?this.hide():this.show(),this.$el["".concat(this.container.isDvrEnabled()?"remove":"add","Class")]("live-indicator--first-element"),ne.supportsTouchEvents&&this.$el.addClass("live-indicator--first-element")}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"show",value:function(){this.$el.removeClass("live-indicator--hide")}},{key:"hide",value:function(){this.$el.addClass("live-indicator--hide")}},{key:"render",value:function(){this.$el.empty(),this.$indicator=$("<span/>").attr("data-live-indicator","").html(this.label);var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator {\n  display: flex;\n  align-self: flex-start;\n  margin-top: 5px;\n  border-radius: 2px;\n  background-color: red;\n  padding: 3px 6px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--hide {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--first-element {\n  margin-left: 12px;\n}\n.clappr-player#wp3-player-0 [data-live-indicator] {\n  color: #ffffff;\n  font-family: "Opensans", sans-serif;\n  font-weight: 700;\n  font-size: 11px;\n  line-height: 1.45;\n  letter-spacing: -0.5px;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$indicator[0]),this}}]),n}(Tr),hs='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M8 16.59L12.58 12 8 7.41 9.41 6l6 6-6 6z"/>\n    </g>\n</svg>',fs='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8.59 15.58l-4.17-4.17L3 12.82l5.59 5.59 12-12L19.18 5z"/>\n    </g>\n</svg>',ps=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<div role="menu" class="settings__options-menu">\n  <% for (var i = 0; i < options.length; i++) { %>\n    <button role="menuitem" data-option-id="<%= options[i].id %>" type="button" class="settings__options-item <% if (options[i].selected) { %>settings__options-item--active<% } %>">\n      <% if (options[i].selected) { %><span class="settings__options-active-icon"><%= activeIcon %></span><% } %>\n      <div class="settings__options-item-label">\n        <span class="settings__options-item-label-language" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n        <span class="settings__options-item-label-role" data-option-id="<%= options[i].id %>"><%= options[i].sublabel %></span>\n      </div>\n    </button>\n  <% } %>\n</div>\n')}},{key:"options",get:function(){return this.availableOptions||[]},set:function(e){this.availableOptions=this.options.map((function(t){return i(i({},t),{},{selected:t.id.toString()===e.toString()})}))}},{key:"selected",get:function(){var e=this.options.find((function(e){return e.selected})),t=e||this.options.length&&this.options[0];return t&&{language:t.label,role:t.sublabel}}},{key:"events",get:function(){return{"click .settings__options-item":"clickOption"}}},{key:"shouldRender",value:function(){return this.options&&this.options.length>1}},{key:"clickOption",value:function(e){e.stopPropagation();var t=$(e.target).closest(".settings__options-item").data("option-id"),n=parseInt(t);this.selectOption(isNaN(n)?t:n)}},{key:"selectOption",value:function(e){this.playbackUpdate(e),this.interfaceUpdate(e),this.trigger(Gn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"interfaceUpdate",value:function(e){var t=".settings__options-menu .settings__options-item",n="settings__options-item--active";this.options=e,this.$(t).find(".settings__options-active-icon").remove(),this.$(t).removeClass(n);var i=$("<span>").addClass("settings__options-active-icon").append(fs);this.$('.settings__options-item[data-option-id="'.concat(e,'"]')).addClass(n).prepend(i)}},{key:"render",value:function(){return this.shouldRender()&&(this.$el.html(this.template({options:this.options||[],title:this.title,activeIcon:fs,arrowIcon:hs})),this.$el.addClass("settings__options-wrapper")),this}}]),n}(Xe),gs={pt_br:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},pt_pt:{label:"Português (Portugal)",language:"pt-pt",languageISO_639_2B:"",keys:["pt-pt","pt-PT"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},vs={language:"off",role:"subtitle"},ms=i(i({},gs),{},{off:{label:"Desativada",language:"off",keys:["off"]}}),ys=[],As=0;for(var bs in ms)ys.push(i({id:As},ms[bs])),As++;var Es=function(e,t){var n;return(null==e?void 0:e.language)===t||(null==e||null===(n=e.keys)||void 0===n?void 0:n.includes(t))},_s=function(e,t){return e.role===t},ks=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).core=e,i.setInitialValues(),i.onAddTrack=i.onAddTrack.bind(g(i)),i.onChangeTrack=i.onChangeTrack.bind(g(i)),i}return c(n,[{key:"name",get:function(){return"subtitle_selector"}},{key:"optionName",get:function(){return"subtitle"}},{key:"title",get:function(){return"Legenda"}},{key:"isReady",get:function(){return this.video&&this.playback.innerPlaybackName}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de legenda</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"initialSubtitleOption",get:function(){return this.core.options.defaultSubtitle}},{key:"defaultOption",get:function(){return this.initialSubtitleOption||vs}},{key:"resourceSubtitles",get:function(){return this.video.selectedResource&&this.video.selectedResource.subtitles}},{key:"subtitleTrackAutoHandled",get:function(){return ne.isiOS||ne.isSafari&&"hls_fairplay_playback"===this.playback.innerPlaybackName}},{key:"tagVideo",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.videoEl}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenToOnce(this.playback,Gn.WM_RESOURCE_READY,this.setup),this.listenToOnce(this.container,xe.CONTAINER_DESTROYED,this.removeTextTrackEvents))}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"stopListening",value:function(){this.removeTextTrackEvents(),A(f(n.prototype),"stopListening",this).call(this)}},{key:"removeTextTrackEvents",value:function(){this.tagVideo&&this.subtitleTrackAutoHandled&&(this.tagVideo.textTracks.removeEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.removeEventListener("change",this.onChangeTrack))}},{key:"setInitialValues",value:function(){this.availableOptions=[],this.availableContents=[],this.currentSubtitleId=null}},{key:"setup",value:function(){this.setInitialValues();var e=this.getSubtitleResource();this.isReady&&0!==e.length&&(this.onSubtitleLoaded("off","subtitle",""),this.subtitleTrackAutoHandled?this.setupTextTracks():this.loadSubtitles(e))}},{key:"getSubtitleResource",value:function(){var e,t,n=null===(e=this.video.selectedResource.subtitleResource)||void 0===e?void 0:e.srt,i=null===(t=this.video.selectedResource.subtitleResource)||void 0===t?void 0:t.webVTT;return!!this.core.options.shouldDeviceUseWebVTT&&i.length>0&&i||n}},{key:"setupTextTracks",value:function(){this.tagVideo.textTracks.addEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.addEventListener("change",this.onChangeTrack)}},{key:"onAddTrack",value:function(e){var t=this.tagVideo.textTracks;this.onSubtitleLoaded(e.track.language,e.track.kind,""),this.availableOptions.length-1===t.length&&this.onAllSubtitlesLoaded()}},{key:"onChangeTrack",value:function(){var e=this.tagVideo.textTracks,t=Array.from(e).find((function(e){return"showing"==e.mode}))||{language:"off",kind:"subtitle"},n=this.findSubtitleOption({language:t.language,role:t.kind});n&&this.updateSubtitleSelector(n.id,!1)}},{key:"loadSubtitles",value:function(e){var t=this,n=e.map((function(e){return t.fetchSubtitle(e)}));Promise.all(n).then((function(){return t.onAllSubtitlesLoaded()}))}},{key:"fetchSubtitle",value:function(e){var t=this,n=e.url,i=e.language,r=e.role,a=e.type;return new Promise((function(e){$.ajax({url:n,timeout:3e3,success:function(n){t.onSubtitleLoaded(i,r,n,a),e()},error:function(n){t.onSubtitleLoadError(n),e()}})}))}},{key:"onSubtitleLoadError",value:function(e){Re.error(this.name,e)}},{key:"onSubtitleLoaded",value:function(e,t,n,r){var a=Object.values(ms).find((function(t){return t.keys.includes(e)}));a&&(a=i(i({},a),{},{id:this.availableOptions.length,label:this.getSubtitleLabel(a,t),role:t}),r&&(a.type=r),this.availableOptions.push(i({},a)),this.availableContents.push(n))}},{key:"getSubtitleLabel",value:function(e,t){var n=e.label;return t.match(/caption/)?n+" - CC":n}},{key:"onAllSubtitlesLoaded",value:function(){1!==this.availableOptions.length&&this.onSubtitlesReady()}},{key:"onSubtitlesReady",value:function(){this.setInitialSubtitle(),this.container.trigger(Gn.WM_SUBTITLE_AVAILABLE,this.availableOptions,this.availableContents),this.trigger(Gn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"findSubtitleOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return Es(e,t)&&_s(e,n)})),r=this.availableOptions.find((function(e){return Es(e,t)}));return i||r}},{key:"setInitialSubtitle",value:function(){if(this.availableOptions.length){var e=this.findSubtitleOption(this.initialSubtitleOption),t=this.findSubtitleOption(vs),n=e||t;this.updateSubtitleSelector(n.id,!1)}}},{key:"playbackUpdate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentSubtitleId!==e&&(this.selectedSubtitle=this.availableOptions[e],this.selectedSubtitle.selected=!0,this.currentSubtitleId=e,this.playback.currentSubtitle=this.selectedSubtitle,t&&this.container.trigger(Gn.WM_SUBTITLE_CHANGED,this.selectedSubtitle))}},{key:"updateSubtitleSelector",value:function(e,t){this.playbackUpdate(e,t),this.interfaceUpdate(e)}},{key:"getCurrentOption",value:function(){return this.selectedSubtitle}}]),n}(ps),Ts={language:"pt",languageISO_639_2B:"por"},Ss=[],ws=0;for(var Cs in gs)Ss.push(i({id:ws},gs[Cs])),ws++;var Is=function(e,t){return e.keys.includes(t)},Rs=function(e,t){return e.role===t},Ds=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.availableOptions=[],i.selectedAudio=null,i.currentAudioId=null,i}return c(n,[{key:"initialAudioOption",get:function(){return this.idPlayback.currentAudio||this.options.defaultAudio}},{key:"playback",get:function(){return this.idPlayback.playback}},{key:"audioTracks",get:function(){return[]}},{key:"onReady",value:function(){this.ready=!0,this.onAudioAvailable(),this.trigger(Gn.WM_AUDIOSELECTOR_READY)}},{key:"onAudioAvailable",value:function(){this.trigger(Gn.WM_AUDIO_AVAILABLE,this.availableOptions),this.playback.trigger(xe.PLAYBACK_AUDIO_AVAILABLE,this.availableOptions)}},{key:"setup",value:function(){}},{key:"parseAudioTracks",value:function(){}},{key:"updateAudioPlayback",value:function(){}},{key:"getAudioInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e&&"audio"!==e){var r=this.findAudioData(e);if(r)return i(i({},r),{},{sublabel:this.getAudioSublabel(n),role:n,id:t})}}},{key:"findAudioData",value:function(e){return Ss.find((function(t){return Is(t,e)}))}},{key:"getAudioSublabel",value:function(e){return e.match(/description/)?"audiodescrição":""}},{key:"findAudioOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return Is(e,t)&&Rs(e,n)})),r=this.availableOptions.find((function(e){return Is(e,t)}));return i||r}},{key:"setInitialAudio",value:function(){if(this.availableOptions.length){var e=this.findAudioOption(this.initialAudioOption),t=this.findAudioOption(Ts),n=b(this.availableOptions,1)[0],i=e||t||n;this.audioSwitch(i.id,!0)}}},{key:"getSelectedOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e||void 0!==t)return this.availableOptions.find((function(n){return n.id.toString()===e.toString()||n.language.toString()===t.toString()||n.keys.includes(t)}))}},{key:"audioSwitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.currentAudioId!==e||t)&&(this.selectedAudio=this.getSelectedOption(e),this.selectedAudio&&(this.idPlayback.currentAudio=this.selectedAudio,this.selectedAudio.selected=!0,this.currentAudioId=e,this.updateAudioPlayback(),!t&&this.trigger(Gn.WM_AUDIO_CHANGED,this.selectedAudio)))}},{key:"getCurrentOption",value:function(){return this.selectedAudio}}]),n}(Me),Ls=["alternate","description"],Ps=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"shakaPlayerInstance",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e._player}},{key:"shakaPlayerLanguages",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguages()}},{key:"shakaPlayerTracks",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguagesAndRoles()}},{key:"audioTracks",get:function(){return this.shakaPlayerTracks&&this.parseShakaTracks()||[]}},{key:"setup",value:function(){this.parseAudioTracks(),this.setInitialAudio()}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[];var t=0;this.audioTracks.forEach((function(n){var i=e.getAudioRole(n),r=e.getAudioInfo(n.language,t,i);r&&e.availableOptions.push(r),t++})),this.onReady()}},{key:"parseShakaTracks",value:function(){var e=this,t=function(e,t){return e.find((function(e){return e.role===t}))},n=[];return this.shakaPlayerLanguages.forEach((function(i){var r=e.shakaPlayerTracks.filter((function(e){return e.language===i})),a=t(r,"alternate"),o=t(r,"description");a&&o&&(r=r.filter((function(e){return"description"!==e.role}))),n.push.apply(n,E(r))})),n}},{key:"getAudioRole",value:function(e){var t=e.role;return Ls.includes(t)?"description":""}},{key:"updateAudioPlayback",value:function(){var e,t=this.selectedAudio,n=t.language,i=t.role,r=Ls.includes(i)?"alternate":"main";null===(e=this.shakaPlayerInstance)||void 0===e||e.selectAudioLanguage(n,r)}}]),n}(Ds),Os=yo((function(module,e){!function e(t){module.exports=function(){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function a(e){var t=r(e,"string");return"symbol"==typeof t?t:String(t)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return p=f()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&h(r,n.prototype),r},p.apply(null,arguments)}function g(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||!g(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},v(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _={exports:{}};!function(module,e){var t,n,i,r,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(d)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},module.exports=a}(_);var k=_.exports,T=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},S=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=w},w=Number.MAX_SAFE_INTEGER||9007199254740991,C=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),I=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),R=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({}),D=function(){},L={trace:D,debug:D,log:D,warn:D,info:D,error:D},P=L;function O(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):D}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){P[t]=e[t]?e[t].bind(e):O(t)}))}function M(e,t){if("object"==typeof console&&!0===e||"object"==typeof e){x(e,"debug","log","info","warn","error");try{P.log('Debug logs enabled for "'+t+'" in hls.js version 1.5.14-avoid-ll-hls-lipsync')}catch(e){P=L}}else P=L}var N=P,B=/^(\d+)x(\d+)$/,F=/(.+?)=(".*?"|.*?)(?:,|$)/g,U=function(){function e(t){"string"==typeof t&&(t=e.parseAttrList(t)),u(this,t)}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=B.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={},i='"';for(F.lastIndex=0;null!==(t=F.exec(e));){var r=t[2];0===r.indexOf(i)&&r.lastIndexOf(i)===r.length-1&&(r=r.slice(1,-1)),n[t[1].trim()]=r}return n},s(e,[{key:"clientAttrs",get:function(){return Object.keys(this).filter((function(e){return"X-"===e.substring(0,2)}))}}]),e}();function V(e){return"ID"!==e&&"CLASS"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function H(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}var j=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n=t.attr;for(var i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){N.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=i;break}e=u(new U({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){var r=new Date(this.attr["END-DATE"]);T(r.getTime())&&(this._endDate=r)}}return s(e,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(T(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&T(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),e}(),K=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},G={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"},W=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[G.AUDIO]=null,t[G.VIDEO]=null,t[G.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n,i=e.split("@",2);n=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[n,parseInt(i[0])+n]},s(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=k.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),Y=function(e){function t(t,n){var i;return(i=e.call(this,n)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new K,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.urlId=0,i.type=t,i}c(t,e);var n=t.prototype;return n.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},n.abortRequests=function(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()},n.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,i),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[G.AUDIO]=null,e[G.VIDEO]=null,e[G.AUDIOVIDEO]=null},s(t,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!T(this.programDateTime))return null;var e=T(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),n=t.length;if(n>1||1===n&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),t}(W),z=function(e){function t(t,n,i,r,a){var o;(o=e.call(this,i)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new K,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=n,o.index=r;var s=t.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return c(t,e),s(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(W),q=10,$=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},s(e,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&T(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||q}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),e}();function X(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function Q(e){var t=ee(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}function J(e){var t=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function Z(e){var t=e.split(":"),n=null;if("data"===t[0]&&2===t.length){var i=t[1].split(";"),r=i[i.length-1].split(",");if(2===r.length){var a="base64"===r[0],o=r[1];a?(i.splice(-1,1),n=X(o)):n=Q(o)}}return n}function ee(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}var te="undefined"!=typeof self?self:void 0,ne={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ie={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function re(e){switch(e){case ie.FAIRPLAY:return ne.FAIRPLAY;case ie.PLAYREADY:return ne.PLAYREADY;case ie.WIDEVINE:return ne.WIDEVINE;case ie.CLEARKEY:return ne.CLEARKEY}}var ae={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function oe(e){if(e===ae.WIDEVINE)return ne.WIDEVINE}function se(e){switch(e){case ne.FAIRPLAY:return ie.FAIRPLAY;case ne.PLAYREADY:return ie.PLAYREADY;case ne.WIDEVINE:return ie.WIDEVINE;case ne.CLEARKEY:return ie.CLEARKEY}}function le(e){var t=e.drmSystems,n=e.widevineLicenseUrl,i=t?[ne.FAIRPLAY,ne.WIDEVINE,ne.PLAYREADY,ne.CLEARKEY].filter((function(e){return!!t[e]})):[];return!i[ne.WIDEVINE]&&n&&i.push(ne.WIDEVINE),i}var ue,ce=null!=te&&null!=(ue=te.navigator)&&ue.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function de(e,t,n,i){var r;switch(e){case ne.FAIRPLAY:r=["cenc","sinf"];break;case ne.WIDEVINE:case ne.PLAYREADY:r=["cenc"];break;case ne.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return he(r,t,n,i)}function he(e,t,n,i){return[{initDataTypes:e,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:n.map((function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))}]}function fe(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}var pe,ge=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},ve=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},me=function(e,t){for(var n=t,i=0;ge(e,t);)i+=10,i+=ye(e,t+6),ve(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(n,n+i)},ye=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},Ae=function(e,t){return ge(e,t)&&ye(e,t+6)+10<=e.length-t},be=function(e){for(var t=ke(e),n=0;n<t.length;n++){var i=t[n];if(Ee(i))return Ie(i)}},Ee=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},_e=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=ye(e,4),i=10;return{type:t,size:n,data:e.subarray(i,i+n)}},ke=function(e){for(var t=0,n=[];ge(e,t);){for(var i=ye(e,t+6),r=(t+=10)+i;t+8<r;){var a=_e(e.subarray(t)),o=Te(a);o&&n.push(o),t+=a.size+10}ve(e,t)&&(t+=10)}return n},Te=function(e){return"PRIV"===e.type?Se(e):"W"===e.type[0]?Ce(e):we(e)},Se=function(e){if(!(e.size<2)){var t=Re(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},we=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=Re(e.data.subarray(t),!0);t+=n.length+1;var i=Re(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=Re(e.data.subarray(1));return{key:e.type,data:r}}},Ce=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=Re(e.data.subarray(t),!0);t+=n.length+1;var i=Re(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=Re(e.data);return{key:e.type,data:r}},Ie=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},Re=function(e,t){void 0===t&&(t=!1);var n=De();if(n){var i=n.decode(e);if(t){var r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var a,o,s,l=e.length,u="",c=0;c<l;){if(0===(a=e[c++])&&t)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:o=e[c++],u+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[c++],s=e[c++],u+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return u};function De(){if(!navigator.userAgent.includes("PlayStation 4"))return pe||void 0===self.TextDecoder||(pe=new self.TextDecoder("utf-8")),pe}var Le={hexDump:function(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);i.length<2&&(i="0"+i),t+=i}return t}},Pe=Math.pow(2,32)-1,Oe=[].push,xe={video:1,audio:2,id3:3,text:4};function Me(e){return String.fromCharCode.apply(null,e)}function Ne(e,t){var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function Be(e,t){var n=Ue(e,t);return n<0?4294967296+n:n}function Fe(e,t){var n=Be(e,t);return n*=Math.pow(2,32),n+=Be(e,t+4)}function Ue(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Ve(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function He(e){for(var t=e.byteLength,n=0;n<t;){var i=Be(e,n);if(i>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=i>1?n+i:t}return!1}function je(e,t){var n=[];if(!t.length)return n;for(var i=e.byteLength,r=0;r<i;){var a=Be(e,r),o=a>1?r+a:i;if(Me(e.subarray(r+4,r+8))===t[0])if(1===t.length)n.push(e.subarray(r+8,o));else{var s=je(e.subarray(r+8,o),t.slice(1));s.length&&Oe.apply(n,s)}r=o}return n}function Ke(e){var t=[],n=e[0],i=8,r=Be(e,i);i+=4;var a=0,o=0;0===n?(a=Be(e,i),o=Be(e,i+4),i+=8):(a=Fe(e,i),o=Fe(e,i+8),i+=16),i+=2;var s=e.length+o,l=Ne(e,i);i+=2;for(var u=0;u<l;u++){var c=i,d=Be(e,c);c+=4;var h=2147483647&d;if(1==(2147483648&d)>>>31)return N.warn("SIDX has hierarchical references (not supported)"),null;var f=Be(e,c);c+=4,t.push({referenceSize:h,subsegmentDuration:f,info:{duration:f/r,start:s,end:s+h-1}}),s+=h,i=c+=4}return{earliestPresentationTime:a,timescale:r,version:n,referencesCount:l,references:t}}function Ge(e){for(var t=[],n=je(e,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],o=je(a,["tkhd"])[0];if(o){var s=o[0],l=Be(o,0===s?12:20),u=je(a,["mdia","mdhd"])[0];if(u){var c=Be(u,0===(s=u[0])?12:20),d=je(a,["mdia","hdlr"])[0];if(d){var h=Me(d.subarray(8,12)),f={soun:G.AUDIO,vide:G.VIDEO}[h];if(f){var p=We(je(a,["mdia","minf","stbl","stsd"])[0]);t[l]={timescale:c,type:f},t[f]=i({timescale:c,id:l},p)}}}}}return je(e,["moov","mvex","trex"]).forEach((function(e){var n=Be(e,4),i=t[n];i&&(i.default={duration:Be(e,12),flags:Be(e,20)})})),t}function We(e){var t=e.subarray(8),n=t.subarray(86),i=Me(t.subarray(4,8)),r=i,a="enca"===i||"encv"===i;if(a){var o=je(t,[i])[0];je(o.subarray("enca"===i?28:78),["sinf"]).forEach((function(e){var t=je(e,["schm"])[0];if(t){var n=Me(t.subarray(4,8));if("cbcs"===n||"cenc"===n){var i=je(e,["frma"])[0];i&&(r=Me(i))}}}))}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":var s=je(n,["avcC"])[0];r+="."+ze(s[1])+ze(s[2])+ze(s[3]);break;case"mp4a":var l=je(t,[i])[0],u=je(l.subarray(28),["esds"])[0];if(u&&u.length>12){var c=4;if(3!==u[c++])break;c=Ye(u,c),c+=2;var d=u[c++];if(128&d&&(c+=2),64&d&&(c+=u[c++]),4!==u[c++])break;c=Ye(u,c);var h=u[c++];if(64!==h)break;if(r+="."+ze(h),c+=12,5!==u[c++])break;c=Ye(u,c);var f=u[c++],p=(248&f)>>3;31===p&&(p+=1+((7&f)<<3)+((224&u[c])>>5)),r+="."+p}break;case"hvc1":case"hev1":var g=je(n,["hvcC"])[0],v=g[1],m=["","A","B","C"][v>>6],y=31&v,A=Be(g,2),b=(32&v)>>5?"H":"L",E=g[12],_=g.subarray(6,12);r+="."+m+y,r+="."+A.toString(16).toUpperCase(),r+="."+b+E;for(var k="",T=_.length;T--;){var S=_[T];(S||k)&&(k="."+S.toString(16).toUpperCase()+k)}r+=k;break;case"dvh1":case"dvhe":var w=je(n,["dvcC"])[0],C=w[2]>>1&127,I=w[2]<<5&32|w[3]>>3&31;r+="."+qe(C)+"."+qe(I);break;case"vp09":var R=je(n,["vpcC"])[0],D=R[4],L=R[5],P=R[6]>>4&15;r+="."+qe(D)+"."+qe(L)+"."+qe(P);break;case"av01":var O=je(n,["av1C"])[0],x=O[1]>>>5,M=31&O[1],N=O[2]>>>7?"H":"M",B=(64&O[2])>>6,F=(32&O[2])>>5,U=2===x&&B?F?12:10:B?10:8,V=(16&O[2])>>4,H=(8&O[2])>>3,j=(4&O[2])>>2,K=3&O[2],G=1,W=1,Y=1,z=0;r+="."+x+"."+qe(M)+N+"."+qe(U)+"."+V+"."+H+j+K+"."+qe(G)+"."+qe(W)+"."+qe(Y)+"."+z}return{codec:r,encrypted:a}}function Ye(e,t){for(var n=t+5;128&e[t++]&&t<n;);return t}function ze(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function qe(e){return(e<10?"0":"")+e}function $e(e,t){if(!e||!t)return e;var n=t.keyId;return n&&t.isCommonEncryption&&je(e,["moov","trak"]).forEach((function(e){var t=je(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=je(t,["enca"]),r=i.length>0;r||(i=je(t,["encv"])),i.forEach((function(e){je(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t=Xe(e);if(t){var i=t.subarray(8,24);i.some((function(e){return 0!==e}))||(N.log("[eme] Patching keyId in 'enc"+(r?"a":"v")+">sinf>>tenc' box: "+Le.hexDump(i)+" -> "+Le.hexDump(n)),t.set(n,8))}}))}))})),e}function Xe(e){var t=je(e,["schm"])[0];if(t){var n=Me(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return je(e,["schi","tenc"])[0]}return N.error("[eme] missing 'schm' box"),null}function Qe(e,t){return je(t,["moof","traf"]).reduce((function(t,n){var i=je(n,["tfdt"])[0],r=i[0],a=je(n,["tfhd"]).reduce((function(t,n){var a=Be(n,4),o=e[a];if(o){var s=Be(i,4);if(1===r){if(s===Pe)return N.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;s*=Pe+1,s+=Be(i,8)}var l=s/(o.timescale||9e4);if(T(l)&&(null===t||l<t))return l}return t}),null);return null!==a&&T(a)&&(null===t||a<t)?a:t}),null)}function Je(e,t){for(var n=0,i=0,r=0,a=je(e,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],l=je(s,["tfhd"])[0],u=t[Be(l,4)];if(u){var c=u.default,d=Be(l,0)|(null==c?void 0:c.flags),h=null==c?void 0:c.duration;8&d&&(h=Be(l,2&d?12:8));for(var f=u.timescale||9e4,p=je(s,["trun"]),g=0;g<p.length;g++)!(n=Ze(p[g]))&&h&&(n=h*Be(p[g],4)),u.type===G.VIDEO?i+=n/f:u.type===G.AUDIO&&(r+=n/f)}}if(0===i&&0===r){for(var v=1/0,m=0,y=0,A=je(e,["sidx"]),b=0;b<A.length;b++){var E=Ke(A[b]);if(null!=E&&E.references){v=Math.min(v,E.earliestPresentationTime/E.timescale);var _=E.references.reduce((function(e,t){return e+t.info.duration||0}),0);y=(m=Math.max(m,_+E.earliestPresentationTime/E.timescale))-v}}if(y&&T(y))return y}return i||r}function Ze(e){var t=Be(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=Be(e,4),a=0;a<r;a++)256&t&&(i+=Be(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}function et(e,t,n){je(t,["moof","traf"]).forEach((function(t){je(t,["tfhd"]).forEach((function(i){var r=Be(i,4),a=e[r];if(a){var o=a.timescale||9e4;je(t,["tfdt"]).forEach((function(e){var t=e[0],i=n*o;if(i){var r=Be(e,4);if(0===t)r-=i,Ve(e,4,r=Math.max(r,0));else{r*=Math.pow(2,32),r+=Be(e,8),r-=i,r=Math.max(r,0);var a=Math.floor(r/(Pe+1)),s=Math.floor(r%(Pe+1));Ve(e,4,a),Ve(e,8,s)}}}))}}))}))}function tt(e){var t={valid:null,remainder:null},n=je(e,["moof"]);if(n.length<2)return t.remainder=e,t;var i=n[n.length-1];return t.valid=fe(e,0,i.byteOffset-8),t.remainder=fe(e,i.byteOffset-8),t}function nt(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function it(e,t){var n=[],i=t.samples,r=t.timescale,a=t.id,o=!1;return je(i,["moof"]).map((function(s){var l=s.byteOffset-8;je(s,["traf"]).map((function(s){var u=je(s,["tfdt"]).map((function(e){var t=e[0],n=Be(e,4);return 1===t&&(n*=Math.pow(2,32),n+=Be(e,8)),n/r}))[0];return void 0!==u&&(e=u),je(s,["tfhd"]).map((function(u){var c=Be(u,4),d=16777215&Be(u,0),h=0,f=0!=(16&d),p=0,g=0!=(32&d),v=8;c===a&&(0!=(1&d)&&(v+=8),0!=(2&d)&&(v+=4),0!=(8&d)&&(h=Be(u,v),v+=4),f&&(p=Be(u,v),v+=4),g&&(v+=4),"video"===t.type&&(o=rt(t.codec)),je(s,["trun"]).map((function(a){var s=a[0],u=16777215&Be(a,0),c=0!=(1&u),d=0,f=0!=(4&u),g=0!=(256&u),v=0,m=0!=(512&u),y=0,A=0!=(1024&u),b=0!=(2048&u),E=0,_=Be(a,4),k=8;c&&(d=Be(a,k),k+=4),f&&(k+=4);for(var T=d+l,S=0;S<_;S++){if(g?(v=Be(a,k),k+=4):v=h,m?(y=Be(a,k),k+=4):y=p,A&&(k+=4),b&&(E=0===s?Be(a,k):Ue(a,k),k+=4),t.type===G.VIDEO)for(var w=0;w<y;){var C=Be(i,T);at(o,i[T+=4])&&ot(i.subarray(T,T+C),o?2:1,e+E/r,n),T+=C,w+=C+4}e+=v/r}})))}))}))})),n}function rt(e){if(!e)return!1;var t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}function at(e,t){if(e){var n=t>>1&63;return 39===n||40===n}return 6==(31&t)}function ot(e,t,n,i){var r=st(e),a=0;a+=t;for(var o=0,s=0,l=0;a<r.length;){o=0;do{if(a>=r.length)break;o+=l=r[a++]}while(255===l);s=0;do{if(a>=r.length)break;s+=l=r[a++]}while(255===l);var u=r.length-a,c=a;if(s<u)a+=s;else if(s>u){N.error("Malformed SEI payload. "+s+" is too small, only "+u+" bytes left to parse.");break}if(4===o){if(181===r[c++]){var d=Ne(r,c);if(c+=2,49===d){var h=Be(r,c);if(c+=4,1195456820===h){var f=r[c++];if(3===f){var p=r[c++],g=64&p,v=g?2+3*(31&p):0,m=new Uint8Array(v);if(g){m[0]=p;for(var y=1;y<v;y++)m[y]=r[c++]}i.push({type:f,payloadType:o,pts:n,bytes:m})}}}}}else if(5===o&&s>16){for(var A=[],b=0;b<16;b++){var E=r[c++].toString(16);A.push(1==E.length?"0"+E:E),3!==b&&5!==b&&7!==b&&9!==b||A.push("-")}for(var _=s-16,k=new Uint8Array(_),T=0;T<_;T++)k[T]=r[c++];i.push({payloadType:o,pts:n,uuid:A.join(""),userData:Re(k),userDataBytes:k})}}}function st(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),o=0;for(i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a}function lt(e){var t=e[0],n="",i="",r=0,a=0,o=0,s=0,l=0,u=0;if(0===t){for(;"\0"!==Me(e.subarray(u,u+1));)n+=Me(e.subarray(u,u+1)),u+=1;for(n+=Me(e.subarray(u,u+1)),u+=1;"\0"!==Me(e.subarray(u,u+1));)i+=Me(e.subarray(u,u+1)),u+=1;i+=Me(e.subarray(u,u+1)),u+=1,r=Be(e,12),a=Be(e,16),s=Be(e,20),l=Be(e,24),u=28}else if(1===t){r=Be(e,u+=4);var c=Be(e,u+=4),d=Be(e,u+=4);for(u+=4,o=Math.pow(2,32)*c+d,S(o)||(o=Number.MAX_SAFE_INTEGER,N.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=Be(e,u),l=Be(e,u+=4),u+=4;"\0"!==Me(e.subarray(u,u+1));)n+=Me(e.subarray(u,u+1)),u+=1;for(n+=Me(e.subarray(u,u+1)),u+=1;"\0"!==Me(e.subarray(u,u+1));)i+=Me(e.subarray(u,u+1)),u+=1;i+=Me(e.subarray(u,u+1)),u+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(u,e.byteLength)}}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length,a=8,o=r;o--;)a+=n[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<r;o++)s.set(n[o],a),a+=n[o].byteLength;return s}function ct(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i,r,a;if(t){i=1,r=new Uint8Array(16*t.length);for(var o=0;o<t.length;o++){var s=t[o];if(16!==s.byteLength)throw new RangeError("Invalid key");r.set(s,16*o)}}else i=0,r=new Uint8Array;i>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(l.buffer).setUint32(0,n.byteLength,!1),ut([112,115,115,104],new Uint8Array([i,0,0,0]),e,a,r,l,n||new Uint8Array)}function dt(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=Le.hexDump(new Uint8Array(e,12,16));var r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}var ht={},ft=function(){function e(e,t,n,i,r){void 0===i&&(i=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}e.clearKeyUriToKeyIdMap=function(){ht={}};var t=e.prototype;return t.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case ie.FAIRPLAY:case ie.WIDEVINE:case ie.PLAYREADY:case ie.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||N.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var n=pt(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,n)}var i=Z(this.uri);if(i)switch(this.keyFormat){case ie.WIDEVINE:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case ie.PLAYREADY:var r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=ct(r,null,i);var a=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),o=String.fromCharCode.apply(null,Array.from(a)),s=o.substring(o.indexOf("<"),o.length),l=(new DOMParser).parseFromString(s,"text/xml").getElementsByTagName("KID")[0];if(l){var u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){var c=X(u).subarray(0,16);J(c),this.keyId=c}}break;default:var d=i.subarray(0,16);if(16!==d.length){var h=new Uint8Array(16);h.set(d,16-d.length),d=h}this.keyId=d}if(!this.keyId||16!==this.keyId.byteLength){var f=ht[this.uri];if(!f){var p=Object.keys(ht).length%Number.MAX_SAFE_INTEGER;f=new Uint8Array(16),new DataView(f.buffer,12,4).setUint32(0,p),ht[this.uri]=f}this.keyId=f}return this},e}();function pt(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}var gt=/\{\$([a-zA-Z0-9-_]+)\}/g;function vt(e){return gt.test(e)}function mt(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(var i=n.length;i--;){var r=n[i],a=t[r];a&&(t[r]=yt(e,a))}}function yt(e,t){if(null!==e.variableList||e.hasVariableRefs){var n=e.variableList;return t.replace(gt,(function(t){var i=t.substring(2,t.length-1),r=null==n?void 0:n[i];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+i+'"')),t):r}))}return t}function At(e,t,n){var i,r,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{var o=new self.URL(n).searchParams;if(!o.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+n+'"');r=o.get(i)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else i=t.NAME,r=t.VALUE;i in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=r||""}function bt(e,t,n){var i=t.IMPORT;if(n&&i in n){var r=e.variableList;r||(e.variableList=r={}),r[i]=n[i]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'))}function Et(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function _t(e){return"undefined"!=typeof self&&e===self.ManagedMediaSource}var kt={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Tt(e,t){var n=kt[t];return!!n&&!!n[e.slice(0,4)]}function St(e,t,n){return void 0===n&&(n=!0),!e.split(",").some((function(e){return!wt(e,t,n)}))}function wt(e,t,n){var i;void 0===n&&(n=!0);var r=Et(n);return null!=(i=null==r?void 0:r.isTypeSupported(Ct(e,t)))&&i}function Ct(e,t){return t+'/mp4;codecs="'+e+'"'}function It(e){if(e){var t=e.substring(0,4);return kt.video[t]}return 2}function Rt(e){return e.split(",").reduce((function(e,t){var n=kt.video[t];return n?(2*n+e)/(e?3:2):(kt.audio[t]+e)/(e?2:1)}),0)}var Dt={};function Lt(e,t){if(void 0===t&&(t=!0),Dt[e])return Dt[e];for(var n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e],i=0;i<n.length;i++)if(wt(n[i],"audio",t))return Dt[e]=n[i],n[i];return e}var Pt=/flac|opus/i;function Ot(e,t){return void 0===t&&(t=!0),e.replace(Pt,(function(e){return Lt(e.toLowerCase(),t)}))}function xt(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}function Mt(e){for(var t=e.split(","),n=0;n<t.length;n++){var i=t[n].split(".");if(i.length>2){var r=i.shift()+".";r+=parseInt(i.shift()).toString(16),r+=("000"+parseInt(i.shift()).toString(16)).slice(-4),t[n]=r}}return t.join(",")}var Nt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Bt=/#EXT-X-MEDIA:(.*)/g,Ft=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ut=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Vt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Ht=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.resolve=function(e,t){return k.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.isMediaPlaylist=function(e){return Ft.test(e)},e.parseMasterPlaylist=function(t,n){var i,r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:vt(t)},a=[];for(Nt.lastIndex=0;null!=(i=Nt.exec(t));)if(i[1]){var o,s=new U(i[1]);mt(r,s,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var l=yt(r,i[2]),u={attrs:s,bitrate:s.decimalInteger("BANDWIDTH")||s.decimalInteger("AVERAGE-BANDWIDTH"),name:s.NAME,url:e.resolve(l,n)},c=s.decimalResolution("RESOLUTION");c&&(u.width=c.width,u.height=c.height),Gt(s.CODECS,u),null!=(o=u.unknownCodecs)&&o.length||a.push(u),r.levels.push(u)}else if(i[3]){var d=i[3],h=i[4];switch(d){case"SESSION-DATA":var f=new U(h);mt(r,f,["DATA-ID","LANGUAGE","VALUE","URI"]);var p=f["DATA-ID"];p&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[p]=f);break;case"SESSION-KEY":var g=jt(h,n,r);g.encrypted&&g.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(g)):N.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+h+'"');break;case"DEFINE":var v=new U(h);mt(r,v,["NAME","VALUE","QUERYPARAM"]),At(r,v,n);break;case"CONTENT-STEERING":var m=new U(h);mt(r,m,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:e.resolve(m["SERVER-URI"],n),pathwayId:m["PATHWAY-ID"]||"."};break;case"START":r.startTimeOffset=Kt(h)}}var y=a.length>0&&a.length<r.levels.length;return r.levels=y?a:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r},e.parseMasterPlaylistMedia=function(t,n,i){var r,a={},o=i.levels,s={AUDIO:o.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),SUBTITLES:o.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),"CLOSED-CAPTIONS":[]},l=0;for(Bt.lastIndex=0;null!==(r=Bt.exec(t));){var u=new U(r[1]),c=u.TYPE;if(c){var d=s[c],h=a[c]||[];a[c]=h,mt(i,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var f=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],g=u.CHANNELS,v=u.CHARACTERISTICS,m=u["INSTREAM-ID"],y={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||f||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:f,url:u.URI?e.resolve(u.URI,n):""};if(p&&(y.assocLang=p),g&&(y.channels=g),v&&(y.characteristics=v),m&&(y.instreamId=m),null!=d&&d.length){var A=e.findGroup(d,y.groupId)||d[0];Wt(y,A,"audioCodec"),Wt(y,A,"textCodec")}h.push(y)}}return a},e.parseLevelPlaylist=function(e,t,n,i,r,a){var o,s,l,c=new $(t),d=c.fragments,h=null,f=0,p=0,g=0,v=0,m=null,y=new Y(i,t),A=-1,b=!1,E=null;for(Ut.lastIndex=0,c.m3u8=e,c.hasVariableRefs=vt(e);null!==(o=Ut.exec(e));){b&&(b=!1,(y=new Y(i,t)).start=g,y.sn=f,y.cc=v,y.level=n,h&&(y.initSegment=h,y.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null,E&&(y.setByteRange(E),E=null)));var _=o[1];if(_){y.duration=parseFloat(_);var k=(" "+o[2]).slice(1);y.title=k||null,y.tagList.push(k?["INF",_,k]:["INF",_])}else if(o[3]){if(T(y.duration)){y.start=g,l&&$t(y,l,c),y.sn=f,y.level=n,y.cc=v,d.push(y);var S=(" "+o[3]).slice(1);y.relurl=yt(c,S),zt(y,m),m=y,g+=y.duration,f++,p=0,b=!0}}else if(o[4]){var w=(" "+o[4]).slice(1);m?y.setByteRange(w,m):y.setByteRange(w)}else if(o[5])y.rawProgramDateTime=(" "+o[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===A&&(A=d.length);else{if(!(o=o[0].match(Vt))){N.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<o.length&&void 0===o[s];s++);var C=(" "+o[s]).slice(1),I=(" "+o[s+1]).slice(1),R=o[s+2]?(" "+o[s+2]).slice(1):"";switch(C){case"PLAYLIST-TYPE":c.type=I.toUpperCase();break;case"MEDIA-SEQUENCE":f=c.startSN=parseInt(I);break;case"SKIP":var D=new U(I);mt(c,D,["RECENTLY-REMOVED-DATERANGES"]);var L=D.decimalInteger("SKIPPED-SEGMENTS");if(T(L)){c.skippedSegments=L;for(var P=L;P--;)d.unshift(null);f+=L}var O=D.enumeratedString("RECENTLY-REMOVED-DATERANGES");O&&(c.recentlyRemovedDateranges=O.split("\t"));break;case"TARGETDURATION":c.targetduration=Math.max(parseInt(I),1);break;case"VERSION":c.version=parseInt(I);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"#":(I||R)&&y.tagList.push(R?[I,R]:[I]);break;case"DISCONTINUITY":v++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([C]);break;case"BITRATE":y.tagList.push([C,I]);break;case"DATERANGE":var x=new U(I);mt(c,x,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),mt(c,x,x.clientAttrs);var M=new j(x,c.dateRanges[x.ID]);M.isValid||c.skippedSegments?c.dateRanges[M.id]=M:N.warn('Ignoring invalid DATERANGE tag: "'+I+'"'),y.tagList.push(["EXT-X-DATERANGE",I]);break;case"DEFINE":var B=new U(I);mt(c,B,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in B?bt(c,B,a):At(c,B,t);break;case"DISCONTINUITY-SEQUENCE":v=parseInt(I);break;case"KEY":var F=jt(I,t,c);if(F.isSupported()){if("NONE"===F.method){l=void 0;break}l||(l={}),l[F.keyFormat]&&(l=u({},l)),l[F.keyFormat]=F}else N.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+I+'"');break;case"START":c.startTimeOffset=Kt(I);break;case"MAP":var V=new U(I);if(mt(c,V,["BYTERANGE","URI"]),y.duration){var H=new Y(i,t);qt(H,V,n,l),h=H,y.initSegment=h,h.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=h.rawProgramDateTime)}else{var K=y.byteRangeEndOffset;if(K){var G=y.byteRangeStartOffset;E=K-G+"@"+G}else E=null;qt(y,V,n,l),h=y,b=!0}break;case"SERVER-CONTROL":var W=new U(I);c.canBlockReload=W.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=W.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&W.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=W.optionalFloat("PART-HOLD-BACK",0),c.holdBack=W.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var q=new U(I);c.partTarget=q.decimalFloatingPoint("PART-TARGET");break;case"PART":var X=c.partList;X||(X=c.partList=[]);var Q=p>0?X[X.length-1]:void 0,J=p++,Z=new U(I);mt(c,Z,["BYTERANGE","URI"]);var ee=new z(Z,y,t,J,Q);X.push(ee),y.duration+=ee.duration;break;case"PRELOAD-HINT":var te=new U(I);mt(c,te,["URI"]),c.preloadHint=te;break;case"RENDITION-REPORT":var ne=new U(I);mt(c,ne,["URI"]),c.renditionReports=c.renditionReports||[],c.renditionReports.push(ne);break;default:N.warn("line parsed but not handled: "+o)}}}m&&!m.relurl?(d.pop(),g-=m.duration,c.partList&&(c.fragmentHint=m)):c.partList&&(zt(y,m),y.cc=v,c.fragmentHint=y,l&&$t(y,l,c));var ie=d.length,re=d[0],ae=d[ie-1];if((g+=c.skippedSegments*c.targetduration)>0&&ie&&ae){c.averagetargetduration=g/ie;var oe=ae.sn;c.endSN="initSegment"!==oe?oe:0,c.live||(ae.endList=!0),re&&(c.startCC=re.cc)}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,c.endCC=v,A>0&&Yt(d,A),c},e}();function jt(e,t,n){var i,r,a=new U(e);mt(n,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var o=null!=(i=a.METHOD)?i:"",s=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,c=null!=(r=a.KEYFORMAT)?r:"identity";s&&a.IV&&!l&&N.error("Invalid IV: "+a.IV);var d=s?Ht.resolve(s,t):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new ft(o,d,c,h,l)}function Kt(e){var t=new U(e).decimalFloatingPoint("TIME-OFFSET");return T(t)?t:null}function Gt(e,t){var n=(e||"").split(/[ ,]+/).filter((function(e){return e}));["video","audio","text"].forEach((function(e){var i=n.filter((function(t){return Tt(t,e)}));i.length&&(t[e+"Codec"]=i.join(","),n=n.filter((function(e){return-1===i.indexOf(e)})))})),t.unknownCodecs=n}function Wt(e,t,n){var i=t[n];i&&(e[n]=i)}function Yt(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}function zt(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),T(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function qt(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function $t(e,t,n){e.levelkeys=t;var i=n.encryptedFragments;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||i.push(e)}var Xt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Qt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function Jt(e){switch(e.type){case Xt.AUDIO_TRACK:return Qt.AUDIO;case Xt.SUBTITLE_TRACK:return Qt.SUBTITLE;default:return Qt.MAIN}}function Zt(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var en=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(C.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(C.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return this.loaders[e.type]=r,r},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Xt.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.pathwayId,a=t.url,o=t.deliveryDirectives;this.load({id:n,level:i,pathwayId:r,responseType:"text",type:Xt.LEVEL,url:a,deliveryDirectives:o})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:Xt.AUDIO_TRACK,url:r,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:Xt.SUBTITLE_TRACK,url:r,deliveryDirectives:a})},t.load=function(e){var t,n,i,r=this,a=this.hls.config,o=this.getInternalLoader(e);if(o){var s=o.context;if(s&&s.url===e.url&&s.level===e.level)return void N.trace("[playlist-loader]: playlist request ongoing");N.log("[playlist-loader]: aborting previous loader for type: "+e.type),o.abort()}if(n=e.type===Xt.MANIFEST?a.manifestLoadPolicy.default:u({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),o=this.createInternalLoader(e),T(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===Xt.LEVEL&&null!==e.level?i=this.hls.levels[e.level].details:e.type===Xt.AUDIO_TRACK&&null!==e.id?i=this.hls.audioTracks[e.id].details:e.type===Xt.SUBTITLE_TRACK&&null!==e.id&&(i=this.hls.subtitleTracks[e.id].details),i)){var l=i.partTarget,c=i.targetduration;if(l&&c){var d=1e3*Math.max(3*l,.8*c);n=u({},n,{maxTimeToFirstByteMs:Math.min(d,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(d,n.maxTimeToFirstByteMs)})}}var h=n.errorRetry||n.timeoutRetry||{},f={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:h.maxNumRetry||0,retryDelay:h.retryDelayMs||0,maxRetryDelay:h.maxRetryDelayMs||0},p={onSuccess:function(e,t,n,i){var a=r.getInternalLoader(n);r.resetInternalLoader(n.type);var o=e.data;0===o.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Ht.isMediaPlaylist(o)?r.handleTrackOrLevelPlaylist(e,t,n,i||null,a):r.handleMasterPlaylist(e,t,n,i)):r.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),i||null,t)},onError:function(e,t,n,i){r.handleNetworkError(t,n,!1,e,i)},onTimeout:function(e,t,n){r.handleNetworkError(t,n,!0,void 0,e)}};o.load(e,f,p)},t.handleMasterPlaylist=function(e,t,n,i){var r=this.hls,a=e.data,o=Zt(e,n),s=Ht.parseMasterPlaylist(a,o);if(s.playlistParsingError)this.handleManifestParsingError(e,n,s.playlistParsingError,i,t);else{var l=s.contentSteering,u=s.levels,c=s.sessionData,d=s.sessionKeys,h=s.startTimeOffset,f=s.variableList;this.variableList=f;var p=Ht.parseMasterPlaylistMedia(a,o,s),g=p.AUDIO,v=void 0===g?[]:g,m=p.SUBTITLES,y=p["CLOSED-CAPTIONS"];v.length&&(v.some((function(e){return!e.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(N.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new U({}),bitrate:0,url:""}))),r.trigger(C.MANIFEST_LOADED,{levels:u,audioTracks:v,subtitles:m,captions:y,contentSteering:l,url:o,stats:t,networkDetails:i,sessionData:c,sessionKeys:d,startTimeOffset:h,variableList:f})}},t.handleTrackOrLevelPlaylist=function(e,t,n,i,r){var a=this.hls,o=n.id,s=n.level,l=n.type,u=Zt(e,n),c=0,d=T(s)?s:T(o)?o:0,h=Jt(n),f=Ht.parseLevelPlaylist(e.data,u,d,h,c,this.variableList);if(l===Xt.MANIFEST){var p={attrs:new U({}),bitrate:0,details:f,name:"",url:u};a.trigger(C.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=f,this.handlePlaylistLoaded(f,e,t,n,i,r)},t.handleManifestParsingError=function(e,t,n,i,r){this.hls.trigger(C.ERROR,{type:I.NETWORK_ERROR,details:R.MANIFEST_PARSING_ERROR,fatal:t.type===Xt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})},t.handleNetworkError=function(e,t,n,r,a){void 0===n&&(n=!1);var o="A network "+(n?"timeout":"error"+(r?" (status "+r.code+")":""))+" occurred while loading "+e.type;e.type===Xt.LEVEL?o+=": "+e.level+" id: "+e.id:e.type!==Xt.AUDIO_TRACK&&e.type!==Xt.SUBTITLE_TRACK||(o+=" id: "+e.id+' group-id: "'+e.groupId+'"');var s=new Error(o);N.warn("[playlist-loader]: "+o);var l=R.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case Xt.MANIFEST:l=n?R.MANIFEST_LOAD_TIMEOUT:R.MANIFEST_LOAD_ERROR,u=!0;break;case Xt.LEVEL:l=n?R.LEVEL_LOAD_TIMEOUT:R.LEVEL_LOAD_ERROR,u=!1;break;case Xt.AUDIO_TRACK:l=n?R.AUDIO_TRACK_LOAD_TIMEOUT:R.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case Xt.SUBTITLE_TRACK:l=n?R.SUBTITLE_TRACK_LOAD_TIMEOUT:R.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(e.type);var d={type:I.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:s,networkDetails:t,stats:a};if(r){var h=(null==t?void 0:t.url)||e.url;d.response=i({url:h,data:void 0},r)}this.hls.trigger(C.ERROR,d)},t.handlePlaylistLoaded=function(e,t,n,i,r,a){var o=this.hls,s=i.type,l=i.level,u=i.id,c=i.groupId,d=i.deliveryDirectives,h=Zt(t,i),f=Jt(i),p="number"==typeof i.level&&f===Qt.MAIN?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var g=e.playlistParsingError;if(g)o.trigger(C.ERROR,{type:I.NETWORK_ERROR,details:R.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:g,reason:g.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case Xt.MANIFEST:case Xt.LEVEL:o.trigger(C.LEVEL_LOADED,{details:e,level:p||0,id:u||0,stats:n,networkDetails:r,deliveryDirectives:d});break;case Xt.AUDIO_TRACK:o.trigger(C.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:d});break;case Xt.SUBTITLE_TRACK:o.trigger(C.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:d})}}else{var v=new Error("No Segments found in Playlist");o.trigger(C.ERROR,{type:I.NETWORK_ERROR,details:R.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n})}},e}();function tn(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function nn(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){N.debug("[texttrack-utils]: "+n);try{var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(e){N.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===n&&(e.mode=n)}function rn(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function an(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=sn(e.cues,t,n),o=0;o<a.length;o++)i&&!i(a[o])||e.removeCue(a[o]);"disabled"===r&&(e.mode=r)}function on(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}function sn(e,t,n){var i=[],r=on(e,t);if(r>-1)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=n)i.push(s);else if(s.startTime>n)return i}return i}function ln(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[n])}return t}var un={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"},cn=.25;function dn(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function hn(e,t,n,r,a){var o=new e(t,n,"");try{o.value=r,a&&(o.type=a)}catch(s){o=new e(t,n,JSON.stringify(a?i({type:a},r):r))}return o}var fn=function(){var e=dn();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function pn(e,t){return e.getTime()/1e3-t}function gn(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var vn=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(rn(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return tn(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,i=n.enableEmsgMetadataCues,r=n.enableID3MetadataCues;if(i||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var o=dn();if(o)for(var s=0;s<a.length;s++){var l=a[s].type;if((l!==un.emsg||i)&&r){var u=ke(a[s].data);if(u){var c=a[s].pts,d=c+a[s].duration;d>fn&&(d=fn),d-c<=0&&(d=c+cn);for(var h=0;h<u.length;h++){var f=u[h];if(!Ee(f)){this.updateId3CueEnds(c,l);var p=hn(o,c,d,f,l);p&&this.id3Track.addCue(p)}}}}}}}},t.updateId3CueEnds=function(e,t){var n,i=null==(n=this.id3Track)?void 0:n.cues;if(i)for(var r=i.length;r--;){var a=i[r];a.type===t&&a.startTime<e&&a.endTime===fn&&(a.endTime=e)}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.type,a=this.id3Track,o=this.hls;if(o){var s=o.config,l=s.enableEmsgMetadataCues,u=s.enableID3MetadataCues;a&&(l||u)&&an(a,n,i,"audio"===r?function(e){return e.type===un.audioId3&&u}:"video"===r?function(e){return e.type===un.emsg&&l}:function(e){return e.type===un.audioId3&&u||e.type===un.emsg&&l})}},t.onLevelUpdated=function(e,t){var n=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var r=this.dateRangeCuesAppended,a=this.id3Track,o=i.dateRanges,s=Object.keys(o);if(a)for(var l=Object.keys(r).filter((function(e){return!s.includes(e)})),u=function(){var e=l[c];Object.keys(r[e].cues).forEach((function(t){a.removeCue(r[e].cues[t])})),delete r[e]},c=l.length;c--;)u();var d=i.fragments[i.fragments.length-1];if(0!==s.length&&T(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var h=d.programDateTime/1e3-d.start,f=dn(),p=function(){var e=s[g],t=o[e],i=pn(t.startDate,h),a=r[e],l=(null==a?void 0:a.cues)||{},u=(null==a?void 0:a.durationKnown)||!1,c=fn,d=t.endDate;if(d)c=pn(d,h),u=!0;else if(t.endOnNext&&!u){var p=s.reduce((function(e,n){if(n!==t.id){var i=o[n];if(i.class===t.class&&i.startDate>t.startDate&&(!e||t.startDate<e.startDate))return i}return e}),null);p&&(c=pn(p.startDate,h),u=!0)}for(var v=Object.keys(t.attr),m=0;m<v.length;m++){var y=v[m];if(V(y)){var A=l[y];if(A)u&&!a.durationKnown&&(A.endTime=c);else if(f){var b=t.attr[y];H(y)&&(b=gn(b));var E=hn(f,i,c,{key:y,data:b},un.dateRange);E&&(E.id=e,n.id3Track.addCue(E),l[y]=E)}}}r[e]={cues:l,dateRange:t,durationKnown:u}},g=0;g<s.length;g++)p()}}},e}(),mn=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(C.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(C.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(C.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(C.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){var n;t.details===R.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&N.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var i=this.config,r=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(r&&1!==a&&t.live){var o=this.targetLatency;if(null!==o){var s=n-o;if(s<Math.min(this.maxLatency,o+t.targetduration)&&s>.05&&this.forwardBufferLength>1){var l=Math.min(2,Math.max(1,a)),u=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(l,Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},s(e,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,i=e.targetduration,r=this.config,a=r.liveSyncDuration,o=r.liveSyncDurationCount,s=r.lowLatencyMode,l=this.hls.userConfig,u=s&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:o*i);var c=i,d=1;return u+Math.min(this.stallCount*d,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var i=n.edge,r=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,r),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}}]),e}(),yn=["NONE","TYPE-0","TYPE-1",null];function An(e){return yn.indexOf(e)>-1}var bn=["SDR","PQ","HLG"];function En(e){return!!e&&bn.indexOf(e)>-1}var _n={No:"",Yes:"YES",v2:"v2"};function kn(e){var t=e.canSkipUntil,n=e.canSkipDateRanges,i=e.age;return t&&i<t/2?n?_n.v2:_n.Yes:_n.No}var Tn=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),Sn=function(){function e(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return!!e})).map((function(e){return e.substring(0,4)})).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}var t=e.prototype;return t.hasAudioGroup=function(e){return wn(this._audioGroups,e)},t.hasSubtitleGroup=function(e){return wn(this._subtitleGroups,e)},t.addGroupId=function(e,t){if(t)if("audio"===e){var n=this._audioGroups;n||(n=this._audioGroups=[]),-1===n.indexOf(t)&&n.push(t)}else if("text"===e){var i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),-1===i.indexOf(t)&&i.push(t)}},t.addFallback=function(){},s(e,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(e){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroups)?void 0:e[0]}},{key:"textGroupId",get:function(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}}]),e}();function wn(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function Cn(e,t){var n=t.startPTS;if(T(n)){var i,r=0;t.sn>e.sn?(r=n-e.start,i=e):(r=e.start-n,i=t),i.duration!==r&&(i.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function In(e,t,n,i,r,a){i-n<=0&&(N.warn("Fragment should have a positive duration",t),i=n+t.duration,a=r+t.duration);var o=n,s=i,l=t.startPTS,u=t.endPTS;if(T(l)){var c=Math.abs(l-n);T(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,o=Math.max(n,l),n=Math.min(n,l),r=Math.min(r,t.startDTS),s=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,t.endDTS)}var d=n-t.start;0!==t.start&&(t.start=n),t.duration=i-t.start,t.startPTS=n,t.maxStartPTS=o,t.startDTS=r,t.endPTS=i,t.minEndPTS=s,t.endDTS=a;var h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var p=f-e.startSN,g=e.fragments;for(g[p]=t,h=p;h>0;h--)Cn(g[h],g[h-1]);for(h=p;h<g.length-1;h++)Cn(g[h],g[h+1]);return e.fragmentHint&&Cn(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Rn(e,t){for(var n=null,i=e.fragments,r=i.length-1;r>=0;r--){var a=i[r].initSegment;if(a){n=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var o,s=0;if(Pn(e,t,(function(e,i){e.relurl&&(s=e.cc-i.cc),T(e.startPTS)&&T(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(o=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)})),n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){N.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var l=t.skippedSegments;l--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=Dn(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));var u=t.fragments;if(s){N.warn("discontinuity sliding from playlist, take drift into account");for(var c=0;c<u.length;c++)u[c].cc+=s}t.skippedSegments&&(t.startCC=t.fragments[0].cc),Ln(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),o?In(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):On(e,t),u.length&&(t.totalduration=t.edge-u[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var d=t.advancedDateTime;if(t.advanced&&d){var h=t.edge;t.driftStart||(t.driftStartTime=d,t.driftStart=h),t.driftEndTime=d,t.driftEnd=h}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function Dn(e,t,n){var i=u({},e);return n&&n.forEach((function(e){delete i[e]})),Object.keys(t).forEach((function(e){var n=new j(t[e].attr,i[e]);n.isValid?i[e]=n:N.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(t[e].attr)+'"')})),i}function Ln(e,t,n){if(e&&t)for(var i=0,r=0,a=e.length;r<=a;r++){var o=e[r],s=t[r+i];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):i--}}function Pn(e,t,n){for(var i=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r;u<=a;u++){var c=l[o+u],d=s[u];i&&!d&&u<i&&(d=t.fragments[u]=c),c&&d&&n(c,d)}}function On(e,t){var n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||xn(t,i[n].start)}function xn(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function Mn(e,t){void 0===t&&(t=1/0);var n=1e3*e.targetduration;if(e.updated){var i=e.fragments,r=4;if(i.length&&n*r>t){var a=1e3*i[i.length-1].duration;a<n&&(n=a)}}else n/=2;return Math.round(n)}function Nn(e,t,n){if(null==e||!e.details)return null;var i=e.details,r=i.fragments[t-i.startSN];return r||((r=i.fragmentHint)&&r.sn===t?r:t<i.startSN&&n&&n.sn===t?n:null)}function Bn(e,t,n){var i;return null!=e&&e.details?Fn(null==(i=e.details)?void 0:i.partList,t,n):null}function Fn(e,t,n){if(e)for(var i=e.length;i--;){var r=e[i];if(r.index===n&&r.fragment.sn===t)return r}return null}function Un(e){e.forEach((function(e,t){var n=e.details;null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t}))}))}function Vn(e){switch(e.details){case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_TIMEOUT:case R.LEVEL_LOAD_TIMEOUT:case R.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Hn(e,t){var n=Vn(t);return e.default[(n?"timeout":"error")+"Retry"]}function jn(e,t){var n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function Kn(e){return i(i({},e),{errorRetry:null,timeoutRetry:null})}function Gn(e,t,n,i){if(!e)return!1;var r=null==i?void 0:i.code,a=t<e.maxNumRetry&&(Wn(r)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,i,a):a}function Wn(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}var Yn={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}};function zn(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!T(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var r=e[i];if(Qn(t,n,r))return r}return null}function qn(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=.005);var a=null;if(e){a=t[e.sn-t[0].sn+1]||null;var o=e.endDTS-n;o>0&&o<15e-7&&(n+=15e-7)}else 0===n&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===Xn(n,i,a)||$n(a,e,Math.min(r,i))))return a;var s=Yn.search(t,Xn.bind(null,n,i));return!s||s===e&&a?a:s}function $n(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){var i=t.tagList.reduce((function(e,t){return"INF"===t[0]&&(e+=parseFloat(t[1])),e}),n);return e.start<=i}return!1}function Xn(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n.start<=e&&n.start+n.duration>e)return 0;var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function Qn(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}function Jn(e,t){return Yn.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}var Zn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ei={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4},ti=function(){function e(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=N.log.bind(N,"[info]:"),this.warn=N.warn.bind(N,"[warning]:"),this.error=N.error.bind(N,"[error]:"),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(C.ERROR,this.onError,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(C.ERROR,this.onError,this),e.off(C.ERROR,this.onErrorOut,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this))},t.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},t.startLoad=function(e){},t.stopLoad=function(){this.playlistError=0},t.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===Qt.MAIN?e.level:this.hls.loadLevel},t.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},t.onLevelUpdated=function(){this.playlistError=0},t.onError=function(e,t){var n,i;if(!t.fatal){var r=this.hls,a=t.context;switch(t.details){case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case R.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:Zn.DoNothing,flags:ei.None});case R.FRAG_GAP:case R.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Zn.SendAlternateToPenaltyBox);case R.LEVEL_EMPTY_ERROR:case R.LEVEL_PARSING_ERROR:var o,s,l=t.parent===Qt.MAIN?t.level:r.loadLevel;return void(t.details===R.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(s=o.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l)));case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==a?void 0:a.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level)));case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.SUBTITLE_LOAD_ERROR:case R.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){var u=r.levels[r.loadLevel];if(u&&(a.type===Xt.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===Xt.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Zn.SendAlternateToPenaltyBox,void(t.errorAction.flags=ei.MoveAllAlternatesMatchingHost)}return;case R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var c=r.levels[r.loadLevel],d=null==c?void 0:c.attrs["HDCP-LEVEL"];return void(d?t.errorAction={action:Zn.SendAlternateToPenaltyBox,flags:ei.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(t));case R.BUFFER_ADD_CODEC_ERROR:case R.REMUX_ALLOC_ERROR:case R.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(i=t.level)?i:r.loadLevel));case R.INTERNAL_EXCEPTION:case R.BUFFER_APPENDING_ERROR:case R.BUFFER_FULL_ERROR:case R.LEVEL_SWITCH_ERROR:case R.BUFFER_STALLED_ERROR:case R.BUFFER_SEEK_OVER_HOLE:case R.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:Zn.DoNothing,flags:ei.None})}t.type===I.KEY_SYSTEM_ERROR&&this.keySystemError(t)}},t.keySystemError=function(e){var t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)},t.getPlaylistRetryOrSwitchAction=function(e,t){var n=Hn(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++;if(Gn(n,i,Vn(e),e.response))return{action:Zn.RetryRequest,flags:ei.None,retryConfig:n,retryCount:i};var r=this.getLevelSwitchAction(e,t);return n&&(r.retryConfig=n,r.retryCount=i),r},t.getFragRetryOrSwitchAction=function(e){var t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],r=t.config,a=r.fragLoadPolicy,o=r.keyLoadPolicy,s=Hn(e.details.startsWith("key")?o:a,e),l=t.levels.reduce((function(e,t){return e+t.fragmentError}),0);if(i&&(e.details!==R.FRAG_GAP&&i.fragmentError++,Gn(s,l,Vn(e),e.response)))return{action:Zn.RetryRequest,flags:ei.None,retryConfig:s,retryCount:l};var u=this.getLevelSwitchAction(e,n);return s&&(u.retryConfig=s,u.retryCount=l),u},t.getLevelSwitchAction=function(e,t){var n=this.hls;null==t&&(t=n.loadLevel);var i=this.hls.levels[t];if(i){var r,a,o=e.details;i.loadError++,o===R.BUFFER_APPEND_ERROR&&i.fragmentError++;var s=-1,l=n.levels,u=n.loadLevel,c=n.minAutoLevel,d=n.maxAutoLevel;n.autoLevelEnabled||(n.loadLevel=-1);for(var h,f=null==(r=e.frag)?void 0:r.type,p=(f===Qt.AUDIO&&o===R.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(o===R.BUFFER_ADD_CODEC_ERROR||o===R.BUFFER_APPEND_ERROR))&&l.some((function(e){var t=e.audioCodec;return i.audioCodec!==t})),g="video"===e.sourceBufferName&&(o===R.BUFFER_ADD_CODEC_ERROR||o===R.BUFFER_APPEND_ERROR)&&l.some((function(e){var t=e.codecSet,n=e.audioCodec;return i.codecSet!==t&&i.audioCodec===n})),v=null!=(a=e.context)?a:{},m=v.type,y=v.groupId,A=function(){var t=(b+u)%l.length;if(t!==u&&t>=c&&t<=d&&0===l[t].loadError){var n,r,a=l[t];if(o===R.FRAG_GAP&&f===Qt.MAIN&&e.frag){var h=l[t].details;if(h){var v=qn(e.frag,h.fragments,e.frag.start);if(null!=v&&v.gap)return 0}}else{if(m===Xt.AUDIO_TRACK&&a.hasAudioGroup(y)||m===Xt.SUBTITLE_TRACK&&a.hasSubtitleGroup(y))return 0;if(f===Qt.AUDIO&&null!=(n=i.audioGroups)&&n.some((function(e){return a.hasAudioGroup(e)}))||f===Qt.SUBTITLE&&null!=(r=i.subtitleGroups)&&r.some((function(e){return a.hasSubtitleGroup(e)}))||p&&i.audioCodec===a.audioCodec||!p&&i.audioCodec!==a.audioCodec||g&&i.codecSet===a.codecSet)return 0}return s=t,1}},b=l.length;b--&&(0===(h=A())||1!==h););if(s>-1&&n.loadLevel!==s)return e.levelRetry=!0,this.playlistError=0,{action:Zn.SendAlternateToPenaltyBox,flags:ei.None,nextAutoLevel:s}}return{action:Zn.SendAlternateToPenaltyBox,flags:ei.MoveAllAlternatesMatchingHost}},t.onErrorOut=function(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case Zn.DoNothing:break;case Zn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===R.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'+t.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()},t.sendAlternateToPenaltyBox=function(e){var t=this.hls,n=e.errorAction;if(n){var i=n.flags,r=n.hdcpLevel,a=n.nextAutoLevel;switch(i){case ei.None:this.switchLevel(e,a);break;case ei.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=yn[yn.indexOf(r)-1],n.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}n.resolved||this.switchLevel(e,a)}},t.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},e}(),ni=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=N.log.bind(N,t+":"),this.warn=N.warn.bind(N,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},t.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t,n){var i=null==t?void 0:t.renditionReports;if(i){for(var r=-1,a=0;a<i.length;a++){var o=i[a],s=void 0;try{s=new self.URL(o.URI,t.url).href}catch(e){N.warn("Could not construct new URL for Rendition Report: "+e),s=o.URI||""}if(s===e){r=a;break}s===e.substring(0,s.length)&&(r=a)}if(-1!==r){var l=i[r],u=parseInt(l["LAST-MSN"])||(null==t?void 0:t.lastPartSn),c=parseInt(l["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var d=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&d>t.partTarget&&(c+=1)}var h=n&&kn(n);return new Tn(u,c>=0?c:void 0,h)}}},t.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},t.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},t.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},t.playlistLoaded=function(e,t,n){var i=this,r=t.details,a=t.stats,o=self.performance.now(),s=a.loading.first?Math.max(0,o-a.loading.first):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED")),n&&r.fragments.length>0&&Rn(n,r),!this.canLoad||!r.live)return;var l,u=void 0,c=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var d=this.hls.config.lowLatencyMode,h=r.lastPartSn,f=r.endSN,p=r.lastPartIndex,g=h===f;-1!==p?(u=g?f+1:h,c=g?d?0:p:p+1):u=f+1;var v=r.age,m=v+r.ageHeader,y=Math.min(m-r.partTarget,1.5*r.targetduration);if(y>0){if(n&&y>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+y+" with playlist age: "+r.age),y=0;else{var A=Math.floor(y/r.targetduration);u+=A,void 0!==c&&(c+=Math.round(y%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+y+" skip sn "+A+" to part "+c)}r.tuneInGoal=y}if(l=this.getDeliveryDirectives(r,t.deliveryDirectives,u,c),d||!g)return void this.loadPlaylist(l)}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,u,c));var b=this.hls.mainForwardBufferInfo,E=b?b.end-b.len:0,_=Mn(r,1e3*(r.edge-E));r.updated&&o>this.requestScheduled+_&&(this.requestScheduled=a.loading.start),void 0!==u&&r.canBlockReload?this.requestScheduled=a.loading.first+_-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+_<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=_);var k=this.requestScheduled-o;k=Math.max(0,k),this.log("reload live playlist "+e+" in "+Math.round(k)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(l)}),k)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,i){var r=kn(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,r=_n.No),new Tn(n,i,r)},t.checkRetry=function(e){var t=this,n=e.details,i=Vn(e),r=e.errorAction,a=r||{},o=a.action,s=a.retryCount,l=void 0===s?0:s,u=a.retryConfig,c=!!r&&!!u&&(o===Zn.RetryRequest||!r.resolved&&o===Zn.SendAlternateToPenaltyBox);if(c){var d;if(this.requestScheduled=-1,l>=u.maxNumRetry)return!1;if(i&&null!=(d=e.context)&&d.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+n+'" without delivery-directives'),this.loadPlaylist();else{var h=jn(u,l);this.timer=self.setTimeout((function(){return t.loadPlaylist()}),h),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+n+'" in '+h+"ms")}e.levelRetry=!0,r.resolved=!0}return c},e}(),ii=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),ri=function(){function e(e,t,n,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ii(e),this.fast_=new ii(t),this.defaultTTFB_=i,this.ttfb_=new ii(e)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,i=this.fast_,r=this.ttfb_;n.halfLife!==e&&(this.slow_=new ii(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new ii(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new ii(e,r.getEstimate(),r.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.sampleTTFB=function(e){var t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))},t.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},t.destroy=function(){},e}(),ai={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},oi={};function si(e,t,n,i,r,a){var o=e.audioCodec?e.audioGroups:null,s=null==a?void 0:a.audioCodec,l=null==a?void 0:a.channels,u=l?parseInt(l):s?1/0:2,c=null;if(null!=o&&o.length)try{c=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce((function(e,n){if(n){var i=t.groups[n];if(!i)throw new Error("Audio track group "+n+" not found");Object.keys(i.channels).forEach((function(t){e[t]=(e[t]||0)+i.channels[t]}))}return e}),{2:0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(r,8e6))||!!c&&T(u)&&Object.keys(c).some((function(e){return parseInt(e)>u}))}function li(e,t,n){var r=e.videoCodec,a=e.audioCodec;if(!r||!a||!n)return Promise.resolve(ai);var o={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},s=e.videoRange;"SDR"!==s&&(o.transferFunction=s.toLowerCase());var l=r.split(",").map((function(e){return{type:"media-source",video:i(i({},o),{},{contentType:Ct(e,"video")})}}));return a&&e.audioGroups&&e.audioGroups.forEach((function(e){var n;e&&(null==(n=t.groups[e])||n.tracks.forEach((function(t){if(t.groupId===e){var n=t.channels||"",i=parseFloat(n);T(i)&&i>2&&l.push.apply(l,a.split(",").map((function(e){return{type:"media-source",audio:{contentType:Ct(e,"audio"),channels:""+i}}})))}})))})),Promise.all(l.map((function(e){var t=ui(e);return oi[t]||(oi[t]=n.decodingInfo(e))}))).then((function(e){return{supported:!e.some((function(e){return!e.supported})),configurations:l,decodingInfoResults:e}})).catch((function(e){return{supported:!1,configurations:l,decodingInfoResults:[],error:e}}))}function ui(e){var t=e.audio,n=e.video,i=n||t;if(i){var r=i.contentType.split('"')[1];if(n)return"r"+n.height+"x"+n.width+"f"+Math.ceil(n.framerate)+(n.transferFunction||"sd")+"_"+r+"_"+Math.ceil(n.bitrate/1e5);if(t)return"c"+t.channels+(t.spatialRendering?"s":"n")+"_"+r}return""}function ci(){if("function"==typeof matchMedia){var e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}function di(e,t){var n=!1,i=[];return e&&(n="SDR"!==e,i=[e]),t&&(i=t.allowedVideoRanges||bn.slice(0),i=(n=void 0!==t.preferHDR?t.preferHDR:ci())?i.filter((function(e){return"SDR"!==e})):["SDR"]),{preferHDR:n,allowedVideoRanges:i}}function hi(e,t,n,i,r){for(var a=Object.keys(e),o=null==i?void 0:i.channels,s=null==i?void 0:i.audioCodec,l=o&&2===parseInt(o),u=!0,c=!1,d=1/0,h=1/0,f=1/0,p=0,g=[],v=di(t,r),m=v.preferHDR,y=v.allowedVideoRanges,A=function(){var t=e[a[b]];u=t.channels[2]>0,d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),f=Math.min(f,t.minBitrate);var n=y.filter((function(e){return t.videoRanges[e]>0}));n.length>0&&(c=!0,g=n)},b=a.length;b--;)A();d=T(d)?d:0,h=T(h)?h:0;var E=Math.max(1080,d),_=Math.max(30,h);return f=T(f)?f:n,n=Math.max(f,n),c||(t=void 0,g=[]),{codecSet:a.reduce((function(t,i){var r=e[i];if(i===t)return t;if(r.minBitrate>n)return fi(i,"min bitrate of "+r.minBitrate+" > current estimate of "+n),t;if(!r.hasDefaultAudio)return fi(i,"no renditions with default or auto-select sound found"),t;if(s&&i.indexOf(s.substring(0,4))%5!=0)return fi(i,'audio codec preference "'+s+'" not found'),t;if(o&&!l){if(!r.channels[o])return fi(i,"no renditions with "+o+" channel sound found (channels options: "+Object.keys(r.channels)+")"),t}else if((!s||l)&&u&&0===r.channels[2])return fi(i,"no renditions with stereo sound found"),t;return r.minHeight>E?(fi(i,"min resolution of "+r.minHeight+" > maximum of "+E),t):r.minFramerate>_?(fi(i,"min framerate of "+r.minFramerate+" > maximum of "+_),t):g.some((function(e){return r.videoRanges[e]>0}))?r.maxScore<p?(fi(i,"max score of "+r.maxScore+" < selected max of "+p),t):t&&(Rt(i)>=Rt(t)||r.fragmentError>e[t].fragmentError)?t:(p=r.maxScore,i):(fi(i,"no variants with VIDEO-RANGE of "+JSON.stringify(g)+" found"),t)}),void 0),videoRanges:g,preferHDR:m,minFramerate:h,minBitrate:f}}function fi(e,t){N.log('[abr] start candidates with "'+e+'" ignored because '+t)}function pi(e){return e.reduce((function(e,t){var n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);var i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function gi(e,t,n,i){return e.slice(n,i+1).reduce((function(e,n){if(!n.codecSet)return e;var i=n.audioGroups,r=e[n.codecSet];r||(e[n.codecSet]=r={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),r.minBitrate=Math.min(r.minBitrate,n.bitrate);var a=Math.min(n.height,n.width);return r.minHeight=Math.min(r.minHeight,a),r.minFramerate=Math.min(r.minFramerate,n.frameRate),r.maxScore=Math.max(r.maxScore,n.score),r.fragmentError+=n.fragmentError,r.videoRanges[n.videoRange]=(r.videoRanges[n.videoRange]||0)+1,i&&i.forEach((function(e){if(e){var n=t.groups[e];n&&(r.hasDefaultAudio=r.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach((function(e){r.channels[e]=(r.channels[e]||0)+n.channels[e]})))}})),e}),{})}function vi(e,t,n){if("attrs"in e){var i=t.indexOf(e);if(-1!==i)return i}for(var r=0;r<t.length;r++)if(mi(e,t[r],n))return r;return-1}function mi(e,t,n){var i=e.groupId,r=e.name,a=e.lang,o=e.assocLang,s=e.characteristics,l=e.default,u=e.forced;return(void 0===i||t.groupId===i)&&(void 0===r||t.name===r)&&(void 0===a||t.lang===a)&&(void 0===a||t.assocLang===o)&&(void 0===l||t.default===l)&&(void 0===u||t.forced===u)&&(void 0===s||yi(s,t.characteristics))&&(void 0===n||n(e,t))}function yi(e,t){void 0===t&&(t="");var n=e.split(","),i=t.split(",");return n.length===i.length&&!n.some((function(e){return-1===i.indexOf(e)}))}function Ai(e,t){var n=e.audioCodec,i=e.channels;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==i&&i!==(t.channels||"2"))}function bi(e,t,n,i,r){var a=t[i],o=t.reduce((function(e,t,n){var i=t.uri;return(e[i]||(e[i]=[])).push(n),e}),{}),s=o[a.uri];s.length>1&&(i=Math.max.apply(Math,s));var l=a.videoRange,u=a.frameRate,c=a.codecSet.substring(0,4),d=Ei(t,i,(function(t){if(t.videoRange!==l||t.frameRate!==u||t.codecSet.substring(0,4)!==c)return!1;var i=t.audioGroups,a=n.filter((function(e){return!i||-1!==i.indexOf(e.groupId)}));return vi(e,a,r)>-1}));return d>-1?d:Ei(t,i,(function(t){var i=t.audioGroups,a=n.filter((function(e){return!i||-1!==i.indexOf(e.groupId)}));return vi(e,a,r)>-1}))}function Ei(e,t,n){for(var i=t;i;i--)if(n(e[i]))return i;for(var r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}var _i=function(){function e(e){var t=this;this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=function(){var e=t.fragCurrent,n=t.partCurrent,i=t.hls,r=i.autoLevelEnabled,a=i.media;if(e&&a){var o=performance.now(),s=n?n.stats:e.stats,l=n?n.duration:e.duration,u=o-s.loading.start,c=i.minAutoLevel;if(s.aborted||s.loaded&&s.loaded===s.total||e.level<=c)return t.clearTimer(),void(t._nextAutoLevel=-1);if(r&&!a.paused&&a.playbackRate&&a.readyState){var d=i.mainForwardBufferInfo;if(null!==d){var h=t.bwEstimator.getEstimateTTFB(),f=Math.abs(a.playbackRate);if(!(u<=Math.max(h,l/(2*f)*1e3))){var p=d.len/f,g=s.loading.first?s.loading.first-s.loading.start:-1,v=s.loaded&&g>-1,m=t.getBwEstimate(),y=i.levels,A=y[e.level],b=s.total||Math.max(s.loaded,Math.round(l*A.averageBitrate/8)),E=v?u-g:u;E<1&&v&&(E=Math.min(u,8*s.loaded/m));var _=v?1e3*s.loaded/E:0,k=_?(b-s.loaded)/_:8*b/m+h/1e3;if(!(k<=p)){var S,w=_?8*_:m,I=Number.POSITIVE_INFINITY;for(S=e.level-1;S>c;S--){var R=y[S].maxBitrate;if((I=t.getTimeToLoadFrag(h/1e3,w,l*R,!y[S].details))<p)break}if(!(I>=k||I>10*l)){i.nextLoadLevel=i.nextAutoLevel=S,v?t.bwEstimator.sample(u-Math.min(h,g),s.loaded):t.bwEstimator.sampleTTFB(u);var D=y[S].maxBitrate;t.getBwEstimate()*t.hls.config.abrBandWidthUpFactor>D&&t.resetEstimator(D),t.clearTimer(),N.warn("[abr] Fragment "+e.sn+(n?" part "+n.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+p.toFixed(3)+" s\n      Estimated load time for current fragment: "+k.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+I.toFixed(3)+" s\n      TTFB estimate: "+(0|g)+" ms\n      Current BW estimate: "+(T(m)?0|m:"Unknown")+" bps\n      New BW estimate: "+(0|t.getBwEstimate())+" bps\n      Switching to level "+S+" @ "+(0|D)+" bps"),i.trigger(C.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:n,stats:s})}}}}}}},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}var t=e.prototype;return t.resetEstimator=function(e){e&&(N.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},t.initEstimator=function(){var e=this.hls.config;return new ri(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},t.registerListeners=function(){var e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.FRAG_LOADING,this.onFragLoading,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(C.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.FRAG_LOADING,this.onFragLoading,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(C.ERROR,this.onError,this))},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null},t.onManifestLoading=function(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},t.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},t.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},t.onFragLoading=function(e,t){var n,i=t.frag;this.ignoreFragment(i)||(i.bitrateTest||(this.fragCurrent=i,this.partCurrent=null!=(n=t.part)?n:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},t.onLevelSwitching=function(e,t){this.clearTimer()},t.onError=function(e,t){if(!t.fatal)switch(t.details){case R.BUFFER_ADD_CODEC_ERROR:case R.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case R.FRAG_LOAD_TIMEOUT:var n=t.frag,i=this.fragCurrent,r=this.partCurrent;if(n&&i&&n.sn===i.sn&&n.level===i.level){var a=performance.now(),o=r?r.stats:n.stats,s=a-o.loading.start,l=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&l>-1){var u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(s-Math.min(u,l),o.loaded)}else this.bwEstimator.sampleTTFB(s)}}},t.getTimeToLoadFrag=function(e,t,n,i){return e+n/t+(i?this.lastLevelLoadSec:0)},t.onLevelLoaded=function(e,t){var n=this.hls.config,i=t.stats.loading,r=i.end-i.start;T(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},t.onFragLoaded=function(e,t){var n=t.frag,i=t.part,r=i?i.stats:n.stats;if(n.type===Qt.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var a=i?i.duration:n.duration,o=this.hls.levels[n.level],s=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:l},o.realBitrate=Math.round(8*s/l)}if(n.bitrateTest){var u={stats:r,frag:n,part:i,id:n.type};this.onFragBuffered(C.FRAG_BUFFERED,u),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}},t.onFragBuffered=function(e,t){var n=t.frag,i=t.part,r=null!=i&&i.stats.loaded?i.stats:n.stats;if(!r.aborted&&!this.ignoreFragment(n)){var a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},t.ignoreFragment=function(e){return e.type!==Qt.MAIN||"initSegment"===e.sn},t.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)},t.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.maxAutoLevel,r=n.config,a=n.minAutoLevel,o=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay(),u=r.abrBandWidthFactor,c=r.abrBandWidthUpFactor;if(l){var d=this.findBestLevel(s,a,i,l,0,u,c);if(d>=0)return d}var h=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){var f=this.bitrateTestDelay;f&&(h=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-f,N.info("[abr] bitrate test took "+Math.round(1e3*f)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),u=c=1)}var p=this.findBestLevel(s,a,i,l,h,u,c);if(N.info("[abr] "+(l?"rebuffering expected":"buffer is empty")+", optimal quality level "+p),p>-1)return p;var g=n.levels[a],v=n.levels[n.loadLevel];return(null==g?void 0:g.bitrate)<(null==v?void 0:v.bitrate)?a:n.loadLevel},t.getStarvationDelay=function(){var e=this.hls,t=e.media;if(!t)return 1/0;var n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n},t.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},t.findBestLevel=function(e,t,n,i,r,a,o){var s,l=this,u=i+r,c=this.lastLoadedFragLevel,d=-1===c?this.hls.firstLevel:c,h=this.fragCurrent,f=this.partCurrent,p=this.hls,g=p.levels,v=p.allAudioTracks,m=p.loadLevel,y=p.config;if(1===g.length)return 0;var A,b=g[d],E=!(null==b||null==(s=b.details)||!s.live),_=-1===m||-1===c,k="SDR",S=(null==b?void 0:b.frameRate)||0,w=y.audioPreference,C=y.videoPreference,I=this.audioTracksByGroup||(this.audioTracksByGroup=pi(v));if(_){if(-1!==this.firstSelection)return this.firstSelection;var R=hi(this.codecTiers||(this.codecTiers=gi(g,I,t,n)),k,e,w,C),D=R.codecSet,L=R.videoRanges,P=R.minFramerate,O=R.minBitrate,x=R.preferHDR;A=D,k=x?L[L.length-1]:L[0],S=P,e=Math.max(e,O),N.log("[abr] picked start tier "+JSON.stringify(R))}else A=null==b?void 0:b.codecSet,k=null==b?void 0:b.videoRange;for(var M,B=f?f.duration:h?h.duration:0,F=this.bwEstimator.getEstimateTTFB()/1e3,U=[],V=function(){var t,s=g[H],h=H>d;if(!s)return 0;if(y.useMediaCapabilities&&!s.supportedResult&&!s.supportedPromise){var p=navigator.mediaCapabilities;"function"==typeof(null==p?void 0:p.decodingInfo)&&si(s,I,k,S,e,w)?(s.supportedPromise=li(s,I,p),s.supportedPromise.then((function(e){if(l.hls){s.supportedResult=e;var t=l.hls.levels,n=t.indexOf(s);e.error?N.warn('[abr] MediaCapabilities decodingInfo error: "'+e.error+'" for level '+n+" "+JSON.stringify(e)):e.supported||(N.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level "+n+" "+JSON.stringify(e)),n>-1&&t.length>1&&(N.log("[abr] Removing unsupported level "+n),l.hls.removeLevel(n)))}}))):s.supportedResult=ai}if(A&&s.codecSet!==A||k&&s.videoRange!==k||h&&S>s.frameRate||!h&&S>0&&S<s.frameRate||s.supportedResult&&(null==(t=s.supportedResult.decodingInfoResults)||!t[0].smooth))return U.push(H),0;var v,C=s.details,R=(f?null==C?void 0:C.partTarget:null==C?void 0:C.averagetargetduration)||B;v=h?o*e:a*e;var D=B&&i>=2*B&&0===r?g[H].averageBitrate:g[H].maxBitrate,L=l.getTimeToLoadFrag(F,v,D*R,void 0===C);if(v>=D&&(H===c||0===s.loadError&&0===s.fragmentError)&&(L<=F||!T(L)||E&&!l.bitrateTestDelay||L<u)){var P=l.forcedAutoLevel;return H===m||-1!==P&&P===m||(U.length&&N.trace("[abr] Skipped level(s) "+U.join(",")+" of "+n+' max with CODECS and VIDEO-RANGE:"'+g[U[0]].codecs+'" '+g[U[0]].videoRange+'; not compatible with "'+b.codecs+'" '+k),N.info("[abr] switch candidate:"+d+"->"+H+" adjustedbw("+Math.round(v)+")-bitrate="+Math.round(v-D)+" ttfb:"+F.toFixed(1)+" avgDuration:"+R.toFixed(1)+" maxFetchDuration:"+u.toFixed(1)+" fetchDuration:"+L.toFixed(1)+" firstSelection:"+_+" codecSet:"+A+" videoRange:"+k+" hls.loadLevel:"+m)),_&&(l.firstSelection=H),{v:H}}},H=n;H>=t;H--)if(0!==(M=V())&&M)return M.v;return-1},s(e,[{key:"firstAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.minAutoLevel,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,a=this.findBestLevel(i,n,t,0,r,1,1);if(a>-1)return a;var o=this.hls.firstLevel,s=Math.min(Math.max(o,n),t);return N.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist "+o+" clamped to "+s),s}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;var i=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){var r=this.hls.levels;if(r.length>Math.max(e,i)&&r[e].loadError<=r[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i},set:function(e){var t=this.hls,n=t.maxAutoLevel,i=t.minAutoLevel,r=Math.min(Math.max(e,i),n);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}]),e}(),ki=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}(),Ti={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Si=function(){function e(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(C.BUFFER_APPENDED,this.onBufferAppended,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(C.BUFFER_APPENDED,this.onBufferAppended,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){var n=this.activePartLists[t];if(n)for(var i=n.length;i--;){var r=n[i];if(!r)break;var a=r.end;if(r.start<=e&&null!==a&&e<=a)return r}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,n,i){var r=this;this.timeRanges&&(this.timeRanges[e]=t);var a=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((function(i){var o=r.fragments[i];if(o&&!(a>=o.body.sn))if(o.buffered||o.loaded){var s=o.range[e];s&&s.time.some((function(e){var n=!r.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&r.removeFragment(o.body),n}))}else o.body.type===n&&r.removeFragment(o.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,i=e.frag,r=e.part;if(n&&"initSegment"!==i.sn){var a=Ci(i),o=this.fragments[a];if(!(!o||o.buffered&&i.gap)){var s=!i.relurl;Object.keys(n).forEach((function(e){var a=i.elementaryStreams[e];if(a){var l=n[e],u=s||!0===a.partial;o.range[e]=t.getBufferedTimes(i,r,u,l)}})),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=i.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),wi(o)||this.removeParts(i.sn-1,i.type)):this.removeFragment(o.body)}}},t.removeParts=function(e,t){var n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((function(t){return t.fragment.sn>=e})))},t.fragBuffered=function(e,t){var n=Ci(e),i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)},t.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=e.start,o=e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=c&&s<=d){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}if(a<d&&o>c){var h=Math.max(a,i.start(u)),f=Math.min(o,i.end(u));f>h&&(r.partial=!0,r.time.push({startPTS:h,endPTS:f}))}else if(o<=c)break}return r},t.getPartialFragment=function(e){var t,n,i,r=null,a=0,o=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach((function(l){var u=s[l];u&&wi(u)&&(n=u.body.start-o,i=u.body.end+o,e>=n&&e<=i&&(t=Math.min(e-n,i-e),a<=t&&(r=u.body,a=t)))})),r},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||wi(t))},t.getState=function(e){var t=Ci(e),n=this.fragments[t];return n?n.buffered?wi(n)?Ti.PARTIAL:Ti.OK:Ti.APPENDING:Ti.NOT_LOADED},t.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if("initSegment"!==n.sn&&!n.bitrateTest){var r=i?null:t,a=Ci(n);this.fragments[a]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,i=t.frag,r=t.part,a=t.timeRanges;if("initSegment"!==i.sn){var o=i.type;if(r){var s=this.activePartLists[o];s||(this.activePartLists[o]=s=[]),s.push(r)}this.timeRanges=a,Object.keys(a).forEach((function(e){var t=a[e];n.detectEvictedFragments(e,t,o,r)}))}},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=Ci(e);return!!this.fragments[t]},t.hasParts=function(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)},t.removeFragmentsInRange=function(e,t,n,i,r){var a=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach((function(o){var s=a.fragments[o];if(s){var l=s.body;l.type!==n||i&&!l.gap||l.start<t&&l.end>e&&(s.buffered||r)&&a.removeFragment(l)}}))},t.removeFragment=function(e){var t=Ci(e);e.stats.loaded=0,e.clearElementaryStreamInfo();var n=this.activePartLists[e.type];if(n){var i=e.sn;this.activePartLists[e.type]=n.filter((function(e){return e.fragment.sn!==i}))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},e}();function wi(e){var t,n,i;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(i=e.range.audiovideo)?void 0:i.partial))}function Ci(e){return e.type+"_"+e.level+"_"+e.sn}var Ii={length:0,start:function(){return 0},end:function(){return 0}},Ri=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var i=e.getBuffered(t),r=0;r<i.length;r++)if(n>=i.start(r)&&n<=i.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,i){try{if(t){var r,a=e.getBuffered(t),o=[];for(r=0;r<a.length;r++)o.push({start:a.start(r),end:a.end(r)});return this.bufferedInfo(o,n,i)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a=i.length;if(a){var o=i[a-1].end;e[r].start-o<n?e[r].end>o&&(i[a-1].end=e[r].end):i.push(e[r])}else i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,f=i[d].end;if(t+n>=h&&t<f)u=h,l=(c=f)-t;else if(t+n<h){s=h;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(e){return N.log("failed to get media.buffered",e),Ii}},e}(),Di=function(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Li(),this.buffering={audio:Li(),video:Li(),audiovideo:Li()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a};function Li(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Pi(e,t){for(var n=0,i=e.length;n<i;n++){var r;if((null==(r=e[n])?void 0:r.cc)===t)return e[n]}return null}function Oi(e,t,n){return!(!t||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function xi(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=Pi(n,i[0].cc);if(r&&(!r||r.startPTS))return r;N.log("No frag in previous level to align on")}else N.log("No fragments to align")}function Mi(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function Ni(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)Mi(n[i],e);t.fragmentHint&&Mi(t.fragmentHint,e),t.alignedSliding=!0}function Bi(e,t,n){t&&(Fi(e,n,t),!n.alignedSliding&&t&&Ui(n,t),n.alignedSliding||!t||n.skippedSegments||On(t,n))}function Fi(e,t,n){if(Oi(e,n,t)){var i=xi(n,t);i&&T(i.start)&&(N.log("Adjusting PTS using last level due to CC increase within current level "+t.url),Ni(i.start,t))}}function Ui(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var n=e.fragments,i=t.fragments;if(n.length&&i.length){var r,a,o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(r=Pi(i,o),a=Pi(n,o)),r&&a||(a=Pi(n,(r=i[Math.floor(i.length/2)]).cc)||n[Math.floor(n.length/2)]);var s=r.programDateTime,l=a.programDateTime;s&&l&&Ni((l-s)/1e3-(a.start-r.start),e)}}}var Vi=Math.pow(2,17),Hi=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,r=e.url;if(!r)return Promise.reject(new Gi({type:I.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(l,u){if(n.loader&&n.loader.destroy(),e.gap){if(e.tagList.some((function(e){return"GAP"===e[0]})))return void u(Ki(e));e.gap=!1}var c=n.loader=e.loader=o?new o(a):new s(a),d=ji(e),h=Kn(a.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Vi};e.stats=c.stats,c.load(d,f,{onSuccess:function(t,i,r,a){n.resetLoader(e,c);var o=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(o.slice(0,16)),o=o.slice(16)),l({frag:e,part:null,payload:o,networkDetails:a})},onError:function(t,a,o,s){n.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:i({url:r,data:void 0},t),error:new Error("HTTP Error "+t.code+" "+t.text),networkDetails:o,stats:s}))},onAbort:function(t,i,r){n.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:function(t,i,r){n.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:r,stats:t}))},onProgress:function(n,i,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},t.loadPart=function(e,t,n){var r=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(l,u){if(r.loader&&r.loader.destroy(),e.gap||t.gap)u(Ki(e,t));else{var c=r.loader=e.loader=o?new o(a):new s(a),d=ji(e,t),h=Kn(a.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Vi};t.stats=c.stats,c.load(d,f,{onSuccess:function(i,a,o,s){r.resetLoader(e,c),r.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:i.data,networkDetails:s};n(u),l(u)},onError:function(n,a,o,s){r.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:i({url:d.url,data:void 0},n),error:new Error("HTTP Error "+n.code+" "+n.text),networkDetails:o,stats:s}))},onAbort:function(n,i,a){e.stats.aborted=t.stats.aborted,r.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:n}))},onTimeout:function(n,i,a){r.resetLoader(e,c),u(new Gi({type:I.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:n}))}})}}))},t.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/r),a),s=(a-o)*Math.round(n.loaded/o);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);var l=n.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function ji(e,t){void 0===t&&(t=null);var n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(T(r)&&T(a)){var o,s=r,l=a;if("initSegment"===e.sn&&"AES-128"===(null==(o=e.decryptdata)?void 0:o.method)){var u=a-r;u%16&&(l=a+(16-u%16)),0!==r&&(i.resetIV=!0,s=r-16)}i.rangeStart=s,i.rangeEnd=l}return i}function Ki(e,t){var n=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),i={type:I.MEDIA_ERROR,details:R.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(i.part=t),(t||e).stats.aborted=!0,new Gi(i)}var Gi=function(e){function t(t){var n;return(n=e.call(this,t.error.message)||this).data=void 0,n.data=t,n}return c(t,e),t}(v(Error)),Wi=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),Yi=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();function zi(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?fe(e,0,t-n):e}var qi=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var m=h[f],y=h[m],A=h[y],b=257*h[v]^16843008*v;i[f]=b<<24|b>>>8,r[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,o[f]=b,b=16843009*A^65537*y^257*m^16843008*f,l[v]=b<<24|b>>>8,u[v]=b<<16|b>>>16,c[v]=b<<8|b>>>24,d[v]=b,f?(f=m^h[h[h[A^m]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<u;a++)a<r?s=c[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/r|0]<<24):r>6&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-r]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var i,r,a,o,s,l,u,c,d,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,A=this.invSBox,b=this.invSubMix,E=b[0],_=b[1],k=b[2],T=b[3],S=this.uint8ArrayToUint32Array_(n),w=S[0],C=S[1],I=S[2],R=S[3],D=new Int32Array(e),L=new Int32Array(D.length),P=this.networkToHostOrderSwap;t<D.length;){for(d=P(D[t]),h=P(D[t+1]),f=P(D[t+2]),p=P(D[t+3]),s=d^y[0],l=p^y[1],u=f^y[2],c=h^y[3],g=4,v=1;v<m;v++)i=E[s>>>24]^_[l>>16&255]^k[u>>8&255]^T[255&c]^y[g],r=E[l>>>24]^_[u>>16&255]^k[c>>8&255]^T[255&s]^y[g+1],a=E[u>>>24]^_[c>>16&255]^k[s>>8&255]^T[255&l]^y[g+2],o=E[c>>>24]^_[s>>16&255]^k[l>>8&255]^T[255&u]^y[g+3],s=i,l=r,u=a,c=o,g+=4;i=A[s>>>24]<<24^A[l>>16&255]<<16^A[u>>8&255]<<8^A[255&c]^y[g],r=A[l>>>24]<<24^A[u>>16&255]<<16^A[c>>8&255]<<8^A[255&s]^y[g+1],a=A[u>>>24]<<24^A[c>>16&255]<<16^A[s>>8&255]<<8^A[255&l]^y[g+2],o=A[c>>>24]<<24^A[s>>16&255]<<16^A[l>>8&255]<<8^A[255&u]^y[g+3],L[t]=P(i^w),L[t+1]=P(o^C),L[t+2]=P(a^I),L[t+3]=P(r^R),w=d,C=h,I=f,R=p,t+=4}return L.buffer},e}(),$i=16,Xi=function(){function e(e,t){var n=(void 0===t?{}:t).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?zi(n):n},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n){var i=this;return this.useSoftware?new Promise((function(r,a){i.softwareDecrypt(new Uint8Array(e),t,n);var o=i.flush();o?r(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)},t.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(e=nt(a,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);var s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new qi),s.expandKey(t);var l=r;return this.currentResult=s.decrypt(o.buffer,0,n),this.currentIV=fe(o,-16).buffer,l||null},t.webCryptoDecrypt=function(e,t,n){var i=this;if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new Yi(this.subtle,t)}return this.fastAesKey.expandKey().then((function(t){return i.subtle?(i.logOnce("WebCrypto AES decrypt"),new Wi(i.subtle,new Uint8Array(n)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return N.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+r.name+": "+r.message),i.onWebCryptoError(e,t,n)}))},t.onWebCryptoError=function(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},t.getValidChunk=function(e){var t=e,n=e.length-e.length%$i;return n!==e.length&&(t=fe(e,0,n),this.remainderData=fe(e,n)),t},t.logOnce=function(e){this.logEnabled&&(N.log("[decrypter]: "+e),this.logEnabled=!1)},e}(),Qi={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t}},Ji={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Zi=function(e){function t(t,n,i,r,a){var o;return(o=e.call(this)||this).hls=void 0,o.fragPrevious=null,o.fragCurrent=null,o.fragmentTracker=void 0,o.transmuxer=null,o._state=Ji.STOPPED,o.playlistType=void 0,o.media=null,o.mediaBuffer=null,o.config=void 0,o.bitrateTest=!1,o.lastCurrentTime=0,o.nextLoadPosition=0,o.startPosition=0,o.startTimeOffset=null,o.loadedmetadata=!1,o.retryDate=0,o.levels=null,o.fragmentLoader=void 0,o.keyLoader=void 0,o.levelLastLoaded=null,o.startFragRequested=!1,o.decrypter=void 0,o.initPTS=[],o.onvseeking=null,o.onvended=null,o.logPrefix="",o.log=void 0,o.warn=void 0,o.playlistType=a,o.logPrefix=r,o.log=N.log.bind(N,r+":"),o.warn=N.warn.bind(N,r+":"),o.hls=t,o.fragmentLoader=new Hi(t.config),o.keyLoader=i,o.fragmentTracker=n,o.config=t.config,o.decrypter=new Xi(t.config),t.on(C.MANIFEST_LOADED,o.onManifestLoaded,m(o)),o}c(t,e);var n=t.prototype;return n.doTick=function(){this.onTickEnd()},n.onTickEnd=function(){},n.startLoad=function(e){},n.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ji.STOPPED},n._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var n=t.partList;if(null!=n&&n.length){var i=n[n.length-1];return Ri.isBuffered(this.media,i.start+i.duration/2)}var r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)},n.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details},n.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Ji.STOPPED&&this.startLoad(i.startPosition)},n.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,r=this.state,a=n?n.currentTime:0,o=Ri.bufferInfo(i||n,a,e.maxBufferHole);if(this.log("media seeking to "+(T(a)?a.toFixed(3):a)+", state: "+r),this.state===Ji.ENDED)this.resetLoadingState();else if(t){var s=e.maxFragLookUpTolerance,l=t.start-s,u=t.start+t.duration+s;if(!o.len||u<o.start||l>o.end){var c=a>u;(a<l||c)&&(c&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},n.onHandlerDestroying=function(){this.hls.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),e.prototype.onHandlerDestroying.call(this),this.hls=null},n.onHandlerDestroyed=function(){this.state=Ji.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},n.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},n._loadFragForPlayback=function(e,t,n){var i=this,r=function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t)};this._doFragLoad(e,t,n,r).then((function(t){if(t){var n=i.state;i.fragContextChanged(e)?(n===Ji.FRAG_LOADING||!i.fragCurrent&&n===Ji.PARSING)&&(i.fragmentTracker.removeFragment(e),i.state=Ji.IDLE):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(C.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t))}})).catch((function(t){i.state!==Ji.STOPPED&&i.state!==Ji.ERROR&&(i.warn("Frag error: "+((null==t?void 0:t.message)||t)),i.resetFragmentLoading(e))}))},n.clearTrackerIfNeeded=function(e){var t,n=this.fragmentTracker;if(n.getState(e)===Ti.APPENDING){var i=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,r?r.len:this.config.maxBufferLength),o=this.backtrackFragment;(1==(o?e.sn-o.sn:0)||this.reduceMaxBufferLength(a,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ti.PARTIAL&&n.removeFragment(e))},n.checkLiveUpdate=function(e){if(e.updated&&!e.live){var t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)},n.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var i={startOffset:e,endOffset:t,type:n};this.hls.trigger(C.BUFFER_FLUSHING,i)}},n._loadInitSegment=function(e,t){var n=this;this._doFragLoad(e,t).then((function(t){if(!t||n.fragContextChanged(e)||!n.levels)throw new Error("init load aborted");return t})).then((function(t){var i=n.hls,r=t.payload,a=e.decryptdata;if(r&&r.byteLength>0&&null!=a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return n.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).catch((function(t){throw i.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((function(r){var a=self.performance.now();return i.trigger(C.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:o,tdecrypt:a}}),t.payload=r,n.completeInitSegmentLoad(t)}))}return n.completeInitSegmentLoad(t)})).catch((function(t){n.state!==Ji.STOPPED&&n.state!==Ji.ERROR&&(n.warn(t),n.resetFragmentLoading(e))}))},n.completeInitSegmentLoad=function(e){if(!this.levels)throw new Error("init load aborted, missing levels");var t=e.frag.stats;this.state=Ji.IDLE,e.frag.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),this.tick()},n.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.sn!==t.sn||e.level!==t.level},n.fragBufferedComplete=function(e,t){var n,i,r,a,o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===Qt.MAIN?"level":"track")+" "+e.level+" (frag:["+(null!=(n=e.startPTS)?n:NaN).toFixed(3)+"-"+(null!=(i=e.endPTS)?i:NaN).toFixed(3)+"] > buffer:"+(o?Qi.toString(Ri.getBuffered(o)):"(detached)")+")"),"initSegment"!==e.sn){var s;if(e.type!==Qt.SUBTITLE){var l=e.elementaryStreams;if(!Object.keys(l).some((function(e){return!!l[e]})))return void(this.state=Ji.IDLE)}var u=null==(s=this.levels)?void 0:s[e.level];null!=u&&u.fragmentError&&(this.log("Resetting level fragment error count of "+u.fragmentError+" on frag buffered"),u.fragmentError=0)}this.state=Ji.IDLE,o&&(!this.loadedmetadata&&e.type==Qt.MAIN&&o.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},n.seekToStartPos=function(){},n._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,i=e.part,r=e.partsLoaded,a=!r||0===r.length||r.some((function(e){return!e})),o=new Di(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}},n._handleFragmentLoadProgress=function(e){},n._doFragLoad=function(e,t,n,i){var r,a=this;void 0===n&&(n=null);var o=null==t?void 0:t.details;if(!this.levels||!o)throw new Error("frag load aborted, missing level"+(o?"":" detail")+"s");var s=null;if(!e.encrypted||null!=(r=e.decryptdata)&&r.key?!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+o.startSN+"-"+o.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=Ji.KEY_LOADING,this.fragCurrent=e,s=this.keyLoader.load(e).then((function(e){if(!a.fragContextChanged(e.frag))return a.hls.trigger(C.KEY_LOADED,e),a.state===Ji.KEY_LOADING&&(a.state=Ji.IDLE),e})),this.hls.trigger(C.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){var l=o.partList;if(l&&i){n>e.end&&o.fragmentHint&&(e=o.fragmentHint);var u=this.getNextPart(l,e,n);if(u>-1){var c,d=l[u];return this.log("Loading part sn: "+e.sn+" p: "+d.index+" cc: "+e.cc+" of playlist ["+o.startSN+"-"+o.endSN+"] parts [0-"+u+"-"+(l.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=Ji.FRAG_LOADING,c=s?s.then((function(n){return!n||a.fragContextChanged(n.frag)?null:a.doFragPartsLoad(e,d,t,i)})).catch((function(e){return a.handleFragLoadError(e)})):this.doFragPartsLoad(e,d,t,i).catch((function(e){return a.handleFragLoadError(e)})),this.hls.trigger(C.FRAG_LOADING,{frag:e,part:d,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(l,n))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(o?"of ["+o.startSN+"-"+o.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),T(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ji.FRAG_LOADING;var h,f=this.config.progressive;return h=f&&s?s.then((function(t){return!t||a.fragContextChanged(null==t?void 0:t.frag)?null:a.fragmentLoader.load(e,i)})).catch((function(e){return a.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,f?i:void 0),s]).then((function(e){var t=e[0];return!f&&t&&i&&i(t),t})).catch((function(e){return a.handleFragLoadError(e)})),this.hls.trigger(C.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h},n.doFragPartsLoad=function(e,t,n,i){var r=this;return new Promise((function(a,o){var s,l=[],u=null==(s=n.details)?void 0:s.partList;!function t(s){r.fragmentLoader.loadPart(e,s,i).then((function(i){l[s.index]=i;var o=i.part;r.hls.trigger(C.FRAG_LOADED,i);var c=Bn(n,e.sn,s.index+1)||Fn(u,e.sn,s.index+1);if(!c)return a({frag:e,part:o,partsLoaded:l});t(c)})).catch(o)}(t)}))},n.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===R.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(C.ERROR,t)}else this.hls.trigger(C.ERROR,{type:I.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null},n._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===Ji.PARSING){var n=t.frag,i=t.part,r=t.level,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,r,e.partial)}else this.fragCurrent||this.state===Ji.STOPPED||this.state===Ji.ERROR||(this.state=Ji.IDLE)},n.getCurrentContext=function(e){var t=this.levels,n=this.fragCurrent,i=e.level,r=e.sn,a=e.part;if(null==t||!t[i])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+i+". The current chunk will not be buffered."),null;var o=t[i],s=a>-1?Bn(o,r,a):null,l=s?s.fragment:Nn(o,r,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:s,level:o}):null},n.bufferFragmentData=function(e,t,n,i,r){var a;if(e&&this.state===Ji.PARSING){var o=e.data1,s=e.data2,l=o;if(o&&s&&(l=nt(o,s)),null!=(a=l)&&a.length){var u={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:l};if(this.hls.trigger(C.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(r)return;this.flushBufferGap(t)}}}},n.flushBufferGap=function(e){var t=this.media;if(t)if(Ri.isBuffered(t,t.currentTime)){var n=t.currentTime,i=Ri.bufferInfo(t,n,0),r=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)},n.getFwdBufferInfo=function(e,t){var n=this.getLoadPosition();return T(n)?this.getFwdBufferInfoAtPos(e,n,t):null},n.getFwdBufferInfoAtPos=function(e,t,n){var i=this.config.maxBufferHole,r=Ri.bufferInfo(e,t,i);if(0===r.len&&void 0!==r.nextStart){var a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&r.nextStart<a.end)return Ri.bufferInfo(e,t,Math.max(r.nextStart,i))}return r},n.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},n.reduceMaxBufferLength=function(e,t){var n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),r=Math.max(e-3*t,n.maxMaxBufferLength/2,i);return r>=i&&(n.maxMaxBufferLength=r,this.warn("Reduce max buffer length to "+r+"s"),!0)},n.getAppendedFrag=function(e,t){var n=this.fragmentTracker.getAppendedFrag(e,Qt.MAIN);return n&&"fragment"in n?n.fragment:n},n.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,o=n[0].start;if(t.live){var s=a.initialLiveManifestSize;if(i<s)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+s+")"),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<o)&&(r=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=n[0]);if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(r)},n.isLoopLoading=function(e,t){var n=this.fragmentTracker.getState(e);return(n===Ti.OK||n===Ti.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t},n.getNextFragmentLoopLoading=function(e,t,n,i,r){var a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(null===o)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(null!==s&&n.len+s.len>=r)return this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+e.sn),null}return e},n.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},n.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,i>-1&&n<l.start)break;var u=l.loaded;u?i=-1:(r||l.independent||a)&&l.fragment===t&&(i=o),r=u}return i},n.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},n.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,i=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),i=zn(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){var a=t[r-e.startSN];n.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=Jn(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i},n.getFragmentAtPosition=function(e,t,n){var i,r=this.config,a=this.fragPrevious,o=n.fragments,s=n.endSN,l=n.fragmentHint,u=r.maxFragLookUpTolerance,c=n.partList,d=!!(r.lowLatencyMode&&null!=c&&c.length&&l);if(d&&l&&!this.bitrateTest&&(o=o.concat(l),s=l.sn),i=e<t?qn(a,o,e,e>t-u?0:u):o[o.length-1]){var h=i.sn-n.startSN,f=this.fragmentTracker.getState(i);if((f===Ti.OK||f===Ti.PARTIAL&&i.gap)&&(a=i),a&&i.sn===a.sn&&(!d||c[0].fragment.sn>i.sn)&&a&&i.level===a.level){var p=o[h+1];i=i.sn<s&&this.fragmentTracker.getState(p)!==Ti.OK?p:null}}return i},n.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var i=this.hls.liveSyncPosition,r=n.currentTime,a=e.fragments[0].start,o=e.edge,s=r>=a-t.maxFragLookUpTolerance&&r<=o;if(null!==i&&n.duration>i&&(r<i||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||r<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+i.toFixed(3)),n.currentTime=i))}}},n.alignPlaylists=function(e,t,n){var i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;var r=e.fragments[0].start,a=!t,o=e.alignedSliding&&T(r);if(a||!o&&!r){var s=this.fragPrevious;Bi(s,n,e);var l=e.fragments[0].start;return this.log("Live playlist sliding: "+l.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(s?s.sn:"na")+" fragments: "+i),l}return r},n.waitForCdnTuneIn=function(e){var t=3;return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*t)},n.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=null!==this.startTimeOffset,r=i?this.startTimeOffset:e.startTimeOffset;null!==r&&T(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+r+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},n.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},n.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},n.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Ji.FRAG_LOADING_WAITING_RETRY)||(this.state=Ji.IDLE)},n.onFragmentOrKeyLoadError=function(e,t){if(t.chunkMeta&&!t.frag){var n=this.getCurrentContext(t.chunkMeta);n&&(t.frag=n.frag)}var i=t.frag;if(i&&i.type===e&&this.levels)if(this.fragContextChanged(i)){var r;this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(r=this.fragCurrent)?void 0:r.url))}else{var a=t.details===R.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);var o=t.errorAction,s=o||{},l=s.action,u=s.retryCount,c=void 0===u?0:u,d=s.retryConfig;if(o&&l===Zn.RetryRequest&&d){this.resetStartWhenNotLoaded(this.levelLastLoaded);var h=jn(d,c);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" errored with "+t.details+", retrying loading "+(c+1)+"/"+d.maxNumRetry+" in "+h+"ms"),o.resolved=!0,this.retryDate=self.performance.now()+h,this.state=Ji.FRAG_LOADING_WAITING_RETRY}else if(d&&o){if(this.resetFragmentErrors(e),!(c<d.maxNumRetry))return void N.warn(t.details+" reached or exceeded max retry ("+c+")");a||l===Zn.RemoveAlternatePermanently||(o.resolved=!0)}else(null==o?void 0:o.action)===Zn.SendAlternateToPenaltyBox?this.state=Ji.WAITING_LEVEL:this.state=Ji.ERROR;this.tickImmediate()}},n.reduceLengthAndFlushBuffer=function(e){if(this.state===Ji.PARSING||this.state===Ji.PARSED){var t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),r=i&&i.len>.5;r&&this.reduceMaxBufferLength(i.len,(null==t?void 0:t.duration)||10);var a=!r;return a&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+n+" buffer"),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1},n.resetFragmentErrors=function(e){e===Qt.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Ji.STOPPED&&(this.state=Ji.IDLE)},n.afterBufferFlushed=function(e,t,n){if(e){var i=Ri.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ji.ENDED&&this.resetLoadingState()}},n.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Ji.IDLE},n.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},n.resetWhenMissingContext=function(e){this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},n.removeUnbufferedFrags=function(e){void 0===e&&(e=0),this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)},n.updateLevelTiming=function(e,t,n,i){var r,a=this,o=n.details;if(o){var s=Object.keys(e.elementaryStreams).reduce((function(t,r){var s=e.elementaryStreams[r];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return a.warn("Could not parse fragment "+e.sn+" "+r+" duration reliably ("+l+")"),t||!1;var u=i?0:In(o,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return a.hls.trigger(C.LEVEL_PTS_UPDATED,{details:o,level:n,drift:u,type:r,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t}),!1);if(!s&&null===(null==(r=this.transmuxer)?void 0:r.error)){var l=new Error("Found no media in fragment "+e.sn+" of level "+e.level+" resetting transmuxer to fallback to playlist timing");if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:"Found no media in msn "+e.sn+' of level "'+n.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Ji.PARSED,this.hls.trigger(C.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")},n.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},n.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},s(t,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),t}(ki),er=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:tr(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}();function tr(e,t){for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){var a=e[r];n.set(a,i),i+=a.length}return n}function nr(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}var ir=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=nt(this.cachedData,e),this.cachedData=null);var n,i=me(e,0),r=i?i.length:0,a=this._audioTrack,o=this._id3Track,s=i?be(i):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&T(s))&&(this.basePTS=rr(s,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:un.audioId3,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){var u=this.appendFrame(a,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,n=r+=u.length):r=l}else Ae(e,r)?(i=me(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:un.audioId3,duration:Number.POSITIVE_INFINITY}),n=r+=i.length):r++;if(r===l&&n!==l){var c=fe(e,n);this.cachedData?this.cachedData=nt(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:nr(),id3Track:o,textTrack:nr()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:nr(),id3Track:this._id3Track,textTrack:nr()}},t.destroy=function(){},e}(),rr=function(e,t,n){return T(e)?90*e:9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function ar(e,t,n,i){var r,a,o,s,l=navigator.userAgent.toLowerCase(),u=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[n+2])>>>6);var d=(60&t[n+2])>>>2;if(!(d>c.length-1))return o=(1&t[n+2])<<2,o|=(192&t[n+3])>>>6,N.log("manifest codec:"+i+", ADTS type:"+r+", samplingIndex:"+d),/firefox/i.test(l)?d>=6?(r=5,s=new Array(4),a=d-3):(r=2,s=new Array(2),a=d):-1!==l.indexOf("android")?(r=2,s=new Array(2),a=d):(r=5,s=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&d>=6?a=d-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(d>=6&&1===o||/vivaldi/i.test(l))||!i&&1===o)&&(r=2,s=new Array(2)),a=d)),s[0]=r<<3,s[0]|=(14&d)>>1,s[1]|=(1&d)<<7,s[1]|=o<<3,5===r&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:c[d],channelCount:o,codec:"mp4a.40."+r,manifestCodec:u};var h=new Error("invalid ADTS sampling index:"+d);e.emit(C.ERROR,C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message})}function or(e,t){return 255===e[t]&&240==(246&e[t+1])}function sr(e,t){return 1&e[t+1]?7:9}function lr(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function ur(e,t){return t+5<e.length}function cr(e,t){return t+1<e.length&&or(e,t)}function dr(e,t){return ur(e,t)&&or(e,t)&&lr(e,t)<=e.length-t}function hr(e,t){if(cr(e,t)){var n=sr(e,t);if(t+n>=e.length)return!1;var i=lr(e,t);if(i<=n)return!1;var r=t+i;return r===e.length||cr(e,r)}return!1}function fr(e,t,n,i,r){if(!e.samplerate){var a=ar(t,n,i,r);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,N.log("parsed codec:"+e.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function pr(e){return 9216e4/e}function gr(e,t){var n=sr(e,t);if(t+n<=e.length){var i=lr(e,t)-n;if(i>0)return{headerLength:n,frameLength:i}}}function vr(e,t,n,i,r){var a,o=i+r*pr(e.samplerate),s=gr(t,n);if(s){var l=s.frameLength,u=s.headerLength,c=u+l,d=Math.max(0,n+c-t.length);d?(a=new Uint8Array(c-u)).set(t.subarray(n+u,t.length),0):a=t.subarray(n+u,n+c);var h={unit:a,pts:o};return d||e.samples.push(h),{sample:h,length:c,missing:d}}var f=t.length-n;return(a=new Uint8Array(f)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:o},length:f,missing:-1}}var mr=null,yr=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ar=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],br=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Er=[0,1,1,4];function _r(e,t,n,i,r){if(!(n+24>t.length)){var a=kr(t,n);if(a&&n+a.frameLength<=t.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function kr(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*yr[14*(3===n?3-i:3===i?3:4)+r-1],u=Ar[3*(3===n?0:2===n?1:2)+a],c=3===s?1:2,d=br[n][i],h=Er[i],f=8*d*h,p=Math.floor(d*l/u+o)*h;if(null===mr){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);mr=g?parseInt(g[1]):0}return!!mr&&mr<=87&&2===i&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:c,frameLength:p,samplesPerFrame:f}}}function Tr(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Sr(e,t){return t+1<e.length&&Tr(e,t)}function wr(e,t){var n=4;return Tr(e,t)&&n<=e.length-t}function Cr(e,t){if(t+1<e.length&&Tr(e,t)){var n=4,i=kr(e,t),r=n;null!=i&&i.frameLength&&(r=i.frameLength);var a=t+r;return a===e.length||Sr(e,a)}return!1}var Ir=function(e){function t(t,n){var i;return(i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=n,i}c(t,e);var n=t.prototype;return n.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;var t=me(e,0),n=(null==t?void 0:t.length)||0;if(Cr(e,n))return!1;for(var i=e.length;n<i;n++)if(hr(e,n))return N.log("ADTS sync word found !"),!0;return!1},n.canParse=function(e,t){return dr(e,t)},n.appendFrame=function(e,t,n){fr(e,this.observer,t,n,e.manifestCodec);var i=vr(e,t,n,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},t}(ir),Rr=/\/emsg[-/]ID3/i,Dr=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,n,i){var r=this.videoTrack=nr("video",1),a=this.audioTrack=nr("audio",1),o=this.txtTrack=nr("text",1);if(this.id3Track=nr("id3",1),this.timeOffset=0,null!=e&&e.byteLength){var s=Ge(e);if(s.video){var l=s.video,u=l.id,c=l.timescale,d=l.codec;r.id=u,r.timescale=o.timescale=c,r.codec=d}if(s.audio){var h=s.audio,f=h.id,p=h.timescale,g=h.codec;a.id=f,a.timescale=p,a.codec=g}o.id=xe.text,r.sampleDuration=0,r.duration=a.duration=i}},t.resetContiguity=function(){this.remainderData=null},e.probe=function(e){return He(e)},t.demux=function(e,t){this.timeOffset=t;var n=e,i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=nt(this.remainderData,e));var a=tt(n);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=n;var o=this.extractID3Track(i,t);return r.samples=it(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return n.samples=it(e,t),{videoTrack:t,audioTrack:nr(),id3Track:i,textTrack:nr()}},t.extractID3Track=function(e,t){var n=this.id3Track;if(e.samples.length){var i=je(e.samples,["emsg"]);i&&i.forEach((function(e){var i=lt(e);if(Rr.test(i.schemeIdUri)){var r=T(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale,a=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var o=i.payload;n.samples.push({data:o,len:o.byteLength,dts:r,pts:r,type:un.emsg,duration:a})}}))}return n},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}(),Lr=function(e,t){var n=0,i=5;t+=i;for(var r=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);i>0;){o[0]=e[t];var s=Math.min(i,8),l=8-s;a[0]=4278190080>>>24+l<<l,r[0]=(o[0]&a[0])>>l,n=n?n<<s|r[0]:r[0],t+=1,i-=s}return n},Pr=function(e){function t(t){var n;return(n=e.call(this)||this).observer=void 0,n.observer=t,n}c(t,e);var n=t.prototype;return n.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},n.canParse=function(e,t){return t+64<e.length},n.appendFrame=function(e,t,n){var i=Or(e,t,n,this.basePTS,this.frameIndex);if(-1!==i)return{sample:e.samples[e.samples.length-1],length:i,missing:0}},t.probe=function(e){if(!e)return!1;var t=me(e,0);if(!t)return!1;var n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==be(t)&&Lr(e,n)<16},t}(ir);function Or(e,t,n,i,r){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;var a=t[n+4]>>6;if(a>=3)return-1;var o=[48e3,44100,32e3][a],s=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+a];if(n+l>t.length)return-1;var u=t[n+6]>>5,c=0;2===u?c+=2:(1&u&&1!==u&&(c+=2),4&u&&(c+=2));var d=(t[n+6]<<8|t[n+7])>>12-c&1,h=[2,1,2,3,3,4,4,5][u]+d,f=t[n+5]>>3,p=7&t[n+5],g=new Uint8Array([a<<6|f<<1|p>>2,(3&p)<<6|u<<3|d<<2|s>>4,s<<4&224]),v=i+r*(1536/o*9e4),m=t.subarray(n,n+l);return e.config=g,e.channelCount=h,e.samplerate=o,e.samples.push({unit:m,pts:v}),l}var xr=function(){function e(){this.VideoSample=null}var t=e.prototype;return t.createVideoSample=function(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}},t.getLastNalUnit=function(e){var t,n,i=this.VideoSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!=(t=i)&&t.units){var r=i.units;n=r[r.length-1]}return n},t.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;var r=n[i-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&N.log(e.pts+"/"+e.dts+":"+e.debug)},e}(),Mr=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;if(e>32&&N.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,i=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(l(5),d(3),s(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=u();if(3===v&&d(1),f(),f(),d(1),c())for(t=3!==v?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}f();var m=u();if(0===m)u();else if(1===m)for(d(1),h(),h(),e=u(),n=0;n<e;n++)h();f(),d(1);var y=u(),A=u(),b=l(1);0===b&&d(1),d(1),c()&&(i=u(),r=u(),a=u(),o=u());var E=[1,1];if(c()&&c())switch(s()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*i-2*r),height:(2-b)*(A+1)*16-(b?2:4)*(a+o),pixelRatio:E}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),Nr=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var n=t.prototype;return n.parseAVCPES=function(e,t,n,i,r){var a,o=this,s=this.parseAVCNALu(e,n.data),l=this.VideoSample,u=!1;n.data=null,l&&s.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),s.forEach((function(i){var s;switch(i.type){case 1:var c=!1;a=!0;var d,h=i.data;if(u&&h.length>4){var f=new Mr(h).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(c=!0)}c&&null!=(d=l)&&d.frame&&!l.key&&(o.pushAccessUnit(l,e),l=o.VideoSample=null),l||(l=o.VideoSample=o.createVideoSample(!0,n.pts,n.dts,"")),l.frame=!0,l.key=c;break;case 5:a=!0,null!=(s=l)&&s.frame&&!l.key&&(o.pushAccessUnit(l,e),l=o.VideoSample=null),l||(l=o.VideoSample=o.createVideoSample(!0,n.pts,n.dts,"")),l.key=!0,l.frame=!0;break;case 6:a=!0,ot(i.data,1,n.pts,t.samples);break;case 7:var p,g;a=!0,u=!0;var v=i.data,m=new Mr(v).readSPS();if(!e.sps||e.width!==m.width||e.height!==m.height||(null==(p=e.pixelRatio)?void 0:p[0])!==m.pixelRatio[0]||(null==(g=e.pixelRatio)?void 0:g[1])!==m.pixelRatio[1]){e.width=m.width,e.height=m.height,e.pixelRatio=m.pixelRatio,e.sps=[v],e.duration=r;for(var y=v.subarray(1,4),A="avc1.",b=0;b<3;b++){var E=y[b].toString(16);E.length<2&&(E="0"+E),A+=E}e.codec=A}break;case 8:a=!0,e.pps=[i.data];break;case 9:a=!0,e.audFound=!0,l&&o.pushAccessUnit(l,e),l=o.VideoSample=o.createVideoSample(!1,n.pts,n.dts,"");break;case 12:a=!0;break;default:a=!1,l&&(l.debug+="unknown NAL "+i.type+" ")}l&&a&&l.units.push(i)})),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)},n.parseAVCNALu=function(e,t){var n,i,r=t.byteLength,a=e.naluState||0,o=a,s=[],l=0,u=-1,c=0;for(-1===a&&(u=0,c=31&t[0],a=0,l=1);l<r;)if(n=t[l++],a)if(1!==a)if(n)if(1===n){if(i=l-a-1,u>=0){var d={data:t.subarray(u,i),type:c};s.push(d)}else{var h=this.getLastNalUnit(e.samples);h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),i>0&&(h.data=nt(h.data,t.subarray(0,i)),h.state=0))}l<r?(u=l,c=31&t[l],a=0):a=-1}else a=0;else a=3;else a=n?0:2;else a=n?0:1;if(u>=0&&a>=0){var f={data:t.subarray(u,r),type:c,state:a};s.push(f)}if(0===s.length){var p=this.getLastNalUnit(e.samples);p&&(p.data=nt(p.data,t))}return e.naluState=a,s},t}(xr),Br=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Xi(t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},t.decryptAacSample=function(e,t,n){var i=this,r=e[t].unit;if(!(r.length<=16)){var a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(o).then((function(a){var o=new Uint8Array(a);r.set(o,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,n)}))}},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},t.decryptAvcSample=function(e,t,n,i,r){var a=this,o=st(r.data),s=this.getAvcEncryptedData(o);this.decryptBuffer(s.buffer).then((function(s){r.data=a.getAvcDecryptedUnit(o,s),a.decrypter.isSync()||a.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,i,a),this.decrypter.isSync())))return}}},e}(),Fr=188,Ur=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new Nr}e.probe=function(t){var n=e.syncOffset(t);return n>0&&N.warn("MPEG2-TS detected but first sync word found @ offset "+n),-1!==n},e.syncOffset=function(e){for(var t=e.length,n=Math.min(5*Fr,t-Fr)+1,i=0;i<n;){for(var r=!1,a=-1,o=0,s=i;s<t;s+=Fr){if(71!==e[s]||t-s!==Fr&&71!==e[s+Fr]){if(o)return-1;break}if(o++,-1===a&&0!==(a=s)&&(n=Math.min(a+99*Fr,e.length-Fr)+1),r||(r=0===Vr(e,s)),r&&o>1&&(0===a&&o>2||s+Fr>n))return a}i++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:xe[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null},t.demux=function(t,n,i,r){var a;void 0===i&&(i=!1),void 0===r&&(r=!1),i||(this.sampleAes=null);var o=this._videoTrack,s=this._audioTrack,l=this._id3Track,u=this._txtTrack,c=o.pid,d=o.pesData,h=s.pid,f=l.pid,p=s.pesData,g=l.pesData,v=null,m=this.pmtParsed,y=this._pmtId,A=t.length;if(this.remainderData&&(A=(t=nt(this.remainderData,t)).length,this.remainderData=null),A<Fr&&!r)return this.remainderData=t,{audioTrack:s,videoTrack:o,id3Track:l,textTrack:u};var b=Math.max(0,e.syncOffset(t));(A-=(A-b)%Fr)<t.byteLength&&!r&&(this.remainderData=new Uint8Array(t.buffer,A,t.buffer.byteLength-A));for(var E=0,_=b;_<A;_+=Fr)if(71===t[_]){var k=!!(64&t[_+1]),T=Vr(t,_),S=void 0;if((48&t[_+3])>>4>1){if((S=_+5+t[_+4])===_+Fr)continue}else S=_+4;switch(T){case c:k&&(d&&(a=Wr(d))&&this.videoParser.parseAVCPES(o,u,a,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(t.subarray(S,_+Fr)),d.size+=_+Fr-S);break;case h:if(k){if(p&&(a=Wr(p)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,a);break;case"mp3":this.parseMPEGPES(s,a);break;case"ac3":this.parseAC3PES(s,a)}p={data:[],size:0}}p&&(p.data.push(t.subarray(S,_+Fr)),p.size+=_+Fr-S);break;case f:k&&(g&&(a=Wr(g))&&this.parseID3PES(l,a),g={data:[],size:0}),g&&(g.data.push(t.subarray(S,_+Fr)),g.size+=_+Fr-S);break;case 0:k&&(S+=t[S]+1),y=this._pmtId=Hr(t,S);break;case y:k&&(S+=t[S]+1);var w=jr(t,S,this.typeSupported,i,this.observer);(c=w.videoPid)>0&&(o.pid=c,o.segmentCodec=w.segmentVideoCodec),(h=w.audioPid)>0&&(s.pid=h,s.segmentCodec=w.segmentAudioCodec),(f=w.id3Pid)>0&&(l.pid=f),null===v||m||(N.warn("MPEG-TS PMT found at "+_+" after unknown PID '"+v+"'. Backtracking to sync byte @"+b+" to parse all TS packets."),v=null,_=b-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:v=T}}else E++;E>0&&Kr(this.observer,new Error("Found "+E+" TS packet/s that do not start with 0x47")),o.pesData=d,s.pesData=p,l.pesData=g;var C={audioTrack:s,videoTrack:o,id3Track:l,textTrack:u};return r&&this.extractRemainingSamples(C),C},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,a=e.textTrack,o=i.pesData,s=n.pesData,l=r.pesData;if(o&&(t=Wr(o))?(this.videoParser.parseAVCPES(i,a,t,!0,this._duration),i.pesData=null):i.pesData=o,s&&(t=Wr(s))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t);break;case"ac3":this.parseAC3PES(n,t)}n.pesData=null}else null!=s&&s.size&&N.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s;l&&(t=Wr(l))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=l},t.demuxSampleAes=function(e,t,n){var i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new Br(this.observer,this.config,t);return this.decrypt(i,r)},t.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,r=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._duration=0},t.parseAACPES=function(e,t){var n,i,r,a=0,o=this.aacOverFlow,s=t.data;if(o){this.aacOverFlow=null;var l=o.missing,u=o.sample.unit.byteLength;if(-1===l)s=nt(o.sample.unit,s);else{var c=u-l;o.sample.unit.set(s.subarray(0,l),c),e.samples.push(o.sample),a=o.missing}}for(n=a,i=s.length;n<i-1&&!cr(s,n);n++);if(n!==a){var d,h=n<i-1;if(d=h?"AAC PES did not start with ADTS header,offset:"+n:"No ADTS header found in AAC PES",Kr(this.observer,new Error(d),h),!h)return}if(fr(e,this.observer,s,n,this.audioCodec),void 0!==t.pts)r=t.pts;else{if(!o)return void N.warn("[tsdemuxer]: AAC PES unknown PTS");var f=pr(e.samplerate);r=o.sample.pts+f}for(var p,g=0;n<i;){if(n+=(p=vr(e,s,n,r,g)).length,p.missing){this.aacOverFlow=p;break}for(g++;n<i-1&&!cr(s,n);n++);}},t.parseMPEGPES=function(e,t){var n=t.data,i=n.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<i;)if(Sr(n,a)){var s=_r(e,n,a,o,r);if(!s)break;a+=s.length,r++}else a++;else N.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseAC3PES=function(e,t){var n=t.data,i=t.pts;if(void 0!==i)for(var r,a=n.length,o=0,s=0;s<a&&(r=Or(e,n,s,i,o++))>0;)s+=r;else N.warn("[tsdemuxer]: AC3 PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var n=u({},t,{type:this._videoTrack?un.emsg:un.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}else N.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function Vr(e,t){return((31&e[t+1])<<8)+e[t+2]}function Hr(e,t){return(31&e[t+10])<<8|e[t+11]}function jr(e,t,n,i,r){var a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){var s=Vr(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){Gr("ADTS AAC");break}case 15:-1===a.audioPid&&(a.audioPid=s);break;case 21:-1===a.id3Pid&&(a.id3Pid=s);break;case 219:if(!i){Gr("H.264");break}case 27:-1===a.videoPid&&(a.videoPid=s,a.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===a.audioPid&&(a.audioPid=s,a.segmentAudioCodec="mp3"):N.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){Gr("AC-3");break}case 129:n.ac3?-1===a.audioPid&&(a.audioPid=s,a.segmentAudioCodec="ac3"):N.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&l>0)for(var u=t+5,c=l;c>2;){106===e[u]&&(!0!==n.ac3?N.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=s,a.segmentAudioCodec="ac3"));var d=e[u+1]+2;u+=d,c-=d}break;case 194:case 135:return Kr(r,new Error("Unsupported EC-3 in M2TS found")),a;case 36:return Kr(r,new Error("Unsupported HEVC in M2TS found")),a}t+=l+5}return a}function Kr(e,t,n){N.warn("parsing error: "+t.message),e.emit(C.ERROR,C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function Gr(e){N.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function Wr(e){var t,n,i,r,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;)s[0]=nt(s[0],s[1]),s.splice(1,1);if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(N.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var u=(i=t[8])+9;if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),d=0,h=s.length;d<h;d++){var f=(t=s[d]).byteLength;if(u){if(u>f){u-=f;continue}t=t.subarray(u),f-=u,u=0}c.set(t,o),o+=f}return n&&(n-=i+3),{data:c,pts:r,dts:a,len:n}}return null}var Yr=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var n=t.prototype;return n.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;var t=me(e,0),n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==be(t)&&Lr(e,n)<=16)return!1;for(var i=e.length;n<i;n++)if(Cr(e,n))return N.log("MPEG Audio sync word found !"),!0;return!1},n.canParse=function(e,t){return wr(e,t)},n.appendFrame=function(e,t,n){if(null!==this.basePTS)return _r(e,t,n,this.basePTS,this.frameIndex)},t}(ir),zr=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),qr=Math.pow(2,32)-1,$r=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t=8,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,o=a;a--;)t+=i[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(i[a],t),t+=i[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(qr+1)),r=Math.floor(n%(qr+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(qr+1)),r=Math.floor(n%(qr+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},e.mp4a=function(t){return e.box(e.types.mp4a,e.audioStsd(t),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){return e.box(e.types[".mp3"],e.audioStsd(t))},e.ac3=function(t){return e.box(e.types["ac-3"],e.audioStsd(t),e.box(e.types.dac3,t.config))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):"ac3"===t.segmentCodec?e.box(e.types.stsd,e.STSD,e.ac3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,o=Math.floor(i/(qr+1)),s=Math.floor(i%(qr+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(qr+1)),o=Math.floor(n%(qr+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set(["video"===t.type?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=u[i]).duration,o=r.size,s=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t);return nt(e.FTYP,n)},e}();$r.types=void 0,$r.HDLR_TYPES=void 0,$r.STTS=void 0,$r.STSC=void 0,$r.STCO=void 0,$r.STSZ=void 0,$r.VMHD=void 0,$r.SMHD=void 0,$r.STSD=void 0,$r.FTYP=void 0,$r.DINF=void 0;var Xr=9e4;function Qr(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=e*t*n;return i?Math.round(r):r}function Jr(e,t,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),Qr(e,t,1/n,i)}function Zr(e,t){return void 0===t&&(t=!1),Qr(e,1e3,1/Xr,t)}function ea(e,t){return void 0===t&&(t=1),Qr(e,Xr,1/t)}var ta=1e4,na=1024,ia=1152,ra=1536,aa=null,oa=null,sa=function(){function e(e,t,n,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===aa){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);aa=r?parseInt(r[1]):0}if(null===oa){var a=navigator.userAgent.match(/Safari\/(\d+)/i);oa=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},t.resetTimeStamp=function(e){N.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){N.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){N.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,la(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&N.debug("PTS rollover detected"),n},t.remux=function(e,t,n,i,r,a,o,s){var l,u,c,d,h,f,p=r,g=r,v=e.pid>-1,m=t.pid>-1,y=t.samples.length,A=e.samples.length>0,b=o&&y>0||y>1;if((!v||A)&&(!m||b)||this.ISGenerated||o){if(this.ISGenerated){var E,_,k,T,S=this.videoTrackConfig;!S||t.width===S.width&&t.height===S.height&&(null==(E=t.pixelRatio)?void 0:E[0])===(null==(_=S.pixelRatio)?void 0:_[0])&&(null==(k=t.pixelRatio)?void 0:k[1])===(null==(T=S.pixelRatio)?void 0:T[1])||this.resetInitSegment()}else c=this.generateIS(e,t,r,a);var w,C=this.isVideoContiguous,I=-1;if(b&&(I=ua(t.samples),!C&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,I>0){N.warn("[mp4-remuxer]: Dropped "+I+" out of "+y+" video samples due to a missing keyframe");var R=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(I),t.dropped+=I,w=g+=(t.samples[0].pts-R)/t.inputTimeScale}else-1===I&&(N.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(A&&b){var D=this.getVideoStartPts(t.samples),L=(la(e.samples[0].pts,D)-D)/t.inputTimeScale;p+=Math.max(0,L),g+=Math.max(0,-L)}if(A){if(e.samplerate||(N.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,p,this.isAudioContiguous,a,m||b||s===Qt.AUDIO?g:void 0),b){var P=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(N.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,a)),l=this.remuxVideo(t,g,C,P)}}else b&&(l=this.remuxVideo(t,g,C,0));l&&(l.firstKeyFrame=I,l.independent=-1!==I,l.firstKeyFramePTS=w)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=ca(n,r,this._initPTS,this._initDTS)),i.samples.length&&(d=da(i,r,this._initPTS))),{audio:u,video:l,initSegment:c,independent:f,text:d,id3:h}},t.generateIS=function(e,t,n,i){var r,a,o,s=e.samples,l=t.samples,u=this.typeSupported,c={},d=this._initPTS,h=!d||i,f="audio/mp4";if(h&&(r=a=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}c.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):$r.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(o=e.inputTimeScale,d&&o===d.timescale?h=!1:r=a=s[0].pts-Math.round(o*n))}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:$r.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(o=t.inputTimeScale,d&&o===d.timescale)h=!1;else{var p=this.getVideoStartPts(l),g=Math.round(o*n);a=Math.min(a,la(l[0].dts,p)-g),r=Math.min(r,p-g)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:r,timescale:o},this._initDTS={baseTime:a,timescale:o}):r=o=void 0,{tracks:c,initPTS:r,timescale:o}},t.remuxVideo=function(e,t,n,i){var r,a,o=e.inputTimeScale,s=e.samples,l=[],c=s.length,d=this._initPTS,h=this.nextAvcDts,f=8,p=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,m=!1;if(!n||null===h){var y=t*o,A=s[0].pts-la(s[0].dts,s[0].pts);aa&&null!==h&&Math.abs(y-A-h)<15e3?n=!0:h=y-A}for(var b=d.baseTime*o/d.timescale,E=0;E<c;E++){var _=s[E];_.pts=la(_.pts-b,h),_.dts=la(_.dts-b,h),_.dts<s[E>0?E-1:E].dts&&(m=!0)}m&&s.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),r=s[0].dts;var k=(a=s[s.length-1].dts)-r,T=k?Math.round(k/(c-1)):p||e.inputTimeScale/30;if(n){var S=r-h,w=S>T,D=S<-1;if((w||D)&&(w?N.warn("AVC: "+Zr(S,!0)+" ms ("+S+"dts) hole between fragments detected at "+t.toFixed(3)):N.warn("AVC: "+Zr(-S,!0)+" ms ("+S+"dts) overlapping between fragments detected at "+t.toFixed(3)),!D||h>=s[0].pts||aa)){r=h;var L=s[0].pts-S;if(w)s[0].dts=r,s[0].pts=L;else for(var P=0;P<s.length&&!(s[P].dts>L);P++)s[P].dts-=S,s[P].pts-=S;N.log("Video: Initial PTS/DTS adjusted: "+Zr(L,!0)+"/"+Zr(r,!0)+", delta: "+Zr(S,!0)+" ms")}}for(var O=0,x=0,M=r=Math.max(0,r),B=0;B<c;B++){for(var F=s[B],U=F.units,V=U.length,H=0,j=0;j<V;j++)H+=U[j].data.length;x+=H,O+=V,F.length=H,F.dts<M?(F.dts=M,M+=T/4|0||1):M=F.dts,g=Math.min(F.pts,g),v=Math.max(F.pts,v)}a=s[c-1].dts;var K,G=x+4*O+8;try{K=new Uint8Array(G)}catch(e){return void this.observer.emit(C.ERROR,C.ERROR,{type:I.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:G,reason:"fail allocating video mdat "+G})}var W=new DataView(K.buffer);W.setUint32(0,G),K.set($r.types.mdat,4);for(var Y=!1,z=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Q=0;Q<c;Q++){for(var J=s[Q],Z=J.units,ee=0,te=0,ne=Z.length;te<ne;te++){var ie=Z[te],re=ie.data,ae=ie.data.byteLength;W.setUint32(f,ae),f+=4,K.set(re,f),f+=ae,ee+=4+ae}var oe=void 0;if(Q<c-1)p=s[Q+1].dts-J.dts,oe=s[Q+1].pts-J.pts;else{var se=this.config,le=Q>0?J.dts-s[Q-1].dts:T;if(oe=Q>0?J.pts-s[Q-1].pts:T,se.stretchShortVideoTrack&&null!==this.nextAudioPts){var ue=Math.floor(se.maxBufferHole*o),ce=(i?g+i*o:this.nextAudioPts)-J.pts;ce>ue?((p=ce-le)<0?p=le:Y=!0,N.log("[mp4-remuxer]: It is approximately "+ce/90+" ms to the next segment; using duration "+p/90+" ms for the last video frame.")):p=le}else p=le}var de=Math.round(J.pts-J.dts);z=Math.min(z,p),$=Math.max($,p),q=Math.min(q,oe),X=Math.max(X,oe),l.push(new fa(J.key,p,ee,de))}if(l.length)if(aa){if(aa<70){var he=l[0].flags;he.dependsOn=2,he.isNonSync=0}}else if(oa&&X-q<$-z&&T/$<.025&&0===l[0].cts){N.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var fe=r,pe=0,ge=l.length;pe<ge;pe++){var ve=fe+l[pe].duration,me=fe+l[pe].cts;if(pe<ge-1){var ye=ve+l[pe+1].cts;l[pe].duration=ye-me}else l[pe].duration=pe?l[pe-1].duration:T;l[pe].cts=0,fe=ve}}p=Y||!p?T:p,this.nextAvcDts=h=a+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;var Ae={data1:$r.moof(e.sequenceNumber++,r,u({},e,{samples:l})),data2:K,startPTS:g/o,endPTS:(v+p)/o,startDTS:r/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Ae},t.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return ia;case"ac3":return ra;default:return na}},t.remuxAudio=function(e,t,n,i,r){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.getSamplesPerFrame(e),l=s*o,c=this._initPTS,d="mp3"===e.segmentCodec&&this.typeSupported.mpeg,h=[],f=void 0!==r,p=e.samples,g=d?0:8,v=this.nextAudioPts||-1,m=t*a,y=c.baseTime*a/c.timescale;if(this.isAudioContiguous=n=n||p.length&&v>0&&(i&&Math.abs(m-v)<9e3||Math.abs(la(p[0].pts-y,m)-v)<20*l),p.forEach((function(e){e.pts=la(e.pts-y,m)})),!n||v<0){if(p=p.filter((function(e){return e.pts>=0})),!p.length)return;v=0===r?0:i&&!f?Math.max(0,m):p[0].pts}if("aac"===e.segmentCodec)for(var A=this.config.maxAudioFramesDrift,b=0,E=v;b<p.length;b++){var _=p[b],k=_.pts,T=k-E,S=Math.abs(1e3*T/a);if(T<=-A*l&&f)0===b&&(N.warn("Audio frame @ "+(k/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*T/a)+" ms."),this.nextAudioPts=v=E=k);else if(T>=A*l&&S<ta&&f){var w=Math.round(T/l);(E=k-w*l)<0&&(w--,E+=l),0===b&&(this.nextAudioPts=v=E),N.warn("[mp4-remuxer]: Injecting "+w+" audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(1e3*T/a)+" ms gap.");for(var D=0;D<w;D++){var L=Math.max(E,0),P=zr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);P||(N.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=_.unit.subarray()),p.splice(b,0,{unit:P,pts:L}),E+=l,b++}}_.pts=E,E+=l}for(var O,x=null,M=null,B=0,F=p.length;F--;)B+=p[F].unit.byteLength;for(var U=0,V=p.length;U<V;U++){var H=p[U],j=H.unit,K=H.pts;if(null!==M)h[U-1].duration=Math.round((K-M)/o);else{if(n&&"aac"===e.segmentCodec&&(K=v),x=K,!(B>0))return;B+=g;try{O=new Uint8Array(B)}catch(e){return void this.observer.emit(C.ERROR,C.ERROR,{type:I.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:B,reason:"fail allocating audio mdat "+B})}d||(new DataView(O.buffer).setUint32(0,B),O.set($r.types.mdat,4))}O.set(j,g);var G=j.byteLength;g+=G,h.push(new fa(!0,s,G,0)),M=K}var W=h.length;if(W){var Y=h[h.length-1];this.nextAudioPts=v=M+o*Y.duration;var z=d?new Uint8Array(0):$r.moof(e.sequenceNumber++,x/o,u({},e,{samples:h}));e.samples=[];var q=x/a,$=v/a,X={data1:z,data2:O,startPTS:q,endPTS:$,startDTS:q,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.isAudioContiguous=!0,X}},t.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,u=(null!==o?o:i.startDTS*r)+l,c=i.endDTS*r+l,d=a*na,h=Math.ceil((c-u)/d),f=zr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(N.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],g=0;g<h;g++){var v=u+g*d;p.push({unit:f,pts:v,dts:v})}return e.samples=p,this.remuxAudio(e,t,n,!1)}N.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function la(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function ua(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}function ca(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,o=0;o<r;o++){var s=e.samples[o];s.pts=la(s.pts-n.baseTime*a/n.timescale,t*a)/a,s.dts=la(s.dts-i.baseTime*a/i.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function da(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var o=e.samples[a];o.pts=la(o.pts-n.baseTime*r/n.timescale,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var s=e.samples;return e.samples=[],{samples:s}}}var ha,fa=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}},pa=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment($e(e,i)),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Ge(e);i.audio&&(t=va(i.audio,G.AUDIO)),i.video&&(n=va(i.video,G.VIDEO));var r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:N.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,n,i,r,a){var o,s,l=this.initPTS,u=this.lastEndTime,c={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};T(u)||(u=this.lastEndTime=r||0);var d=t.samples;if(null==d||!d.length)return c;var h={initPTS:void 0,timescale:1},f=this.initData;if(null!=(o=f)&&o.length||(this.generateInitSegment(d),f=this.initData),null==(s=f)||!s.length)return N.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var p=Je(d,f),g=Qe(f,d),v=null===g?r:g;(ga(l)||h.timescale!==l.timescale&&a)&&(h.initPTS=v-r,l&&1===l.timescale&&N.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});var m=e?v-l.baseTime/l.timescale:u,y=m+p;et(f,d,l.baseTime/l.timescale),p>0?this.lastEndTime=y:(N.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var A=!!f.audio,b=!!f.video,E="";A&&(E+="audio"),b&&(E+="video");var _={data1:d,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:E,hasAudio:A,hasVideo:b,nb:1,dropped:0};return c.audio="audio"===_.type?_:void 0,c.video="audio"!==_.type?_:void 0,c.initSegment=h,c.id3=ca(n,r,l,l),i.samples.length&&(c.text=da(i,r,l)),c},e}();function ga(e,t,n,i){return null===e}function va(e,t){var n=null==e?void 0:e.codec;if(n&&n.length>4)return n;if(t===G.AUDIO){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n)return Ot(n,!1);var i="mp4a.40.5";return N.info('Parsed audio codec "'+n+'" or audio object type not handled. Using "'+i+'"'),i}return N.warn('Unhandled video codec "'+n+'"'),"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1.42e01e"}try{ha=self.performance.now.bind(self.performance)}catch(e){N.debug("Unable to use Performance API on this environment"),ha=null==te?void 0:te.Date.now}var ma=[{demux:Dr,remux:pa},{demux:Ur,remux:sa},{demux:Ir,remux:sa},{demux:Yr,remux:sa}];ma.splice(2,0,{demux:Pr,remux:sa});var ya=function(){function e(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,i){var r=this,a=n.transmuxing;a.executeStart=ha();var o=new Uint8Array(e),s=this.currentTransmuxState,l=this.transmuxConfig;i&&(this.currentTransmuxState=i);var u=i||s,c=u.contiguous,d=u.discontinuity,h=u.trackSwitch,f=u.accurateTimeOffset,p=u.timeOffset,g=u.initSegmentChange,v=l.audioCodec,m=l.videoCodec,y=l.defaultInitPts,A=l.duration,b=l.initSegmentData,E=Aa(o,t);if(E&&"AES-128"===E.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(o,E.key.buffer,E.iv.buffer).then((function(e){var t=r.push(e,null,n);return r.decryptionPromise=null,t})),this.decryptionPromise;var k=_.softwareDecrypt(o,E.key.buffer,E.iv.buffer);if(n.part>-1&&(k=_.flush()),!k)return a.executeEnd=ha(),ba(n);o=new Uint8Array(k)}var T=this.needsProbing(d,h);if(T){var S=this.configureTransmuxer(o);if(S)return N.warn("[transmuxer] "+S.message),this.observer.emit(C.ERROR,C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:S,reason:S.message}),a.executeEnd=ha(),ba(n)}(d||h||g||T)&&this.resetInitSegment(b,v,m,A,t),(d||g||T)&&this.resetInitialTimestamp(y),c||this.resetContiguity();var w=this.transmux(o,E,p,f,n),D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,a.executeEnd=ha(),w},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=ha();var i=this.decrypter,r=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then((function(){return t.flush(e)}));var o=[],s=r.timeOffset;if(i){var l=i.flush();l&&o.push(this.push(l,null,e))}var u=this.demuxer,c=this.remuxer;if(!u||!c)return n.executeEnd=ha(),[ba(e)];var d=u.flush(s);return Ea(d)?d.then((function(n){return t.flushRemux(o,n,e),o})):(this.flushRemux(o,d,e),o)},t.flushRemux=function(e,t,n){var i=t.audioTrack,r=t.videoTrack,a=t.id3Track,o=t.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,u=s.timeOffset;N.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var c=this.remuxer.remux(i,r,a,o,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=ha()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,i,r){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,r))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},t.transmuxUnencrypted=function(e,t,n,i){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,o=r.videoTrack,s=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,n,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}}))},t.configureTransmuxer=function(e){for(var t,n=this.config,i=this.observer,r=this.typeSupported,a=this.vendor,o=0,s=ma.length;o<s;o++){var l;if(null!=(l=ma[o].demux)&&l.probe(e)){t=ma[o];break}}if(!t)return new Error("Failed to find demuxer by probing fragment data");var u=this.demuxer,c=this.remuxer,d=t.remux,h=t.demux;c&&c instanceof d||(this.remuxer=new d(i,n,r,a)),u&&u instanceof h||(this.demuxer=new h(i,n,r),this.probe=h.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new Xi(this.config)),e},e}();function Aa(e,t){var n=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t),n}var ba=function(e){return{remuxResult:{},chunkMeta:e}};function Ea(e){return"then"in e&&e.then instanceof Function}var _a=function(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null},ka=function(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a},Ta={exports:{}};!function(module){var e=Object.prototype.hasOwnProperty,t="~";function n(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,n,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),l=t?t+n:n;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),o.prototype.eventNames=function(){var n,i,r=[];if(0===this._eventsCount)return r;for(i in n=this._events)e.call(n,i)&&r.push(t?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(n)):r},o.prototype.listeners=function(e){var n=t?t+e:e,i=this._events[n];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,o=new Array(a);r<a;r++)o[r]=i[r].fn;return o},o.prototype.listenerCount=function(e){var n=t?t+e:e,i=this._events[n];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,n,i,r,a,o){var s=t?t+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,i),!0;case 4:return c.fn.call(c.context,n,i,r),!0;case 5:return c.fn.call(c.context,n,i,r,a),!0;case 6:return c.fn.call(c.context,n,i,r,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,n);break;case 3:c[u].fn.call(c[u].context,n,i);break;case 4:c[u].fn.call(c[u].context,n,i,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,n,i,r){var o=t?t+e:e;if(!this._events[o])return this;if(!n)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==n||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==n||r&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},o.prototype.removeAllListeners=function(e){var i;return e?(i=t?t+e:e,this._events[i]&&a(this,i)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,module.exports=o}(Ta);var Sa=E(Ta.exports);function wa(e){var t=new Sa,n=function(t,n){e.postMessage({event:t,data:n})};t.on(C.FRAG_DECRYPTED,n),t.on(C.ERROR,n);var i=function(){var e=function(e){var t=function(t){n("workerLog",{logType:e,message:t})};N[e]=t};for(var t in N)e(t)};e.addEventListener("message",(function(r){var a=r.data;switch(a.cmd){case"init":var o=JSON.parse(a.config);e.transmuxer=new ya(t,a.typeSupported,o,"",a.id),M(o.debug,a.id),i(),n("init",null);break;case"configure":e.transmuxer.configure(a.config);break;case"demux":var s=e.transmuxer.push(a.data,a.decryptdata,a.chunkMeta,a.state);Ea(s)?(e.transmuxer.async=!0,s.then((function(t){Ca(e,t)})).catch((function(e){n(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})}))):(e.transmuxer.async=!1,Ca(e,s));break;case"flush":var l=a.chunkMeta,u=e.transmuxer.flush(l);Ea(u)||e.transmuxer.async?(Ea(u)||(u=Promise.resolve(u)),u.then((function(t){Ra(e,t,l)})).catch((function(e){n(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})}))):Ra(e,u,l)}}))}function Ca(e,t){if(Da(t.remuxResult))return!1;var n=[],i=t.remuxResult,r=i.audio,a=i.video;return r&&Ia(n,r),a&&Ia(n,a),e.postMessage({event:"transmuxComplete",data:t},n),!0}function Ia(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function Ra(e,t,n){t.reduce((function(t,n){return Ca(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}function Da(e){return!(e.audio||e.video||e.text||e.id3||e.initSegment)}function La(){return!0}function Pa(){var t=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+e.toString()+")(true);"],{type:"text/javascript"}),n=self.URL.createObjectURL(t);return{worker:new self.Worker(n),objectURL:n}}function Oa(e){var t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}void 0!==t&&t&&wa(self);var xa=function(){function e(e,t,n,i){var r=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;var o=function(e,t){(t=t||{}).frag=r.frag,t.id=r.id,e===C.ERROR&&(r.error=t.error),r.hls.trigger(e,t)};this.observer=new Sa,this.observer.on(C.FRAG_DECRYPTED,o),this.observer.on(C.ERROR,o);var s=Et(a.preferManagedMediaSource)||{isTypeSupported:function(){return!1}},l={mpeg:s.isTypeSupported("audio/mpeg"),mp3:s.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:s.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!=typeof Worker&&(a.workerPath||La()))try{a.workerPath?(N.log("loading Web Worker "+a.workerPath+' for "'+t+'"'),this.workerContext=Oa(a.workerPath)):(N.log('injecting Web Worker for "'+t+'"'),this.workerContext=Pa()),this.onwmsg=function(e){return r.onWorkerMessage(e)};var u=this.workerContext.worker;u.addEventListener("message",this.onwmsg),u.onerror=function(e){var n=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");a.enableWorker=!1,N.warn('Error in "'+t+'" Web Worker, fallback to inline'),r.hls.trigger(C.ERROR,{type:I.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:t,config:JSON.stringify(a)})}catch(e){N.warn('Error setting up "'+t+'" Web Worker, fallback to inline',e),this.resetWorker(),this.error=null,this.transmuxer=new ya(this.observer,l,a,"",t)}else this.transmuxer=new ya(this.observer,l,a,"",t)}var t=e.prototype;return t.resetWorker=function(){if(this.workerContext){var e=this.workerContext,t=e.worker,n=e.objectURL;n&&self.URL.revokeObjectURL(n),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}},t.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,n,i,r,a,o,s,l,u){var c,d,h=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,p=a?a.start:r.start,g=r.decryptdata,v=this.frag,m=!(v&&r.cc===v.cc),y=!(v&&l.level===v.level),A=v?l.sn-v.sn:-1,b=this.part?l.part-this.part.index:-1,E=0===A&&l.id>1&&l.id===(null==v?void 0:v.stats.chunkCount),_=!y&&(1===A||0===A&&(1===b||E&&b<=0)),k=self.performance.now();(y||A||0===r.stats.parsing.start)&&(r.stats.parsing.start=k),!a||!b&&_||(a.stats.parsing.start=k);var T=!(v&&(null==(c=r.initSegment)?void 0:c.url)===(null==(d=v.initSegment)?void 0:d.url)),S=new ka(m,_,s,y,p,T);if(!_||m||T){N.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+_+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+p+"\n        initSegmentChange: "+T);var w=new _a(n,i,t,o,u);this.configureTransmuxer(w)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(f){var C=f.push(e,g,l,S);Ea(C)?(f.async=!0,C.then((function(e){h.handleTransmuxComplete(e)})).catch((function(e){h.transmuxerError(e,l,"transmuxer-interface push error")}))):(f.async=!1,this.handleTransmuxComplete(C))}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){var i=n.flush(e);Ea(i)||n.async?(Ea(i)||(i=Promise.resolve(i)),i.then((function(n){t.handleFlushResult(n,e)})).catch((function(n){t.transmuxerError(n,e,"transmuxer-interface flush error")}))):this.handleFlushResult(i,e)}},t.transmuxerError=function(e,t,n){this.hls&&(this.error=e,this.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data;if(null!=t&&t.event){var n=this.hls;if(this.hls)switch(t.event){case"init":var i,r=null==(i=this.workerContext)?void 0:i.objectURL;r&&self.URL.revokeObjectURL(r);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":N[t.data.logType]&&N[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}else N.warn("worker message received with no "+(t?"event name":"data"))},t.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}();function Ma(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Na(e[n].attrs,t[n].attrs))return!1;return!0}function Na(e,t,n){var i=e["STABLE-RENDITION-ID"];return i&&!n?i===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((function(n){return e[n]!==t[n]}))}function Ba(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}var Fa=100,Ua=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i,"[audio-stream-controller]",Qt.AUDIO)||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.bufferedTrack=null,r.switchingTrack=null,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.flushing=!1,r.bufferFlushed=!1,r.cachedTrackLoadedData=null,r._registerListeners(),r}c(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this._unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},n._registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(C.ERROR,this.onError,this),e.on(C.BUFFER_RESET,this.onBufferReset,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(C.ERROR,this.onError,this),e.off(C.BUFFER_RESET,this.onBufferReset,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)},n.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,r=t.initPTS,a=t.timescale;if("main"===i){var o=n.cc;this.initPTS[n.cc]={baseTime:r,timescale:a},this.log("InitPTS for cc: "+o+" found from main: "+r),this.videoTrackCC=o,this.state===Ji.WAITING_INIT_PTS&&this.tick()}},n.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=Ji.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Fa),t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=Ji.IDLE):(this.loadedmetadata=!1,this.state=Ji.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},n.doTick=function(){switch(this.state){case Ji.IDLE:this.doTickIdle();break;case Ji.WAITING_TRACK:var t,n=this.levels,i=this.trackId,r=null==n||null==(t=n[i])?void 0:t.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=Ji.WAITING_INIT_PTS}break;case Ji.FRAG_LOADING_WAITING_RETRY:var a,o=performance.now(),s=this.retryDate;if(!s||o>=s||null!=(a=this.media)&&a.seeking){var l=this.levels,u=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==l?void 0:l[u])||null),this.state=Ji.IDLE}break;case Ji.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,h=c.part,f=c.cache,p=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ji.FRAG_LOADING;var g={frag:d,part:h,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),p&&e.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var v=this.getLoadPosition(),m=Ri.bufferInfo(this.mediaBuffer,v,this.config.maxBufferHole);Xn(m.end,this.config.maxFragLookUpTolerance,d)<0&&(this.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+m.end+" is needed"),this.clearWaitingFragment())}}else this.state=Ji.IDLE}this.onTickEnd()},n.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Ji.IDLE)},n.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this)},n.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},n.doTickIdle=function(){var e=this.hls,t=this.levels,n=this.media,i=this.trackId,r=e.config;if((n||!this.startFragRequested&&r.startFragPrefetch)&&null!=t&&t[i]){var a=t[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o))this.state=Ji.WAITING_TRACK;else{var s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,G.AUDIO,Qt.AUDIO));var l=this.getFwdBufferInfo(s,Qt.AUDIO);if(null!==l){var u=this.bufferedTrack,c=this.switchingTrack;if(!c&&this._streamEnded(l,o))return e.trigger(C.BUFFER_EOS,{type:"audio"}),void(this.state=Ji.ENDED);var d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Qt.MAIN),h=l.len,f=this.getMaxBufferLength(null==d?void 0:d.len),p=o.fragments,g=p[0].start,v=this.flushing?this.getLoadPosition():l.end;if(c&&n){var m=this.getLoadPosition();u&&!Na(c.attrs,u.attrs)&&(v=m),o.PTSKnown&&m<g&&(l.end>g||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=g+.05)}if(!(h>=f&&!c&&v<p[p.length-1].start)){var y=this.getNextFragment(v,o),A=!1;if(y&&this.isLoopLoading(y,v)&&(A=!!y.gap,y=this.getNextFragmentLoopLoading(y,o,l,Qt.MAIN,f)),y){var b=d&&y.start>d.end+o.targetduration;if(b||(null==d||!d.len)&&l.len){var E=this.getAppendedFrag(y.start,Qt.MAIN);if(null===E)return;if(A||(A=!!E.gap||!!b&&0===d.len),b&&!A||A&&l.nextStart&&l.nextStart<E.end)return}this.loadFragment(y,a,v)}else this.bufferFlushed=!0}}}}},n.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.min(Math.max(n,t),this.config.maxMaxBufferLength):n},n.onMediaDetaching=function(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,e.prototype.onMediaDetaching.call(this)},n.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new Sn(e)}))},n.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var i=this.fragCurrent;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(Fa):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=Ji.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=Ji.STOPPED),this.tick()},n.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},n.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(C.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},n.onAudioTrackLoaded=function(e,t){var n;if(null!=this.mainDetails){var i=this.levels,r=t.details,a=t.id;if(i){this.log("Audio track "+a+" loaded ["+r.startSN+","+r.endSN+"]"+(r.lastPartSn?"[part-"+r.lastPartSn+"-"+r.lastPartIndex+"]":"")+",duration:"+r.totalduration);var o=i[a],s=0;if(r.live||null!=(n=o.details)&&n.live){this.checkLiveUpdate(r);var l,u=this.mainDetails;if(r.deltaUpdateFailed||!u)return;!o.details&&r.hasProgramDateTime&&u.hasProgramDateTime?(Ui(r,u),s=r.fragments[0].start):s=this.alignPlaylists(r,o.details,null==(l=this.levelLastLoaded)?void 0:l.details)}o.details=r,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(this.mainDetails||r,s),this.state!==Ji.WAITING_TRACK||this.waitForCdnTuneIn(r)||(this.state=Ji.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+a)}else this.cachedTrackLoadedData=t},n._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,r=e.payload,a=this.config,o=this.trackId,s=this.levels;if(s){var l=s[o];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);var c=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this.transmuxer;d||(d=this.transmuxer=new xa(this.hls,Qt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){var p=!1,g=i?i.index:-1,v=-1!==g,m=new Di(n.level,n.sn,n.stats.chunkCount,r.byteLength,g,v);d.push(r,f,c,"",n,i,u.totalduration,p,m,h)}else this.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:n,part:i,cache:new er,complete:!1}).cache.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=Ji.WAITING_INIT_PTS}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},n._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},n.onFragBuffered=function(e,t){var n=t.frag,r=t.part;if(n.type===Qt.AUDIO)if(this.fragContextChanged(n))this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==n.sn){this.fragPrevious=n;var a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(C.AUDIO_TRACK_SWITCHED,i({},a)))}this.fragBufferedComplete(n,r)}else if(!this.loadedmetadata&&n.type===Qt.MAIN){var o=this.videoBuffer||this.media;o&&Ri.getBuffered(o).length&&(this.loadedmetadata=!0)}},n.onError=function(t,n){var i;if(n.fatal)this.state=Ji.ERROR;else switch(n.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Qt.AUDIO,n);break;case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:n.levelRetry||this.state!==Ji.WAITING_TRACK||(null==(i=n.context)?void 0:i.type)!==Xt.AUDIO_TRACK||(this.state=Ji.IDLE);break;case R.BUFFER_APPEND_ERROR:case R.BUFFER_FULL_ERROR:if(!n.parent||"audio"!==n.parent)return;if(n.details===R.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(n)}},n.onBufferFlushing=function(e,t){t.type!==G.VIDEO&&(this.flushing=!0)},n.onBufferFlushed=function(e,t){var n=t.type;if(n!==G.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ji.ENDED&&(this.state=Ji.IDLE);var i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,n,Qt.AUDIO),this.tick())}},n._handleTransmuxComplete=function(e){var t,n="audio",i=this.hls,r=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(o){var s=o.frag,l=o.part,c=o.level,d=c.details,h=r.audio,f=r.text,p=r.id3,g=r.initSegment;if(!this.fragContextChanged(s)&&d){if(this.state=Ji.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks){var v=s.initSegment||s;this._bufferInitSegment(c,g.tracks,v,a),i.trigger(C.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:n,tracks:g.tracks})}if(h){var m=h.startPTS,y=h.endPTS,A=h.startDTS,b=h.endDTS;l&&(l.elementaryStreams[G.AUDIO]={startPTS:m,endPTS:y,startDTS:A,endDTS:b}),s.setElementaryStreamInfo(G.AUDIO,m,y,A,b),this.bufferFragmentData(h,s,l,a)}if(null!=p&&null!=(t=p.samples)&&t.length){var E=u({id:n,frag:s,details:d},p);i.trigger(C.FRAG_PARSING_METADATA,E)}if(f){var _=u({id:n,frag:s,details:d},f);i.trigger(C.FRAG_PARSING_USERDATA,_)}}else this.fragmentTracker.removeFragment(s)}else this.resetWhenMissingContext(a)},n._bufferInitSegment=function(e,t,n,i){if(this.state===Ji.PARSING){t.video&&delete t.video;var r=t.audio;if(r){r.id="audio";var a=e.audioCodec;this.log("Init audio buffer, container:"+r.container+", codecs[level/parsed]=["+a+"/"+r.codec+"]"),a&&1===a.split(",").length&&(r.levelCodec=a),this.hls.trigger(C.BUFFER_CODECS,t);var o=r.initSegment;if(null!=o&&o.byteLength){var s={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(C.BUFFER_APPENDING,s)}this.tickImmediate()}}},n.loadFragment=function(t,n,i){var r,a=this.fragmentTracker.getState(t);if(this.fragCurrent=t,this.switchingTrack||a===Ti.NOT_LOADED||a===Ti.PARTIAL)if("initSegment"===t.sn)this._loadInitSegment(t,n);else if(null!=(r=n.details)&&r.live&&!this.initPTS[t.cc]){this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=Ji.WAITING_INIT_PTS;var o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&Ui(n.details,o)}else this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i);else this.clearTrackerIfNeeded(t)},n.flushAudioIfNeeded=function(t){var n=this.media,i=this.bufferedTrack,r=null==i?void 0:i.attrs,a=t.attrs;n&&r&&(r.CHANNELS!==a.CHANNELS||i.name!==t.name||i.lang!==t.lang)&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},n.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(C.AUDIO_TRACK_SWITCHED,i({},e))},t}(Zi),Va=function(e){function t(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupIds=null,n.tracksInGroup=[],n.trackId=-1,n.currentTrack=null,n.selectDefaultTrack=!0,n.registerListeners(),n}c(t,e);var n=t.prototype;return n.registerListeners=function(){var e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(C.ERROR,this.onError,this)},n.unregisterListeners=function(){var e=this.hls;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(C.ERROR,this.onError,this)},n.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,e.prototype.destroy.call(this)},n.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0},n.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},n.onAudioTrackLoaded=function(e,t){var n=t.id,i=t.groupId,r=t.details,a=this.tracksInGroup[n];if(a&&a.groupId===i){var o=a.details;a.details=t.details,this.log("Audio track "+n+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&this.playlistLoaded(n,t,o)}else this.warn("Audio track with id:"+n+" and group:"+i+" not found in active group "+(null==a?void 0:a.groupId))},n.onLevelLoading=function(e,t){this.switchLevel(t.level)},n.onLevelSwitching=function(e,t){this.switchLevel(t.level)},n.switchLevel=function(e){var t=this.hls.levels[e];if(t){var n=t.audioGroups||null,i=this.groupIds,r=this.currentTrack;if(!n||(null==i?void 0:i.length)!==(null==n?void 0:n.length)||null!=n&&n.some((function(e){return-1===(null==i?void 0:i.indexOf(e))}))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter((function(e){return!n||-1!==n.indexOf(e.groupId)}));if(a.length)this.selectDefaultTrack&&!a.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),a.forEach((function(e,t){e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var o=this.hls.config.audioPreference;if(!r&&o){var s=vi(o,a,Ai);if(s>-1)r=a[s];else{var l=vi(o,this.tracks);r=this.tracks[l]}}var u=this.findTrackId(r);-1===u&&r&&(u=this.findTrackId(null));var c={audioTracks:a};this.log("Updating audio tracks, "+a.length+" track(s) found in group(s): "+(null==n?void 0:n.join(","))),this.hls.trigger(C.AUDIO_TRACKS_UPDATED,c);var d=this.trackId;if(-1!==u&&-1===d)this.setAudioTrack(u);else if(a.length&&-1===d){var h,f=new Error("No audio track selected for current audio group-ID(s): "+(null==(h=this.groupIds)?void 0:h.join(","))+" track count: "+a.length);this.warn(f.message),this.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}},n.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==Xt.AUDIO_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))},n.setAudioOption=function(e){var t=this.hls;if(t.config.audioPreference=e,e){var n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){var i=this.currentTrack;if(i&&mi(e,i,Ai))return i;var r=vi(e,this.tracksInGroup,Ai);if(r>-1){var a=this.tracksInGroup[r];return this.setAudioTrack(r),a}if(i){var o=t.loadLevel;-1===o&&(o=t.firstAutoLevel);var s=bi(e,t.levels,n,o,Ai);if(-1===s)return null;t.nextLoadLevel=s}if(e.channels||e.audioCodec){var l=vi(e,n);if(l>-1)return n[l]}}}return null},n.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid audio track id: "+e);else{this.clearTimer(),this.selectDefaultTrack=!1;var n=this.currentTrack,r=t[e],a=r.details&&!r.details.live;if(!(e===this.trackId&&r===n&&a||(this.log("Switching to audio-track "+e+' "'+r.name+'" lang:'+r.lang+" group:"+r.groupId+" channels:"+r.channels),this.trackId=e,this.currentTrack=r,this.hls.trigger(C.AUDIO_TRACK_SWITCHING,i({},r)),a))){var o=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(o)}}},n.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||mi(e,i,Ai)))return n}if(e){for(var r=e.name,a=e.lang,o=e.assocLang,s=e.characteristics,l=e.audioCodec,u=e.channels,c=0;c<t.length;c++)if(mi({name:r,lang:a,assocLang:o,characteristics:s,audioCodec:l,channels:u},t[c],Ai))return c;for(var d=0;d<t.length;d++){var h=t[d];if(Na(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(var f=0;f<t.length;f++){var p=t[f];if(Na(e.attrs,p.attrs,["LANGUAGE"]))return f}}return-1},n.loadPlaylist=function(t){var n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){e.prototype.loadPlaylist.call(this);var i=n.id,r=n.groupId,a=n.url;if(t)try{a=t.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+i+' "'+n.name+'" lang:'+n.lang+" group:"+r),this.clearTimer(),this.hls.trigger(C.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:r,deliveryDirectives:t||null})}},s(t,[{key:"allAudioTracks",get:function(){return this.tracks}},{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),t}(ni),Ha=500,ja=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i,"[subtitle-stream-controller]",Qt.SUBTITLE)||this).currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}c(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this._unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.mainDetails=null},n._registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.ERROR,this.onError,this),e.on(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(C.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(C.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.ERROR,this.onError,this),e.off(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(C.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(C.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)},n.startLoad=function(e){this.stopLoad(),this.state=Ji.IDLE,this.setInterval(Ha),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},n.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},n.onMediaDetaching=function(){this.tracksBuffered=[],e.prototype.onMediaDetaching.call(this)},n.onLevelLoaded=function(e,t){this.mainDetails=t.details},n.onSubtitleFragProcessed=function(e,t){var n=t.frag,i=t.success;if(this.fragPrevious=n,this.state=Ji.IDLE,i){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var a,o=n.start,s=0;s<r.length;s++)if(o>=r[s].start&&o<=r[s].end){a=r[s];break}var l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}}},n.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset;if(0===n&&i!==Number.POSITIVE_INFINITY){var r=i-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=r)e.shift();else{if(!(e[t].start<r))break;e[t].start=r,t++}})),this.fragmentTracker.removeFragmentsInRange(n,r,Qt.SUBTITLE)}},n.onFragBuffered=function(e,t){var n;this.loadedmetadata||t.frag.type!==Qt.MAIN||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)},n.onError=function(e,t){var n=t.frag;(null==n?void 0:n.type)===Qt.SUBTITLE&&(t.details===R.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ji.STOPPED&&(this.state=Ji.IDLE))},n.onSubtitleTracksUpdated=function(e,t){var n=this,i=t.subtitleTracks;this.levels&&Ma(this.levels,i)?this.levels=i.map((function(e){return new Sn(e)})):(this.tracksBuffered=[],this.levels=i.map((function(e){var t=new Sn(e);return n.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Qt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)},n.onSubtitleTrackSwitch=function(e,t){var n;if(this.currentTrackId=t.id,null!=(n=this.levels)&&n.length&&-1!==this.currentTrackId){var i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(Ha)}else this.clearInterval()},n.onSubtitleTrackLoaded=function(e,t){var n,i=this.currentTrackId,r=this.levels,a=t.details,o=t.id;if(r){var s=r[o];if(!(o>=r.length)&&s){this.log("Subtitle track "+o+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+",duration:"+a.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(a.live||null!=(n=s.details)&&n.live){var u=this.mainDetails;if(a.deltaUpdateFailed||!u)return;var c,d=u.fragments[0];s.details?0===(l=this.alignPlaylists(a,s.details,null==(c=this.levelLastLoaded)?void 0:c.details))&&d&&xn(a,l=d.start):a.hasProgramDateTime&&u.hasProgramDateTime?(Ui(a,u),l=a.fragments[0].start):d&&xn(a,l=d.start)}s.details=a,this.levelLastLoaded=s,o===i&&(this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(this.mainDetails||a,l),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Ji.IDLE&&(qn(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)))}}else this.warn("Subtitle tracks were reset while loading level "+o)},n._handleFragmentLoadComplete=function(e){var t=this,n=e.frag,i=e.payload,r=n.decryptdata,a=this.hls;if(!this.fragContextChanged(n)&&i&&i.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){var o=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch((function(e){throw a.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e})).then((function(e){var t=performance.now();a.trigger(C.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:o,tdecrypt:t}})})).catch((function(e){t.warn(e.name+": "+e.message),t.state=Ji.IDLE}))}},n.doTick=function(){if(this.media){if(this.state===Ji.IDLE){var e=this.currentTrackId,t=this.levels,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;var i=this.config,r=this.getLoadPosition(),a=Ri.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),o=a.end,s=a.len,l=this.getFwdBufferInfo(this.media,Qt.MAIN),u=n.details;if(s>this.getMaxBufferLength(null==l?void 0:l.len)+u.levelTargetDuration)return;var c=u.fragments,d=c.length,h=u.edge,f=null,p=this.fragPrevious;if(o<h){var g=i.maxFragLookUpTolerance,v=o>h-g?0:g;!(f=qn(p,c,Math.max(c[0].start,o),v))&&p&&p.start<c[0].start&&(f=c[0])}else f=c[d-1];if(!f)return;if("initSegment"!==(f=this.mapToInitFragWhenRequired(f)).sn){var m=c[f.sn-u.startSN-1];m&&m.cc===f.cc&&this.fragmentTracker.getState(m)===Ti.NOT_LOADED&&(f=m)}this.fragmentTracker.getState(f)===Ti.NOT_LOADED&&this.loadFragment(f,n,o)}}else this.state=Ji.IDLE},n.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},n.loadFragment=function(t,n,i){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,n):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i))},s(t,[{key:"mediaBufferTimeRanges",get:function(){return new Ka(this.tracksBuffered[this.currentTrackId]||[])}}]),t}(Zi),Ka=function(e){this.buffered=void 0;var t=function(t,n,i){if((n>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+i+")");return e[n][t]};this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}},Ga=function(e){function t(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupIds=null,n.tracksInGroup=[],n.trackId=-1,n.currentTrack=null,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n._subtitleDisplay=!0,n.onTextTracksChanged=function(){if(n.useTextTrackPolling||self.clearInterval(n.subtitlePollingInterval),n.media&&n.hls.config.renderTextTracksNatively){for(var e=null,t=ln(n.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=t[i];else if("showing"===t[i].mode){e=t[i];break}var r=n.findTrackForTextTrack(e);n.subtitleTrack!==r&&n.setSubtitleTrack(r)}},n.registerListeners(),n}c(t,e);var n=t.prototype;return n.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},n.registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(C.ERROR,this.onError,this)},n.unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(C.ERROR,this.onError,this)},n.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},n.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)},n.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ln(this.media.textTracks).forEach((function(e){rn(e)})),this.subtitleTrack=-1,this.media=null)},n.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},n.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},n.onSubtitleTrackLoaded=function(e,t){var n=t.id,i=t.groupId,r=t.details,a=this.tracksInGroup[n];if(a&&a.groupId===i){var o=a.details;a.details=t.details,this.log("Subtitle track "+n+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&this.playlistLoaded(n,t,o)}else this.warn("Subtitle track with id:"+n+" and group:"+i+" not found in active group "+(null==a?void 0:a.groupId))},n.onLevelLoading=function(e,t){this.switchLevel(t.level)},n.onLevelSwitching=function(e,t){this.switchLevel(t.level)},n.switchLevel=function(e){var t=this.hls.levels[e];if(t){var n=t.subtitleGroups||null,i=this.groupIds,r=this.currentTrack;if(!n||(null==i?void 0:i.length)!==(null==n?void 0:n.length)||null!=n&&n.some((function(e){return-1===(null==i?void 0:i.indexOf(e))}))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter((function(e){return!n||-1!==n.indexOf(e.groupId)}));if(a.length)this.selectDefaultTrack&&!a.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),a.forEach((function(e,t){e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var o=this.hls.config.subtitlePreference;if(!r&&o){this.selectDefaultTrack=!1;var s=vi(o,a);if(s>-1)r=a[s];else{var l=vi(o,this.tracks);r=this.tracks[l]}}var u=this.findTrackId(r);-1===u&&r&&(u=this.findTrackId(null));var c={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+(null==n?void 0:n.join(","))+'" group-id'),this.hls.trigger(C.SUBTITLE_TRACKS_UPDATED,c),-1!==u&&-1===this.trackId&&this.setSubtitleTrack(u)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}},n.findTrackId=function(e){for(var t=this.tracksInGroup,n=this.selectDefaultTrack,i=0;i<t.length;i++){var r=t[i];if((!n||r.default)&&(n||e)&&(!e||mi(r,e)))return i}if(e){for(var a=0;a<t.length;a++){var o=t[a];if(Na(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return a}for(var s=0;s<t.length;s++){var l=t[s];if(Na(e.attrs,l.attrs,["LANGUAGE"]))return s}}return-1},n.findTrackForTextTrack=function(e){if(e)for(var t=this.tracksInGroup,n=0;n<t.length;n++)if(Ba(t[n],e))return n;return-1},n.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==Xt.SUBTITLE_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))},n.setSubtitleOption=function(e){if(this.hls.config.subtitlePreference=e,e){var t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){var n=this.currentTrack;if(n&&mi(e,n))return n;var i=vi(e,this.tracksInGroup);if(i>-1){var r=this.tracksInGroup[i];return this.setSubtitleTrack(i),r}if(n)return null;var a=vi(e,t);if(a>-1)return t[a]}}return null},n.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){var i=n.id,r=n.groupId,a=n.url;if(t)try{a=t.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(C.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:r,deliveryDirectives:t||null})}},n.toggleTrackModes=function(){var e=this.media;if(e){var t,n=ln(e.textTracks),i=this.currentTrack;if(i&&((t=n.filter((function(e){return Ba(i,e)}))[0])||this.warn('Unable to find subtitle TextTrack with name "'+i.name+'" and language "'+i.lang+'"')),[].slice.call(n).forEach((function(e){"disabled"!==e.mode&&e!==t&&(e.mode="disabled")})),t){var r=this.subtitleDisplay?"showing":"hidden";t.mode!==r&&(t.mode=r)}}},n.setSubtitleTrack=function(e){var t=this.tracksInGroup;if(this.media)if(e<-1||e>=t.length||!T(e))this.warn("Invalid subtitle track id: "+e);else{this.clearTimer(),this.selectDefaultTrack=!1;var n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),i){var r=!!i.details&&!i.details.live;if(e!==this.trackId||i!==n||!r){this.log("Switching to subtitle-track "+e+(i?' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId:""));var a=i.id,o=i.groupId,s=void 0===o?"":o,l=i.name,u=i.type,c=i.url;this.hls.trigger(C.SUBTITLE_TRACK_SWITCH,{id:a,groupId:s,name:l,type:u,url:c});var d=this.switchParams(i.url,null==n?void 0:n.details,i.details);this.loadPlaylist(d)}}else this.hls.trigger(C.SUBTITLE_TRACK_SWITCH,{id:e})}else this.queuedDefaultTrack=e},s(t,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}},{key:"allSubtitleTracks",get:function(){return this.tracks}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}}]),t}(ni),Wa=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t,n){var i=this.queues[t];i.push(e),1!==i.length||n||this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},t.executeNext=function(e){var t=this.queues[e];if(t.length){var n=t[0];try{n.execute()}catch(t){N.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),n.onError(t);var i=this.buffers[e];null!=i&&i.updating||this.shiftAndExecuteNext(e)}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}(),Ya=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,za=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=function(e){t.hls&&t.hls.pauseBuffering()},this._onStartStreaming=function(e){t.hls&&t.hls.resumeBuffering()},this._onMediaSourceOpen=function(){var e=t.media,n=t.mediaSource;t.log("Media source opened"),e&&(e.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(C.MEDIA_ATTACHED,{media:e,mediaSource:n})),n&&n.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){t.log("Media source closed")},this._onMediaSourceEnded=function(){t.log("Media source ended")},this._onMediaEmptied=function(){var e=t.mediaSrc,n=t._objectUrl;e!==n&&N.error("Media element src was set while attaching MediaSource ("+n+" > "+e+")")},this.hls=e;var n="[buffer-controller]";this.appendSource=_t(Et(e.config.preferManagedMediaSource)),this.log=N.log.bind(N,n),this.warn=N.warn.bind(N,n),this.error=N.error.bind(N,n),this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null},t.registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.BUFFER_RESET,this.onBufferReset,this),e.on(C.BUFFER_APPENDING,this.onBufferAppending,this),e.on(C.BUFFER_CODECS,this.onBufferCodecs,this),e.on(C.BUFFER_EOS,this.onBufferEos,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(C.FRAG_PARSED,this.onFragParsed,this),e.on(C.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.BUFFER_RESET,this.onBufferReset,this),e.off(C.BUFFER_APPENDING,this.onBufferAppending,this),e.off(C.BUFFER_CODECS,this.onBufferCodecs,this),e.off(C.BUFFER_EOS,this.onBufferEos,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(C.FRAG_PARSED,this.onFragParsed,this),e.off(C.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Wa(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null},t.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media,i=Et(this.appendSource);if(n&&i){var r,a=this.mediaSource=new i;this.log("created media source: "+(null==(r=a.constructor)?void 0:r.name)),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));var o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");var s=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||s&&a instanceof s,qa(n),$a(n,o),n.load()}catch(e){n.src=o}else n.src=o;n.addEventListener("emptied",this._onMediaEmptied)}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&qa(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(C.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){e.resetBuffer(t)})),this._initSourceBuffer()},t.resetBuffer=function(e){var t=this.sourceBuffer[e];try{var n;t&&(this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t))}catch(t){this.warn("onBufferReset "+e,t)}},t.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach((function(e){if(i){var r=n.tracks[e];if(r&&"function"==typeof r.buffer.changeType){var a,o=t[e],s=o.id,l=o.codec,u=o.levelCodec,c=o.container,d=o.metadata,h=xt(r.codec,r.levelCodec),f=null==h?void 0:h.replace(Ya,"$1"),p=xt(l,u),g=null==(a=p)?void 0:a.replace(Ya,"$1");if(p&&f!==g){"audio"===e.slice(0,5)&&(p=Ot(p,n.appendSource));var v=c+";codecs="+p;n.appendChangeType(e,v),n.log("switching codec "+h+" to "+p),n.tracks[e]={buffer:r.buffer,codec:l,container:c,levelCodec:u,metadata:d,id:s}}}}else n.pendingTracks[e]=t[e]})),!i){var a=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==a&&(this.log(a+" bufferCodec event(s) expected "+r.join(",")),this.bufferCodecEventsExpected=a),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}},t.appendChangeType=function(e,t){var n=this,i=this.operationQueue,r={execute:function(){var r=n.sourceBuffer[e];r&&(n.log("changing "+e+" sourceBuffer type to "+t),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){n.warn("Failed to change "+e+" SourceBuffer type",t)}};i.append(r,e,!!this.pendingTracks[e])},t.onBufferAppending=function(e,t){var n=this,i=this.hls,r=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,u=t.part,c=t.chunkMeta,d=c.buffering[s],h=self.performance.now();d.start=h;var f=l.stats.buffering,p=u?u.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);var g=a.audio,v=!1;"audio"===s&&"audio/mpeg"===(null==g?void 0:g.container)&&(v=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);var m=l.start,y={execute:function(){if(d.executeStart=self.performance.now(),v){var e=n.sourceBuffer[s];if(e){var t=m-e.timestampOffset;Math.abs(t)>=.1&&(n.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m)}}n.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e=self.performance.now();d.executeEnd=d.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);var t=n.sourceBuffer,i={};for(var r in t)i[r]=Ri.getBuffered(t[r]);n.appendErrors[s]=0,"audio"===s||"video"===s?n.appendErrors.audiovideo=0:(n.appendErrors.audio=0,n.appendErrors.video=0),n.hls.trigger(C.BUFFER_APPENDED,{type:s,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:i})},onError:function(e){var t={type:I.MEDIA_ERROR,parent:l.type,details:R.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:u,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=R.BUFFER_FULL_ERROR;else{var r=++n.appendErrors[s];t.details=R.BUFFER_APPEND_ERROR,n.warn("Failed "+r+"/"+i.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),r>=i.config.appendErrorMaxRetry&&(t.fatal=!0)}i.trigger(C.ERROR,t)}};r.append(y,s,!!this.pendingTracks[s])},t.onBufferFlushing=function(e,t){var n=this,i=this.operationQueue,r=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(C.BUFFER_FLUSHED,{type:e})},onError:function(t){n.warn("Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){i.append(r(e),e)}))},t.onFragParsed=function(e,t){var n=this,i=t.frag,r=t.part,a=[],o=r?r.elementaryStreams:i.elementaryStreams;o[G.AUDIOVIDEO]?a.push("audiovideo"):(o[G.AUDIO]&&a.push("audio"),o[G.VIDEO]&&a.push("video"));var s=function(){var e=self.performance.now();i.stats.buffering.end=e,r&&(r.stats.buffering.end=e);var t=r?r.stats:i.stats;n.hls.trigger(C.FRAG_BUFFERED,{frag:i,part:r,stats:t,id:i.type})};0===a.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers(s,a)},t.onFragChanged=function(e,t){this.trimBuffers()},t.onBufferEos=function(e,t){var n=this,i=this.getSourceBufferTypes().reduce((function(e,i){var r=n.sourceBuffer[i];return!r||t.type&&t.type!==i||(r.ending=!0,r.ended||(r.ended=!0,n.log(i+" sourceBuffer now EOS"))),e&&!(r&&!r.ended)}),!0);i&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){n.getSourceBufferTypes().forEach((function(e){var t=n.sourceBuffer[e];t&&(t.ending=!1)}));var e=n.mediaSource;e&&"open"===e.readyState?(n.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&n.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.trimBuffers=function(){var e=this.hls,t=this.details,n=this.media;if(n&&null!==t&&this.getSourceBufferTypes().length){var i=e.config,r=n.currentTime,a=t.levelTargetDuration,o=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(T(o)&&o>0){var s=Math.max(o,a),l=Math.floor(r/a)*a-s;this.flushBackBuffer(r,a,l)}if(T(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){var u=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),c=Math.max(u,a),d=Math.floor(r/a)*a+c;this.flushFrontBuffer(r,a,d)}}},t.flushBackBuffer=function(e,t,n){var i=this,r=this.details,a=this.sourceBuffer;this.getSourceBufferTypes().forEach((function(o){var s=a[o];if(s){var l=Ri.getBuffered(s);if(l.length>0&&n>l.start(0)){if(i.hls.trigger(C.BACK_BUFFER_REACHED,{bufferEnd:n}),null!=r&&r.live)i.hls.trigger(C.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(s.ended&&l.end(l.length-1)-e<2*t)return void i.log("Cannot flush "+o+" back buffer while SourceBuffer is in ended state");i.hls.trigger(C.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}}))},t.flushFrontBuffer=function(e,t,n){var i=this,r=this.sourceBuffer;this.getSourceBufferTypes().forEach((function(a){var o=r[a];if(o){var s=Ri.getBuffered(o),l=s.length;if(l<2)return;var u=s.start(l-1),c=s.end(l-1);if(n>u||e>=u&&e<=c)return;if(o.ended&&e-c<2*t)return void i.log("Cannot flush "+a+" front buffer while SourceBuffer is in ended state");i.hls.trigger(C.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:a})}}))},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,i=this.mediaSource,r=e.fragments[0].start+e.totalduration,a=n.duration,o=T(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>a||!T(a))&&(this.log("Updating Media Source duration to "+r.toFixed(3)),i.duration=r)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){var i=Math.max(0,n[0].start),r=Math.max(i,i+e.totalduration);this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+i+"-"+r+"."),t.setLiveSeekableRange(i,r)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;if(i&&(!e||2===i||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};var r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(C.BUFFER_CREATED,{tracks:this.tracks}),r.forEach((function(e){t.executeNext(e)}));else{var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}},t.createSourceBuffers=function(e){var t=this,n=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var r=function(r){if(!n[r]){var a,o=e[r];if(!o)throw Error("source buffer exists for track "+r+", however track does not");var s=-1===(null==(a=o.levelCodec)?void 0:a.indexOf(","))?o.levelCodec:o.codec;s&&"audio"===r.slice(0,5)&&(s=Ot(s,t.appendSource));var l=o.container+";codecs="+s;t.log("creating sourceBuffer("+l+")");try{var u=n[r]=i.addSourceBuffer(l),c=r;t.addBufferListener(c,"updatestart",t._onSBUpdateStart),t.addBufferListener(c,"updateend",t._onSBUpdateEnd),t.addBufferListener(c,"error",t._onSBUpdateError),t.appendSource&&t.addBufferListener(c,"bufferedchange",(function(e,n){var i=n.removedRanges;null!=i&&i.length&&t.hls.trigger(C.BUFFER_FLUSHED,{type:r})})),t.tracks[r]={buffer:u,codec:s,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(e){t.error("error while trying to add sourceBuffer: "+e.message),t.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:r,mimeType:l})}}};for(var a in e)r(a)},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t;if("closed"!==(null==(t=this.mediaSource)?void 0:t.readyState)){var n=this.operationQueue;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}else this.resetBuffer(e)},t._onSBUpdateError=function(e,t){var n,i=new Error(e+" SourceBuffer error. MediaSource readyState: "+(null==(n=this.mediaSource)?void 0:n.readyState));this.error(""+i,t),this.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});var r=this.operationQueue.current(e);r&&r.onError(i)},t.removeExecutor=function(e,t,n){var i=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!i||!r||!o)return this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var s=T(i.duration)?i.duration:1/0,l=T(r.duration)?r.duration:1/0,u=Math.max(0,t),c=Math.min(n,s,l);c>u&&(!o.ending||o.ended)?(o.ended=!1,this.log("Removing ["+u+","+c+"] from the "+e+" SourceBuffer"),o.remove(u,c)):a.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue,r=t.map((function(e){return i.appendBlocker(e)}));Promise.all(r).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];null!=t&&t.updating||i.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];if(i){var r=n.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},s(e,[{key:"mediaSrc",get:function(){var e,t,n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}}]),e}();function qa(e){var t=e.querySelectorAll("source");[].slice.call(t).forEach((function(t){e.removeChild(t)}))}function $a(e,t){var n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}var Xa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Qa=function(e){return String.fromCharCode(Xa[e]||e)},Ja=15,Za=100,eo={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},to={17:2,18:4,21:6,22:8,23:10,19:13,20:15},no={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},io={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ro=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ao=function(){function e(){this.time=null,this.verboseLevel=0}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var n="function"==typeof t?t():t;N.log(this.time+" ["+e+"] "+n)}},e}(),oo=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},so=function(){function e(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),lo=function(){function e(){this.uchar=" ",this.penState=new so}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),uo=function(){function e(e){this.chars=[],this.pos=0,this.currPenState=new so,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<Za;t++)this.chars.push(new lo);this.logger=e}var t=e.prototype;return t.equals=function(e){for(var t=0;t<Za;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},t.copy=function(e){for(var t=0;t<Za;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<Za;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Za&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Za)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var n=Qa(e);this.pos>=Za?this.logger.log(0,(function(){return"Cannot insert "+e.toString(16)+" ("+n+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<Za;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<Za;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),co=function(){function e(e){this.rows=[],this.currRow=Ja-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<Ja;t++)this.rows.push(new uo(e));this.logger=e}var t=e.prototype;return t.reset=function(){for(var e=0;e<Ja;e++)this.rows[e].clear();this.currRow=Ja-1},t.equals=function(e){for(var t=!0,n=0;n<Ja;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<Ja;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<Ja;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Ja;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(null!==a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(1,(function(){return e.getDisplayText()}));var t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<Ja;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),ho=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new co(n),this.nonDisplayedMemory=new co(n),this.lastOutputScreen=new co(n),this.currRollUpRow=this.displayedMemory.rows[Ja-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ja-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(function(){return"MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return i+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+e.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),fo=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=vo(),this.logger=void 0;var i=this.logger=new ao;this.channels=[null,new ho(e,t,i),new ho(e+1,n,i)]}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n=this;this.logger.time=e;for(var i=function(e){var i=127&t[e],r=127&t[e+1],a=!1,o=null;if(0===i&&0===r)return 0;n.logger.log(3,(function(){return"["+oo([t[e],t[e+1]])+"] -> ("+oo([i,r])+")"}));var s=n.cmdHistory;if(i>=16&&i<=31){if(go(i,r,s))return po(null,null,s),n.logger.log(3,(function(){return"Repeated command ("+oo([i,r])+") is dropped"})),0;po(i,r,n.cmdHistory),(a=n.parseCmd(i,r))||(a=n.parseMidrow(i,r)),a||(a=n.parsePAC(i,r)),a||(a=n.parseBackgroundAttributes(i,r))}else po(null,null,s);if(!a&&(o=n.parseChars(i,r))){var l=n.currentChannel;l&&l>0?n.channels[l].insertChars(o):n.logger.log(2,"No channel found yet. TEXT-MODE?")}a||o||n.logger.log(2,(function(){return"Couldn't parse cleaned data "+oo([i,r])+" orig: "+oo([t[e],t[e+1]])}))},r=0;r<t.length;r+=2)i(r)},t.parseCmd=function(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;var n=20===e||21===e||23===e?1:2,i=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.currentChannel=n,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(3,(function(){return"MIDROW ("+oo([e,t])+")"})),!0)}return!1},t.parsePAC=function(e,t){var n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;var i=e<=23?1:2;n=t>=64&&t<=95?1===i?eo[e]:no[e]:1===i?to[e]:io[e];var r=this.channels[i];return!!r&&(r.setPAC(this.interpretPAC(n,t)),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n,i,r=null,a=null;return e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19?(i=17===a?t+80:18===a?t+112:t+144,this.logger.log(2,(function(){return"Special char '"+Qa(i)+"' in channel "+n})),r=[i]):e>=32&&e<=127&&(r=0===t?[e]:[e,t]),r&&this.logger.log(3,(function(){return"Char codes =  "+oo(r).join(",")})),r},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=ro[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var r=e<=23?1:2;return this.channels[r].setBkgData(i),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}po(null,null,this.cmdHistory)},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}();function po(e,t,n){n.a=e,n.b=t}function go(e,t,n){return n.a===e&&n.b===t}function vo(){return{a:null,b:null}}var mo=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}(),yo=function(){if(null!=te&&te.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(t){return n(e,t)}function r(e){return n(t,e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)e[o]=a[o]}return e}function o(e,t,n){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=e,d=t,h=n,f=null,p="",g=!0,v="auto",m="start",y=50,A="middle",b=50,E="middle";Object.defineProperty(o,"id",a({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",a({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",a({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",a({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",a({},s,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",a({},s,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",a({},s,{get:function(){return p},set:function(e){var t=i(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",a({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",a({},s,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",a({},s,{get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",a({},s,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",a({},s,{get:function(){return A},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",a({},s,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",a({},s,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),o.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}(),Ao=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function bo(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var Eo=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function _o(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&t(o[0],o[1])}}var ko=new yo(0,0,""),To="middle"===ko.align?"middle":"center";function So(e,t,n){var i=e;function r(){var t=bo(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var i=new Eo;_o(e,(function(e,t){var r;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){i.set(e,n[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),i.integer(e,r[0]),i.percent(e,r[0])&&i.set("snapToLines",!1),i.alt(e,r[0],["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",To,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",To,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",To,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===ko.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",To);var a=i.get("position","auto");"auto"===a&&50===ko.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=r(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),o(),t.endTime=r(),o(),a(e,t)}function wo(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var Co=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new Ao,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=wo(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),i}function i(e){_o(e,(function(e,t){}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new yo(0,0,""),t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{So(r,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r;continue;case"BADCUE":r||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}(),Io=/\r\n|\n\r|\n|\r/g,Ro=function(e,t,n){return void 0===n&&(n=0),e.slice(n,n+t.length)===t},Do=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(T(t)&&T(n)&&T(i)&&T(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*i,t+=36e5*r},Lo=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function Po(e,t,n){return Lo(e.toString())+Lo(t.toString())+Lo(n)}var Oo=function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!=(a=r)&&a.new;){var a;e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC]}e.presentationOffset=n};function xo(e,t,n,i,r,a,o){var s,l=new Co,u=Re(new Uint8Array(e)).trim().replace(Io,"\n").split("\n"),c=[],d=t?ea(t.baseTime,t.timescale):0,h="00:00.000",f=0,p=0,g=!0;l.oncue=function(e){var a=n[i],o=n.ccOffset,l=(f-d)/9e4;if(null!=a&&a.new&&(void 0!==p?o=n.ccOffset=a.start:Oo(n,i,l)),l){if(!t)return void(s=new Error("Missing initPTS for VTT MPEGTS"));o=l-n.presentationOffset}var u=e.endTime-e.startTime,h=la(9e4*(e.startTime+o-p),9e4*r)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+u,0);var g=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(g)),e.id||(e.id=Po(e.startTime,e.endTime,g)),e.endTime>0&&c.push(e)},l.onparsingerror=function(e){s=e},l.onflush=function(){s?o(s):a(c)},u.forEach((function(e){if(g){if(Ro(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((function(e){Ro(e,"LOCAL:")?h=e.slice(6):Ro(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))}));try{p=Do(h)/1e3}catch(e){s=e}return}""===e&&(g=!1)}l.parse(e+"\n")})),l.flush()}var Mo="stpp.ttml.im1t",No=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Bo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Fo={left:"start",center:"center",right:"end",start:"start",end:"end"};function Uo(e,t,n,i){var r=je(new Uint8Array(e),["mdat"]);if(0!==r.length){var a=r.map((function(e){return Re(e)})),o=Jr(t.baseTime,1,t.timescale);try{a.forEach((function(e){return n(Vo(e,o))}))}catch(e){i(e)}}else i(new Error("Could not parse IMSC1 mdat"))}function Vo(e,t){var n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},r=Object.keys(i).reduce((function(e,t){return e[t]=n.getAttribute("ttp:"+t)||i[t],e}),{}),a="preserve"!==n.getAttribute("xml:space"),o=jo(Ho(n,"styling","style")),s=jo(Ho(n,"layout","region")),l=Ho(n,"body","[begin]");return[].map.call(l,(function(e){var n=Ko(e,a);if(!n||!e.hasAttribute("begin"))return null;var i=zo(e.getAttribute("begin"),r),l=zo(e.getAttribute("dur"),r),c=zo(e.getAttribute("end"),r);if(null===i)throw Yo(e);if(null===c){if(null===l)throw Yo(e);c=i+l}var d=new yo(i-t,c-t,n);d.id=Po(d.startTime,d.endTime,d.text);var h=Go(s[e.getAttribute("region")],o[e.getAttribute("style")],o),f=h.textAlign;if(f){var p=Fo[f];p&&(d.lineAlign=p),d.align=f}return u(d,h),d})).filter((function(e){return null!==e}))}function Ho(e,t,n){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function jo(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function Ko(e,t){return[].slice.call(e.childNodes).reduce((function(e,n,i){var r;return"br"===n.nodeName&&i?e+"\n":null!=(r=n.childNodes)&&r.length?Ko(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function Go(e,t,n){var i="http://www.w3.org/ns/ttml#styling",r=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(r=n[o]),a.reduce((function(n,a){var o=Wo(t,i,a)||Wo(e,i,a)||Wo(r,i,a);return o&&(n[a]=o),n}),{})}function Wo(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Yo(e){return new Error("Could not parse ttml timestamp "+e)}function zo(e,t){if(!e)return null;var n=bo(e);return null===n&&(No.test(e)?n=qo(e,t):Bo.test(e)&&(n=$o(e,t))),n}function qo(e,t){var n=No.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}function $o(e,t){var n=Bo.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}var Xo=function(){function e(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=es(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(C.FRAG_LOADING,this.onFragLoading,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this),e.on(C.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(C.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(C.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(C.FRAG_LOADING,this.onFragLoading,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this),e.off(C.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(C.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(C.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0},t.initCea608Parsers=function(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){var e=new mo(this,"textTrack1"),t=new mo(this,"textTrack2"),n=new mo(this,"textTrack3"),i=new mo(this,"textTrack4");this.cea608Parser1=new fo(1,e,t),this.cea608Parser2=new fo(3,n,i)}},t.addCues=function(e,t,n,i,r){for(var a=!1,o=r.length;o--;){var s=r[o],l=Zo(s[0],s[1],t,n);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),a=!0,l/(n-t)>.5))return}if(a||r.push([t,n]),this.config.renderTextTracksNatively){var u=this.captionsTracks[e];this.Cues.newCue(u,t,n,i)}else{var c=this.Cues.newCue(null,t,n,i);this.hls.trigger(C.CUES_PARSED,{type:"captions",cues:c,track:e})}},t.onInitPtsFound=function(e,t){var n=this,i=t.frag,r=t.id,a=t.initPTS,o=t.timescale,s=this.unparsedVttFrags;"main"===r&&(this.initPTS[i.cc]={baseTime:a,timescale:o}),s.length&&(this.unparsedVttFrags=[],s.forEach((function(e){n.onFragLoaded(C.FRAG_LOADED,e)})))},t.getExistingTrack=function(e,t){var n=this.media;if(n)for(var i=0;i<n.textTracks.length;i++){var r=n.textTracks[i];if(Jo(r,{name:e,lang:t,attrs:{}}))return r}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,r=t[e],a=r.label,o=r.languageCode,s=this.getExistingTrack(a,o);if(s)n[e]=s,rn(n[e]),tn(n[e],i);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,n[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(C.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){rn(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=es(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)rn(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this,i=t.subtitleTracks||[],r=i.some((function(e){return e.textCodec===Mo}));if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Ma(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var a=this.media,o=a?ln(a.textTracks):null;if(this.tracks.forEach((function(e,t){var i;if(o){for(var r=null,a=0;a<o.length;a++)if(o[a]&&Jo(o[a],e)){r=o[a],o[a]=null;break}r&&(i=r)}if(i)rn(i);else{var s=Qo(e);(i=n.createTextTrack(s,e.name,e.lang))&&(i.mode="disabled")}i&&n.textTracks.push(i)})),null!=o&&o.length){var s=o.filter((function(e){return null!==e})).map((function(e){return e.label}));s.length&&N.warn("Media element contains unused subtitle tracks: "+s.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.")}}else if(this.tracks.length){var l=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(C.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],r=n.captionsProperties[i];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}}))},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){if(this.enabled&&t.frag.type===Qt.MAIN){var n,i,r=this.cea608Parser1,a=this.cea608Parser2,o=this.lastSn,s=t.frag,l=s.cc,u=s.sn,c=null!=(n=null==(i=t.part)?void 0:i.index)?n:-1;r&&a&&(u!==o+1||u===o&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}},t.onFragLoaded=function(e,t){var n=t.frag,i=t.payload;if(n.type===Qt.SUBTITLE)if(i.byteLength){var r=n.decryptdata,a="stats"in t;if(null==r||!r.encrypted||a){var o=this.tracks[n.level],s=this.vttCCs;s[n.cc]||(s[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===Mo?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,i=this.hls;Uo(t,this.initPTS[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){N.log("Failed to parse IMSC1: "+t),i.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e){var t,n=this,i=e.frag,r=e.payload,a=this.initPTS,o=this.unparsedVttFrags,s=a.length-1;if(a[i.cc]||-1!==s){var l=this.hls;xo(null!=(t=i.initSegment)&&t.data?nt(i.initSegment.data,new Uint8Array(r)):r,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(function(e){n._appendCues(e,i.level),l.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(function(t){var a="Missing initPTS for VTT MPEGTS"===t.message;a?o.push(e):n._fallbackToIMSC1(i,r),N.log("Failed to parse VTT cue: "+t),a&&s>i.cc||l.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t})}))}else o.push(e)},t._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||Uo(t,this.initPTS[e.cc],(function(){i.textCodec=Mo,n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((function(e){return nn(i,e)}))}else{var r=this.tracks[t];if(!r)return;var a=r.default?"default":"subtitles"+t;n.trigger(C.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){t.frag.type===Qt.SUBTITLE&&this.onFragLoaded(C.FRAG_LOADED,t)},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){this.initCea608Parsers();var n=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&n&&i){var r=t.frag,a=t.samples;if(r.type!==Qt.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(var o=0;o<a.length;o++){var s=a[o].bytes;if(s){var l=this.extractCea608Data(s);n.addData(a[o].pts,l[0]),i.addData(a[o].pts,l[1])}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<i)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(e){return an(s[e],n,i)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==r){var l=this.textTracks;Object.keys(l).forEach((function(e){return an(l[e],n,r)}))}}},t.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],o=127&e[i++],s=127&e[i++];if((0!==o||0!==s)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(t[l].push(o),t[l].push(s))}}return t},e}();function Qo(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Jo(e,t){return!!e&&e.kind===Qo(t)&&Ba(t,e)}function Zo(e,t,n,i){return Math.min(t,i)-Math.max(e,n)}function es(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}var ts=function(){function e(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},t.registerListeners=function(){var e=this.hls;e.on(C.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.BUFFER_CODECS,this.onBufferCodecs,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListener=function(){var e=this.hls;e.off(C.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.BUFFER_CODECS,this.onBufferCodecs,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this)},t.onFpsDropLevelCapping=function(e,t){var n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})},t.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},t.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onLevelsUpdated=function(e,t){this.timer&&T(this.autoLevelCapping)&&this.detectPlayerSize()},t.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onMediaDetaching=function(){this.stopCapping()},t.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var e=this.hls.levels;if(e.length){var t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&N.log("Setting autoLevelCapping to "+n+": "+e[n].height+"p@"+e[n].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.getMaxLevel=function(t){var n=this,i=this.hls.levels;if(!i.length)return-1;var r=i.filter((function(e,i){return n.isLevelAllowed(e)&&i<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},t.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},t.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},t.isLevelAllowed=function(e){return!this.restrictedLevels.some((function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height}))},e.getMaxLevelByMediaSize=function(e,t,n){if(null==e||!e.length)return-1;for(var i=function(e,t){return!t||e.width!==t.width||e.height!==t.height},r=e.length-1,a=Math.max(t,n),o=0;o<e.length;o+=1){var s=e[o];if((s.width>=a||s.height>=a)&&i(s,e[o+1])){r=o;break}}return r},s(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),e}(),ns=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(C.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var u=l.currentLevel;N.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(C.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}(),is="[eme]",rs=function(){function e(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=e.CDMCleanupPromise?[e.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=N.debug.bind(N,is),this.log=N.log.bind(N,is),this.warn=N.warn.bind(N,is),this.error=N.error.bind(N,is),this.hls=t,this.config=t.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},t.registerListeners=function(){this.hls.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(C.MANIFEST_LOADED,this.onManifestLoaded,this)},t.unregisterListeners=function(){this.hls.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(C.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(C.MANIFEST_LOADED,this.onManifestLoaded,this)},t.getLicenseServerUrl=function(e){var t=this.config,n=t.drmSystems,i=t.widevineLicenseUrl,r=n[e];if(r)return r.licenseUrl;if(e===ne.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},t.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},t.attemptKeySystemAccess=function(e){var t=this,n=this.hls.levels,i=function(e,t,n){return!!e&&n.indexOf(e)===t},r=n.map((function(e){return e.audioCodec})).filter(i),a=n.map((function(e){return e.videoCodec})).filter(i);return r.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(n,i){!function e(o){var s=o.shift();t.getMediaKeysPromise(s,r,a).then((function(e){return n({keySystem:s,mediaKeys:e})})).catch((function(t){o.length?e(o):i(t instanceof us?t:new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))}(e)}))},t.requestMediaKeySystemAccess=function(e,t){var n=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof n){var i="Configured requestMediaKeySystemAccess is not a function "+n;return null===ce&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return n(e,t)},t.getMediaKeysPromise=function(e,t,n){var i=this,r=de(e,t,n,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],o=null==a?void 0:a.keySystemAccess;if(!o){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(r)),o=this.requestMediaKeySystemAccess(e,r);var s=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch((function(t){i.log('Failed to obtain access to key-system "'+e+'": '+t)})),o.then((function(t){i.log('Access for key-system "'+t.keySystem+'" obtained');var n=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),s.mediaKeys=t.createMediaKeys().then((function(t){return i.log('Media-keys created for "'+e+'"'),n.then((function(n){return n?i.setMediaKeysServerCertificate(t,e,n):t}))})),s.mediaKeys.catch((function(t){i.error('Failed to create media-keys for "'+e+'"}: '+t)})),s.mediaKeys}))}return o.then((function(){return a.mediaKeys}))},t.createMediaKeySessionContext=function(e){var t=e.decryptdata,n=e.keySystem,i=e.mediaKeys;this.log('Creating key-system session "'+n+'" keyId: '+Le.hexDump(t.keyId||[]));var r=i.createSession(),a={decryptdata:t,keySystem:n,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},t.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},t.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Le.hexDump(e.keyId)},t.updateKeySession=function(e,t){var n,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+Le.hexDump((null==(n=e.decryptdata)?void 0:n.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),i.update(t)},t.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},t.getKeyFormatPromise=function(e){var t=this;return new Promise((function(n,i){var r=le(t.config),a=e.map(re).filter((function(e){return!!e&&-1!==r.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=e.keySystem,r=se(t);r?n(r):i(new Error('Unable to find format for key-system "'+t+'"'))})).catch(i)}))},t.loadKey=function(e){var t=this,n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r="(keyId: "+i+' format: "'+n.keyFormat+'" method: '+n.method+" uri: "+n.uri+")";this.log("Starting session for key "+r);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then((function(i){var a=i.keySystem,o=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+r),t.attemptSetMediaKeys(a,o).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:n}),i="cenc";return t.generateRequestWithPreferredKeySession(e,i,n.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},t.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},t.handleError=function(e){this.hls&&(this.error(e.message),e instanceof us?this.hls.trigger(C.ERROR,e.data):this.hls.trigger(C.ERROR,{type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},t.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){var i=re(e.keyFormat),r=i?[i]:le(this.config);return this.attemptKeySystemAccess(r)}return n},t.getKeySystemSelectionPromise=function(e){if(e.length||(e=le(this.config)),0===e.length)throw new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},t._onMediaEncrypted=function(e){var t=this,n=e.initDataType,i=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+n+'"'),null!==i){var r,a;if("sinf"===n&&this.config.drmSystems[ne.FAIRPLAY]){var o=Me(new Uint8Array(i));try{var s=X(JSON.parse(o).sinf),l=Xe(new Uint8Array(s));if(!l)return;r=l.subarray(8,24),a=ne.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=dt(i);if(null===u)return;0===u.version&&u.systemId===ae.WIDEVINE&&u.data&&(r=u.data.subarray(8,24)),a=oe(u.systemId)}if(a&&r){for(var c,d=Le.hexDump(r),h=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=h[d],g=function(){var e=f[v],a=e.decryptdata;if(a.pssh||!a.keyId)return 0;var o=Le.hexDump(a.keyId);return d===o||-1!==a.uri.replace(/-/g,"").indexOf(d)?(p=h[o],delete h[o],a.pssh=new Uint8Array(i),a.keyId=r,p=h[d]=p.then((function(){return t.generateRequestWithPreferredKeySession(e,n,i,"encrypted-event-key-match")})),1):void 0},v=0;v<f.length&&(0===(c=g())||1!==c);v++);p||(p=h[d]=this.getKeySystemSelectionPromise([a]).then((function(e){var a,o=e.keySystem,s=e.mediaKeys;t.throwIfDestroyed();var l=new ft("ISO-23001-7",d,null!=(a=se(o))?a:"");return l.pssh=new Uint8Array(i),l.keyId=r,t.attemptSetMediaKeys(o,s).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({decryptdata:l,keySystem:o,mediaKeys:s});return t.generateRequestWithPreferredKeySession(e,n,i,"encrypted-event-no-match")}))}))),p.catch((function(e){return t.handleError(e)}))}}},t._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},t.attemptSetMediaKeys=function(e,t){var n=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var r=Promise.all(i).then((function(){if(!n.media)throw new Error("Attempted to set mediaKeys without media element attached");return n.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((function(){n.log('Media-keys set for "'+e+'"'),i.push(r),n.setMediaKeysQueue=n.setMediaKeysQueue.filter((function(e){return-1===i.indexOf(e)}))}))},t.generateRequestWithPreferredKeySession=function(e,t,n,i){var r,a,o=this,s=null==(r=this.config.drmSystems)||null==(a=r[e.keySystem])?void 0:a.generateRequest;if(s)try{var l=s.call(this.hls,t,n,e);if(!l)throw new Error("Invalid response from configured generateRequest filter");t=l.initDataType,n=e.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null}catch(e){var u;if(this.warn(e.message),null!=(u=this.hls)&&u.config.debug)throw e}if(null===n)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var c=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+c+" (init data type: "+t+" length: "+(n?n.byteLength:null)+")");var d=new Sa,h=e._onmessage=function(t){var n=e.mediaKeysSession;if(n){var i=t.messageType,r=t.message;o.log('"'+i+'" message event for session "'+n.sessionId+'" message size: '+r.byteLength),"license-request"===i||"license-renewal"===i?o.renewLicense(e,r).catch((function(e){o.handleError(e),d.emit("error",e)})):"license-release"===i?e.keySystem===ne.FAIRPLAY&&(o.updateKeySession(e,ee("acknowledged")),o.removeSession(e)):o.warn('unhandled media key message type "'+i+'"')}else d.emit("error",new Error("invalid state"))},f=e._onkeystatuseschange=function(t){if(e.mediaKeysSession){o.onKeyStatusChange(e);var n=e.keyStatus;d.emit("keyStatus",n),"expired"===n&&(o.warn(e.keySystem+" expired for key "+c),o.renewKeySession(e))}else d.emit("error",new Error("invalid state"))};e.mediaKeysSession.addEventListener("message",h),e.mediaKeysSession.addEventListener("keystatuseschange",f);var p=new Promise((function(e,t){d.on("error",t),d.on("keyStatus",(function(n){n.startsWith("usable")?e():"output-restricted"===n?t(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+n+'"')):"expired"===n?t(new Error("key expired while generating request")):o.warn('unhandled key status change "'+n+'"')}))}));return e.mediaKeysSession.generateRequest(t,n).then((function(){var t;o.log('Request generated for key-session "'+(null==(t=e.mediaKeysSession)?void 0:t.sessionId)+'" keyId: '+c)})).catch((function(e){throw new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return p})).catch((function(t){throw d.removeAllListeners(),o.removeSession(e),t})).then((function(){return d.removeAllListeners(),e}))},t.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(n,i){t.log('key status change "'+n+'" for keyStatuses keyId: '+Le.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+Le.hexDump(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=n}))},t.fetchServerCertificate=function(e){var t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching server certificate for "'+e+'"'),new Promise((function(a,o){var s={responseType:"arraybuffer",url:r},l=t.certLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:function(e,t,n,i){a(e.data)},onError:function(t,n,a,l){o(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:i({url:s.url,data:void 0},t)},'"'+e+'" certificate request failed ('+r+"). Status: "+t.code+" ("+t.text+")"))},onTimeout:function(t,n,i){o(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:s.url,data:void 0}},'"'+e+'" certificate request timed out ('+r+")"))},onAbort:function(e,t,n){o(new Error("aborted"))}};n.load(s,u,c)}))):Promise.resolve()},t.setMediaKeysServerCertificate=function(e,t,n){var i=this;return new Promise((function(r,a){e.setServerCertificate(n).then((function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==n?void 0:n.byteLength)+') on "'+t+'"'),r(e)})).catch((function(e){a(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))},t.renewLicense=function(e,t){var n=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return n.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},t.unpackPlayReadyKeyMessage=function(e,t){var n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;var i=(new DOMParser).parseFromString(n,"application/xml"),r=i.querySelectorAll("HttpHeader");if(r.length>0)for(var a,o=0,s=r.length;o<s;o++){var l,u,c=null==(l=(a=r[o]).querySelector("name"))?void 0:l.textContent,d=null==(u=a.querySelector("value"))?void 0:u.textContent;c&&d&&e.setRequestHeader(c,d)}var h=i.querySelector("Challenge"),f=null==h?void 0:h.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return ee(atob(f))},t.setupLicenseXHR=function(e,t,n,i){var r=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!n.decryptdata)throw new Error("Key removed");return a.call(r.hls,e,t,n,i)})).catch((function(o){if(!n.decryptdata)throw o;return e.open("POST",t,!0),a.call(r.hls,e,t,n,i)})).then((function(n){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},t.requestLicense=function(e,t){var n=this,i=this.config.keyLoadPolicy.default;return new Promise((function(r,a){var o=n.getLicenseServerUrl(e.keySystem);n.log("Sending license request to URL: "+o);var s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=function(){if(!n.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===s.readyState)if(200===s.status){n._requestLicenseFailureCount=0;var l=s.response;n.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=n.config.licenseResponseCallback;if(u)try{l=u.call(n.hls,s,o,e)}catch(e){n.error(e)}r(l)}else{var c=i.errorRetry,d=c?c.maxNumRetry:0;if(n._requestLicenseFailureCount++,n._requestLicenseFailureCount>d||s.status>=400&&s.status<500)a(new us({type:I.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:o,data:void 0,code:s.status,text:s.statusText}},"License Request XHR failed ("+o+"). Status: "+s.status+" ("+s.statusText+")"));else{var h=d-n._requestLicenseFailureCount+1;n.warn("Retrying license request, "+h+" attempts left"),n.requestLicense(e,t).then(r,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,n.setupLicenseXHR(s,o,e,t).then((function(t){var i=t.xhr,r=t.licenseChallenge;e.keySystem==ne.PLAYREADY&&(r=n.unpackPlayReadyKeyMessage(i,r)),i.send(r)}))}))},t.onMediaAttached=function(e,t){if(this.config.emeEnabled){var n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}},t.onMediaDetached=function(){var t=this,n=this.media,i=this.mediaKeySessions;n&&(n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ft.clearKeyUriToKeyIdMap();var r=i.length;e.CDMCleanupPromise=Promise.all(i.map((function(e){return t.removeSession(e)})).concat(null==n?void 0:n.setMediaKeys(null).catch((function(e){t.log("Could not clear media keys: "+e)})))).then((function(){r&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(e){t.log("Could not close sessions and clear media keys: "+e)}))},t.onManifestLoading=function(){this.keyFormatPromise=null},t.onManifestLoaded=function(e,t){var n=t.sessionKeys;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){var i=n.reduce((function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},t.removeSession=function(e){var t=this,n=e.mediaKeysSession,i=e.licenseXhr;if(n){this.log("Remove licenses and keys and close session "+n.sessionId),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),n.remove().catch((function(e){t.log("Could not remove session: "+e)})).then((function(){return n.close()})).catch((function(e){t.log("Could not close session: "+e)}))}},e}();rs.CDMCleanupPromise=void 0;var as,os,ss,ls,us=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).data=void 0,t.error||(t.error=new Error(n)),i.data=t,t.err=t.error,i}return c(t,e),t}(v(Error));(function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"})(as||(as={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(os||(os={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(ss||(ss={}));var cs=((ls={})[ss.OBJECT]=["br","d","ot","tb"],ls[ss.REQUEST]=["bl","dl","mtp","nor","nrr","su"],ls[ss.SESSION]=["cid","pr","sf","sid","st","v"],ls[ss.STATUS]=["bs","rtp"],ls),ds=function e(t,n){this.value=void 0,this.params=void 0,Array.isArray(t)&&(t=t.map((function(t){return t instanceof e?t:new e(t)}))),this.value=t,this.params=n},hs=function(e){this.description=void 0,this.description=e},fs="Dict";function ps(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"==typeof e?JSON.stringify(e):String(e)}function gs(e,t,n,i){return new Error("failed to "+e+' "'+ps(t)+'" as '+n,{cause:i})}var vs="Bare Item",ms="Boolean",ys="Byte Sequence",As="Decimal",bs="Integer";function Es(e){return e<-999999999999999||999999999999999<e}var _s=/[\x00-\x1f\x7f]+/,ks="Token",Ts="Key";function Ss(e,t,n){return gs("serialize",e,t,n)}function ws(e){if("boolean"!=typeof e)throw Ss(e,ms);return e?"?1":"?0"}function Cs(e){return btoa(String.fromCharCode.apply(String,e))}function Is(e){if(!1===ArrayBuffer.isView(e))throw Ss(e,ys);return":"+Cs(e)+":"}function Rs(e){if(Es(e))throw Ss(e,bs);return e.toString()}function Ds(e){return"@"+Rs(e.getTime()/1e3)}function Ls(e,t){if(e<0)return-Ls(-e,t);var n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){var i=Math.floor(e*n);return(i%2==0?i:i+1)/n}return Math.round(e*n)/n}function Ps(e){var t=Ls(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Ss(e,As);var n=t.toString();return n.includes(".")?n:n+".0"}var Os="String";function xs(e){if(_s.test(e))throw Ss(e,Os);return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Ms(e){return e.description||e.toString().slice(7,-1)}function Ns(e){var t=Ms(e);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw Ss(t,ks);return t}function Bs(e){switch(typeof e){case"number":if(!T(e))throw Ss(e,vs);return Number.isInteger(e)?Rs(e):Ps(e);case"string":return xs(e);case"symbol":return Ns(e);case"boolean":return ws(e);case"object":if(e instanceof Date)return Ds(e);if(e instanceof Uint8Array)return Is(e);if(e instanceof hs)return Ns(e);default:throw Ss(e,vs)}}function Fs(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Ss(e,Ts);return e}function Us(e){return null==e?"":Object.entries(e).map((function(e){var t=e[0],n=e[1];return!0===n?";"+Fs(t):";"+Fs(t)+"="+Bs(n)})).join("")}function Vs(e){return e instanceof ds?""+Bs(e.value)+Us(e.params):Bs(e)}function Hs(e){return"("+e.value.map(Vs).join(" ")+")"+Us(e.params)}function js(e,t){var n;if(void 0===t&&(t={whitespace:!0}),"object"!=typeof e)throw Ss(e,fs);var i=e instanceof Map?e.entries():Object.entries(e),r=null!=(n=t)&&n.whitespace?" ":"";return Array.from(i).map((function(e){var t=e[0],n=e[1];n instanceof ds==0&&(n=new ds(n));var i=Fs(t);return!0===n.value?i+=Us(n.params):(i+="=",Array.isArray(n.value)?i+=Hs(n):i+=Vs(n)),i})).join(","+r)}function Ks(e,t){return js(e,t)}var Gs=function(e){return"ot"===e||"sf"===e||"st"===e},Ws=function(e){return"number"==typeof e?T(e):null!=e&&""!==e&&!1!==e};function Ys(e,t){var n=new URL(e),i=new URL(t);if(n.origin!==i.origin)return e;for(var r=n.pathname.split("/").slice(1),a=i.pathname.split("/").slice(1,-1);r[0]===a[0];)r.shift(),a.shift();for(;a.length;)a.shift(),r.unshift("..");return r.join("/")}function zs(){try{return crypto.randomUUID()}catch(r){try{var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){var n=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)}));return i}}}var qs=function(e){return Math.round(e)},$s=function(e,t){return null!=t&&t.baseUrl&&(e=Ys(e,t.baseUrl)),encodeURIComponent(e)},Xs=function(e){return 100*qs(e/100)},Qs={br:qs,d:qs,bl:Xs,dl:Xs,mtp:Xs,nor:$s,rtp:Xs,tb:qs};function Js(e,t){var n={};if(null==e||"object"!=typeof e)return n;var i=Object.keys(e).sort(),r=u({},Qs,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return i.forEach((function(i){if(null==a||!a(i)){var o=e[i],s=r[i];s&&(o=s(o,t)),"v"===i&&1===o||"pr"==i&&1===o||Ws(o)&&(Gs(i)&&"string"==typeof o&&(o=new hs(o)),n[i]=o)}})),n}function Zs(e,t){return void 0===t&&(t={}),e?Ks(Js(e,t),u({whitespace:!1},t)):""}function el(e,t){var n;if(void 0===t&&(t={}),!e)return{};var i=Object.entries(e),r=Object.entries(cs).concat(Object.entries((null==(n=t)?void 0:n.customHeaderMap)||{})),a=i.reduce((function(e,t){var n,i=t[0],a=t[1],o=(null==(n=r.find((function(e){return e[1].includes(i)})))?void 0:n[0])||ss.REQUEST;return null!=e[o]||(e[o]={}),e[o][i]=a,e}),{});return Object.entries(a).reduce((function(e,n){var i=n[0],r=n[1];return e[i]=Zs(r,t),e}),{})}function tl(e,t,n){return u(e,el(t,n))}var nl="CMCD";function il(e,t){if(void 0===t&&(t={}),!e)return"";var n=Zs(e,t);return nl+"="+encodeURIComponent(n)}var rl=/CMCD=[^&#]+/;function al(e,t,n){var i=il(t,n);if(!i)return e;if(rl.test(e))return e.replace(rl,i);var r=e.includes("?")?"&":"?";return""+e+r+i}var ol=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(e){try{t.apply(e,{ot:as.MANIFEST,su:!t.initialized})}catch(e){N.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var n=e.frag,i=t.hls.levels[n.level],r=t.getObjectType(n),a={d:1e3*n.duration,ot:r};r!==as.VIDEO&&r!==as.AUDIO&&r!=as.MUXED||(a.br=i.bitrate/1e3,a.tb=t.getTopBandwidth(r)/1e3,a.bl=t.getBufferLength(r)),t.apply(e,a)}catch(e){N.warn("Could not generate segment CMCD data.",e)}},this.hls=e;var n=this.config=e.config,i=n.cmcd;null!=i&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||zs(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHED,this.onMediaDetached,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHED,this.onMediaDetached,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this)},t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,i;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer},t.createData=function(){var e;return{v:1,sf:os.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(e,t){void 0===t&&(t={}),u(t,this.createData());var n=t.ot===as.INIT||t.ot===as.VIDEO||t.ot===as.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);var i=this.includeKeys;i&&(t=Object.keys(t).reduce((function(e,n){return i.includes(n)&&(e[n]=t[n]),e}),{})),this.useHeaders?(e.headers||(e.headers={}),tl(e.headers,t)):e.url=al(e.url,t)},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?as.TIMED_TEXT:"initSegment"===e.sn?as.INIT:"audio"===t?as.AUDIO:"main"===t?this.hls.audioTracks.length?as.VIDEO:as.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,i=this.hls;if(e===as.AUDIO)t=i.audioTracks;else{var r=i.maxAutoLevel,a=r>-1?r+1:i.levels.length;t=i.levels.slice(0,a)}for(var o,s=b(t);!(o=s()).done;){var l=o.value;l.bitrate>n&&(n=l.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===as.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*Ri.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},s(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},s(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e}(),sl=3e5,ll=function(){function e(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=N.log.bind(N,"[content-steering]:"),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.ERROR,this.onError,this))},t.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}},t.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},t.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},t.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},t.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter((function(t){return t!==e})))},t.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},t.onManifestLoaded=function(e,t){var n=t.contentSteering;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())},t.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},t.onError=function(e,t){var n=t.errorAction;if((null==n?void 0:n.action)===Zn.SendAlternateToPenaltyBox&&n.flags===ei.MoveAllAlternatesMatchingHost){var i=this.levels,r=this.pathwayPriority,a=this.pathwayId;if(t.context){var o=t.context,s=o.groupId,l=o.pathwayId,u=o.type;s&&i?a=this.getPathwayForGroupId(s,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&i&&(r=i.reduce((function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e}),[])),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==a),n.resolved||N.warn("Could not resolve "+t.details+' ("'+t.error.message+'") with content-steering for Pathway: '+a+" levels: "+(i?i.length:i)+" priorities: "+JSON.stringify(r)+" penalized: "+JSON.stringify(this.penalizedPathways))}},t.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){var n=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+n+'"'),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length?(this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t):e},t.getLevelsForPathway=function(e){return null===this.levels?[]:this.levels.filter((function(t){return e===t.pathwayId}))},t.updatePathwayPriority=function(e){var t;this.pathwayPriority=e;var n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach((function(e){i-n[e]>sl&&delete n[e]}));for(var r=0;r<e.length;r++){var a=e[r];if(!(a in n)){if(a===this.pathwayId)return;var o=this.hls.nextLoadLevel,s=this.hls.levels[o];if((t=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,Un(t),this.hls.trigger(C.LEVELS_UPDATED,{levels:t});var l=this.hls.levels[o];s&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=o);break}}}},t.getPathwayForGroupId=function(e,t,n){for(var i=this.getLevelsForPathway(n).concat(this.levels||[]),r=0;r<i.length;r++)if(t===Xt.AUDIO_TRACK&&i[r].hasAudioGroup(e)||t===Xt.SUBTITLE_TRACK&&i[r].hasSubtitleGroup(e))return i[r].pathwayId;return n},t.clonePathways=function(e){var t=this,n=this.levels;if(n){var i={},r={};e.forEach((function(e){var a=e.ID,o=e["BASE-ID"],s=e["URI-REPLACEMENT"];if(!n.some((function(e){return e.pathwayId===a}))){var l=t.getLevelsForPathway(o).map((function(e){var t=new U(e.attrs);t["PATHWAY-ID"]=a;var n=t.AUDIO&&t.AUDIO+"_clone_"+a,o=t.SUBTITLES&&t.SUBTITLES+"_clone_"+a;n&&(i[t.AUDIO]=n,t.AUDIO=n),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);var l=cl(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s),u=new Sn({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(var c=1;c<e.audioGroups.length;c++)u.addGroupId("audio",e.audioGroups[c]+"_clone_"+a);if(e.subtitleGroups)for(var d=1;d<e.subtitleGroups.length;d++)u.addGroupId("text",e.subtitleGroups[d]+"_clone_"+a);return u}));n.push.apply(n,l),ul(t.audioTracks,i,s,a),ul(t.subtitleTracks,r,s,a)}}))}},t.loadSteeringManifest=function(e){var t,n=this,i=this.hls.config,r=i.loader;this.loader&&this.loader.destroy(),this.loader=new r(i);try{t=new self.URL(e)}catch(t){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if("data:"!==t.protocol){var a=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate);t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+a)}var o={responseType:"json",url:t.href},s=i.steeringManifestLoadPolicy.default,l=s.errorRetry||s.timeoutRetry||{},u={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:function(e,i,r,a){n.log('Loaded steering manifest: "'+t+'"');var o=e.data;if(1===o.VERSION){n.updated=performance.now(),n.timeToLoad=o.TTL;var s=o["RELOAD-URI"],l=o["PATHWAY-CLONES"],u=o["PATHWAY-PRIORITY"];if(s)try{n.uri=new self.URL(s,t).href}catch(e){return n.enabled=!1,void n.log("Failed to parse Steering Manifest RELOAD-URI: "+s)}n.scheduleRefresh(n.uri||r.url),l&&n.clonePathways(l);var c={steeringManifest:o,url:t.toString()};n.hls.trigger(C.STEERING_MANIFEST_LOADED,c),u&&n.updatePathwayPriority(u)}else n.log("Steering VERSION "+o.VERSION+" not supported!")},onError:function(e,t,i,r){if(n.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),n.stopLoad(),410===e.code)return n.enabled=!1,void n.log("Steering manifest "+t.url+" no longer available");var a=1e3*n.timeToLoad;if(429!==e.code)n.scheduleRefresh(n.uri||t.url,a);else{var o=n.loader;if("function"==typeof(null==o?void 0:o.getResponseHeader)){var s=o.getResponseHeader("Retry-After");s&&(a=1e3*parseFloat(s))}n.log("Steering manifest "+t.url+" rate limited")}},onTimeout:function(e,t,i){n.log("Timeout loading steering manifest ("+t.url+")"),n.scheduleRefresh(n.uri||t.url)}};this.log("Requesting steering manifest: "+t),this.loader.load(o,u,c)},t.scheduleRefresh=function(e,t){var n=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout((function(){var t,i=null==(t=n.hls)?void 0:t.media;!i||i.ended?n.scheduleRefresh(e,1e3*n.timeToLoad):n.loadSteeringManifest(e)}),t)},e}();function ul(e,t,n,i){e&&Object.keys(t).forEach((function(r){var a=e.filter((function(e){return e.groupId===r})).map((function(e){var a=u({},e);return a.details=void 0,a.attrs=new U(a.attrs),a.url=a.attrs.URI=cl(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=t[r],a.attrs["PATHWAY-ID"]=i,a}));e.push.apply(e,a)}))}function cl(e,t,n,i){var r,a=i.HOST,o=i.PARAMS,s=i[n];t&&(r=null==s?void 0:s[t])&&(e=r);var l=new self.URL(e);return a&&!r&&(l.host=a),o&&Object.keys(o).sort().forEach((function(e){e&&l.searchParams.set(e,o[e])})),l.href}var dl=/^age:\s*[\d.]+\s*$/im,hl=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new K,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()},t.loadInternal=function(){var e=this,t=this.config,n=this.context;if(t&&n){var i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;var a=this.xhrSetup;a?Promise.resolve().then((function(){if(e.loader===i&&!e.stats.aborted)return a(i,n.url)})).catch((function(t){if(e.loader===i&&!e.stats.aborted)return i.open("GET",n.url,!0),a(i,n.url)})).then((function(){e.loader!==i||e.stats.aborted||e.openAndSendXhr(i,n,t)})).catch((function(t){e.callbacks.onError({code:i.status,text:t.message},n,i,r)})):this.openAndSendXhr(i,n,t)}},t.openAndSendXhr=function(e,t,n){e.readyState||e.open("GET",t.url,!0);var i=t.headers,r=n.loadPolicy,a=r.maxTimeToFirstByteMs,o=r.maxLoadTimeMs;if(i)for(var s in i)e.setRequestHeader(s,i[s]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&T(a)?a:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var i=t.readyState,r=this.config;if(!n.aborted&&i>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var a=t.status,o="text"!==t.responseType;if(a>=200&&a<300&&(o&&t.response||null!==t.responseText)){n.loading.end=Math.max(self.performance.now(),n.loading.first);var s=o?t.response:t.responseText,l="arraybuffer"===t.responseType?s.byteLength:s.length;if(n.loaded=n.total=l,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(n,e,s,t),!this.callbacks)return;var c={url:t.responseURL,data:s,code:a};this.callbacks.onSuccess(c,n,e,t)}else{var d=r.loadPolicy.errorRetry;Gn(d,n.retry,!1,{url:e.url,data:void 0,code:a})?this.retry(d):(N.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t,n))}}}},t.loadtimeout=function(){if(this.config){var e=this.config.loadPolicy.timeoutRetry;if(Gn(e,this.stats.retry,!0))this.retry(e);else{var t;N.warn("timeout while loading "+(null==(t=this.context)?void 0:t.url));var n=this.callbacks;n&&(this.abortInternal(),n.onTimeout(this.stats,this.context,this.loader))}}},t.retry=function(e){var t=this.context,n=this.stats;this.retryDelay=jn(e,n.retry),n.retry++,N.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+n.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&dl.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},e}();function fl(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var pl=/(\d+)-(\d+)\/(\d+)/,gl=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Al,this.controller=new self.AbortController,this.stats=new K}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},t.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var i=this,r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();var a=vl(e,this.controller.signal),o=n.onProgress,s="arraybuffer"===e.responseType,l=s?"byteLength":"length",u=t.loadPolicy,c=u.maxTimeToFirstByteMs,d=u.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=c&&T(c)?c:d,this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),t.timeout),self.fetch(this.request).then((function(a){i.response=i.loader=a;var l=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(i.requestTimeout),t.timeout=d,i.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),d-(l-r.loading.start)),!a.ok){var u=a.status,c=a.statusText;throw new El(c||"fetch, bad network response",u,a)}return r.loading.first=l,r.total=yl(a.headers)||r.total,o&&T(t.highWaterMark)?i.loadProgressively(a,r,e,t.highWaterMark,o):s?a.arrayBuffer():"json"===e.responseType?a.json():a.text()})).then((function(a){var s=i.response;if(!s)throw new Error("loader destroyed");self.clearTimeout(i.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);var u=a[l];u&&(r.loaded=r.total=u);var c={url:s.url,data:a,code:s.status};o&&!T(t.highWaterMark)&&o(r,e,a,s),n.onSuccess(c,r,e,s)})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!r.aborted){var a=t&&t.code||0,o=t?t.message:null;n.onError({code:a,text:o},e,t?t.details:null,r)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},t.loadProgressively=function(e,t,n,i,r){void 0===i&&(i=0);var a=new er,o=e.body.getReader();return function s(){return o.read().then((function(o){if(o.done)return a.dataLength&&r(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=o.value,u=l.length;return t.loaded+=u,u<i||a.dataLength?(a.push(l),a.dataLength>=i&&r(t,n,a.flush(),e)):r(t,n,l,e),s()})).catch((function(){return Promise.reject()}))}()},e}();function vl(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(u({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}function ml(e){var t=pl.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}function yl(e){var t=e.get("Content-Range");if(t){var n=ml(t);if(T(n))return n}var i=e.get("Content-Length");if(i)return parseInt(i)}function Al(e,t){return new self.Request(e.url,t)}var bl,El=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).code=void 0,r.details=void 0,r.code=n,r.details=i,r}return c(t,e),t}(v(Error)),_l=/\s/,kl={newCue:function(e,t,n,i){for(var r,a,o,s,l,u=[],c=self.VTTCue||self.TextTrackCue,d=0;d<i.rows.length;d++)if(o=!0,s=0,l="",!(r=i.rows[d]).isEmpty()){for(var h,f=0;f<r.chars.length;f++)_l.test(r.chars[f].uchar)&&o?s++:(l+=r.chars[f].uchar,o=!1);r.cueStartTime=t,t===n&&(n+=1e-4),s>=16?s--:s++;var p=wo(l.trim()),g=Po(t,n,p);null!=e&&null!=(h=e.cues)&&h.getCueById(g)||((a=new c(t,n,p)).id=g,a.line=d+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*s/32)),u.push(a))}return e&&u.length&&(u.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),u.forEach((function(t){return nn(e,t)}))),u}},Tl=i(i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:hl,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:_i,bufferController:za,capLevelController:ts,errorController:ti,fpsController:ns,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ce,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Sl()),{},{subtitleStreamController:ja,subtitleTrackController:Ga,timelineController:Xo,audioStreamController:Ua,audioTrackController:Va,emeController:rs,cmcdController:ol,contentSteeringController:ll});function Sl(){return{cueHandler:kl,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function wl(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var n=Cl(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(e){var i=("level"===e?"playlist":e)+"LoadPolicy",a=void 0===t[i],o=[];r.forEach((function(r){var s=e+"Loading"+r,l=t[s];if(void 0!==l&&a){o.push(s);var u=n[i].default;switch(t[i]={default:u},r){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l}}})),o.length&&N.warn('hls.js config: "'+o.join('", "')+'" setting(s) are deprecated, use "'+i+'": '+JSON.stringify(t[i]))})),i(i({},n),t)}function Cl(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Cl):Object.keys(e).reduce((function(t,n){return t[n]=Cl(e[n]),t}),{}):e}function Il(e){var t=e.loader;t!==gl&&t!==hl?(N.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):fl()&&(e.loader=gl,e.progressive=!0,e.enableSoftwareAES=!0,N.log("[config]: Progressive streaming enabled, using FetchLoader"))}var Rl=function(e){function t(t,n){var i;return(i=e.call(this,t,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._maxAutoLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=n,i._registerListeners(),i}c(t,e);var n=t.prototype;return n._registerListeners=function(){var e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this),e.on(C.ERROR,this.onError,this)},n._unregisterListeners=function(){var e=this.hls;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this),e.off(C.ERROR,this.onError,this)},n.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),e.prototype.destroy.call(this)},n.stopLoad=function(){this._levels.forEach((function(e){e.loadError=0,e.fragmentError=0})),e.prototype.stopLoad.call(this)},n.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},n.onManifestLoading=function(e,t){this.resetLevels()},n.onManifestLoaded=function(e,t){var n=this.hls.config.preferManagedMediaSource,i=[],r={},a={},o=!1,s=!1,l=!1;t.levels.forEach((function(e){var t,u,c=e.attrs,d=e.audioCodec,h=e.videoCodec;-1!==(null==(t=d)?void 0:t.indexOf("mp4a.40.34"))&&(bl||(bl=/chrome|firefox/i.test(navigator.userAgent)),bl&&(e.audioCodec=d=void 0)),d&&(e.audioCodec=d=Ot(d,n)),0===(null==(u=h)?void 0:u.indexOf("avc1"))&&(h=e.videoCodec=Mt(h));var f=e.width,p=e.height,g=e.unknownCodecs;if(o||(o=!(!f||!p)),s||(s=!!h),l||(l=!!d),!(null!=g&&g.length||d&&!St(d,"audio",n)||h&&!St(h,"video",n))){var v=c.CODECS,m=c["FRAME-RATE"],y=c["HDCP-LEVEL"],A=c["PATHWAY-ID"],b=c.RESOLUTION,E=c["VIDEO-RANGE"],_=(A||".")+"-"+e.bitrate+"-"+b+"-"+m+"-"+v+"-"+E+"-"+y;if(r[_])if(r[_].uri===e.url||e.attrs["PATHWAY-ID"])r[_].addGroupId("audio",c.AUDIO),r[_].addGroupId("text",c.SUBTITLES);else{var k=a[_]+=1;e.attrs["PATHWAY-ID"]=new Array(k+1).join(".");var T=new Sn(e);r[_]=T,i.push(T)}else{var S=new Sn(e);r[_]=S,a[_]=1,i.push(S)}}})),this.filterAndSortMediaOptions(i,t,o,s,l)},n.filterAndSortMediaOptions=function(e,t,n,i,r){var a=this,o=[],s=[],l=e;if((n||i)&&r&&(l=l.filter((function(e){var t=e.videoCodec,n=e.videoRange,i=e.width,r=e.height;return(!!t||!(!i||!r))&&En(n)}))),0!==l.length){if(t.audioTracks){var u=this.hls.config.preferManagedMediaSource;Dl(o=t.audioTracks.filter((function(e){return!e.audioCodec||St(e.audioCodec,"audio",u)})))}t.subtitles&&Dl(s=t.subtitles);var c=l.slice(0);l.sort((function(e,t){if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return bn.indexOf(e.videoRange)-bn.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){var i=It(e.videoCodec),r=It(t.videoCodec);if(i!==r)return r-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){var a=Rt(e.codecSet),o=Rt(t.codecSet);if(a!==o)return o-a}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));var d=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==c.length)for(var h=0;h<c.length;h++)if(c[h].pathwayId===l[0].pathwayId){d=c[h];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===d){var p;this._firstLevel=f;var g=d.bitrate,v=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+g),void 0===(null==(p=this.hls.userConfig)?void 0:p.abrEwmaDefaultEstimate)){var m=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);m>v&&v===Tl.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=m)}break}var y=r&&!i,A={levels:l,audioTracks:o,subtitleTracks:s,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:i,altAudio:!y&&o.some((function(e){return!!e.url}))};this.hls.trigger(C.MANIFEST_PARSED,A),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){if(a.hls){t.levels.length&&a.warn("One or more CODECS in variant not supported: "+JSON.stringify(t.levels[0].attrs));var e=new Error("no level with compatible codecs found in manifest");a.hls.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}))},n.onError=function(e,t){!t.fatal&&t.context&&t.context.type===Xt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)},n.onFragBuffered=function(e,t){var n=t.frag;if(void 0!==n&&n.type===Qt.MAIN){var i=n.elementaryStreams;if(!Object.keys(i).some((function(e){return!!i[e]})))return;var r=this._levels[n.level];null!=r&&r.loadError&&(this.log("Resetting level error count of "+r.loadError+" on frag buffered"),r.loadError=0)}},n.onLevelLoaded=function(e,t){var n,i,r=t.level,a=t.details,o=this._levels[r];if(!o)return this.warn("Invalid level index "+r),void(null!=(i=t.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0)},n.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var r=i.uri;if(t)try{r=t.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var a=i.attrs["PATHWAY-ID"];this.log("Loading level index "+n+(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"")+" with"+(a?" Pathway "+a:"")+" "+r),this.clearTimer(),this.hls.trigger(C.LEVEL_LOADING,{url:r,level:n,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}},n.removeLevel=function(e){var t,n=this,i=this._levels.filter((function(t,i){return i!==e||(n.steering&&n.steering.removeLevel(t),t===n.currentLevel&&(n.currentLevel=null,n.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((function(e){return e.level=-1}))),!1)}));Un(i),this._levels=i,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(C.LEVELS_UPDATED,{levels:i})},n.onLevelsUpdated=function(e,t){var n=t.levels;this._levels=n},n.checkMaxAutoUpdated=function(){var e=this.hls,t=e.autoLevelCapping,n=e.maxAutoLevel,i=e.maxHdcpLevel;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(C.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))},s(t,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var n=new Error("invalid level idx"),i=e<0;if(this.hls.trigger(C.ERROR,{type:I.OTHER_ERROR,details:R.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:n,reason:n.message}),i)return;e=Math.min(e,t.length-1)}var r=this.currentLevelIndex,a=this.currentLevel,o=a?a.attrs["PATHWAY-ID"]:void 0,s=t[e],l=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r!==e||!s.details||!a||o!==l){this.log("Switching to level "+e+" ("+(s.height?s.height+"p ":"")+(s.videoRange?s.videoRange+" ":"")+(s.codecSet?s.codecSet+" ":"")+"@"+s.bitrate+")"+(l?" with Pathway "+l:"")+" from level "+r+(o?" with Pathway "+o:""));var u={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(C.LEVEL_SWITCHING,u);var c=s.details;if(!c||c.live){var d=this.switchParams(s.uri,null==a?void 0:a.details,c);this.loadPlaylist(d)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(ni);function Dl(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}var Ll=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(e){for(var t in this.keyUriToKeyInfo){var n=this.keyUriToKeyInfo[t].loader;if(n){var i;if(e&&e!==(null==(i=n.context)?void 0:i.frag.type))return;n.abort()}}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,n,i,r){return void 0===t&&(t=R.KEY_LOAD_ERROR),new Gi({type:I.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})},t.loadClear=function(e,t){var n=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,r=e.cc,a=function(){var e=t[o];if(r<=e.cc&&("initSegment"===i||"initSegment"===e.sn||i<e.sn))return n.emeController.selectKeySystemFormat(e).then((function(t){e.setKeyFormat(t)})),1},o=0;o<t.length&&!a();o++);},t.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(n){return t.loadInternal(e,n)})):this.loadInternal(e)},t.loadInternal=function(e,t){var n,i;t&&e.setKeyFormat(t);var r=e.decryptdata;if(!r){var a=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,a))}var o=r.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+o+'"')));var s,l=this.keyUriToKeyInfo[o];if(null!=(n=l)&&n.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(null!=(i=l)&&i.keyLoadPromise)switch(null==(s=l.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then((function(t){return r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:l}}))}switch(l=this.keyUriToKeyInfo[o]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+r.method+'"')))}},t.loadKeyEME=function(e,t){var n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then((function(t){return e.mediaKeySessionContext=t,n}))).catch((function(t){throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)},t.loadKeyHTTP=function(e,t){var n=this,r=this.config,a=new(0,r.loader)(r);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((function(o,s){var l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(e,t,i,r){var a=i.frag,l=i.keyInfo,u=i.url;if(!a.decryptdata||l!==n.keyUriToKeyInfo[u])return s(n.createKeyLoadError(a,R.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));l.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,l.loader=null,o({frag:a,keyInfo:l})},onError:function(e,r,a,o){n.resetLoader(r),s(n.createKeyLoadError(t,R.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),a,i({url:l.url,data:void 0},e)))},onTimeout:function(e,i,r){n.resetLoader(i),s(n.createKeyLoadError(t,R.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:function(e,i,r){n.resetLoader(i),s(n.createKeyLoadError(t,R.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};a.load(l,c,d)}))},t.resetLoader=function(e){var t=e.frag,n=e.keyInfo,i=e.url,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()},e}();function Pl(){return self.SourceBuffer||self.WebKitSourceBuffer}function Ol(){if(!Et())return!1;var e=Pl();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}function xl(){if(!Ol())return!1;var e=Et();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((function(t){return e.isTypeSupported(Ct(t,"video"))}))||["mp4a.40.2","fLaC"].some((function(t){return e.isTypeSupported(Ct(t,"audio"))})))}function Ml(){var e,t=Pl();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}var Nl=250,Bl=2,Fl=.1,Ul=.05,Vl=function(){function e(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var n=this.config,i=this.media,r=this.stalled;if(null!==i){var a=i.currentTime,o=i.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a===e)if(l||s)this.stalled=null;else if(i.paused&&!o||i.ended||0===i.playbackRate||!Ri.getBuffered(i).length)this.nudgeRetry=0;else{var u=Ri.bufferInfo(i,a,0),c=u.nextStart||0;if(o){var d=u.len>Bl,h=!c||t&&t.start<=a||c-a>Bl&&!this.fragmentTracker.getPartialFragment(a);if(d||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f;if(!(u.len>0||c))return;var p=Math.max(c,u.start||0)-a,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==g||null==(f=g.details)?void 0:f.live)?2*g.details.targetduration:Bl,m=this.fragmentTracker.getPartialFragment(a);if(p>0&&(p<=v||m))return void(i.paused||this._trySkipBufferHole(m))}var y=self.performance.now();if(null!==r){var A=y-r;if(o||!(A>=Nl)||(this._reportStall(u),this.media)){var b=Ri.bufferInfo(i,a,n.maxBufferHole);this._tryFixBufferStall(b,A)}}else this.stalled=y}else if(this.moved=!0,o||(this.nudgeRetry=0),null!==r){if(this.stallReported){var E=self.performance.now()-r;N.warn("playback not stuck anymore @"+a+", after "+Math.round(E)+"ms"),this.stallReported=!1}this.stalled=null}}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;if(null!==r){var a=r.currentTime,o=i.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(N.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,n=this.media;if(!this.stallReported&&n){this.stallReported=!0;var i=new Error("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")");N.warn(i.message),t.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}},t._trySkipBufferHole=function(e){var t=this.config,n=this.hls,i=this.media;if(null===i)return 0;var r=i.currentTime,a=Ri.bufferInfo(i,r,0),o=r<a.start?a.start:a.nextStart;if(o){var s=a.len<=t.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,u=o-r;if(u>0&&(s||l)){if(u>t.maxBufferHole){var c=this.fragmentTracker,d=!1;if(0===r){var h=c.getAppendedFrag(0,Qt.MAIN);h&&o<h.end&&(d=!0)}if(!d){var f=e||c.getAppendedFrag(r,Qt.MAIN);if(f){for(var p=!1,g=f.end;g<o;){var v=c.getPartialFragment(g);if(!v){p=!0;break}g+=v.duration}if(p)return 0}}}var m=Math.max(o+Ul,r+Fl);if(N.warn("skipping hole, adjusting currentTime from "+r+" to "+m),this.moved=!0,this.stalled=null,i.currentTime=m,e&&!e.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+m);n.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:e})}return m}}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=this.nudgeRetry;if(null!==n){var r=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var a=r+(i+1)*e.nudgeOffset,o=new Error("Nudging 'currentTime' from "+r+" to "+a);N.warn(o.message),n.currentTime=a,t.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{var s=new Error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges");N.error(s.message),t.trigger(C.ERROR,{type:I.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,error:s,fatal:!0})}}},e}(),Hl=100,jl=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i,"[stream-controller]",Qt.MAIN)||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.couldBacktrack=!1,r.backtrackFragment=null,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}c(t,e);var n=t.prototype;return n._registerListeners=function(){var e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(C.ERROR,this.onError,this),e.on(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this),e.on(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(C.ERROR,this.onError,this),e.off(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this),e.off(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)},n.onHandlerDestroying=function(){this._unregisterListeners(),e.prototype.onHandlerDestroying.call(this)},n.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(Hl),this.level=-1,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Ji.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Ji.STOPPED},n.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case Ji.WAITING_LEVEL:var e=this.levels,t=this.level,n=null==e?void 0:e[t],i=null==n?void 0:n.details;if(i&&(!i.live||this.levelLastLoaded===n)){if(this.waitForCdnTuneIn(i))break;this.state=Ji.IDLE;break}if(this.hls.nextLoadLevel!==this.level){this.state=Ji.IDLE;break}break;case Ji.FRAG_LOADING_WAITING_RETRY:var r,a=self.performance.now(),o=this.retryDate;if(!o||a>=o||null!=(r=this.media)&&r.seeking){var s=this.levels,l=this.level,u=null==s?void 0:s[l];this.resetStartWhenNotLoaded(u||null),this.state=Ji.IDLE}}this.state===Ji.IDLE&&this.doTickIdle(),this.onTickEnd()},n.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},n.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,n=this.levels,i=this.media;if(null!==t&&(i||!this.startFragRequested&&e.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var r=e.nextLoadLevel;if(null!=n&&n[r]){var a=n[r],o=this.getMainFwdBufferInfo();if(null!==o){var s=this.getLevelDetails();if(s&&this._streamEnded(o,s)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(C.BUFFER_EOS,l),void(this.state=Ji.ENDED)}e.loadLevel!==r&&-1===e.manualLevel&&this.log("Adapting to level "+r+" from level "+this.level),this.level=e.nextLoadLevel=r;var u=a.details;if(!u||this.state===Ji.WAITING_LEVEL||u.live&&this.levelLastLoaded!==a)return this.level=r,void(this.state=Ji.WAITING_LEVEL);var c=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(!(c>=d)){this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);var h=this.backtrackFragment?this.backtrackFragment.start:o.end,f=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==Ti.OK){var p,g=(null!=(p=this.backtrackFragment)?p:f).sn-u.startSN,v=u.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){var m=this.audioOnly&&!this.altAudio?G.AUDIO:G.VIDEO,y=(m===G.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,m,Qt.MAIN)}f=this.getNextFragmentLoopLoading(f,u,o,Qt.MAIN,d)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,a,h))}}}}},n.loadFragment=function(t,n,i){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,r===Ti.NOT_LOADED||r===Ti.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t,n):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,n)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i)):this.clearTrackerIfNeeded(t)},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,Qt.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},n.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n,i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);var r=this.getLevelDetails();if(null!=r&&r.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*r.targetduration)return}if(!t.paused&&e){var o=e[this.hls.nextLoadLevel],s=this.fragLastKbps;n=s&&this.fragCurrent?this.fragCurrent.duration*o.maxBitrate/(1e3*s)+1:0}else n=0;var l=this.getBufferedFrag(t.currentTime+n);if(l){var u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();var c=u.maxStartPTS?u.maxStartPTS:u.start,d=u.duration,h=Math.max(l.end,c+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}},n.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ji.KEY_LOADING:case Ji.FRAG_LOADING:case Ji.FRAG_LOADING_WAITING_RETRY:case Ji.PARSING:case Ji.PARSED:this.state=Ji.IDLE}this.nextLoadPosition=this.getLoadPosition()},n.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},n.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Vl(this.config,i,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},n.onMediaPlaying=function(){this.tick()},n.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;T(t)&&this.log("Media seeked to "+t.toFixed(3));var n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(n?n.len:"empty")+")")},n.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(C.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1},n.onManifestParsed=function(e,t){var n=!1,i=!1;t.levels.forEach((function(e){var t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),i=i||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=n&&i&&!Ml(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},n.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===Ji.IDLE){var i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=Ji.WAITING_LEVEL)}},n.onLevelLoaded=function(e,t){var n,i=this.levels,r=t.level,a=t.details,o=a.totalduration;if(i){this.log("Level "+r+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+", cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=i[r],l=this.fragCurrent;!l||this.state!==Ji.FRAG_LOADING&&this.state!==Ji.FRAG_LOADING_WAITING_RETRY||l.level!==t.level&&l.loader&&this.abortCurrentFrag();var u=0;if(a.live||null!=(n=s.details)&&n.live){var c;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,s.details,null==(c=this.levelLastLoaded)?void 0:c.details)}if(s.details=a,this.levelLastLoaded=s,this.hls.trigger(C.LEVEL_UPDATED,{details:a,level:r}),this.state===Ji.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=Ji.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}else this.warn("Levels were reset while loading level "+r)},n._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,r=e.payload,a=this.levels;if(a){var o=a[n.level],s=o.details;if(!s)return this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset"),void this.fragmentTracker.removeFragment(n);var l=o.videoCodec,u=s.PTSKnown||!s.live,c=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new xa(this.hls,Qt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,p=-1!==f,g=new Di(n.level,n.sn,n.stats.chunkCount,r.byteLength,f,p),v=this.initPTS[n.cc];h.push(r,c,d,l,n,i,s.totalduration,u,g,v)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},n.onAudioTrackSwitching=function(e,t){var n=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var r=this.hls;n&&(r.trigger(C.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),r.trigger(C.AUDIO_TRACK_SWITCHED,t)}},n.onAudioTrackSwitched=function(e,t){var n=t.id,i=!!this.hls.audioTracks[n].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()},n.onBufferCreated=function(e,t){var n,i,r=t.tracks,a=!1;for(var o in r){var s=r[o];if("main"===s.id){if(i=o,n=s,"video"===o){var l=r[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},n.onFragBuffered=function(e,t){var n=t.frag,i=t.part;if(!n||n.type===Qt.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Ji.PARSED&&(this.state=Ji.IDLE));var r=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}},n.onError=function(e,t){var n;if(t.fatal)this.state=Ji.ERROR;else switch(t.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Qt.MAIN,t);break;case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Ji.WAITING_LEVEL||(null==(n=t.context)?void 0:n.type)!==Xt.LEVEL||(this.state=Ji.IDLE);break;case R.BUFFER_APPEND_ERROR:case R.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===R.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},n.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!Ri.getBuffered(e).length){var n=this.state!==Ji.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}},n.onFragLoadEmergencyAborted=function(){this.state=Ji.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},n.onBufferFlushed=function(e,t){var n=t.type;if(n!==G.AUDIO||this.audioOnly&&!this.altAudio){var i=(n===G.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,Qt.MAIN),this.tick()}},n.onLevelsUpdated=function(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to "+n+", already seeking at "+t);var i=Ri.getBuffered(e),r=(i.length?i.start(0):0)-n;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+r+" to match buffer start"),n+=r,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}}},n._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},n._loadBitrateTestFrag=function(e,t){var n=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(i){var r=n.hls;if(i&&!n.fragContextChanged(e)){t.fragmentError=0,n.state=Ji.IDLE,n.startFragRequested=!1,n.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(C.FRAG_LOADED,i),e.bitrateTest=!1}}))},n._handleTransmuxComplete=function(e){var t,n="main",i=this.hls,r=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(o){var s=o.frag,l=o.part,u=o.level,c=r.video,d=r.text,h=r.id3,f=r.initSegment,p=u.details,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=Ji.PARSING,f){if(null!=f&&f.tracks){var v=s.initSegment||s;this._bufferInitSegment(u,f.tracks,v,a),i.trigger(C.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:n,tracks:f.tracks})}var m=f.initPTS,y=f.timescale;T(m)&&(this.initPTS[s.cc]={baseTime:m,timescale:y},i.trigger(C.INIT_PTS_FOUND,{frag:s,id:n,initPTS:m,timescale:y}))}if(c&&p&&"initSegment"!==s.sn){var A=p.fragments[s.sn-1-p.startSN],b=s.sn===p.startSN,E=!A||s.cc>A.cc;if(!1!==r.independent){var _=c.startPTS,k=c.endPTS,S=c.startDTS,w=c.endDTS;if(l)l.elementaryStreams[c.type]={startPTS:_,endPTS:k,startDTS:S,endDTS:w};else if(c.firstKeyFrame&&c.independent&&1===a.id&&!E&&(this.couldBacktrack=!0),c.dropped&&c.independent){var I=this.getMainFwdBufferInfo(),R=(I?I.end:this.getLoadPosition())+this.config.maxBufferHole,D=c.firstKeyFramePTS?c.firstKeyFramePTS:_;if(!b&&R<D-this.config.maxBufferHole&&!E)return void this.backtrack(s);E&&(s.gap=!0),s.setElementaryStreamInfo(c.type,s.start,k,s.start,w,!0)}else b&&_>Bl&&(s.gap=!0);s.setElementaryStreamInfo(c.type,_,k,S,w),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(c,s,l,a,b||E)}else{if(!b&&!E)return void this.backtrack(s);s.gap=!0}}if(g){var L=g.startPTS,P=g.endPTS,O=g.startDTS,x=g.endDTS;l&&(l.elementaryStreams[G.AUDIO]={startPTS:L,endPTS:P,startDTS:O,endDTS:x}),s.setElementaryStreamInfo(G.AUDIO,L,P,O,x),this.bufferFragmentData(g,s,l,a)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){var M={id:n,frag:s,details:p,samples:h.samples};i.trigger(C.FRAG_PARSING_METADATA,M)}if(p&&d){var N={id:n,frag:s,details:p,samples:d.samples};i.trigger(C.FRAG_PARSING_USERDATA,N)}}}else this.resetWhenMissingContext(a)},n._bufferInitSegment=function(e,t,n,i){var r=this;if(this.state===Ji.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var a=t.audio,o=t.video,s=t.audiovideo;if(a){var l=e.audioCodec,u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");var c=a.metadata;c&&"channelCount"in c&&1!==(c.channelCount||1)&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")}l&&-1!==l.indexOf("mp4a.40.5")&&-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),a.levelCodec=l,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+a.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+e.codecs+"/"+s.codec+"]"),this.hls.trigger(C.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var a=t[e].initSegment;null!=a&&a.byteLength&&r.hls.trigger(C.BUFFER_APPENDING,{type:e,data:a,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tickImmediate()}},n.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Qt.MAIN)},n.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ji.IDLE},n.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(Ri.isBuffered(e,n)?t=this.getAppendedFrag(n):Ri.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;var i=this.fragPlaying,r=t.level;i&&t.sn===i.sn&&i.level===r||(this.fragPlaying=t,this.hls.trigger(C.FRAG_CHANGED,{frag:t}),i&&i.level===r||this.hls.trigger(C.LEVEL_SWITCHED,{level:r}))}}},s(t,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,n=this.currentFrag;if(n&&T(t)&&T(n.programDateTime)){var i=n.programDateTime+1e3*(t-n.start);return new Date(i)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),t}(Zi),Kl=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Sa,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,M(t.debug||!1,"Hls instance");var n=this.config=wl(e.DefaultConfig,t);this.userConfig=t,n.progressive&&Il(n);var i=n.abrController,r=n.bufferController,a=n.capLevelController,o=n.errorController,s=n.fpsController,l=new o(this),u=this.abrController=new i(this),c=this.bufferController=new r(this),d=this.capLevelController=new a(this),h=new s(this),f=new en(this),p=new vn(this),g=n.contentSteeringController,v=g?new g(this):null,m=this.levelController=new Rl(this,v),y=new Si(this),A=new Ll(this.config),b=this.streamController=new jl(this,y,A);d.setStreamController(b),h.setStreamController(b);var E=[f,m,b];v&&E.splice(1,0,v),this.networkControllers=E;var _=[u,c,d,h,p,y];this.audioTrackController=this.createController(n.audioTrackController,E);var k=n.audioStreamController;k&&E.push(new k(this,y,A)),this.subtitleTrackController=this.createController(n.subtitleTrackController,E);var T=n.subtitleStreamController;T&&E.push(new T(this,y,A)),this.createController(n.timelineController,_),A.emeController=this.emeController=this.createController(n.emeController,_),this.cmcdController=this.createController(n.cmcdController,_),this.latencyController=this.createController(mn,_),this.coreComponents=_,E.push(l);var S=l.onErrorOut;"function"==typeof S&&this.on(C.ERROR,S,l)}e.isMSESupported=function(){return Ol()},e.isSupported=function(){return xl()},e.getMediaSource=function(){return Et()};var t=e.prototype;return t.createController=function(e,t){if(e){var n=new e(this);return t&&t.push(n),n}return null},t.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},t.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},t.off=function(e,t,n,i){void 0===n&&(n=this),this._emitter.off(e,t,n,i)},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,n){return this._emitter.emit(e,t,n)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(N.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;var n=e===C.ERROR;this.trigger(C.ERROR,{type:I.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:n,event:e,error:t}),this.triggeringException=!1}}return!1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){N.log("destroy"),this.trigger(C.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},t.attachMedia=function(e){N.log("attachMedia"),this._media=e,this.trigger(C.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){N.log("detachMedia"),this.trigger(C.MEDIA_DETACHING,void 0),this._media=null},t.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=k.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,N.log("loadSource:"+i),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(C.MANIFEST_LOADING,{url:e})},t.startLoad=function(e){void 0===e&&(e=-1),N.log("startLoad("+e+")"),this.started=!0,this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.stopLoad=function(){N.log("stopLoad"),this.started=!1,this.networkControllers.forEach((function(e){e.stopLoad()}))},t.resumeBuffering=function(){this.started&&this.networkControllers.forEach((function(e){"fragmentLoader"in e&&e.startLoad(-1)}))},t.pauseBuffering=function(){this.networkControllers.forEach((function(e){"fragmentLoader"in e&&e.stopLoad()}))},t.swapAudioCodec=function(){N.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){N.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e){this.levelController.removeLevel(e)},t.setAudioOption=function(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)},t.setSubtitleOption=function(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null},s(e,[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){N.log("set currentLevel:"+e),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){N.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){N.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){N.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){var e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e},set:function(e){N.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(N.log("set autoLevelCapping:"+e),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){An(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,n=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=-1===n&&null!=t&&t.length?t.length-1:n,i)for(var r=e;r--;){var a=t[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return e}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(e){this.abrController.nextAutoLevel=e}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"allAudioTracks",get:function(){var e=this.audioTrackController;return e?e.allAudioTracks:[]}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"allSubtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.5.14-avoid-ll-hls-lipsync"}},{key:"Events",get:function(){return C}},{key:"ErrorTypes",get:function(){return I}},{key:"ErrorDetails",get:function(){return R}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Tl},set:function(t){e.defaultConfig=t}}]),e}();return Kl.defaultConfig=void 0,Kl}()}(!1)})),xs=mo(Os),Ms=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"audioTracks",get:function(){return this.playback._hls.audioTracks||[]}},{key:"setup",value:function(){if(this.playback._hls){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback._hls.once(xs.Events.AUDIO_TRACKS_UPDATED,(function(){return e.setup()}))}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.lang||t.name||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){return this.checkIfAudioTrackDescriptive(e)?"description":""}},{key:"checkIfAudioTrackDescriptive",value:function(e){var t,n;return null===(t=e.attrs)||void 0===t||null===(n=t.CHARACTERISTICS)||void 0===n?void 0:n.includes("public.accessibility.describes-video")}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._hls&&(this.playback._hls.audioTrack=this.selectedAudio.id)}}]),n}(Ds),Ns=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"html5PlayerElement",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.el}},{key:"audioTracks",get:function(){var e,t=null===(e=this.html5PlayerElement)||void 0===e?void 0:e.audioTracks;return"object"===a(t)&&(t=Object.keys(t).map((function(e){return t[e]}))),t||[]}},{key:"setup",value:function(){if(this.html5PlayerElement){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.html5PlayerElement.audioTracks.addEventListener("addtrack",(function(){return e.setup()}),{once:!0})}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.language||t.label||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){var t=e.kind;return"description"===t?t:""}},{key:"updateAudioPlayback",value:function(){var e=this;this.audioTracks.forEach((function(t){t.enabled=t.id.toString()===e.selectedAudio.id.toString()}))}}]),n}(Ds),Bs=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"audio_selector"}},{key:"optionName",get:function(){return"audio"}},{key:"title",get:function(){return"&Aacute;udio"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de áudio</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return this.core.options.defaultAudio||Ts}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&this.listenToOnce(this.playback,xe.PLAYBACK_READY,this.onPlaybackReady)}},{key:"onPlaybackReady",value:function(){this.listenToOnce(this.playback.playback,xe.PLAYBACK_LOADEDMETADATA,this.setup)}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this;this.availableOptions=[];var t=this.playback.innerPlaybackName;if(t){if(this.selector&&this.stopListening(this.selector),"dash_shaka_playback"===t)this.selector=new Ps(this.playback);else if("hls"===t)this.selector=new Ms(this.playback);else{if(!["html5","html5_video","hls_fairplay_playback"].includes(t))return void Re.info(this.name,"could not setup audio selector");this.selector=new Ns(this.playback)}this.listenTo(this.selector,Gn.WM_AUDIOSELECTOR_READY,this.onSelectorReady),this.listenTo(this.selector,Gn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.selector,Gn.WM_AUDIO_AVAILABLE,(function(t){e.container.trigger(Gn.WM_AUDIO_AVAILABLE,t)})),this.selector.setup()}else Re.info(this.name,"should not setup audio selector")}},{key:"onSelectorReady",value:function(){this.availableOptions=this.selector.availableOptions,this.orderAudioTracks(),this.trigger(Gn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"orderAudioTracks",value:function(){var e=this.availableOptions.filter((function(e){return e.keys.includes("por")})),t=this.availableOptions.filter((function(e){return!e.keys.includes("por")}));e=e.sort((function(e,t){return e.role.localeCompare(t.role)})),t=t.sort((function(e,t){return e.label.localeCompare(t.label)})),this.availableOptions=[].concat(E(e),E(t))}},{key:"playbackUpdate",value:function(e){this.selector.audioSwitch(e)}},{key:"onAudioChanged",value:function(e){this.container.trigger(Gn.WM_AUDIO_CHANGED,e)}},{key:"getCurrentOption",value:function(){return this.selector.getCurrentOption()}}]),n}(ps),Fs=".settings__menu",Us=".settings__options",Vs=".settings__back-button",Hs=".settings__header",js=".settings__back-button__title",Ks="settings__title-option",Gs="settings__box--options-rendered",Ws=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).hideSettingsBoxHandler=function(e){e instanceof KeyboardEvent&&"Escape"!==e.key||i.hideSettingsBox()},i}return c(n,[{key:"name",get:function(){return"settings"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ge('<div role="menu" class="settings__box settings__box--hidden" data-controls>\n  <button type="button" class="settings__back-button settings__back-button--hidden">\n    <span class="settings__back-icon">\n      <%= backIcon %>\n      <span class="visually-hidden">Voltar para Seleção de Áudio e Legenda</span>\n    </span>\n    <span class="settings__back-button__title settings__title"></span>\n  </button>\n  <div class="settings__header">\n    <span class="settings__title">Configurações</span>\n    <button type="button" class="settings__close settings__close--hidden"><%= closeIcon %></button>\n  </div>\n  <div class="settings__body">\n    <div class="settings__menu">\n      <% for (var i = 0; i < selectors.length; i++) { %>\n        <button type="button" class="settings__menu-item" data-selector-name="<%= selectors[i].name %>" role="menuitem" aria-expanded="false">\n          <span class="settings__menu-item-option">\n            <span class="settings__menu-item-icon" aria-hidden="true"><%= selectors[i].icon %></span>\n            <span class="settings__menu-item-title"><%= selectors[i].title %></span>\n          </span>\n          <span class="settings__menu-item-selected">\n            <div class="settings__menu-item-label">\n              <span class="settings__menu-item-label-language"><%= selectors[i].selected.language %></span>\n              <span class="settings__menu-item-label-role"><%= selectors[i].selected.role %></span>\n            </div>\n            <span class="settings__menu-item-arrow-icon"><%= arrowIcon %></span>\n          </span>\n        </button>\n      <% } %>\n    </div>\n    <div class="settings__options settings__options--hidden"></div>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"settings","data-settings":""}}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"events",get:function(){return{click:"toggleSettingsBox"}}},{key:"selectors",get:function(){return this._selectors=this._selectors||[new Bs(this.core),new ks(this.core)],this._selectors}},{key:"availableSelectors",get:function(){return this.selectors.filter((function(e){return e.shouldRender()}))}},{key:"getExternalInterface",value:function(){return{getSelectedSettings:this.getSelectedSettings,getDefaultSettings:this.getDefaultSettings}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.mediaControl,xe.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,xe.MEDIACONTROL_HIDE,this.onMediaControlhide),this.selectors.forEach((function(t){e.listenTo(t,Gn.WM_SETTINGS_OPTIONS_CHANGED,e.render)}))}},{key:"onMediaControlhide",value:function(){if(!this.mediaControl.keepVisible&&this.isSettingsBoxVisible){this.$settingsBox.remove();var e=this.mediaControl.$modal;e&&e.removeClass("settings__modal"),this.resetSettings(),this.triggerDidHideModalElement()}}},{key:"bindMenuClickEvents",value:function(){this.unbindMenuClickEvents(),this.$settingsMenuitem=this.$settingsBox.find(".settings__menu-item"),this.$settingsMenuitem.on("click",this.clickMenu.bind(this))}},{key:"unbindMenuClickEvents",value:function(){this.$settingsMenuitem&&this.$settingsMenuitem.off("click")}},{key:"bindSettingsEvents",value:function(){var e=this;this.unbindSettingsEvents(),this.$settingsOptionsTitle=this.$settingsBox.find(".settings__options-title"),this.$settingsBox.on("click",(function(e){return e.stopPropagation()})),this.bindMenuClickEvents(),di((function(){$(document).one("click",e.hideSettingsBoxHandler),$(document).on("keyup",e.hideSettingsBoxHandler),e.listenTo(e.mediaControl,Gn.MEDIACONTROL_ITEMCLICKED,e.hideSettingsBoxHandler)}))}},{key:"unbindSettingsEvents",value:function(){this.$settingsOptionsTitle&&this.$settingsOptionsTitle.off("click"),this.$settingsClose&&this.$settingsClose.off("click"),$(document).off("click",this.hideSettingsBoxHandler),$(document).off("keyup",this.hideSettingsBoxHandler),this.stopListening(this.mediaControl,Gn.MEDIACONTROL_ITEMCLICKED,this.hideSettingsBoxHandler)}},{key:"onContainerChanged",value:function(){this.resetSettings(),this.render()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(this.settingsFullScreenEnabled))}},{key:"updateSettingsFullScreenState",value:function(e){this.settingsFullScreenEnabled=this.currentWidth<540,this.isSettingsBoxVisible&&e!==this.settingsFullScreenEnabled&&(this.settingsFullScreenEnabled?this.showSettingsFullScreen():this.hideSettingsFullScreen())}},{key:"getPanelBetweenHeight",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__between");return e&&e.height()}},{key:"getSettingBoxHeaderHeight",value:function(){var e=this.mediaControl.$modal.find(".settings__back-button");return e&&e.height()}},{key:"updateSettingsBoxMaxHeight",value:function(){if(this.isSettingsBoxVisible){var e=this.getPanelBetweenHeight(),t=this.getSettingBoxHeaderHeight();if(e>=0&&t>=0){var n=e-t;this.mediaControl.$modal.find(".settings__body").css({maxHeight:n})}}}},{key:"clickMenu",value:function(e){e.stopPropagation();var t=$(e.target).data("selector-name"),n=this.selectors.find((function(e){return e.name===t}));this.fromMenuToOptions(),this.renderOptions(n),this.isKeyboardAction(e)&&n.$el.find(".settings__options-item--active").focus()}},{key:"renderOptions",value:function(e){this.$settingsBox.find(Us).html(e.render().el),this.$settingsBox.find(js).html(e.title).attr("aria-hidden",!0).addClass(Ks),this.$settingsBox.find(".settings__back-button").on("click",this.fromOptionsToMenu.bind(this))}},{key:"fromMenuToOptions",value:function(){this.$settingsBox.addClass(Gs),this.$settingsBox.find(Fs).addClass("settings__menu--hidden"),this.$settingsBox.find(Hs).addClass("settings__header--hidden"),this.$settingsBox.find(Us).removeClass("settings__options--hidden"),this.$settingsBox.find(Vs).removeClass("settings__back-button--hidden"),this.updateSettingsBoxMaxHeight()}},{key:"fromOptionsToMenu",value:function(e){e&&e.stopPropagation(),this.$settingsBox.removeClass(Gs),this.$settingsBox.find(Fs).removeClass("settings__menu--hidden"),this.$settingsBox.find(Hs).removeClass("settings__header--hidden"),this.$settingsBox.find(Us).addClass("settings__options--hidden"),this.$settingsBox.find(Vs).addClass("settings__back-button--hidden"),this.$settingsBox.find(js).html("Configurações").attr("aria-hidden",!1).removeClass(Ks),this.updateSettingsBoxMaxHeight(),this.updateAllSelectors()}},{key:"updateButtonAttrs",value:function(e){this.$el.find(".settings__button").attr("aria-expanded",e)}},{key:"isKeyboardAction",value:function(e){return 0===(null==e?void 0:e.detail)}},{key:"toggleSettingsBox",value:function(e){e.stopPropagation(),this.isSettingsBoxVisible?this.hideSettingsBox():this.showSettingsBox(e)}},{key:"showSettingsBox",value:function(e){var t=this,n=this.template({selectors:this.availableSelectors,arrowIcon:hs,backIcon:io,closeIcon:as});this.triggerWillShowModalElement(),this.settingsFullScreenEnabled||(this.$settingsBox=$(n),this.$el.append(this.$settingsBox),this.updateButtonAttrs(!0),di((function(){return t.$settingsBox.removeClass("settings__box--hidden")}))),this.mediaControl.$modal.addClass("settings__modal"),this.mediaControl.trigger(Gn.WM_SETTINGS_SHOW),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_SHOW,"<div/>"),this.isSettingsBoxVisible=!0,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(!1),this.bindSettingsEvents(),this.mediaControl.setKeepVisible(),this.isKeyboardAction(e)&&this.el.querySelector(".settings__menu-item").focus()}},{key:"updateAllSelectors",value:function(){var e=this;this.availableSelectors.forEach((function(t){e.updateSelectorValue(t)}))}},{key:"updateSelectorValue",value:function(e){var t,n,i="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-language"),r="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-role"),a=null===(t=this.$settingsBox)||void 0===t?void 0:t.find(i),o=null===(n=this.$settingsBox)||void 0===n?void 0:n.find(r);null==a||a.html(e.selected.language),null==o||o.html(e.selected.role),this.bindMenuClickEvents()}},{key:"showSettingsFullScreen",value:function(){var e=this;if(this.isSettingsBoxVisible){this.$settingsBox&&this.$settingsBox.remove();var t=this.template({selectors:this.availableSelectors,arrowIcon:hs,backIcon:io,closeIcon:as});this.mediaControl.updatePanelsVisibility({hide:!0}),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_SHOW,t),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause(),this.$settingsBox=this.mediaControl.$modal.find(".settings__box"),this.$settingsBox.addClass("settings__fullscreen"),this.bindSettingsEvents(),di((function(){e.$settingsBox.removeClass("settings__box--hidden"),e.$settingsClose=e.$settingsBox.find(".settings__close"),e.$settingsClose&&e.$settingsClose.removeClass("settings__close--hidden"),e.$settingsClose&&e.$settingsClose.on("click",e.hideSettingsBox.bind(e))}))}}},{key:"hideSettingsBox",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSettingsBoxVisible&&(this.$settingsBox.addClass("settings__box--hidden"),this.updateButtonAttrs(!1),this.$settingsBox.one("transitionend",(function(){return e.$settingsBox.remove()})),this.unbindSettingsEvents(),this.resetSettings(),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_HIDE,t),this.mediaControl.trigger(Gn.WM_SETTINGS_HIDE),this.mediaControl.resetKeepVisible(),this.triggerDidHideModalElement(),this.resetSettings(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"hideSettingsFullScreen",value:function(){this.mediaControl.updatePanelsVisibility({hide:!1}),this.showSettingsBox()}},{key:"resetSettings",value:function(){this.isSettingsBoxVisible=!1}},{key:"getSelectedSettings",value:function(){var e={};return this.availableSelectors.forEach((function(t){e[t.optionName]=t.getCurrentOption()})),e}},{key:"getDefaultSettings",value:function(){var e={};return this.selectors.forEach((function(t){e[t.optionName]=t.defaultOption})),e}},{key:"shouldRender",value:function(){return this.availableSelectors.length>0&&"ad"!==this.core.getPlaybackType()}},{key:"render",value:function(){if(!this.isSettingsBoxVisible){this.$el.html("");var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 {\n  font-family: "Opensans", sans-serif;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .settings__box {\n  opacity: 0.3;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .media-control-panel__modal {\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-option, .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-selected {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item {\n  padding: 8px 32px 8px 60px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item--active {\n  padding-left: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .settings .settings__box--hidden {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal.settings__modal {\n  z-index: 998;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .settings__box, .clappr-player#wp3-player-0 .media-control.w480 .settings__box, .clappr-player#wp3-player-0 .media-control.w540 .settings__box {\n  background-color: transparent;\n}\n.clappr-player#wp3-player-0 .settings {\n  position: relative;\n  cursor: pointer;\n  line-height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__button {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .settings__box {\n  position: absolute;\n  right: 12px;\n  bottom: 64px;\n  cursor: default;\n  border-radius: 8px;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 998;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  will-change: opacity;\n}\n.clappr-player#wp3-player-0 .settings__box--options-rendered .settings__title {\n  padding-right: 32px;\n}\n.clappr-player#wp3-player-0 .settings__header {\n  display: none;\n}\n.clappr-player#wp3-player-0 .settings__back-button {\n  display: flex;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  background: none;\n  align-items: center;\n  flex-shrink: 0;\n  cursor: pointer;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__back-button--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .settings__body {\n  flex-grow: 2;\n  box-sizing: content-box;\n  padding: 12px 0;\n  align-items: center;\n  max-height: 91px;\n  overflow: auto;\n}\n.clappr-player#wp3-player-0 .settings__menu, .clappr-player#wp3-player-0 .settings__options, .clappr-player#wp3-player-0 .settings__options-wrapper, .clappr-player#wp3-player-0 .settings__options-menu {\n  max-height: inherit;\n}\n.clappr-player#wp3-player-0 .settings__title {\n  display: flex;\n  padding: 12px;\n  align-items: center;\n  opacity: 0.5;\n  letter-spacing: -0.5;\n  font-size: 15px;\n  line-height: 1;\n  color: #ffffff;\n  text-transform: capitalize;\n}\n.clappr-player#wp3-player-0 .settings__title-option {\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .settings__close {\n  display: none;\n  box-sizing: content-box;\n  width: 24px;\n  height: 24px;\n  padding: 12px;\n  cursor: pointer;\n  border: 0;\n  background: none;\n}\n.clappr-player#wp3-player-0 .settings__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__separator {\n  display: block;\n  width: 100%;\n  height: 1px;\n  border: 0;\n  background-color: #666;\n  opacity: 0.4;\n  margin: 12px 0;\n}\n.clappr-player#wp3-player-0 .settings__menu {\n  list-style-type: none;\n  background: none;\n  padding: 0;\n  margin: 0;\n  height: auto;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu > li {\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: space-between;\n  align-self: stretch;\n  position: static;\n  line-height: 1.14;\n  padding: 0;\n  margin: 0;\n  background: none;\n  border: 0;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-language, .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #888a89;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-language {\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-role {\n  font-size: 13px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-option {\n  padding: 4px 0 4px 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-selected {\n  padding: 4px 16px 4px 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item:hover {\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-option {\n  display: flex;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-title {\n  display: inline;\n  pointer-events: none;\n  text-transform: capitalize;\n  font-size: 14px;\n  line-height: 1.14;\n  color: #ffffff;\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-selected {\n  display: flex;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-arrow-icon {\n  width: 24px;\n  height: 24px;\n  margin-left: 8px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-arrow-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-value {\n  font-size: 14px;\n  color: #ffffff;\n  opacity: 0.5;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-title, .clappr-player#wp3-player-0 .settings__menu-item-value {\n  height: 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu--hidden {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .settings__back-icon {\n  display: flex;\n  cursor: pointer;\n  width: 24px;\n  height: 24px;\n  padding: 12px;\n  margin-right: 4px;\n  box-sizing: content-box;\n  border: 0;\n  background: none;\n}\n.clappr-player#wp3-player-0 .settings__back-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options {\n  display: flex;\n  cursor: pointer;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options-wrapper {\n  margin: 0 auto;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options-header {\n  display: flex;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .settings__options-title {\n  display: flex;\n  cursor: pointer;\n  opacity: 0.7;\n  color: #ffffff;\n  text-transform: capitalize;\n  text-align: left;\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .settings__options-menu {\n  list-style-type: none;\n  background: none;\n  padding: 0;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-item {\n  display: flex;\n  align-items: center;\n  box-sizing: content-box;\n  height: 24px;\n  padding: 6px 32px 6px 56px;\n  background: none;\n  font-weight: 400;\n  line-height: 1.14;\n  color: #ffffff;\n  opacity: 1;\n  border: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-item::before {\n  content: "";\n}\n.clappr-player#wp3-player-0 .settings__options-item-label {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-language, .clappr-player#wp3-player-0 .settings__options-item-label-role {\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-language {\n  font-size: 15px;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-role {\n  font-size: 13px;\n}\n.clappr-player#wp3-player-0 .settings__options-item--active {\n  margin-left: 0;\n  font-weight: 700;\n  opacity: 1;\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-active-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  padding: 0 16px;\n  box-sizing: content-box;\n}\n.clappr-player#wp3-player-0 .settings__options-active-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options--hidden {\n  display: none !important;\n}',{playerId:this.core.options.playerId}),t=Kn.getStyleFrom(".clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-radius: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__body {\n  max-height: calc(100% - 57px) !important;\n  max-width: 336px;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  flex-direction: column;\n  max-height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-title {\n  align-self: center;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-value {\n  line-height: 1.14;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options {\n  max-height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-wrapper {\n  margin-left: 20%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-title {\n  height: 24px;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-item {\n  padding-right: 88px;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__close {\n  display: flex;\n}",{playerId:this.core.options.playerId});if(this.$el.append(e[0]).append(t[0]),this.shouldRender()){this.$el.removeClass("media-control-element--hidden"),this.$el.attr("style","");var n=$('<button type="button" aria-haspopup="true" aria-expanded="false" class="settings__button media-control-button"></button>');n.append('<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="#EEEEEE"/>\n<mask id="mask0_6_301" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="3" width="21" height="20">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="white"/>\n</mask>\n<g mask="url(#mask0_6_301)">\n</g>\n</svg>\n<span class="visually-hidden">Opções de áudio e legenda</span>'),this.$el.append(n)}else this.$el.addClass("media-control-element--hidden");return this}}}]),n}(Tr),Ys=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).supportedTypes={vod:{thumb:function(e){return i.updateThumbForVod(e)},text:function(e){return i.thumbTextForVod(e)}},live:{thumb:function(e){return i.updateThumbForLive(e)},text:function(e){return i.thumbTextForLive(e)}}},i}return c(n,[{key:"name",get:function(){return"thumb-preview"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"seekbar",get:function(){return this._seekbar||(this._seekbar=this.core.getPlugin("seekbar"))}},{key:"template",get:function(){return Ge('<div class="thumb-preview__thumb"></div>\n<div class="thumb-preview__position"></div>\n')}},{key:"attributes",get:function(){return{class:"thumb-preview"}}},{key:"thumbHost",get:function(){return this.options._env.name,"".concat(this.options._env.protocol,"://live.video.globo.com/thumbs/")}},{key:"bindEvents",value:function(){this.mediaControl&&(this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.show),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.calculatePosition),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hide),this.listenTo(this.mediaControl,xe.MEDIACONTROL_HIDE,this.hide),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this.checkOutline),this.trigger("plugin:thumbpreview:ready"),this.bindContainerEvents())}},{key:"bindContainerEvents",value:function(){this.mediaControl.container&&(this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.container.playback&&this.stopListening(this.container.playback),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container.playback,Gn.WM_RESOURCE_SELECTED,this.onResourceSelected))}},{key:"checkOutline",value:function(){ke.Fullscreen.fullscreenElement()&&ne.isIE11?this.$el.find(".thumb-preview__thumb").addClass("thumb-preview__thumb--no-outline"):this.$el.find(".thumb-preview__thumb").removeClass("thumb-preview__thumb--no-outline")}},{key:"onResourceSelected",value:function(e){this.thumbUrl=e.selectedResource&&e.selectedResource.thumbUrl}},{key:"updateThumbForVod",value:function(e){if(this.lastTimestamp!==e)if(this.lastTimestamp=e,this.thumbUrl){var t=Math.floor(e/60),n=Math.floor(e%60/5),i=this.getThumbUrlForVod(t);this.$el.css({height:this.thumbSize.height,width:this.thumbSize.width}),this.$el.find(".thumb-preview__thumb").css({"background-image":"url(".concat(i,")"),"background-position":"center ".concat(n*-this.thumbSize.height,"px")}),this.mediaControl.$el.removeClass("thumb-preview-basic")}else this.mediaControl.$el.addClass("thumb-preview-basic")}},{key:"getThumbUrlForVod",value:function(e){return"".concat(this.thumbUrl,"/x96/tile/").concat(e,".jpg")}},{key:"thumbTextForVod",value:function(e){return e.formattedTime}},{key:"updateThumbForLive",value:function(e){var t=this;this.throttledUpdateThumb||(this.throttledUpdateThumb=No((function(e){var n=Math.floor(Date.now()/1e3),i=t.mediaControl.container.playback.getDuration(),r=10*Math.floor((n-(i-e))/10),a=t.getThumbUrlForLive(r);t.$el.css({height:t.thumbSize.height,width:t.thumbSize.width}),t.$el.find(".thumb-preview__thumb").css({"background-image":"url("+a+")","background-size":"cover"})}),500,!0)),this.mediaControl.container.playback.dvrEnabled&&this.throttledUpdateThumb(e)}},{key:"getThumbUrlForLive",value:function(e){var t=this.core.getCurrentPlayback().video.transmission.signal;return"".concat(this.thumbHost+t,".jpg?width=172&height=97&utc=").concat(e)}},{key:"thumbTextForLive",value:function(e){var t=e.timestamp,n=this.mediaControl.container.playback.getDuration()-t;return"Há ".concat(ke.formatTime(n))}},{key:"show",value:function(e){this.$el.removeClass("thumb-preview--hidden"),this.canShow(e)?(this.core.trigger(Gn.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.css({"z-index":997}),this.$el.removeClass("thumb-preview--hidden")):this.hide()}},{key:"canShow",value:function(){return this.mediaControl.container.playback.settings.seekEnabled&&Object.keys(this.supportedTypes).includes(this.playbackType)}},{key:"hide",value:function(){this.$el.addClass("thumb-preview--hidden"),this.core.trigger(Gn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"settingsUpdate",value:function(){this.playbackType=this.mediaControl.container.getPlaybackType(),this.thumbSize={width:170,height:96}}},{key:"containerChanged",value:function(){var e=this,t=this.core.getPlugin("seek_time");t.render=function(){return e.render()},t.stopListening(this.mediaControl.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),t.update=function(t){return e.update(t)},t.listenTo(this.mediaControl.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),this.bindContainerEvents(),this.settingsUpdate(),this.trigger("plugin:thumbpreview:ready")}},{key:"render",value:function(){var e=this.core.getPlugin("seek_time");if(this.mediaControl&&e){this.$el.html(this.template());var t=Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.settings-modal--visible .thumb-preview {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.touch .thumb-preview {\n  bottom: 52px;\n}\n.clappr-player#wp3-player-0 .thumb-preview {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  bottom: 44px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .thumb-preview--hidden {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .thumb-preview__thumb {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.75);\n  border-radius: 2px;\n  outline: 1px solid transparent;\n  background-repeat: no-repeat;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .thumb-preview__thumb--no-outline {\n  outline: 0 !important;\n}\n.clappr-player#wp3-player-0 .thumb-preview__position {\n  padding: 2px 8px 3px;\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  color: #fff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  border-radius: 2px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  z-index: 100;\n  align-self: flex-end;\n}\n.clappr-player#wp3-player-0 .w425 .thumb-preview,\n.clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: auto;\n  height: 16px;\n}\n.clappr-player#wp3-player-0 .w425 .thumb-preview__position,\n.clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview__position {\n  display: inline-block;\n  overflow: hidden;\n  position: initial;\n  padding: 0 6px;\n  width: auto;\n  height: auto;\n  font-size: 10px;\n  line-height: 16px;\n}',{playerId:this.core.options.playerId});this.$el.append(t[0]),e.setElement(this.el),this.seekbar.$seekBarContainer.append(this.el),this.$el.addClass("thumb-preview--hidden")}else this.listenToOnce(this,"plugin:thumbpreview:ready",this.render);this.checkOutline()}},{key:"calculatePosition",value:function(e){var t=e.touches&&e.touches.length>0&&e.touches[e.touches.length-1]||{},n=(e.pageX||t.pageX)-this.seekbar.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))}},{key:"update",value:function(){var e=this.core.getPlugin("seek_time");if(this.hoverPosition&&e.hoveringOverSeekBar){var t=this.hoverPosition*this.core.getCurrentContainer().getDuration(),n=ke.formatTime(t),i=this.seekbar.$seekBarContainer;if(!i.length)return;if(isNaN(t))return;if(Object.keys(this.supportedTypes).includes(this.playbackType)){var r=this.supportedTypes[this.playbackType].thumb,a=this.supportedTypes[this.playbackType].text,o=i.width(),s=this.$el.width()/2,l=this.hoverPosition*o-s,u=o-this.$el.width();l=Math.max(0,Math.min(l,u)),this.$el.css("left",l),this.$el.find(".thumb-preview__position").text(a({timestamp:t,formattedTime:n})),this.core.mediaControl.$el.hasClass("w425")||r(t)}}}},{key:"formatTimeInterval",value:function(e){var t=!1;e*=1e3;var n=(e=parseInt(e/1e3,10))%60,i=(e=parseInt(e/60,10))%60,r=(e=parseInt(e/60,10))%24,a="";return r&&r>0&&(a+=r.toString().slice(-2)+"h",t=!0),i&&i>0&&(a+=i.toString().slice(-2)+"m"),t||(a+=("0"+n).slice(-2)+"s"),a.trim()}},{key:"destroy",value:function(){this._mediaControl=null,A(f(n.prototype),"destroy",this).call(this)}}]),n}(Xe),zs="VERIFIQUE A CLASSIFICAÇÃO INDICATIVA";var qs=function(){function e(t){var n=t.videoInfo,i=t.metadata;l(this,e),this.videoInfo=n,this.metadata=i}return c(e,[{key:"title",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.title)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.title}},{key:"secondaryText",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.secondaryText)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.program}},{key:"secondaryTextWithVerifyContentRating",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.verifyContentRating?zs:this.secondaryText}},{key:"raw",get:function(){return{title:this.title,secondaryText:this.secondaryText,secondaryTextWithVerifyContentRating:this.secondaryTextWithVerifyContentRating,rating:this.rating,ratingLabel:this.ratingLabel}}},{key:"videoRating",get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.contentRating}},{key:"videoRatingDescription",get:function(){return e=this.metadata.contentRatingCriteria,this.metadata.verifyContentRating?zs:e?e.join(", ").split(/\s+/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):"";var e}},{key:"videoRatingType",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.isSelfRated?"self_rated":"default"}},{key:"ratingLabel",get:function(){var e;return function(e,t,n){if(n)return zs;if(e){var i="self_rated"===t?"Autoclassificação":"Classificação",r="L"!==e?"".concat(e," anos"):"Livre";return"".concat(i," etária: ").concat(r)}}(this.videoRating,this.videoRatingType,null===(e=this.metadata)||void 0===e?void 0:e.verifyContentRating)}}]),e}(),$s=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"video_info"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"videoInfoHTMLData",get:function(){return this.videoData=new qs({videoInfo:this.options.videoInfo,metadata:this.metadata}),this.videoData.raw}},{key:"template",get:function(){return Ge('<% if (modalMode === true) { %>\n  <div class="video-info__mobile-container">\n    <div class="video-info__mobile-header">\n      <button class="video-info__close"></button>\n    </div>\n<% } %>\n  <div class="video-info__data">\n    <div class="video-info__data-title">\n      <span class="visually-hidden">Título: </span>\n      <%= title %>\n    </div>\n    <div class="video-info__data-subtitle">\n      <div class="video-info__data-subtitle-rating"><%= rating %></div>\n      <div class="video-info__data-subtitle-program">\n        <span class="visually-hidden">Subtítulo: </span>\n        <%= secondaryTextWithVerifyContentRating %>\n      </div>\n      <span class="visually-hidden"><%= ratingLabel %></span></div>\n    </div>\n  </div>\n  <div class="video-info__status"></div>\n<% if (modalMode === true) { %>\n\n<% } %>\n')}},{key:"buttonTemplate",get:function(){return Ge('<button class="drawer-info-icon media-control-button" data-video-info></button>\n')}},{key:"shouldUseInfoButton",get:function(){return this.playerSize&&this.playerSize.width<=480}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"allStates",get:function(){return"video-info--chromecast video-info--full video-info--inline video-info--ad video-info--live video-info--dvr"}},{key:"displayInlineMode",get:function(){return this.options.videoInfo.inlineEnabled&&this.$el.hasClass("video-info--inline")}},{key:"displayFullScreenMode",get:function(){return this.options.videoInfo.fullscreenEnabled&&this.$el.hasClass("video-info--full")}},{key:"currentState",get:function(){if(!this.container)return null;var e=ne.isChromecast?"chromecast":jn.Fullscreen.isFullscreen()?"full":"inline";this.status=[];var t=this.container.getPlaybackType();return"live"===t&&this.status.push("video-info--live"),this.container.isDvrInUse()&&this.status.push("video-info--dvr"),"ad"===t&&this.status.push("video-info--ad"),"".concat(e," ").concat(this.status.join(" "))}},{key:"events",get:function(){return{"click .drawer-info-icon[data-video-info]":"showModalvideoInfo"}}},{key:"attributes",get:function(){return{class:"video-info","data-video-info":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container&&this.container.playback&&this.stopListening(this.container.playback),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.initialize),this.listenTo(this.container,Gn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Gn.DFP_AD_STARTED,this.updateState),this.listenTo(this.container,Gn.WM_MASTERTOPIP,(function(){return e.$el.addClass("video-info--hidden")})),this.listenTo(this.container.playback,xe.PLAYBACK_PLAY_INTENT,this.updateState),this.container.options.chromeless&&this.disable())}},{key:"initialize",value:function(e){this.metadata=e,this.render()}},{key:"onPlayerResize",value:function(e){this.playerSize=e,this.render()}},{key:"updateState",value:function(){(this.currentState!==this.renderedState||ne.isMobile)&&(this.$el.removeClass(this.allStates),this.$el.addClass("video-info--".concat(this.currentState)),this.displayInlineMode||this.displayFullScreenMode||"ad"===this.container.getPlaybackType()?this.$el.removeClass("video-info--hidden"):this.$el.addClass("video-info--hidden"),this.renderedState=this.currentState)}},{key:"render",value:function(){if(this.container){ne.isChromecast&&(this.$el.remove(),this.container.$el.append(this.el)),this.updateState();var e=i(i({},this.videoInfoHTMLData),{},{modalMode:!1});return!this.currentState.includes("video-info--ad")&&this.$el.html(this.shouldUseInfoButton?this.buttonTemplate():this.template(e)),this.$el.append(Kn.getStyleFrom('.clappr-player#wp3-player-0 .media-control--keep-video-info .media-control-panel__upper {\n  opacity: 1 !important;\n  transform: translateY(0) !important;\n}\n.clappr-player#wp3-player-0 .media-control--keep-video-info .video-info {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info, .clappr-player#wp3-player-0 .media-control.w360 .video-info, .clappr-player#wp3-player-0 .media-control.w480 .video-info {\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full .drawer-info-icon {\n  cursor: pointer;\n  padding: 0px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-container {\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-header {\n  height: 36px;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__data, .clappr-player#wp3-player-0 .media-control.w360 .video-info__data, .clappr-player#wp3-player-0 .media-control.w480 .video-info__data {\n  display: flex;\n  flex-flow: column;\n  flex-grow: 1;\n  justify-content: center;\n  margin: 0;\n  padding: 0 12px 12px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__close, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close {\n  background-color: transparent;\n  border: 0;\n  box-sizing: content-box;\n  padding: 12px;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  right: 0;\n  width: 24px;\n  height: 24px;\n  outline: none;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .video-info {\n  box-sizing: border-box;\n  color: white;\n  pointer-events: none;\n  text-shadow: none;\n  z-index: 996;\n  font-family: "Opensans", sans-serif;\n}\n.clappr-player#wp3-player-0 .video-info__data {\n  height: 24px;\n  text-align: left;\n}\n.clappr-player#wp3-player-0 .video-info__data-title {\n  margin-bottom: 5px;\n  font-size: 18px;\n  line-height: 24px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating {\n  display: flex;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating svg {\n  height: 16px;\n  width: 16px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating:empty {\n  margin-right: 0px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n  font-size: 14px;\n  line-height: 18px;\n}\n.clappr-player#wp3-player-0 .video-info__data-title, .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  letter-spacing: 0;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .video-info__status {\n  text-align: left;\n  font-size: 16px;\n  line-height: 16px;\n}\n.clappr-player#wp3-player-0 .video-info__data, .clappr-player#wp3-player-0 .video-info__status {\n  transition: all ease 0.2s;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast {\n  position: absolute;\n  top: 0;\n  background-color: transparent;\n  transition: opacity ease-in 0.2s;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data {\n  margin: 5vw 0 0 5vw;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-title {\n  font-size: 3.4vh;\n  line-height: 4.4vh;\n  margin-bottom: 8px;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-subtitle-program {\n  font-size: 2.4vh;\n  line-height: 2.6vh;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__data {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__status {\n  font-size: 14px;\n  line-height: normal;\n  color: #ffff93;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__status:after {\n  content: "Publicidade";\n}\n.clappr-player#wp3-player-0 .video-info--hidden {\n  display: none;\n}',{playerId:this.options.playerId})[0]),this.shouldUseInfoButton&&this.$el.find(".drawer-info-icon").html('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Informações da mídia</span>'),this}}},{key:"showModalvideoInfo",value:function(e){var t=this,n=i(i({},this.videoInfoHTMLData),{},{modalMode:!0});e&&e.stopPropagation(),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_SHOW,this.template(n),{hidePanels:!0}),this.mediaControl.$el.addClass("media-control--keep-video-info");var r=this.modal.find(".video-info__mobile-container"),a=this.modal.find(".video-info__close");r&&r.on("click",(function(e){e&&e.stopPropagation(),t.hideModal()})),a&&a.append(as),this.mediaControl.setKeepVisible()}},{key:"hideModal",value:function(){this.modal&&this.modal.find(".video-info__mobile-container").off("click"),this.mediaControl.trigger(Gn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--keep-video-info")}}]),n}(Tr),Xs=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).src=e.src,i.currentMedia=e.currentMedia,i.mediaControl=e.mediaControl,i.currentMedia.addUpdateListener((function(){return i.onMediaStatusUpdate()})),i.settings=e.settings,i}return c(n,[{key:"name",get:function(){return"chromecast_playback"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<div class="chromecast-playback-background"></div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-playback"}}},{key:"isReady",get:function(){return!0}},{key:"render",value:function(){var e=this.template();this.$el.html(e),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}},{key:"configure",value:function(e){var t=this;Re.debug(this.name,"configure",e),A(f(n.prototype),"configure",this).call(this,e),e.currentMedia&&(this.currentMedia=e.currentMedia,this.previousMediaState=void 0,this.currentMedia.addUpdateListener((function(){return t.onMediaStatusUpdate()})),clearTimeout(this.idleTimeout),this.onMediaStatusUpdate())}},{key:"play",value:function(){this.currentMedia.play()}},{key:"pause",value:function(){this.stopTimer(),this.currentMedia.pause()}},{key:"stop",value:function(){this.stopTimer(),this.currentMedia.stop()}},{key:"volume",value:function(e){var t=this,n=e/100,i=new chrome.cast.Volume(n,!1),r=new chrome.cast.media.VolumeRequest(i);this.currentMedia.setVolume(r,(function(){return Re.info(t.name,"volume set")}),(function(e){return Re.warn(t.name,e)}))}},{key:"seek",value:function(e){var t=this;this.stopTimer();var n=new chrome.cast.media.SeekRequest;n.currentTime=e,this.currentMedia.seek(n,(function(){return t.startTimer()}),(function(){return Re.warn(t.name,"seek failed")}))}},{key:"getVolume",value:function(){}},{key:"seekPercentage",value:function(e){if(e>=0&&e<=100){var t=this.getDuration();this.seek(e*t/100)}}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.updateMediaControl()}),100)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getDuration",value:function(){return this.currentMedia.media.duration}},{key:"isPlaying",value:function(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}},{key:"getPlaybackType",value:function(){return"LIVE"==this.currentMedia.streamType?Je.LIVE:Je.VOD}},{key:"onMediaStatusUpdate",value:function(){var e=this,t=this.currentMedia.loadingItemId||this.currentMedia.preloadedItemId;Re.debug(this.name,"onMediaStatusUpdate",this.currentMedia.playerState,t),this.isPlaying()&&!this.timer&&this.startTimer(),this.updateBufferState(),this.idleTimeout&&"IDLE"!==this.currentMedia.playerState&&clearTimeout(this.idleTimeout),"PLAYING"===this.currentMedia.playerState?(this.trigger(xe.PLAYBACK_PLAY,this.name),this.trigger(xe.PLAYBACK_MEDIACONTROL_ENABLE,this.name)):t||"IDLE"!==this.currentMedia.playerState||"PLAYING"!==this.previousMediaState||"FINISHED"!==this.currentMedia.idleReason?"IDLE"===this.currentMedia.playerState&&"FINISHED"===this.currentMedia.idleReason&&this.trigger(xe.PLAYBACK_MEDIACONTROL_DISABLE,this.name):this.idleTimeout=setTimeout((function(){return e.trigger(xe.PLAYBACK_ENDED,e.name)}),1e3),this.previousMediaState=this.currentMedia.playerState}},{key:"updateBufferState",value:function(){"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(xe.PLAYBACK_BUFFERING,this.name)):this.isBuffering&&(this.isBuffering=!1,this.trigger(xe.PLAYBACK_BUFFERFULL,this.name))}},{key:"updateMediaControl",value:function(){if(this.currentMedia.media){var e=this.currentMedia.getEstimatedTime(),t=this.currentMedia.media.duration;this.trigger(xe.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),n}(Je),Qs="urn:x-cast:wm.player",Js=0,Zs=1,el={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ogv:"video/ogg","3gp":"video/3gpp"},tl=jn.getCookie,nl="adBreakStarted",il="adBreakEnded",rl="adBreakClipCanSkip",al="adBreakClipEnded",ol=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).contentType="application/video-id",!ne.isiOS&&ne.isChrome&&i.options.appId?(i.appId=i.options.appId,i.deviceState=Js,i.embedScript()):i.disable(),i.subtitlesAvailable=[],i.audiosAvailable=[],i}return c(n,[{key:"version",get:function(){return VERSION}},{key:"name",get:function(){return"chromecast"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"attributes",get:function(){return{class:"chromecast-button media-control-button","data-chromecast":""}}},{key:"events",get:function(){return{click:"click"}}},{key:"options",get:function(){return this.core.options.chromecast||(this.core.options.chromecast={})}},{key:"hasCastLib",get:function(){return window.chrome&&window.chrome.cast}},{key:"isCastAvailable",get:function(){return this.hasCastLib&&window.chrome.cast.isAvailable}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,xe.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,xe.CONTAINER_ENDED,this.sessionStopped),this.listenTo(this.container,xe.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container,Gn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Gn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.container,Gn.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked))}},{key:"onMetadataLoaded",value:function(e){this.providerId=e.providerId}},{key:"onVolumeChanged",value:function(e){var t=this;if(this.session){var n=e/100;this.session.setReceiverVolumeLevel(n,(function(){return Re.info(t.name,"volume set")}),(function(e){return Re.error(t.name,e)}))}}},{key:"onSubtitleChanged",value:function(e){if(this.session){var t={action:"SUBTITLE_CHANGED",payload:this.subtitlesAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(Qs,t)}}},{key:"onAudioChanged",value:function(e){if(this.session){var t={action:"AUDIO_CHANGED",payload:this.audiosAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(Qs,t)}}},{key:"onSkipButtonClicked",value:function(){if(this.isAdPlaying){var e={type:"SKIP_AD",requestId:1,mediaSessionId:this.mediaSession.mediaSessionId};this.sendMessage("urn:x-cast:com.google.cast.media",e)}}},{key:"enable",value:function(){A(f(n.prototype),"enable",this).call(this),this.render(),this.embedScript()}},{key:"embedScript",value:function(){var e=this;if(this.isCastAvailable)di((function(){return e.bootstrapCastApi()}));else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=function(){e.core.trigger(Gn.CHROMECAST_SCRIPT_LOADED),e.bootstrapCastApi()},t.onerror=function(){e.core.trigger(Gn.CHROMECAST_SCRIPT_ERROR,{code:"chromecast-script-error",description:"Chromecast script error.",level:"INFO"})},document.body.appendChild(t)}}},{key:"bootstrapCastApi",value:function(){var e=this;this.isCastAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(t,n){t?(e.core.trigger(Gn.CHROMECAST_API_READY),e.initializeCastApi()):(Re.warn(e.name,"GCastApi error",n),e.core.trigger(Gn.CHROMECAST_API_ERROR,{code:"chromecast-api-error",description:n,level:"INFO"}),e.disable())}}},{key:"initializeCastApi",value:function(){var e=this,t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(n,(function(t){return e.sessionListener(t)}),(function(t){return e.receiverListener(t)}),t);chrome.cast.initialize(i,(function(){e.core.trigger(Gn.CHROMECAST_INITIALIZE_SUCCESS),Re.debug(e.name,"init success")}),(function(){e.core.trigger(Gn.CHROMECAST_INITIALIZE_ERROR,{code:"chromecast-init-error",description:"Chromecast initialize error.",level:"INFO"}),Re.warn(e.name,"init error")}))}},{key:"sessionListener",value:function(e){Re.debug(this.name,"new session id:"+e.sessionId),this.newSession(e)}},{key:"sessionUpdateListener",value:function(){this.session&&(Re.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}},{key:"mediaListener",value:function(){if(Re.debug(this.name,"mediaListener",this.session.media),this.session.media){var e=this.session.media[this.session.media.length-1];this.mediaSession=e,this.playbackProxy&&this.playbackProxy.configure({currentMedia:e})}}},{key:"receiverListener",value:function(e){e===chrome.cast.ReceiverAvailability.AVAILABLE?(this.core.trigger(Gn.CHROMECAST_AVAILABLE),Re.debug(this.name,"receiver found"),this.show()):(this.core.trigger(Gn.CHROMECAST_UNAVAILABLE),Re.debug(this.name,"receiver list empty"),this.hide())}},{key:"launchSuccess",value:function(e){clearInterval(this.connectAnimInterval),this.core.trigger(Gn.CHROMECAST_LAUNCH_SUCCESS),Re.debug(this.name,"launch success - session: "+e.sessionId),this.newSession(e)}},{key:"launchError",value:function(e){var t=this.mediaSession&&this.mediaSession.playerState!==chrome.cast.media.PlayerState.IDLE,n=this.mediaSession&&this.mediaSession.playerState===chrome.cast.media.PlayerState.PLAYING,i=e.code===chrome.cast.ErrorCode.CANCEL;this.core.trigger(Gn.CHROMECAST_LAUNCH_ERROR,e),t&&i||(Re.debug(this.name,"error on launch",e),this.renderDisconnected(),clearInterval(this.connectAnimInterval),(this.isPlayingBeforeConnect||n)&&(this.container.play(),this.container.seek(this.currentTime)))}},{key:"loadMediaSuccess",value:function(e,t){this.core.trigger(Gn.CHROMECAST_MEDIA_LOAD_SUCCESS),Re.debug(this.name,"new media session",t,"(".concat(e,")")),this.originalPlayback=this.core.getCurrentPlayback();var n=Object.assign({},this.originalPlayback.options,{currentMedia:t,mediaControl:this.core.mediaControl,poster:this.container.options.poster,settings:this.originalPlayback.settings});this.src=this.originalPlayback.src,this.playbackProxy=new Xs(n),this.playbackProxy.render(),this.mediaSession=t,this.originalPlayback.$el.hide();var i=this.core.getCurrentContainer();i.$el.append(this.playbackProxy.el),i.stopListening(),i.playback=this.playbackProxy,i.bindEvents(),i.settingsUpdate()}},{key:"loadMediaError",value:function(e){this.core.trigger(Gn.CHROMECAST_MEDIA_LOAD_ERROR,e),Re.warn(this.name,"media error",e)}},{key:"newSession",value:function(e){var t=this;this.session=e,this.deviceState=Zs,this.renderConnected(),this.core.trigger(Gn.DFP_DISABLE),e.addUpdateListener((function(){return t.sessionUpdateListener()})),e.addMediaListener((function(){return t.mediaListener()})),e.addMessageListener(Qs,(function(e,n){return t.wmpMessageListener(e,n)})),this.containerPlay()}},{key:"sessionStopped",value:function(){this.renderDisconnected();var e=this.core.getCurrentContainer(),t=void 0;this.mediaSession&&(t=this.mediaSession.playerState,this.mediaSession=null,this.playbackProxy.$el&&this.playbackProxy.$el.remove(),this.originalPlayback.$el&&this.originalPlayback.$el.show(),e.stopListening(),e.playback=this.originalPlayback,e.bindEvents(),e.settingsUpdate(),this.core.trigger(Gn.DFP_ENABLE)),this.playbackProxy&&((this.playbackProxy.isPlaying()||"PLAYING"===t)&&(e.play(),e.seek(this.currentTime)),this.playbackProxy.stop(),this.playbackProxy=null)}},{key:"sendMessage",value:function(e,t){var n=this;this.session.sendMessage(e,t,(function(e){return n.onMessageSuccess(e)}),(function(e){return n.onMessageFailure(e)}))}},{key:"onMessageSuccess",value:function(e){Re.info(this.name,"message bus: send message success",e)}},{key:"onMessageFailure",value:function(e){Re.error(this.name,"message bus: send message error",e)}},{key:"loadMedia",value:function(){var e=this;if(!this.playback||this.playback.isReady){this.container.pause();var t=this.container.options.src;Re.debug(this.name,"loading... "+t);var n=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime="ad"==this.core.getPlaybackType()?0:this.currentTime||0,this.session.loadMedia(i,(function(t){return e.loadMediaSuccess("loadMedia",t)}),(function(t){return e.loadMediaError(t)}))}else this.listenToOnce(this.playback,xe.PLAYBACK_READY,this.loadMedia)}},{key:"createMediaInfo",value:function(e){var t=n.mimeTypeFor(e),r=this.core.options,a=r.dfp,o=this.getSelectedSettings(),s=a.watchedAds;"ad"===this.core.getPlaybackType()&&(s+=1);var l={token:r.token||this.getTokenFromCookie(),adUnit:a.adUnit,adCustomData:a.adCustomData,adAccountId:a.adAccountId,adCmsId:a.adCmsId,daiCustomData:r.daiCustomData,adPublisherProvidedID:r.adPublisherProvidedID,watchedAds:s,ga:r.ga,defaultSubtitle:o.subtitle,defaultAudio:o.audio,videoInfo:r.videoInfo,enableBingeWatch:r.enableBingeWatch||!1,upa:r.upa,globoId:r.globoId||void 0,horizon:r.horizon||{},jarvis:i({platformId:"web",clientVersion:"1.7.0"},r.jarvis),ga4:r.ga4||{},senderCanSkip:!0,enableFrameAds:r.enableFrameAds||!1,liveStopTime:r.liveStopTime},u=new chrome.cast.media.MediaInfo(e);return u.contentType=this.contentType||t,u.customData=l,u.metadata=this.createMediaMetadata(),u}},{key:"getSelectedSettings",value:function(){var e=this.core.getPlugin("settings"),t=e.getSelectedSettings()||{},n=t.audio,r=t.subtitle;return i(i({},e.getDefaultSettings()||{}),{},{audio:n,subtitle:r})}},{key:"getTokenFromCookie",value:function(){var e=this.providerId?"WMPTOKEN_".concat(this.providerId):"GLBID";return tl(e)}},{key:"createMediaMetadata",value:function(){this.options.media||(this.options.media={});var e=this.options.media.type,t=this.createCastMediaMetadata(e);return t.title=this.options.media.title,t.subtitle=this.options.media.subtitle,t.releaseDate=this.options.media.releaseDate,e===n.TvShow?(t.episode=this.options.media.episode,t.originalAirdate=this.options.media.originalAirdate,t.season=this.options.media.season,t.seriesTitle=this.options.media.seriesTitle):e===n.Movie&&(t.studio=this.options.media.studio),this.options.media.images&&(t.images=this.options.media.images.map((function(e){return new chrome.cast.Image(e)}))),!t.images&&this.core.options.poster&&(t.images=[new chrome.cast.Image(this.core.options.poster)]),t}},{key:"createCastMediaMetadata",value:function(e){switch(e){case n.Movie:return new chrome.cast.media.MovieMediaMetadata;case n.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"click",value:function(){var e=this;if(this.core.trigger(Gn.CHROMECAST_LAUNCH_REQUEST),chrome.cast.requestSession((function(t){return e.launchSuccess(t)}),(function(t){return e.launchError(t)})),!this.session){this.isPlayingBeforeConnect=this.container.isPlaying(),this.container.pause();var t=0;clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval((function(){e.renderConnecting(t),t=(t+1)%3}),600)}}},{key:"containerChanged",value:function(){this.stopListening(),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindEvents(),this.currentTime=0,this.session&&(this.originalPlayback=this.playback)&&this.sessionStopped()}},{key:"containerTimeUpdate",value:function(e){this.currentTime=e.current}},{key:"containerPlay",value:function(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerStatus||(Re.debug(this.name,"load media"),this.currentTime=this.currentTime||0,this.loadMedia())}},{key:"wmpMessageListener",value:function(e,t){if(this.session){var n=JSON.parse(t);this.handleAdBreak(n),this.handleAdBreakClip(n),this.handleMediaTracks(n)}}},{key:"handleAdBreak",value:function(e){this.playbackProxy&&(e.name===nl?(Re.debug(this.name,"ad break started"),this.isAdPlaying=!0,this.playbackProxy.settings.seekEnabled=!1):e.name===il&&(Re.debug(this.name,"ad break ended"),this.isAdPlaying=!1,this.playbackProxy.settings.seekEnabled=!0),this.playbackProxy.trigger(xe.PLAYBACK_SETTINGSUPDATE))}},{key:"handleAdBreakClip",value:function(e){e.name===rl?this.container.trigger(Gn.CHROMECAST_AD_BREAK_CLIP_CAN_SKIP):e.name===al&&this.container.trigger(Gn.CHROMECAST_AD_BREAK_CLIP_ENDED)}},{key:"handleMediaTracks",value:function(e){switch(e.action){case"SUBTITLE_AVAILABLE":this.subtitlesAvailable=e.payload;break;case"AUDIO_AVAILABLE":this.audiosAvailable=e.payload}}},{key:"createCachedElements",value:function(){this.$mediaControl=this.mediaControl&&this.mediaControl.$el,this.$settingsButton=this.$mediaControl.find(".media-control-button[data-settings]")}},{key:"renderOverlay",value:function(){if(this.removeOverlay(),this.createCachedElements(),this.session){var e=this.session&&this.session.receiver&&this.session.receiver.friendlyName;this.core.trigger(Gn.CHROMECAST_MEDIA_WATCHING,e)}}},{key:"renderConnecting",value:function(e){var t=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast0_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-240.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast1_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-272.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast2_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-304.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>'];this.$el.html(t[e]),this.container&&this.container.$el.addClass("cast-connecting"),this.$mediaControl.addClass("media-control-disabled media-control--no-background"),this.mediaControl.setKeepVisible(),this.renderStyle()}},{key:"removeOverlay",value:function(){this.core.trigger(Gn.CHROMECAST_MEDIA_STOP_WATCHING)}},{key:"renderConnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on-a"/>\n        <path id="cast-on-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-on-b" fill="#fff">\n            <use xlink:href="#cast-on-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-on-a"/>\n        <g mask="url(#cast-on-b)">\n            <use fill="#FFF" xlink:href="#cast-on-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Parar de espelhar</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.setKeepVisible(),this.container.$el.removeClass("cast-connecting"),this.container.$el.addClass("cast-enabled"),this.renderStyle(),this.renderOverlay()}},{key:"renderDisconnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="cast-off-a"/>\n        <path id="cast-off-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-off-b" fill="#fff">\n            <use xlink:href="#cast-off-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-off-a"/>\n        <g mask="url(#cast-off-b)">\n            <use fill="#FFF" xlink:href="#cast-off-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhar em outro dispositivo</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.resetKeepVisible(),this.container&&this.container.$el.removeClass("cast-enabled cast-connecting"),this.$mediaControl.removeClass("media-control--no-background"),this.renderStyle(),this.removeOverlay()}},{key:"renderStyle",value:function(){var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 svg #cast, .clappr-player#wp3-player-0 svg #cast-on, .clappr-player#wp3-player-0 svg #Path {\n  fill: #fff;\n}\n.clappr-player#wp3-player-0 .chromecast-playback {\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .chromecast-playback .chromecast-playback-background {\n  background-size: cover;\n}\n.clappr-player#wp3-player-0 .chromecast-playback-background,\n.clappr-player#wp3-player-0 .chromecast-playback-overlay {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator.media-control-element {\n  padding-bottom: 0;\n  padding-top: 0;\n}",{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"render",value:function(){return this.createCachedElements(),this.session?this.renderConnected():this.renderDisconnected(),this.appendToMediaControl(),this}},{key:"appendToMediaControl",value:function(){var e=this.$mediaControl&&this.$mediaControl.find(".media-control-button[data-fullscreen]");e.length>0?$(this.el).insertBefore(e):this.$mediaControl.find(".media-control-center-panel").append(this.el)}}],[{key:"Movie",get:function(){return"movie"}},{key:"TvShow",get:function(){return"tv_show"}},{key:"Generic",get:function(){return"none"}},{key:"version",get:function(){return VERSION}},{key:"mimeTypeFor",value:function(e){var t=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return el[t]?el[t]:e.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}]),n}(Tr),sl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).$el.hide(),i}return c(n,[{key:"name",get:function(){return"chromecast_sender_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return ne.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return"center"}},{key:"overlayTemplate",get:function(){return Ge('<div class="chromecast-playback-overlay">\n  <div class="chromecast-status">\n    <span class="label-watching">Assistindo em</span>\n    <span class="label-device"></span>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-sender-indicator"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Gn.CHROMECAST_MEDIA_WATCHING,this.renderTemplate),this.listenTo(this.core,Gn.CHROMECAST_MEDIA_STOP_WATCHING,this.hideRender)}},{key:"hideRender",value:function(){this.$el.empty(),this.$el.hide()}},{key:"renderStyle",value:function(){var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .thumb-preview-modal--visible .chromecast-sender-indicator {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay {\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n  pointer-events: none;\n  flex-direction: row;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status {\n  position: relative;\n  top: -16px;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-watching,\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n  font-family: "Opensans", sans-serif;\n  font-size: 14px;\n  color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n  font-weight: bold;\n}\n.clappr-player#wp3-player-0 .media-control-panel__between .chromecast-playback-overlay .chromecast-status {\n  top: -36px;\n}',{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"renderTemplate",value:function(e){this.hideRender(),this.renderStyle(),this.$el.append(this.overlayTemplate()),this.$el.show(),e&&this.$el.find(".label-device").html(e)}}]),n}(Tr),ll='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector">\r\n\t<path d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921c-0.722,0-1.351,0.367-1.707,0.916l0,0\r\n\t\tc-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999c0,1.07,0.898,1.939,2.015,1.939\r\n\t\tc0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004c1.113,0,2.016-0.869,2.016-1.939\r\n\t\tC45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',ul='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_">\r\n\t<path d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136c-1.004-0.994-1.004-2.599,0-3.589\r\n\t\tc1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g>\r\n\t\t<path d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',cl='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903c0,1.795,1.141,3.498,2.969,3.498h26.474\r\n\t\tc1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z M23.446,35.267\r\n\t\tc-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',dl='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.7px" height="45.8px" viewBox="0 0 45.7 45.8" enable-background="new 0 0 45.7 45.8" xml:space="preserve">\r\n<g id="Layer_1_1_" display="none">\r\n\t<g id="vector" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M45.3,38.3L45.3,38.3L24.7,5.2l0,0c-0.4-0.6-1-0.9-1.7-0.9c-0.7,0-1.4,0.4-1.7,0.9l0,0\r\n\t\t\tC16,13.6,0.6,38.3,0.6,38.3v0c-0.2,0.3-0.3,0.6-0.3,1c0,1.1,0.9,1.9,2,1.9c0,0,0.1,0,0.1,0l0,0h41.1v0c0,0,0,0,0,0\r\n\t\t\tc1.1,0,2-0.9,2-1.9C45.6,38.9,45.5,38.6,45.3,38.3z M24.2,13.7c1.5,0.5,2.4,1.9,2.2,3.6c-0.2,1.7-0.6,3.4-0.8,5.1\r\n\t\t\tc-0.3,2-0.6,4.1-1,6.2c-1.1,0-2.1,0-3.2,0c-0.3-2.2-0.7-4.3-1-6.4c-0.2-1.4-0.5-2.8-0.8-4.3C19.1,15,21.4,12.8,24.2,13.7z\r\n\t\t\t M23,37.2c-1.9,0-3.5-1.5-3.4-3.3c0-0.7,0.3-1.4,0.7-1.9c0.6-0.8,1.7-1.3,2.8-1.3c1.9,0,3.5,1.5,3.4,3.3\r\n\t\t\tC26.4,35.7,24.9,37.2,23,37.2z"/>\r\n\t</g>\r\n\t<g id="vector_2_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.9,44.7c-1,1-2.7,1-3.7,0L1,4.5c-1-1-1-2.7,0-3.7c1-1,2.7-1,3.7,0L44.9,41C45.9,42,45.9,43.7,44.9,44.7\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M24.3,6.4c0.8,0,1.6,0.4,1.6,1.2c0,1.5,0,3,0,6c1.2,0,1.6,0,4.6,0c0-3,0-5.6,0-7.5c0-2.5-1.5-3.3-3.9-3.3\r\n\t\t\t\tc-4.1,0-8.5,0-12.6,0l3.6,3.6C19.8,6.4,22,6.4,24.3,6.4z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M30.4,15.5C30.4,15.5,30.4,15.5,30.4,15.5c0,0,0.6,0,1.4,0c0.8,0,0.8,0.3,0.8,1.1c0,1.7-0.1,3.3-0.1,5\r\n\t\t\t\tl3.6,3.6c0-3.3,0-6.7,0-10c0-2.5-0.7-3.3-3.1-3.3c-1.3,0-2.6,0-3.5,0l0,0c-1.4,0-2.7,0-4.1,0c-0.7,0-1.6,0-2.6,0.1l3.7,3.5\r\n\t\t\t\tC27.8,15.4,28.4,15.5,30.4,15.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M29.1,37.3c-0.9,0-1.8,0-2.7,0c-1.6,0-2.9,0-4.6,0c-1.7,0-1.7-0.8-1.7-0.8c0-5,0.2-4.5,0.2-6.6l-3.9-4.7\r\n\t\t\t\tc0,1.2,0.1,2.1,0.1,3.3c-0.8,0-1.8,0.1-2.3,0.1c-0.8,0-1-0.6-1-1.4c0-1.9,0-3.9,0-5.8L9.7,18c0,0.5,0,0.8,0,0.8\r\n\t\t\t\tc0,3.8,0,7.8,0,11.9c0,2.5,0.5,3.1,3,3.1c0.9,0,2.8-0.1,3.9-0.1c0.1,2.6,0.1,4.7,0.1,5.9c0,2.2,0.6,3,2.4,3.2c0.3,0,0.5,0,0.9,0\r\n\t\t\t\tc4.3,0,8.7,0,13,0c0.5,0,1-0.1,1.4-0.2L29.1,37.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="vector_4_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M40.3,3.6H8.4c-2.3,0-5-0.3-5,2.1v30.2c0,2.4,2.7,6.7,5,6.7h31.9c2.3,0,1.1-4.4,1.1-6.7V5.7\r\n\t\t\tC41.4,3.3,42.6,3.6,40.3,3.6z M32.4,12.6c0,0,0.7,0.1,0.4,0.1c-1.4,0.2-1.9,0.7-2.9,1.8c-0.9,1-1.5,5.1-1.5,5.1c1.3,0,3,0,3,0\r\n\t\t\ts0,1.9,0,3.4c0,0.3,0.5,0.3,0.2,0.3c-1.9,0-3.5,0-5.3,0c-0.2,0-2,4.2-3.3,6c-1.6,2.3-3.8,3.7-6.5,4.3c-1,0.2-1.9,0.3-2.9,0.3\r\n\t\t\tc-0.2,0-0.2,0-0.2-0.2c0-1.6,0-3.1,0-4.7c0-0.2-0.6-0.3-0.3-0.3c-0.1,0-0.8,0-0.8,0c0,0,0,0,0,0.1c0,0,0.8,0,1,0\r\n\t\t\tc1.6-0.1,3.3-0.7,4.4-1.8c0.4-0.4,1.8-2.3,2.1-2.8c0.2-0.3,1.6-3.4,1.9-4.1c0.3-0.8,0.6-1.6,0.9-2.4c0.1-0.3,0.8-1.8,0.9-2\r\n\t\t\tc0.4-0.8,0.8-1.5,1.2-2.3c0.2-0.4,0.5-0.8,0.8-1.2c1.6-2.2,3.4-3.7,5.9-4.4c0.9-0.2,0.8-0.6,0.8-0.6C32.4,10.5,32.4,11,32.4,12.6z\r\n\t\t\t"/>\r\n\t</g>\r\n\t<g id="vector_5_" display="inline">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path fill="#CCCBCB" d="M23,5.2c-6.9,0-12.5,4.2-12.5,13.3v11.2c0,5.5,4.3,8.7,9.3,9.7c-2.8-1.6-5-5.1-5-10.2v-7.4\r\n\t\t\t\t\tc0-6.8,3.7-12.2,8.2-12.2c4.5,0,8.2,5.5,8.2,12.2v7.4c0,5.1-1.7,8.4-3.9,10c4.5-1.2,8.2-4.3,8.2-9.4V18.5\r\n\t\t\t\t\tC35.4,9.3,29.8,5.2,23,5.2z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path fill="#CCCBCB" d="M36.6,14.6H10.1c-1.8,0-3-0.7-3,1.1v11.9c0,1.8,1.1,3.5,3,3.5h26.5c1.8,0,2.2-1.7,2.2-3.5V15.7\r\n\t\t\tC38.8,13.9,38.4,14.6,36.6,14.6z M23.4,26.3c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C27.5,24.5,25.7,26.3,23.4,26.3z"/>\r\n\t</g>\r\n\t<g id="vector_3_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M34.1,35.6c-0.3,0-0.6,0-0.9,0c-0.3-2.5,0.4-5-0.6-7.4c-1-2.3-2.6-4.1-4.3-5.8c1.7-1.7,3.3-3.4,4.3-5.7\r\n\t\t\tc1-2.3,0.4-4.8,0.7-7.3c0.3,0,0.6,0,0.9,0c0.8-0.1,1.3-0.6,1.4-1.4c0-0.8-0.5-1.3-1.4-1.3c-0.1,0-22.1,0-22.3,0\r\n\t\t\tc-0.8,0.1-1.2,0.6-1.2,1.4c0,0.8,0.5,1.3,1.3,1.4c0.4,0,0.8,0,1.3,0c0,1.4,0,2.7,0,4.1c0,1.9,0.5,3.6,1.5,5.1c1,1.4,2.1,2.6,3.2,4\r\n\t\t\tc-1.6,1.6-3.2,3.4-4.1,5.6c-1,2.3-0.3,4.8-0.6,7.3c-0.5,0-0.9-0.1-1.4,0c-0.7,0.1-1.1,0.6-1.1,1.3c0,0.8,0.4,1.6,1.1,1.8\r\n\t\t\tc0.2,0,22.4,0,22.5,0c0.8-0.1,1.3-0.8,1.3-1.6C35.4,36.4,34.9,35.7,34.1,35.6z M17,10.4c4,0,7.9,0,11.9,0c0.2,0,0.1,3.7-0.5,4.5\r\n\t\t\tc-1.5,2.2-3.5,4.4-5.5,6.2c-2-1.7-3.9-4.2-5.3-6.4C16.9,13.8,16.8,10.4,17,10.4z M28.9,34.5c-4,0-7.9,0-11.9,0\r\n\t\t\tc-0.2,0-0.1-3.4,0.5-4.2c1.5-2.2,3.5-3.8,5.5-5.6c2,1.7,3.9,3.5,5.3,5.7C29,31.3,29.1,34.5,28.9,34.5z"/>\r\n\t</g>\r\n\t<g id="vector_1_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.5,44c-1,1-2.6,1-3.6,0L1.4,5.1c-1-1-1-2.6,0-3.6c1-1,2.6-1,3.6,0l39.4,38.8C45.5,41.4,45.5,43,44.5,44\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M16.5,34.5c-1,0-1.3-0.3-1.3-1.3c0-3.2,0-5.8,0-8.3L11.4,21c0,1.5,0,3,0,4.2c0,0-0.2,9.9-0.2,14.8\r\n\t\t\t\tc0,3,0.8,4.1,3.8,4.1c5.3,0,10.4,0.1,15.7,0.1c1.5,0,2.5-0.3,3-1l-8.8-8.7C22.1,34.5,19.3,34.5,16.5,34.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M28.7,11.7c1,0,1.3,0.3,1.3,1.3c0,2.4,0,4.8,0,7.2l4.4,4.4c0-4.4,0-8.8,0-13.2c0-3-1-3.9-4-3.9\r\n\t\t\t\tc-4.5,0-9,0-13.5,0l4.4,4.3C23.8,11.7,26.2,11.7,28.7,11.7z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="Layer_7" display="inline">\r\n\t</g>\r\n</g>\r\n<g id="Layer_2">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M28.5,25.6l0.1-2c0-5.9,4.2-7.6,8.7-7.6c1.1,0,2.2,0.2,3.2,0.5c-0.9-2.9-2.5-5.5-4.9-7.8c-3.9-3.9-8.5-5.8-14-5.8\r\n\t\t\t\tc-5.3,0-9.9,1.9-13.7,5.6c1.3,0.4,3,1,5.1,1.9c0.2,0.1-0.1,0.4-0.1,0.6c0,0.6,0.5,0.9,1.1,0.7c0.6-0.2,1.1-0.6,1.6-0.9\r\n\t\t\t\tc0.8-0.4,1.6-0.7,2.5-0.6c0.5,0.1,0.9,0.4,0.8,0.9c0,0.4-0.2,0.8-0.3,1.3c-0.2,0.5-0.4,0.9-0.5,1.3c-0.1,0.5,0.1,0.7,0.6,0.5\r\n\t\t\t\tc0.4-0.2,0.7-0.4,1.1-0.6c0.7-0.4,1.3-0.1,1.6,0.6c0.1,0.4,0.1,0.8-0.2,1.1c-0.3,0.4-0.6,0.8-0.9,1.2c-0.6,0.7-1.1,1.4-1.3,2.3\r\n\t\t\t\tc-0.1,0.5-0.3,1.3-0.5,1.7c-0.1,0.2-0.2,0.8-0.3,0.8c0,0-0.1,0-0.1,0c-0.1,0-0.2-0.9-0.3-1.2c-0.3-0.9-0.7-1.4-1.6-1.5\r\n\t\t\t\tc-0.3,0-0.6-0.1-0.8-0.1c-1,0.1-1.7,0.6-1.8,1.5c-0.2,1.3,0.8,2.8,2,3.1c0.7,0.1,1.3,0.1,2,0.1c0.6,0,1.3-0.1,1.9,0\r\n\t\t\t\tc1.3,0,2.3,0.6,2.9,1.8c0.6,1.1,0.8,2.3,0.7,3.5c-0.1,1.3-0.6,2.3-1.7,3c-0.4,0.2-0.7,0.5-1,0.8c-0.5,0.4-0.8,1-0.9,1.7\r\n\t\t\t\tc-0.2,1.3-0.9,2.4-1.8,3.4c0,0.1-0.1,0.1-0.2,0.1c-0.2,0.1-0.4,0.1-0.6-0.1c-0.1-0.1-0.3-0.3-0.4-0.4c-0.7-0.5-1.1-1.1-1.3-1.9\r\n\t\t\t\tc-0.2-1-0.4-2.1-0.5-3.2c-0.2-1.4-0.7-2.7-1.9-3.6c-0.2-0.1-0.3-0.3-0.5-0.4c-1-0.9-1-2.2-0.1-3.2c0.2-0.3,0.5-0.5,0.7-0.8\r\n\t\t\t\tc0.4-0.5,0.4-1.1,0-1.6c-0.3-0.4-0.7-0.8-1.1-1c-1.2-0.7-2.5-1.4-4-0.7c-0.3,0.1-0.5,0-0.6-0.3c-0.2-0.4-0.3-0.8-0.4-1.2\r\n\t\t\t\tc-0.1-0.7,0-1.4,0-2c0-0.9-0.1-1.8-0.5-2.7c-0.1-0.2-0.8-1-1.5-2c-1.9,3.1-2.9,6.5-2.9,10.4c0,5.5,1.9,10.1,5.8,14\r\n\t\t\t\tc3.9,3.9,8.5,6.4,14,6.4c4.8,0,9-0.9,12.6-3.9h-5.7c-1.2,0-1.7-2.2-1.7-3.4v-7.8C26.9,26.8,27.3,27.3,28.5,25.6z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path d="M37.2,19.6c-3.2,0-5.7,1.9-5.7,6.1v5.1c0,6.1,11.4,6.1,11.4,0v-5.1C42.9,21.5,40.4,19.6,37.2,19.6z M40.5,29.7\r\n\t\t\t\t\tc0,6.3-6.5,5.5-6.5,0v-2.9c0-2.7,1.4-4.8,3.3-4.8c1.8,0,3.2,2.2,3.2,4.8V29.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path d="M43.2,28.1H31.1c-0.8,0-1.3-0.2-1.3,0.7v5.4c0,0.8,0.5,1.9,1.3,1.9h12.1c0.8,0,0.6-1.1,0.6-1.9v-5.4\r\n\t\t\tC43.9,27.9,44.1,28.1,43.2,28.1z M37.3,33.6c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n\t\t\tS38.2,33.6,37.3,33.6z"/>\r\n\t</g>\r\n</g>\r\n</svg>',hl={DEFAULT_ERROR:i(i({},hn.DEFAULT_ERROR),{},{UI:{title:"N&#227;o foi poss&#237;vel exibir o v&#237;deo.",message:'Ocorreu um problema ao tentar carregar o v&#237;deo. <a class="player-error__link"  href="" onclick="window.location.reload(); return false;">Atualize</a> a sua p&#225;gina para tentar novamente.',className:"default-error",icon:ll}})},fl=hl=i(i({},hl),{},{AUTH_REQUIRED:i(i(i({},hl.DEFAULT_ERROR),hn.AUTH_REQUIRED),{},{UI:{title:"Faça seu login para assistir aos conteúdos exclusivos.",message:"Alguns vídeos podem ser restritos a assinantes.",className:"auth-required",icon:cl}}),DEVICE_NOT_AUTHORIZED:i(i(i({},hl.DEFAULT_ERROR),hn.DEVICE_NOT_AUTHORIZED),{},{UI:{title:"Dispositivo n&#227;o autorizado.",message:"Voc&#234; precisa cadastrar seu dispositivo para ter acesso ao conte&#250;do exclusivo.",className:"unsupported-device",icon:ul}}),DEVICE_NOT_SUPPORTED:i(i(i({},hl.DEFAULT_ERROR),hn.DEVICE_NOT_SUPPORTED),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:ul}}),GEOFENCING:i(i(i({},hl.DEFAULT_ERROR),hn.GEOFENCING),{},{UI:i(i({},hl.DEFAULT_ERROR.UI),{},{title:"O vídeo não está disponível nesta localidade",icon:dl})}),GEO_BLOCKED:i(i(i({},hl.DEFAULT_ERROR),hn.GEO_BLOCKED),{},{UI:{title:"V&#237;deo indispon&#237;vel nessa regi&#227;o",message:"Este v&#237;deo n&#227;o est&#225; dispon&#237;vel para ser exibido na sua regi&#227;o. Desculpe-nos pelo inconveniente.",className:"geoblocking",icon:dl}}),HASH_LOAD_ERROR:i(i({},hl.DEFAULT_ERROR),hn.HASH_LOAD_ERROR),PLAYER_NOT_RECOGNIZED:i(i({},hl.DEFAULT_ERROR),hn.PLAYER_NOT_RECOGNIZED),RESOURCE_LOAD_ERROR:i(i({},hl.DEFAULT_ERROR),hn.RESOURCE_LOAD_ERROR),LOCATION_UNAVAILABLE:i(i(i({},hl.DEFAULT_ERROR),hn.LOCATION_UNAVAILABLE),{},{UI:i(i({},hl.DEFAULT_ERROR.UI),{},{title:"Conteúdo disponível apenas com informação de localização.",icon:dl})}),NOT_ALLOWED_DOMAIN:i(i({},hl.DEFAULT_ERROR),hn.NOT_ALLOWED_DOMAIN),USER_BLOCKED:i(i({},hl.DEFAULT_ERROR),hn.USER_BLOCKED),NOT_FOUND:i(i(i({},hl.DEFAULT_ERROR),hn.NOT_FOUND),{},{UI:{title:"Conte&#250;do n&#227;o dispon&#237;vel.",message:"Infelizmente este v&#237;deo n&#227;o est&#225; mais dispon&#237;vel. Desculpe-nos pelo inconveniente.",className:"default-error",icon:ll}}),PLAYLIST_LOAD_ERROR:i(i(i({},hl.DEFAULT_ERROR),hn.PLAYLIST_LOAD_ERROR),{},{UI:i(i({},hl.DEFAULT_ERROR.UI),{},{title:"Erro ao carregar o recurso de v&#237;deo."})}),RESTRICTED_CONTENT:i(i(i({},hl.DEFAULT_ERROR),hn.RESTRICTED_CONTENT),{},{UI:{title:"Conteúdo restrito.",message:"O vídeo não está autorizado a ser exibido.",className:"default-error",icon:ll}}),SIMULTANEOUS_ACCESS:i(i(i({},hl.DEFAULT_ERROR),hn.SIMULTANEOUS_ACCESS),{},{UI:{title:"Acesso Simult&#226;neo.",message:"Existem muitas sess&#245;es ativas utilizando esta conta. Por favor, pare de assistir em algum dispositivo para continuar.",className:"simultaneous-access",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_">\r\n\t<path d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526c-1.026-1.021-1.026-2.685,0-3.707\r\n\t\tc1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g>\r\n\t\t<path d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013c1.215,0,1.561,0,4.561,0\r\n\t\t\tc0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),STREAMING_PAUSE_TIME_EXPIRED:i(i(i({},hl.DEFAULT_ERROR),hn.STREAMING_PAUSE_TIME_EXPIRED),{},{UI:{title:"Sess&#227;o expirada.",message:'O v&#237;deo ficou pausado por muito tempo. Para voltar a assistir, <a class="player-error__link" href="" onclick="window.location.reload(); return false;">atualize</a> a p&#225;gina.',className:"time-expired",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_">\r\n\t<path d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),SUBSCRIBERS_ONLY:i(i(i({},hl.DEFAULT_ERROR),hn.SUBSCRIBERS_ONLY),{},{UI:{title:"Conte&#250;do exclusivo para assinantes.",message:"Voc&#234; precisa ser assinante para ter acesso ao conte&#250;do.",className:"subscriber-only",icon:cl}}),UNSUPPORTED_BROWSER:i(i(i({},hl.DEFAULT_ERROR),hn.UNSUPPORTED_BROWSER),{},{UI:{title:"Seu navegador est&#225; velhinho.",message:"Para assistir aos nossos v&#237;deos, por favor, atualize-o para uma vers&#227;o mais nova.",className:"unsupported-browser",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="94.054px" height="58.925px" viewBox="0 0 94.054 58.925" enable-background="new 0 0 94.054 58.925" xml:space="preserve">\r\n<g>\r\n\t<path d="M89.057,0H13.051c-2.755,0-4.997,2.242-4.997,4.997v14.44C3.515,20.05,0,23.941,0,28.646v28.278c0,1.104,0.896,2,2,2\r\n\t\ts2-0.896,2-2V28.646c0-2.492,1.734-4.574,4.054-5.139v30.421c0,2.755,2.241,4.996,4.997,4.996h76.006\r\n\t\tc2.756,0,4.997-2.241,4.997-4.996V4.997C94.054,2.242,91.812,0,89.057,0z M23.054,3c1.105,0,2,0.896,2,2s-0.895,2-2,2\r\n\t\tc-1.104,0-2-0.896-2-2S21.95,3,23.054,3z M18.054,3c1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S16.95,3,18.054,3z M13.054,3\r\n\t\tc1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S11.95,3,13.054,3z M91.054,53.929c0,1.102-0.894,1.996-1.997,1.996H13.051\r\n\t\tc-1.103,0-1.997-0.895-1.997-1.996V23.663c2.062,0.728,3.552,2.676,3.552,4.983c0,1.104,0.896,2,2,2s2-0.896,2-2\r\n\t\tc0-4.531-3.257-8.311-7.552-9.133V10h80V53.929z M91.054,6c0,0.552-0.447,1-1,1h-61c-0.552,0-1-0.448-1-1V4c0-0.552,0.448-1,1-1h61\r\n\t\tc0.553,0,1,0.448,1,1V6z"/>\r\n\t<path d="M55.14,37.386c-0.828,0-1.5,0.672-1.5,1.5c0,1.379-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5c0-0.828-0.672-1.5-1.5-1.5\r\n\t\tc-0.829,0-1.5,0.672-1.5,1.5c0,3.032,2.468,5.5,5.5,5.5s5.5-2.468,5.5-5.5C56.64,38.058,55.968,37.386,55.14,37.386z"/>\r\n\t<path d="M21.921,23.039c3.199,0,5.802,2.604,5.802,5.804c0,4.854,3.951,8.805,8.808,8.805c4.854,0,8.803-3.95,8.803-8.805\r\n\t\tc0-3.2,2.604-5.804,5.805-5.804c3.199,0,5.803,2.604,5.803,5.804c0,4.854,3.949,8.805,8.804,8.805s8.804-3.95,8.804-8.805\r\n\t\tc0-3.2,2.604-5.804,5.804-5.804c0.828,0,1.5-0.671,1.5-1.5s-0.672-1.5-1.5-1.5c-3.038,0-5.721,1.547-7.304,3.894\r\n\t\tc-1.583-2.347-4.266-3.894-7.304-3.894s-5.721,1.547-7.304,3.894c-1.583-2.347-4.266-3.894-7.303-3.894\r\n\t\tc-3.038,0-5.722,1.547-7.305,3.894c-1.583-2.347-4.265-3.894-7.303-3.894c-3.039,0-5.724,1.547-7.307,3.895\r\n\t\tc-1.583-2.348-4.265-3.895-7.303-3.895c-0.829,0-1.5,0.671-1.5,1.5S21.093,23.039,21.921,23.039z M65.745,23.039\r\n\t\tc3.2,0,5.804,2.604,5.804,5.804c0,3.201-2.604,5.805-5.804,5.805s-5.804-2.604-5.804-5.805\r\n\t\tC59.941,25.643,62.545,23.039,65.745,23.039z M36.531,23.039c3.2,0,5.803,2.604,5.803,5.804c0,3.201-2.603,5.805-5.803,5.805\r\n\t\tc-3.202,0-5.808-2.604-5.808-5.805C30.724,25.643,33.329,23.039,36.531,23.039z"/>\r\n\t<path d="M21.921,30.343h2.937c0.829,0,1.5-0.672,1.5-1.5s-0.671-1.5-1.5-1.5h-2.937c-0.829,0-1.5,0.672-1.5,1.5\r\n\t\tS21.093,30.343,21.921,30.343z"/>\r\n\t<path d="M80.353,27.343h-2.938c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h2.938c0.828,0,1.5-0.672,1.5-1.5\r\n\t\tS81.181,27.343,80.353,27.343z"/>\r\n\t<path d="M78.476,31.036c-0.586-0.586-1.535-0.586-2.121,0s-0.586,1.535,0,2.121l1.492,1.492c0.293,0.293,0.677,0.439,1.061,0.439\r\n\t\ts0.768-0.146,1.061-0.439c0.586-0.586,0.586-1.535,0-2.121L78.476,31.036z"/>\r\n\t<path d="M23.797,31.037l-1.49,1.492c-0.585,0.586-0.584,1.535,0.001,2.121c0.293,0.292,0.676,0.438,1.06,0.438\r\n\t\tc0.384,0,0.769-0.146,1.062-0.44l1.49-1.492c0.585-0.586,0.584-1.535-0.001-2.121C25.333,30.45,24.383,30.449,23.797,31.037z"/>\r\n</g>\r\n</svg>'}}),UNSUPPORTED_MOBILE_DEVICE:i(i(i({},hl.DEFAULT_ERROR),hn.UNSUPPORTED_MOBILE_DEVICE),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:ul}}),TIMESTAMP_ERROR:i(i(i({},hl.DEFAULT_ERROR),hn.TIMESTAMP_ERROR),{},{UI:{title:"Relógio adiantado.",message:"Para assistir, ajuste o horário do seu dispositivo conforme sua localização.",className:"unsupported-device",icon:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M11.99 2C17.52 2 22 6.48 22 12s-4.48 10-10.01 10C6.47 22 2 17.52 2 12S6.47 2 11.99 2zM12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13v5.25l4.5 2.67-.75 1.23L11 13V7h1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'}})}),pl="ERROR_SCREEN_SHOW",gl="ERROR_SCREEN_HIDE",vl=jn.session;xe.register(pl),xe.register(gl);var ml=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).playerId=i.options.playerId,i}return c(n,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<div class="player-error__background-overlay"></div>\n<div class="player-error__content">\n  <span class="player-error__icon <%= className %>"><%= icon %></span>\n  <p class="player-error__title"><%= title %></p>\n  <p class="player-error__description"><%= message %></p>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"posterImage",get:function(){return this.container&&(this.container.getPlugin("poster")||{}).posterImage}},{key:"attributes",get:function(){return{class:"player-error"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindPlaybackEvents),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.clearErrors)}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.onError)}},{key:"clearErrors",value:function(){this.error=null,this.$el.hide(),this.core.trigger(xe.Custom.ERROR_SCREEN_HIDE)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=i(i({},e),{},{videoSessionId:vl.getVideoSessionId(this.options.playerId)}),this.showErrorScreen(),this.logError()}},{key:"showErrorScreen",value:function(){this.render(),this.$el.show(),this.core.trigger(xe.Custom.ERROR_SCREEN_SHOW)}},{key:"logError",value:function(){switch(this.error.level){case qe.Levels.INFO:Re.info("player_error","",this.error);break;case qe.Levels.WARN:Re.warn("player_error","",this.error);break;case qe.Levels.FATAL:default:Re.error("player_error","",this.error)}}},{key:"setPoster",value:function(){!(this.error.code===fl.RESTRICTED_CONTENT.code)&&this.posterImage&&this.$el.css({"background-image":"url("+this.posterImage+")"})}},{key:"getErrorUI",value:function(e){var t=Object.values(fl).find((function(t){return t.code===e}));return t&&t.UI||fl.DEFAULT_ERROR.UI}},{key:"render",value:function(){if(this.error){Object.assign(this.error.UI,this.getErrorUI(this.error.code));var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .player-error {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  cursor: default;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n}\n.clappr-player#wp3-player-0 .player-error__background-overlay {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n  position: absolute;\n  top: 0;\n}\n.clappr-player#wp3-player-0 .player-error__link, .clappr-player#wp3-player-0 .player-error__link:visited {\n  color: #CCCACA;\n}\n.clappr-player#wp3-player-0 .player-error__content {\n  position: relative;\n  line-height: 1.4;\n}\n.clappr-player#wp3-player-0 .player-error__title {\n  color: #CCCACA;\n  font-weight: bold;\n  font-size: 18px;\n}\n.clappr-player#wp3-player-0 .player-error__description {\n  color: #CCCACA;\n  width: 90%;\n  margin: 0 auto;\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .player-error__icon svg {\n  width: 30px;\n  max-height: 30px;\n  fill: #ffffff;\n}\n.clappr-player#wp3-player-0 .player-error__icon.unsupported-browser svg {\n  width: 40px;\n}\n.clappr-player#wp3-player-0 .player-error--hide {\n  display: none;\n}",{playerId:this.playerId});return this.$el.html(this.template(i({},this.error.UI))),this.setPoster(),this.$el.append(e[0]),this.core.$el.append(this.el),this}}}]),n}(Xe),yl=ke.DomRecycler,Al=ke.uniqueId,bl=/^(\S+)\s*(.*)$/,El=function(){function e(t){l(this,e),this.options=t,this.cid=Al("c"),this._ensureElement(),this.delegateEvents()}return c(e,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=$.zepto.isZ(e)?e:$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(bl),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=$.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=$(yl.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),e}(),_l=yo((function(module,e){module.exports=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return e(t,null,[{key:"addListener",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){var r=document.querySelectorAll(e);if(r&&r.length>0)for(var a=0;a<r.length;a++)r[a].addEventListener(t,n,i)}else e.addEventListener(t,n,i)}},{key:"removeListener",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){var r=document.querySelectorAll(e);if(r&&r.length>0)for(var a=0;a<r.length;a++)r[a].removeEventListener(t,n,i)}else e.removeEventListener(t,n,i)}},{key:"fireEvent",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!0,i,n),e.dispatchEvent(r)}}]),t}(),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"chebyshevDistance",value:function(e,t,n,i,r){var a=-i,o=void 0;for(o=0;o<n;o+=1)a=r(a,Math.abs(e[o]-t[o]));return a}},{key:"minkowskiDistance",value:function(e,t,n,i,r){var a=void 0,o=void 0;if(t!==i)throw new Error("Both vectors should have same dimension");if(isNaN(r))throw new Error('The order "p" must be a number');if(r===Number.POSITIVE_INFINITY)return this.chebyshevDistance(e,n,t,r,Math.max);if(r===Number.NEGATIVE_INFINITY)return this.chebyshevDistance(e,n,t,r,Math.min);if(r<1)throw new Error("Order less than 1 will violate the triangle inequality");for(a=0,o=0;o<t;o+=1)a+=Math.pow(Math.abs(e[o]-n[o]),r);return Math.pow(a,1/r)}},{key:"calculate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this.minkowskiDistance(e,e.length,t,t.length,n)}}]),e}()),r=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13}),a=Object.freeze({LEFT:"left",UP:"up",RIGHT:"right",DOWN:"down",ENTER:"enter"}),o=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height};return n.element=e,n.center={x:n.left+Math.floor(n.width/2),y:n.top+Math.floor(n.height/2)},n.center.left=n.center.x,n.center.right=n.center.x,n.center.top=n.center.y,n.center.bottom=n.center.y,n},s=function(e,t,n){var i,r,o,s=e.center,l=s.x,u=s.y,c=t.center,d=c.x,h=void 0,f=(i=c.y-u,r=d-l,o=Math.atan2(i,r),(o*=180/Math.PI)<0&&(o=360+o),o);switch(n){case a.LEFT:return f<=(h=60)/2||f>=360-h/2;case a.RIGHT:return f>=180-(h=60)/2&&f<=180+h/2;case a.UP:return f>=90-(h=120)/2&&f<=90+h/2;case a.DOWN:return f>=270-(h=120)/2&&f<=270+h/2}},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){return e.preventDefault(),e.stopPropagation(),!1},d=function(e){return"string"==typeof e?[].slice.call(document.querySelectorAll(e)):"object"===(void 0===e?"undefined":l(e))&&e.length?[].slice.call(e):"object"===(void 0===e?"undefined":l(e))&&1===e.nodeType?[e]:[]},h=function(e,t){return"string"==typeof t?e.matches(t):"object"===(void 0===t?"undefined":l(t))&&t.length?t.indexOf(e)>=0:"object"===(void 0===t?"undefined":l(t))&&1===t.nodeType&&e===t},f=function(e,t){var n=new Array(t);for(var i in n){var r=e.indexOf(i);r>=0&&e.splice(r,1)}return e},p=function(e){var t;return(t={},u(t,a.LEFT,a.RIGHT),u(t,a.UP,a.DOWN),u(t,a.RIGHT,a.LEFT),u(t,a.DOWN,a.UP),t)[e]},g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}return function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onMouseOver=function(e){var t=e.target;if(t&&(t.classList.contains("focusable")||t.closest(".focusable"))){var i=t.classList.contains("focusable")?t:t.closest(".focusable");return n._focusElement(i,n._getSectionId(i)),c(e)}},this._onMouseClickOrDown=function(e){var t=e.target;if(t&&(t.classList.contains("focusable")||t.closest(".focusable"))){var i=t.classList.contains("focusable")?t:t.closest(".focusable");return n.fireEvent(i,"enter-down")?void 0:c(e)}},this._onKeyDown=function(e){if(!(!n._sectionCount||n._pause||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var t=n._getCurrentFocusedElement(),i=n._getSectionId(t),r=n._mapToKeyName(e.keyCode);if(r){if(r===a.ENTER&&t&&i&&!n.fireEvent(t,"enter-down"))return c(e);if(!t){if(n._lastSectionId&&(t=n._getSectionLastFocusedElement(n._lastSectionId)),!t)return n._focusSection(),c(e);n.focus(t)}if(i=n._getSectionId(t)){var o={direction:r,sectionId:i,cause:"keydown"};return n.fireEvent(t,"willmove",o)&&n._focusNext(r,t,i),c(e)}}}},this._onKeyUp=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&!n._pause&&n._sectionCount&&n._mapToKeyName(e.keyCode)===a.ENTER){var t=n._getCurrentFocusedElement();t&&n._getSectionId(t)&&(n.fireEvent(t,"enter-up")||c(e))}},this._onFocus=function(e){var t=e.target;if(t!==window&&t!==document&&n._sectionCount&&!n._duringFocusChange){var i=n._getSectionId(t);if(i){if(n._pause)return void n._focusChanged(t,i);var r={sectionId:i,native:!0};n.fireEvent(t,"willfocus",r)?(n.fireEvent(t,"focused",r,!1),n._focusChanged(t,i)):(n._duringFocusChange=!0,t.blur(),n._duringFocusChange=!1)}}},this._onBlur=function(e){var t=e.target;if(t!==window&&t!==document&&!n._pause&&n._sectionCount&&!n._duringFocusChange&&n._getSectionId(t)){var i={native:!0};n.fireEvent(t,"willunfocus",i)?n.fireEvent(t,"unfocused",i,!1):(n._duringFocusChange=!0,setTimeout((function(){t.focus(),n._duringFocusChange=!1})))}},this._handleFocused=function(e){n._focusedPath!==e.detail.sectionId&&n.setCurrentFocusedPath(e.detail.sectionId)},this._config=m({selector:"",rememberSource:!1,disabled:!1,defaultElement:"",enterTo:"",leaveFor:null,restrict:"self-first",tabIndexIgnoreList:[],navigableFilter:null,eventPrefix:"sn:",idPoolPrefix:"section-",keyMap:{left:r.LEFT,up:r.UP,right:r.RIGHT,down:r.DOWN,enter:r.ENTER}},t),this._idPool=0,this._ready=!1,this._pause=!1,this._sections={},this._sectionCount=0,this._defaultSectionId="",this._lastSectionId="",this._duringFocusChange=!1,this._focusedPath=null}return y(e,[{key:"init",value:function(){this._ready||(this.bindEvents(),this._ready=!0),this.focus()}},{key:"destroy",value:function(){this.clear(),this.unbindEvents()}},{key:"clear",value:function(){this._ready=!1,this._sections={},this._sectionCount=0,this._idPool=0,this._defaultSectionId="",this._lastSectionId="",this._duringFocusChange=!1,this._focusedPath=null}},{key:"bindEvents",value:function(){this.addEventListener(window,"click",this._onMouseClickOrDown),this.addEventListener(window,"mouseover",this._onMouseOver),this.addEventListener(window,"mousedown",this._onMouseClickOrDown),this.addEventListener(window,"keydown",this._onKeyDown),this.addEventListener(window,"keyup",this._onKeyUp),this.addEventListener(window,"focus",this._onFocus,!0),this.addEventListener(window,"blur",this._onBlur,!0),this.addEventListener(document,this._config.eventPrefix+"focused",this._handleFocused)}},{key:"unbindEvents",value:function(){this.removeEventListener(window,"click",this._onMouseClickOrDown),this.removeEventListener(window,"mouseover",this._onMouseOver),this.removeEventListener(window,"mousedown",this._onMouseClickOrDown),this.removeEventListener(window,"keydown",this._onKeyDown),this.removeEventListener(window,"keyup",this._onKeyUp),this.removeEventListener(window,"focus",this._onFocus,!0),this.removeEventListener(window,"blur",this._onBlur,!0),this.removeEventListener(document,this._config.eventPrefix+"focused",this._handleFocused)}},{key:"set",value:function(){for(var e=void 0,t=void 0,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];if("object"===v(i[0]))t=i[0];else{if("string"!=typeof i[0]||"object"!==v(i[1]))return;if(e=i[0],t=i[1],!this._sections[e])throw new Error("Section "+e+" doesn't exist!")}for(var a in t)void 0!==this._config[a]&&(e?this._sections[e][a]=t[a]:void 0!==t[a]&&(this._config[a]=t[a]))}},{key:"add",value:function(){for(var e=void 0,t=void 0,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];if("object"===v(i[0])?t=i[0]:"string"==typeof i[0]&&"object"===v(i[1])&&(e=i[0],t=i[1]),e||(e="string"==typeof t.id?t.id:this._generateId()),this._sections[e])throw new Error("Section "+e+" has already existed!");return this._sections[e]={},this._sectionCount++,this.set(e,t),e}},{key:"remove",value:function(e){if(!e||"string"!=typeof e)throw new Error('Please assign the "sectionId"!');return!!this._sections[e]&&(this._sections[e]=void 0,delete this._sections[e],this._sections=m({},this._sections),this._sectionCount--,!0)}},{key:"disable",value:function(e){return!!this._sections[e]&&(this._sections[e].disabled=!0,!0)}},{key:"enable",value:function(e){return!!this._sections[e]&&(this._sections[e].disabled=!1,!0)}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(){this._pause=!1}},{key:"focus",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1];"boolean"==typeof i&&void 0===r&&(r=i,i=void 0);var a=!this._pause&&r;a&&this.pause();var o=void 0;if(i)if("string"==typeof i)o=this._sections[i]?this._focusSection(i):this._focusExtendedSelector(i);else{var s=this._getSectionId(i);this._isNavigable(i,s)&&(o=this._focusElement(i,s))}else o=this._focusSection();return a&&this.resume(),o}},{key:"move",value:function(e,t){var n=e.toLowerCase();if(!p(n))return!1;var i=t?d(t)[0]:this._getCurrentFocusedElement();if(!i)return!1;var r=this._getSectionId(i);if(!r)return!1;var a={direction:n,sectionId:r,cause:"api"};return!!this.fireEvent(i,"willmove",a)&&this._focusNext(n,i,r)}},{key:"fireEvent",value:function(e,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=""+this._config.eventPrefix+n;return t.fireEvent(e,a,i,r)}},{key:"addFocusable",value:function(e,t){if(e&&!this._getSectionId(document.getElementById(e.id))){this.removeFocusable(e);var n=this.add(e);t&&this.addEventListener(e.selector,this._config.eventPrefix+"enter-down",t),this._makeFocusable(n)}}},{key:"removeFocusable",value:function(e,t){var n=this._getSectionId(document.getElementById(e.id));n&&(this.remove(n),t&&this.removeEventListener(this._config.eventPrefix+"enter-down",t))}},{key:"setDefaultSection",value:function(e){if(e){if(!this._sections[e])throw new Error("Section "+e+" doesn't exist!");this._defaultSectionId=e}else this._defaultSectionId=""}},{key:"getConfig",value:function(){return this._config}},{key:"getCurrentFocusedPath",value:function(){return this._focusedPath}},{key:"setCurrentFocusedPath",value:function(e){this._focusedPath=e,this.focus(e)}},{key:"addEventListener",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addListener(e,n,i,r)}},{key:"removeEventListener",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeListener(e,n,i,r)}},{key:"_mapToKeyName",value:function(e){switch(e){case this._config.keyMap.left:return a.LEFT;case this._config.keyMap.up:return a.UP;case this._config.keyMap.right:return a.RIGHT;case this._config.keyMap.down:return a.DOWN;case this._config.keyMap.enter:return a.ENTER;default:return null}}},{key:"_makeFocusable",value:function(e){var t=this,n=function(e){var n=e.tabIndexIgnoreList||t._config.tabIndexIgnoreList;d(e.selector).forEach((function(e){h(e,n)||e.getAttribute("tabindex")||e.setAttribute("tabindex","-1")}))};if(e){if(!this._sections[e])throw new Error("Section "+e+" doesn't exist!");n(this._sections[e])}else for(var i in this._sections)n(this._sections[i])}},{key:"_navigate",value:function(e,t,n,r){if(!(e&&t&&n&&n.length))return null;var l=o(e);if(!l)return null;var u=[];if(n.forEach((function(e){var t=o(e);t&&u.push(t)})),!u.length)return null;var c,d=(c=l,{nearestIsBetter:function(e){var t=[c.center.x,c.center.y];return i.calculate(t,[e.center.x,e.center.y])},nearPlumbLineIsBetter:function(e){var t=void 0;return(t=e.center.x<c.center.x?c.center.x-e.right:e.left-c.center.x)<0?0:t},nearHorizonIsBetter:function(e){var t=void 0;return(t=e.center.y<c.center.y?c.center.y-e.bottom:e.top-c.center.y)<0?0:t},nearTargetLeftIsBetter:function(e){var t=void 0;return(t=e.center.x<c.center.x?c.left-e.right:e.left-c.left)<0?0:t},nearTargetTopIsBetter:function(e){var t=void 0;return(t=e.center.y<c.center.y?c.top-e.bottom:e.top-c.top)<0?0:t},topIsBetter:function(e){return e.top},bottomIsBetter:function(e){return-1*e.bottom},leftIsBetter:function(e){return e.left},rightIsBetter:function(e){return-1*e.right}});u=u.filter((function(e){return e.element!==l.element&&s(e,l,t)}));var h=function(e){var t=e||{},n=t.group,i=t.distance;return n&&i&&n.sort((function(e,t){for(var n=0;n<i.length;n++){var r=i[n],a=r(e)-r(t);if(a)return a}return 0})),n}(function(e){var t;return(t={},A(t,a.LEFT,{group:u,distance:[d.nearestIsBetter,d.nearHorizonIsBetter,d.topIsBetter]}),A(t,a.RIGHT,{group:u,distance:[d.nearestIsBetter,d.nearHorizonIsBetter,d.topIsBetter]}),A(t,a.UP,{group:u,distance:[d.nearestIsBetter,d.nearHorizonIsBetter,d.leftIsBetter]}),A(t,a.DOWN,{group:u,distance:[d.nearestIsBetter,d.nearPlumbLineIsBetter,d.topIsBetter,d.nearTargetLeftIsBetter]}),t)[e]}(t));if(!h)return null;var f=void 0;if(r.rememberSource&&r.previous&&r.previous.destination===e&&r.previous.reverse===t)for(var p in h)if(p.element===r.previous.target){f=p.element;break}if(!f){if(0===h.length)return;f=h[0].element}return f}},{key:"_isNavigable",value:function(e,t,n){if(!e||!t||!this._sections[t]||this._sections[t].disabled)return!1;if(e.offsetWidth<=0&&e.offsetHeight<=0||e.hasAttribute("disabled"))return!1;if(n&&!h(e,this._sections[t].selector))return!1;if("function"==typeof this._sections[t].navigableFilter){if(!1===this._sections[t].navigableFilter(e,t))return!1}else if("function"==typeof this._config.navigableFilter&&!1===this._config.navigableFilter(e,t))return!1;return!0}},{key:"_focusNext",value:function(e,t,n){var i=t.getAttribute("data-sn-"+e);if("string"==typeof i)return!(""===i||!this._focusExtendedSelector(i,e))||(this._fireNavigateFailed(t,e),!1);var r={},a=[];for(var o in this._sections)r[o]=this._getSectionNavigableElements(o),a=a.concat(r[o]);var s=m({},this._config,this._sections[n]),l=void 0,u=void 0;if("self-only"===s.restrict||"self-first"===s.restrict){var c=r[n];u=f(c,t),(l=this._navigate(t,e,u,s))||"self-first"!==s.restrict||(u=f(a,c),l=this._navigate(t,e,u,s))}else u=f(a,t),l=this._navigate(t,e,u,s);if(l){this._sections[n].previous={target:t,destination:l,reverse:p(e)};var d=this._getSectionId(l);if(n!==d){var h=this._gotoLeaveFor(n,e);if(h)return!0;if(null===h)return this._fireNavigateFailed(t,e),!1;var g=void 0;switch(this._sections[d].enterTo){case"last-focused":g=this._getSectionLastFocusedElement(d)||this._getSectionDefaultElement(d);break;case"default-element":g=this._getSectionDefaultElement(d)}g&&(l=g)}return this._focusElement(l,d,e)}return!!this._gotoLeaveFor(n,e)||(this._fireNavigateFailed(t,e),!1)}},{key:"_focusChanged",value:function(e,t){var n=t||this._getSectionId(e);n&&(this._sections[n].lastFocusedElement=e,this._lastSectionId=n)}},{key:"_focusElement",value:function(e,t,n){var i=this;if(!e)return!1;var r=this._getCurrentFocusedElement(),a=function(){r&&r.blur(),e.focus(),i._focusChanged(e,t)};if(this._duringFocusChange)return a(),!0;if(this._duringFocusChange=!0,this._pause)return a(),this._duringFocusChange=!1,!0;if(r){var o={nextElement:e,nextSectionId:t,direction:n,native:!1};if(!this.fireEvent(r,"willunfocus",o))return this._duringFocusChange=!1,!1;r.blur(),this.fireEvent(r,"unfocused",o,!1)}var s={previousElement:r,sectionId:t,direction:n,native:!1};return this.fireEvent(e,"willfocus",s)?(e.focus(),this.fireEvent(e,"focused",s,!1),this._duringFocusChange=!1,this._focusChanged(e,t),!0):(this._duringFocusChange=!1,!1)}},{key:"_focusSection",value:function(e){var t=this,n=[],i=function(e){e&&n.indexOf(e)<0&&t._sections[e]&&!t._sections[e].disabled&&n.push(e)};e?i(e):(i(this._defaultSectionId),i(this._lastSectionId),Object.keys(this._sections).map(i));for(var r=0;r<n.length;r++){var a=n[r],o=void 0;if(o="last-focused"===this._sections[a].enterTo?this._getSectionLastFocusedElement(a)||this._getSectionDefaultElement(a)||this._getSectionNavigableElements(a)[0]:this._getSectionDefaultElement(a)||this._getSectionLastFocusedElement(a)||this._getSectionNavigableElements(a)[0])return this._focusElement(o,a)}return!1}},{key:"_focusExtendedSelector",value:function(e,t){if("@"===e.charAt(0)){if(1===e.length)return this._focusSection();var n=e.substr(1);return this._focusSection(n)}var i=d(e),r=g(i,1)[0];if(r){var a=this._getSectionId(r);if(this._isNavigable(r,a))return this._focusElement(r,a,t)}return!1}},{key:"_getSectionId",value:function(e){for(var t in this._sections)if(!this._sections[t].disabled&&e&&h(e,this._sections[t].selector))return t}},{key:"_getSectionNavigableElements",value:function(e){var t=this;return d(this._sections[e].selector).filter((function(n){return t._isNavigable(n,e)}))}},{key:"_getSectionDefaultElement",value:function(e){var t=this._sections[e].defaultElement;if(!t)return null;if("string"==typeof t){var n=d(t);t=g(n,1)[0]}return this._isNavigable(t,e,!0)?t:null}},{key:"_getSectionLastFocusedElement",value:function(e){var t=this._sections[e]&&this._sections[e].lastFocusedElement;return this._isNavigable(t,e,!0)?t:null}},{key:"_getCurrentFocusedElement",value:function(){var e=document.activeElement;if(e&&e!==document.body)return e}},{key:"_fireNavigateFailed",value:function(e,t){return this.fireEvent(e,"navigatefailed",{direction:t},!1)}},{key:"_gotoLeaveFor",value:function(e,t){if(this._sections[e].leaveFor&&void 0!==this._sections[e].leaveFor[t]){var n=this._sections[e].leaveFor[t];if("string"==typeof n)return""===n?null:this._focusExtendedSelector(n,t);var i=this._getSectionId(n);if(this._isNavigable(n,i))return this._focusElement(n,i,t)}return!1}},{key:"_generateId",value:function(){var e=void 0;do{e=this._config.idPoolPrefix+String(++this._idPool)}while(this._sections[e]);return e}}]),e}()}()})),kl=Bn.Keys,Tl=new(function(){function e(){l(this,e),this.navigatorMap={}}return c(e,[{key:"createNavigatorInstance",value:function(){var e=new _l({keyMap:{left:kl.VK_LEFT[0],up:kl.VK_UP[0],right:kl.VK_RIGHT[0],down:kl.VK_DOWN[0],enter:kl.VK_ENTER[0]}});return e.init(),e}},{key:"getNavigator",value:function(e){return this.navigatorMap[e]?this.navigatorMap[e]:this.navigatorMap[e]=this.createNavigatorInstance()}},{key:"destroyNavigator",value:function(e){this.navigatorMap[e]&&(this.navigatorMap[e].destroy(),this.navigatorMap[e]=null)}}]),e}()),Sl={WillMove:"sn:willmove",WillUnfocus:"sn:willunfocus",Unfocused:"sn:unfocused",WillFocus:"sn:willfocus",Focused:"sn:focused",NavigateFailed:"sn:navigatefailed",EnterDown:"sn:enter-down",EnterUp:"sn:enter-up"},wl=function(){function e(t){var n=t.plugin,i=t.$el;l(this,e),this.plugin=n,this.$el=i,this.hideDelayed=this.hideDelayed.bind(this),this.bindMouseEvents()}return c(e,[{key:"bindMouseEvents",value:function(){var e=this;if(!this._throttledVisibilityUpdate){this._throttledVisibilityUpdate=No((function(){return e.onVisibilityUpdate.apply(e,arguments)}),100,{trailing:!1})}this.plugin.listenTo(this.plugin.core,xe.CORE_MOUSE_MOVE,this._throttledVisibilityUpdate),this.plugin.listenTo(this.plugin.core,xe.CORE_MOUSE_LEAVE,this.hideDelayed),this.plugin.listenTo(this.plugin.core,Gn.WM_SHARE_HIDE,this.bindMouseEvents.bind(this)),this.plugin.listenTo(this.plugin.core,Gn.WM_SHARE_SHOW,this.unbindMouseEvents.bind(this)),this.plugin.listenTo(this.plugin.core,Gn.WM_SHARE_SHOW,this.plugin.hideHint),this.plugin.listenTo(this.plugin.core,Gn.WM_SHARE_HIDE,this.plugin.showHint)}},{key:"unbindMouseEvents",value:function(){this.plugin.stopListening(this.plugin.core,xe.CORE_MOUSE_MOVE,this._throttledVisibilityUpdate),this.plugin.stopListening(this.plugin.core,xe.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"hideDelayed",value:function(e){var t=this;!this.plugin.isExpanded||this.plugin.inactivityTimeout<=0||!this.plugin.isVisible()||ne.supportsTouchEvents||(clearTimeout(this.hideId),this.userKeepVisible||e&&"mouseout"===e.type?this.hideId=setTimeout((function(){return t.hideDelayed()}),this.plugin.inactivityTimeout):!this.userKeepVisible&&this.plugin.disableVisibility())}},{key:"onVisibilityUpdate",value:function(e){var t=this;ne.isMobile&&e&&"mousemove"===e.type||(clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),this.plugin.inactivityTimeout),this.plugin.isHintEnabled||!this.plugin.isExpanded||this.plugin.isVisible()?this.plugin.showHint():this.plugin.enableVisibility())}},{key:"expand",value:function(){var e=this;this.$el.addClass("".concat(this.plugin.internalName,"--expand")).on("transitionend",(function(){e.$el.off("transitionend"),e.plugin.onDidShowDrawer()}))}},{key:"hideDrawer",value:function(){var e=this;this.$el.removeClass("".concat(this.plugin.internalName,"--expand")).on("transitionend",(function(){e.$el.off("transitionend"),e.plugin.onDidHideDrawer()}))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1)}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0)}},{key:"expandOffset",value:function(){return"".concat(this.plugin.specifiedExpandOffset())}},{key:"destroy",value:function(){this.hideId&&clearTimeout(this.hideId)}}]),e}(),Cl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).plugin=e,i.strategy=new wl(g(i)),i}return c(n,[{key:"attributes",get:function(){return{class:"drawer drawer--hidden"}}},{key:"events",get:function(){var e={click:"toggle"},t={mouseenter:"setUserKeepVisible",mouseleave:"resetUserKeepVisible",click:"toggle"},n=i(i(i({},e),t),{},{touchend:this.resetUserKeepVisible});return ne.isHybridDevice?n:ne.isMobile?e:t}},{key:"onMediaControlShow",value:function(){var e,t;null===(e=(t=this.strategy).onMediaControlShow)||void 0===e||e.call(t)}},{key:"onMediaControlHide",value:function(){var e,t;null===(e=(t=this.strategy).onMediaControlHide)||void 0===e||e.call(t)}},{key:"toggle",value:function(e){this.plugin.toggle(e)}},{key:"setUserKeepVisible",value:function(){var e,t;null===(e=(t=this.strategy).setUserKeepVisible)||void 0===e||e.call(t)}},{key:"resetUserKeepVisible",value:function(){var e,t;null===(e=(t=this.strategy).resetUserKeepVisible)||void 0===e||e.call(t)}},{key:"showDrawer",value:function(){this.strategy.showDrawer()}},{key:"hideDrawer",value:function(){this.strategy.hideDrawer()}},{key:"onDfpStarted",value:function(){var e,t;null===(e=(t=this.strategy).onDfpStarted)||void 0===e||e.call(t)}},{key:"onDfpClose",value:function(){var e,t;null===(e=(t=this.strategy).onDfpClose)||void 0===e||e.call(t)}},{key:"onDidShowDrawer",value:function(){var e,t;null===(e=(t=this.strategy).onDidShowDrawer)||void 0===e||e.call(t)}},{key:"onDidHideDrawer",value:function(){var e,t;null===(e=(t=this.strategy).onDidHideDrawer)||void 0===e||e.call(t)}},{key:"enableDrawer",value:function(){this.el.classList.remove("".concat(this.plugin.internalName,"--disabled"))}},{key:"disableDrawer",value:function(){this.el.classList.add("".concat(this.plugin.internalName,"--disabled"))}},{key:"disableVisibility",value:function(){this.el.classList.add("".concat(this.plugin.internalName,"--hidden"))}},{key:"enableVisibility",value:function(){this.$el.removeClass("".concat(this.plugin.internalName,"--hidden"))}},{key:"isVisible",value:function(){return!this.$el.hasClass("".concat(this.plugin.internalName,"--hidden"))}},{key:"drawerYPosition",value:function(){return Math.round(this.$el[0].getBoundingClientRect().top)-1}},{key:"expand",value:function(){this.strategy.expand()}},{key:"expandOffset",value:function(){return this.strategy.expandOffset()}},{key:"onVisibilityUpdate",value:function(e){this.strategy.onVisibilityUpdate(e)}},{key:"createOverlay",value:function(){this.overlay=this.plugin.core.el.querySelector(".drawer-overlay"),this.overlay||(this.overlay=document.createElement("div"),this.overlay.className="drawer-overlay",this.plugin.core.$el.append(this.overlay),this.overlay.appendChild(this.el))}},{key:"parseStyle",value:function(){var e='.clappr-player#wp3-player-0 .drawer-overlay {\n  width: 100%;\n  z-index: 2;\n}\n.clappr-player#wp3-player-0 .drawer-overlay--hidden {\n  visibility: hidden;\n}\n\n.media-control::after {\n  height: 0;\n}\n\n.clappr-player#wp3-player-0 .drawer {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  bottom: calc(-100% + heightHint);\n  height: 100%;\n  background: transparent;\n  z-index: 9999;\n  will-change: transform, opacity;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer--expand {\n  transform: translateY(heightImmersion);\n  transition: transform 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer--expand:before {\n  content: "";\n  position: absolute;\n  top: -100%;\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .drawer--expand.gradient {\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n}\n.clappr-player#wp3-player-0 .drawer--expand.gradient:before {\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px);\n}\n.clappr-player#wp3-player-0 .drawer--disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .drawer--hidden {\n  pointer-events: none;\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .drawer--no-transition {\n  transition: none;\n}\n.clappr-player#wp3-player-0 .drawer:not(.drawer--expand) * {\n  pointer-events: none;\n}\n\n.clappr-player#wp3-player-0.fullscreen .drawer--expand {\n  transform: translateY(immersionFullScreen);\n}'.toString();return e=(e=(e=e.replace(/heightImmersion/g,this.plugin.expandOffset())).replace(/immersionFullScreen/g,this.plugin.expandOffsetFullscreen())).replace(/heightHint/g,this.plugin.effectiveHeightHint)}},{key:"render",value:function(){this.plugin.hasGradient&&this.el.classList.add("gradient"),this.createOverlay();var e=Kn.getStyleFrom(this.parseStyle(),{playerId:this.plugin.options.playerId});return this.$el.html(this.plugin.content),this.$el.append(e[0]),this.plugin.core.trigger(Gn.SHOW_DRAWER_REQUESTED),this.plugin.hasPlaceholder&&this.plugin.core.trigger(Gn.DRAWER_HAS_PLACEHOLDER,this.plugin.effectiveHeightHint),this.plugin.updateChromelessState(),this}},{key:"destroy",value:function(){this.strategy.destroy(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(El),Il="24px",Rl="224px",Dl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).componentRender=new Cl(g(i)),i.componentRender.render(),i.lastChromelessValue=!!i.options.chromeless,i}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"name",get:function(){return"drawer"}},{key:"internalName",get:function(){return"drawer"}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e}},{key:"playerId",get:function(){return this.options.playerId}},{key:"content",get:function(){return this._content||""},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._content=e}},{key:"height",get:function(){return this._height||"inherit"},set:function(e){this._height=e}},{key:"heightImmersion",get:function(){return"50%"}},{key:"heightImmersionUnit",get:function(){return this.heightImmersion.includes("%")?"%":"px"}},{key:"heightHint",get:function(){return Il}},{key:"isHintEnabled",get:function(){return!0}},{key:"hasPlaceholder",get:function(){return this.isHintEnabled}},{key:"gradientHeadSize",get:function(){return parseInt("32px",10)}},{key:"defaultExpandValues",get:function(){return{drawerExpanded:"50%",drawerHintSize:this.effectiveHeightHint}}},{key:"inactivityTimeout",get:function(){return 2e3}},{key:"effectiveHeightHint",get:function(){var e=parseInt(this.heightHint,10);return Number.isInteger(e)?e>parseInt(Rl,10)?Rl:e<parseInt(Il,10)?Il:this.heightHint:Il}},{key:"hasGradient",get:function(){return!0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,xe.MEDIACONTROL_SHOW,this.showHint),this.listenTo(this.core,xe.MEDIACONTROL_HIDE,this.hideHint),this.listenTo(this.core,Gn.MOSAIC_SHOW,this.hideHint),this.listenTo(this.core,Gn.MOSAIC_HIDE,this.showHint),this.listenTo(this.core,Gn.SYNC_DRAWER_STATE_REQUEST,this.currentState),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,xe.ERROR,this.onError),this.listenTo(this.core,Gn.LANGUAGE_MENU_WILL_OPEN,this.hideHint),this.listenTo(this.core,Gn.LANGUAGE_MENU_WILL_CLOSE,this.showHint),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.core,xe.MEDIACONTROL_SHOW,this.onMediaControlShow),this.listenTo(this.core,xe.MEDIACONTROL_HIDE,this.onMediaControlHide)}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,Gn.DFP_AD_STARTED,this.onDfpStarted),this.listenTo(this.container,Gn.DFP_CONTENT_RESUME,this.onDfpClose)}},{key:"onMediaControlShow",value:function(){this.componentRender.onMediaControlShow()}},{key:"onMediaControlHide",value:function(){this.componentRender.onMediaControlHide()}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onDfpStarted",value:function(){this.isDfpActive||(this.isDfpActive=!0,this.isPreviouslyExpanded=this.isExpanded,this.hide(),this.hideHint(),this.componentRender.onDfpStarted())}},{key:"onDfpClose",value:function(){this.isDfpActive=!1,this.isPreviouslyExpanded&&this.show(),this.componentRender.onDfpClose()}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===qe.Levels.FATAL&&this.showHint()}},{key:"updateChromelessState",value:function(){this.disableDrawer(),!1===this.options.chromeless&&(this.hideHint(),this.enableDrawer()),this.lastChromelessValue=this.options.chromeless}},{key:"enableDrawer",value:function(){this.componentRender.enableDrawer()}},{key:"disableDrawer",value:function(){this.componentRender.disableDrawer()}},{key:"showHint",value:function(){!this.isHintEnabled||this.isVisible()||this.isDfpActive||(this.enableVisibility(),this.onDidShowDrawerHint())}},{key:"hideHint",value:function(){this.isHintEnabled&&this.isVisible()&&!this.isExpanded&&(this.disableVisibility(),this.onDidHideDrawerHint())}},{key:"onDidShowDrawerHint",value:function(){this.core.trigger(Gn.DID_SHOW_DRAWER_HINT)}},{key:"onDidHideDrawerHint",value:function(){this.core.trigger(Gn.DID_HIDE_DRAWER_HINT)}},{key:"disableVisibility",value:function(){this.componentRender.disableVisibility()}},{key:"enableVisibility",value:function(){this.componentRender.enableVisibility()}},{key:"currentState",value:function(){this.core.trigger(Gn.SYNC_DRAWER_STATE_RESPONSE,this.isExpanded)}},{key:"isVisible",value:function(){return this.componentRender.isVisible()}},{key:"show",value:function(e){this.isExpanded||(e&&e.stopPropagation(),this.isExpanded=!0,this.core.trigger(Gn.WILL_SHOW_DRAWER),!this.isHintEnabled&&this.enableVisibility(),this.componentRender.expand())}},{key:"hide",value:function(){this.isExpanded&&(this.isExpanded=!1,this.core.trigger(Gn.WILL_HIDE_DRAWER),!this.isHintEnabled&&this.disableVisibility(),this.componentRender.hideDrawer())}},{key:"onDidShowDrawer",value:function(){this.core.trigger(Gn.DID_SHOW_DRAWER),this.componentRender.onDidShowDrawer()}},{key:"onDidHideDrawer",value:function(){this.core.trigger(Gn.DID_HIDE_DRAWER),this.componentRender.onDidHideDrawer()}},{key:"expandOffset",value:function(){return this.componentRender.expandOffset()}},{key:"expandOffsetFullscreen",value:function(){return"px"===this.heightImmersionUnit?"-".concat(this.specifiedExpandOffset()):"".concat(this.specifiedExpandOffsetPercentageFullscreen())}},{key:"specifiedExpandOffset",value:function(){return"calc(".concat(this.effectiveHeightHint," - ").concat(this.translateYValue(),")")}},{key:"specifiedExpandOffsetPercentageFullscreen",value:function(){return"-".concat(this.translateYValue())}},{key:"translateYValue",value:function(){return"".concat(parseInt(this.heightImmersion,10)).concat(this.heightImmersionUnit)}},{key:"toggle",value:function(e){this.isExpanded?null!=e&&e.clientY?this.clickAtHideArea(e)&&this.hide():this.hide():this.show()}},{key:"clickAtHideArea",value:function(e){return e.clientY>=0&&e.clientY<=this.drawerYPosition()}},{key:"drawerYPosition",value:function(){return this.componentRender.drawerYPosition()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,!this.lastChromelessValue&&this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?this.disableDrawer():this.enableDrawer()}},{key:"getRender",value:function(){return this.componentRender}},{key:"render",value:function(){return this.componentRender.render()}},{key:"destroy",value:function(){this.componentRender.destroy(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(dt),Ll=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"name",get:function(){return"media_control_placeholder"}},{key:"panel",get:function(){return"front-layer"}},{key:"position",get:function(){return""}},{key:"heightHint",get:function(){return 0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"attributes",get:function(){return{class:"media-control-placeholder disabled hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Gn.DRAWER_HAS_PLACEHOLDER,this.onDrawerHasPlaceholder),this.listenTo(this.core,xe.CORE_RESIZE,this.onPlayerResize)}},{key:"onDrawerHasPlaceholder",value:function(e){this.hasDrawer=!0,this.enablePlaceholder(e)}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.updateResponsiveStyle())}},{key:"enablePlaceholder",value:function(e){e&&this.heightHint!==e&&this.$el.css({height:e}),this.$el.removeClass("disabled")}},{key:"disablePlaceholder",value:function(){this.$el.addClass("disabled")}},{key:"show",value:function(){this.$el.removeClass("hidden")}},{key:"updateResponsiveStyle",value:function(){this.hasDrawer&&(this.shouldDisable?this.disablePlaceholder():this.enablePlaceholder())}},{key:"render",value:function(){this.$el.empty();var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder {\n  position: relative;\n  width: 100%;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.hidden {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.media-control-element {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-placeholder {\n  display: none;\n}",{playerId:this.core.options.playerId});return this.$el.append(e[0]),this}}]),n}(Tr),Pl=Ao(Dt),Ol=yo((function(module,e){var t;window,t=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var module=t[i]={i:i,l:!1,exports:{}};return e[i].call(module.exports,module,module.exports,n),module.l=!0,module.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return n.d(e,"a",e),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="latest/",n(n.s="./src/clappr-stats.js")}({"./node_modules/lodash.get/index.js":
/*!******************************************!*\
    !*** ./node_modules/lodash.get/index.js ***!
    \******************************************/
/*! no static exports found */function(module,e,t){(function(e){var t,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="__lodash_hash_undefined__",r="[object Function]",a="[object GeneratorFunction]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,l=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,h="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e,f="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,p=h||f||Function("return this")(),g=Array.prototype,v=Function.prototype,m=Object.prototype,y=p["__core-js_shared__"],A=(t=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",b=v.toString,E=m.hasOwnProperty,_=m.toString,k=RegExp("^"+b.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=p.Symbol,S=g.splice,w=B(p,"Map"),C=B(Object,"create"),I=T?T.prototype:void 0,R=I?I.toString:void 0;function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function x(e,t){var i;t=function(e,t){if(H(e))return!1;var i=void 0===e?"undefined":n(e);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!K(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}(t,e)?[t]:H(i=t)?i:F(i);for(var r=0,a=t.length;null!=e&&r<a;)e=e[U(t[r++])];return r&&r==a?e:void 0}function M(e){if(!j(e)||(t=e,A&&A in t))return!1;var t,n=function(e){var t=j(e)?_.call(e):"";return t==r||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?k:d;return n.test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function N(e,t){var i=e.__data__;return function(e){var t=void 0===e?"undefined":n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return M(n)?n:void 0}D.prototype.clear=function(){this.__data__=C?C(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return n===i?void 0:n}return E.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:E.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?i:t,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},L.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},L.prototype.has=function(e){return O(this.__data__,e)>-1},L.prototype.set=function(e,t){var n=this.__data__,i=O(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},P.prototype.clear=function(){this.__data__={hash:new D,map:new(w||L),string:new D}},P.prototype.delete=function(e){return N(this,e).delete(e)},P.prototype.get=function(e){return N(this,e).get(e)},P.prototype.has=function(e){return N(this,e).has(e)},P.prototype.set=function(e,t){return N(this,e).set(e,t),this};var F=V((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(K(e))return R?R.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(u,(function(e,t,i,r){n.push(i?r.replace(c,"$1"):t||e)})),n}));function U(e){if("string"==typeof e||K(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function V(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(V.Cache||P),n}V.Cache=P;var H=Array.isArray;function j(e){var t=void 0===e?"undefined":n(e);return!!e&&("object"==t||"function"==t)}function K(e){return"symbol"==(void 0===e?"undefined":n(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":n(e))}(e)&&"[object Symbol]"==_.call(e)}module.exports=function(e,t,n){var i=null==e?void 0:x(e,t);return void 0===i?n:i}}).call(this,t(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(module,e,t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}module.exports=n},"./src/clappr-stats.js":
/*!*****************************!*\
    !*** ./src/clappr-stats.js ***!
    \*****************************/
/*! no static exports found */function(module,e,t){Object.defineProperty(e,"__esModule",{value:!0});var n,i=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=t(/*! @clappr/core */"@clappr/core"),o=t(/*! lodash.get */"./node_modules/lodash.get/index.js"),s=(n=o)&&n.__esModule?n:{default:n},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._runEach=(0,s.default)(e,"options.clapprStats.runEach",5e3),n._onReport=(0,s.default)(e,"options.clapprStats.onReport",n._defaultReport),n._uriToMeasureLatency=(0,s.default)(e,"options.clapprStats.uriToMeasureLatency"),n._urisToMeasureBandwidth=(0,s.default)(e,"options.clapprStats.urisToMeasureBandwidth"),n._runBandwidthTestEvery=(0,s.default)(e,"options.clapprStats.runBandwidthTestEvery",10),n._bwMeasureCount=0,n._completion={watch:(0,s.default)(e,"options.clapprStats.onCompletion",[]),calls:[]},n._newMetrics(),n.on(t.REPORT_EVENT,n._onReport),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start"+e]}},{key:"_start",value:function(e){this["_start"+e]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start"+e]}},{key:"_defaultReport",value:function(e){console.log(e)}},{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:a.version}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}}]),r(t,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,a.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,a.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,a.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,a.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,a.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,a.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,a.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,a.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,a.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,a.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,a.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,a.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,a.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,a.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(e){var t=parseInt((0,s.default)(e,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var i=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];i.end=n,i.time=n-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,a.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,a.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,a.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,a.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,n=1e3*e.total,i=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=t,this._metrics.extra.watchedPercentage=t/n*100,0===i?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[i-1][1]=t,this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end||(r.time=this._now()-r.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,a.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,a.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,i=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||i||(a.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(t.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(t.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this._metrics.extra.bitratesHistory.map((function(e){return e.time})).reduce((function(e,t){return e+t}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate*e.time})).reduce((function(e,t){return e+t}),0)/e,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(e,t){return e.time<t.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"_measureLatency",value:function(){var e=this;if(this._uriToMeasureLatency){var t,n=[],i=function(){t=n[2]-n[1],e._metrics.timers.latency=t};!function t(){if(n.push(e._now()),n.length>2)i();else{var r=new Image;r.onload=t,r.src=e._uriToMeasureLatency+"?"+Math.random()+"="+e._now()}}()}}},{key:"_measureBandwidth",value:function(){var e=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var t=0,n=function(n){var i=(e._urisToMeasureBandwidth[t-1].end-e._urisToMeasureBandwidth[t-1].start)/1e3,r=8*n.loaded/i;e._metrics.extra.bandwidth=r,e._urisToMeasureBandwidth.forEach((function(e){e.start=0,e.end=0,e.expired=!1,clearTimeout(e.timer)}))};!function i(r){if(t>0&&(e._urisToMeasureBandwidth[t-1].end=e._now(),clearTimeout(e._urisToMeasureBandwidth[t-1].timer)),t>=e._urisToMeasureBandwidth.length||t>0&&e._urisToMeasureBandwidth[t-1].expired)n(r);else{var a=new XMLHttpRequest;a.open("GET",e._urisToMeasureBandwidth[t].url,!0),a.responseType="arraybuffer",a.onload=a.onabort=i,e._urisToMeasureBandwidth[t].start=e._now(),e._urisToMeasureBandwidth[t].timer=setTimeout((function(t){e._urisToMeasureBandwidth[t].expired=!0,a.abort()}),e._urisToMeasureBandwidth[t].timeout,t),a.send()}t++}()}this._bwMeasureCount++}}]),t}(a.ContainerPlugin);e.default=l,l.REPORT_EVENT="clappr:stats:report",l.PERCENTAGE_EVENT="clappr:stats:percentage",module.exports=e.default},"@clappr/core":
/*!*************************!*\
    !*** external "Clappr" ***!
    \*************************/
/*! no static exports found */function(module,t){module.exports=e}})},module.exports=t(Pl)})),xl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),e.options.clapprStats=e.options.clapprStats||{runEach:1e3,onReport:function(e){return i.onMetricsReceived(e)}},i=t.call(this,e)}return c(n,[{key:"innerPlayback",get:function(){return this.container.playback&&this.container.playback.playback}},{key:"_playbackName",get:function(){return this.innerPlayback&&this.innerPlayback.name}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"onMetricsReceived",value:function(e){this.container.trigger(Gn.WM_STATS_REPORTED,e)}}]),n}(mo(Ol)),Ml=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"cuepoints"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this._parseCuepoints)}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.container.playback,xe.PLAYBACK_TIMEUPDATE,this._onPositionUpdate)}},{key:"_onPositionUpdate",value:function(e){var t=this,n=e.current;this._cuepoints.forEach((function(e){(t._previousPosition<e.time||n===e.time)&&(n===e.time||n>=e.time&&n-t._previousPosition<=1)&&(Re.debug(t.name,"cuepoint reached:",e),t.container.trigger(Gn.DID_REACH_CUEPOINT,e))})),this._previousPosition=n}},{key:"_parseCuepoints",value:function(e){var t=this;this._cuepoints=(e.cuepoints||[]).map((function(e){var t=i({},e);return t.time/=1e3,t})).sort((function(e,t){return e.time-t.time})),Re.debug(this.name,"cuepoints loaded:",this._cuepoints),this._cuepoints.length>0&&(di((function(){return t.container.trigger(Gn.DID_LOAD_CUEPOINTS,t._cuepoints)})),this._bindPlaybackEvents(),this._previousPosition=-.01)}}]),n}(ct),Nl=function(){function e(t){l(this,e),this.channel=t.channel,this.channelId=t.channel_id,this.program=t.program,this.programId=t.program_id,this.startTime=t.start_time,this.endTime=t.end_time,this.rawData=t}return c(e,[{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=this.startTime-t&&e<this.endTime+t}},{key:"toString",value:function(){var e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},t=new Date(1e3*this.startTime).toLocaleDateString(void 0,e),n=new Date(1e3*this.endTime).toLocaleDateString(void 0,e);return"Program [".concat(this.channel).concat(this.channelId?" (".concat(this.channelId,")"):""," - ").concat(this.program).concat(this.programId?" (".concat(this.programId,")"):"",": ").concat(t," - ").concat(n,"]")}}]),e}(),Bl=function(){function e(t){l(this,e),this._programs=t.programs||[],this._programs=this._programs.map((function(e){return new Nl(e)})).sort((function(e,t){return t.endTime-e.endTime})),this.rawData=t}return c(e,[{key:"programs",get:function(){return this._programs}},{key:"latestProgram",get:function(){return this.programs[0]}},{key:"getProgramForTime",value:function(e,t){return this.programs&&this.programs.find((function(n){return n.contains(e,t)}))}}]),e}(),Fl=jn.truncateTimeSeconds,Ul=jn.getCurrentTime,Vl=jn.now,Hl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e))._playback=e.playback,i._throttledPositionUpdate=No((function(){var e;return(e=i)._onPositionUpdate.apply(e,arguments)}),5e3,{trailing:!1}),i._url=i.epgApiUrl,i}return c(n,[{key:"name",get:function(){return"epg"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"epgApiUrl",get:function(){return"".concat(this.options._env.protocol,"://epg-api.video.globo.com/v2/programs")}},{key:"playback",get:function(){return this._playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this._onResourceReady)}},{key:"parseEPG",value:function(e){this._updating=!1,this._epg=new Bl(e),this.container.trigger(Gn.DID_LOAD_EPG,{programs:this._epg.programs}),this._onPositionUpdate()}},{key:"updateEPG",value:function(){if(!this._updating){var e=Ul(this.innerPlayback),t=Fl(e-this.playback.getDuration()),n=Fl(e+1800);this._loadEpgData(t,n)}}},{key:"updateProgramForTime",value:function(e){if(!this._currentProgram||!this._currentProgram.contains(e)){var t=this._epg&&this._epg.getProgramForTime(e,5);this._currentProgram!==t&&(this._currentProgram=t,this.container.trigger(Gn.DID_CHANGE_CURRENT_PROGRAM,{program:this._currentProgram}))}}},{key:"_onResourceReady",value:function(e){var t,n=e.isLive,i=e.transmission&&e.transmission.id,r=!(null===(t=this.innerPlayback)||void 0===t||!t.getProgramDateTime);n&&i&&r?(this._video=e,this._transmissionId=i,this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate),this.listenTo(this.playback,xe.PLAYBACK_SEEKED,this._onPositionUpdate),this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.updateEPG)):Re.info(this.name,"skipping EPG loading (isLive=".concat(n,", transmissionId=").concat(i,")"))}},{key:"_loadEpgData",value:function(e,t){var n=this;if(isNaN(e)||isNaN(t))Re.warn(this.name,"skipping EPG request. Invalid start or end time. start: ".concat(e,",  end: ").concat(t));else{var i=Vl();if(!(this._lastRequestTime&&i-this._lastRequestTime<6e4)){this._lastRequestTime=i,this._updating=!0;var r="".concat(this._url,"?transmission_id=").concat(this._transmissionId,"&start_time=").concat(e,"&end_time=").concat(t);return $.ajax({url:r}).then((function(e){return n.parseEPG(e)}),(function(e,t,i){Re.error(n.name,"could not load EPG:",i||t),!n._epg&&n.stopListening(n.playback)}))}}}},{key:"_onPositionUpdate",value:function(){if(this.innerPlayback){var e=Ul(this.innerPlayback);this.updateProgramForTime(e);var t=this._epg&&this._epg.latestProgram;!this._updating&&t&&t.endTime-e<=300&&this.updateEPG()}}}]),n}(ct),jl=jn.autoplayManager,Kl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).options.disableControlsOnPoster||(i.options.disableControlsOnPoster=!0),i.options.disableControlsOnPoster&&i.container.disableMediaControl(),i._clicked=!1,i.playButtonVisible=!0,i.render(),i}return c(n,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<div class="poster__background"></div>\n<div class="poster__background-overlay"></div>\n<button class="poster__play-wrapper" tabindex="0"></button>\n')}},{key:"disableImage",get:function(){return this.options.poster&&this.options.poster.disableImage}},{key:"startHidden",get:function(){return this.options.poster&&this.options.poster.startHidden}},{key:"attributes",get:function(){return{class:"poster".concat(this.startHidden?" poster--hidden":"")}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"posterImageUrls",get:function(){var e;return(null===(e=this.video)||void 0===e?void 0:e.posterImageUrls)||{}}},{key:"posterImage",get:function(){if(!this.options.src||!this.options.sources||!this.options.sources.length)return null;var e=Object.keys(this.posterImageUrls);if(!e.length)return null;var t=this.container.currentSize.height,n=e.reduce((function(e,n){return Math.abs(n-t)<=Math.abs(e-t)?n:e}));return this.posterImageUrls[n]}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED,this.hidePlayButton),this.listenTo(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container.playback,Gn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,xe.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onStop)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.authorizePosterImage=!e.adult||this.options.allowRestrictedContent,this.authorizePosterImage&&!this.disableImage&&this.addPosterImage()}},{key:"onAutoplayBlocked",value:function(){this.stopListening(this.container.playback,Gn.WM_PLAY_REQUESTED),this.showPlayButton()}},{key:"onBuffering",value:function(){this._clicked=!0,this.hidePlayButton()}},{key:"onPlay",value:function(){this.$el.addClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.enableMediaControl()}},{key:"onStop",value:function(){this._clicked=!1,this.show()}},{key:"show",value:function(){this.$el.removeClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.disableMediaControl(),this.options.poster&&this.options.poster.disablePlayButton||ne.isChromecast||this.showPlayButton()}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.playButtonVisible=!1}},{key:"showPlayButton",value:function(){this.playButtonVisible=!0,this.$playButton.show()}},{key:"clicked",value:function(e){if(e.stopPropagation(),!this._clicked&&this.playButtonVisible)return this.container.playback.trigger(Gn.WM_USER_PLAY_REQUESTED,{event:e}),this.container.playback.playback&&this.container.playback.consent(),this.container.playback.play(),this.hidePlayButton(),this._clicked=!0,!1}},{key:"render",value:function(){var e=this,t=Kn.getStyleFrom(".clappr-player#wp3-player-0 .poster {\n  cursor: pointer;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .poster--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .poster:hover .poster__play-wrapper {\n  filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));\n}\n.clappr-player#wp3-player-0 .poster__background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n}\n.clappr-player#wp3-player-0 .poster__background-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .poster__play-wrapper {\n  background: none;\n  border: none;\n  width: auto;\n  height: 30%;\n  text-align: center;\n  opacity: 0.97;\n  transition: filter 0.3s;\n  flex: 1;\n}\n.clappr-player#wp3-player-0 .poster__play-wrapper svg {\n  width: 100%;\n  height: 100%;\n  display: inline;\n}",{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(t[0]),this.container.$el.append(this.el),this.$playButton=this.$el.find(".poster__play-wrapper"),this.$playButton.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir vídeo</span>'),this.options.autoPlay&&this.hidePlayButton(),jl.onAutoplayAvailable((function(){return e.hidePlayButton()}),this.options,(function(){jl.isAutoPlayMutedAllowed(e.options)||e._clicked||e.showPlayButton()})),this}},{key:"addPosterImage",value:function(){if(this.container.currentSize&&this.container.currentSize.height>0){var e=this.posterImage;if(e){this.container.options.poster=e,this.imgEl=this.$(".poster__background"),this.imgEl.css({"background-image":"url("+e+")"}),this.$el.prepend(this.imgEl[0]);var t=this.container.$el.find("video");t.length&&(t[0].poster=e)}}else this.listenToOnce(this.container,xe.CONTAINER_RESIZE,this.addPosterImage)}}]),n}(ht),Gl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).render(),i}return c(n,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"animationModeTemplate",get:function(){return Ge('<p class="visually-hidden">Carregando</p>\n<div class="spinner__svg spinner__svg--animated" aria-hidden="true">\n  <%= spinnerIcon %>\n</div>\n')}},{key:"textModeTemplate",get:function(){return Ge('<div class="spinner__text">Carregando...</div>')}},{key:"playback",get:function(){return this.container.playback}},{key:"attributes",get:function(){var e,t;return{class:"spinner".concat(null!==(e=this.options)&&void 0!==e&&null!==(t=e.spinner)&&void 0!==t&&t.textMode?" spinner--text-mode":""),role:"alert"}}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Gn.WM_PLAY_REQUESTED,this.start),this.listenToOnce(this.playback,Gn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.start),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,xe.CONTAINER_PLAY,this.stop),this.listenTo(this.container,xe.CONTAINER_STOP,this.stop),this.listenTo(this.container,xe.CONTAINER_ERROR,this.stop)}},{key:"onAutoplayBlocked",value:function(){this.stop(),this.stopListening(this.playback,Gn.WM_PLAY_REQUESTED),this.listenToOnce(this.playback,Gn.WM_USER_PLAY_REQUESTED,this.start)}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.stop(),this.stopListening(),this.enabled=!1}},{key:"start",value:function(){var e=this;this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible||(this.timeoutId=setTimeout((function(){var t,n;e.$el.html(null!==(t=e.options)&&void 0!==t&&null!==(n=t.spinner)&&void 0!==n&&n.textMode?e.textModeTemplate():e.animationModeTemplate({spinnerIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M2.4 12c0-5.302 4.298-9.6 9.6-9.6.663 0 1.2.537 1.2 1.2 0 .663-.537 1.2-1.2 1.2-3.976 0-7.2 3.224-7.2 7.2 0 .663-.537 1.2-1.2 1.2-.663 0-1.2-.537-1.2-1.2z" fill="#FFF"/>\n    </g>\n</svg>'})),e.isVisible=!0,e.container.trigger(Gn.WM_SPINNER_START),e.timeoutId=null}),300))}},{key:"stop",value:function(){this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible&&(this.isVisible=!1,this.$el.html(""),this.container.trigger(Gn.WM_SPINNER_STOP))}},{key:"resetTimeoutToStart",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"disableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop&&(this.waitingTimeUpdateToStop=!1,this.stopListening(this.container,xe.CONTAINER_TIMEUPDATE))}},{key:"enableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop=!0,this.listenToOnce(this.container,xe.CONTAINER_TIMEUPDATE,this.stop)}},{key:"onBufferfull",value:function(){var e,t,n=this.playback&&this.playback.videoEl;"video"===(null==n||null===(e=n.nodeName)||void 0===e||null===(t=e.toLowerCase)||void 0===t?void 0:t.call(e))?n.currentTime>0?this.stop():this.enableTimeUpdateObserver():this.stop()}},{key:"render",value:function(){var e=this,t=Kn.getStyleFrom(".clappr-player#wp3-player-0 .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 998;\n  width: 48px;\n  height: 48px;\n  margin: -24px 0 0 -24px;\n  cursor: default;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .spinner--text-mode {\n  width: 190px;\n  margin-left: -95px;\n}\n.clappr-player#wp3-player-0 .spinner__text {\n  font-size: 28px;\n  font-weight: 700;\n  text-align: center;\n  color: #fff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .spinner__svg {\n  line-height: 100%;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .spinner__svg--animated {\n  animation: rotate-spinner-player 0.5s linear infinite normal forwards;\n}\n@keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}",{playerId:this.options.playerId});return this.container.$el.append(t[0]),this.container.$el.append(this.el),this.options.autoPlay?this.start():this.stop(),jn.autoplayManager.onAutoplayAvailable((function(){return e.start()}),this.options,(function(){jn.autoplayManager.isAutoPlayMutedAllowed(e.options)||e.stop()})),this}}]),n}(ht),Wl=function(){function e(){l(this,e)}return c(e,[{key:"sequence",value:function(){var e=Array.prototype.slice.call(arguments),t=0;return function(n){if(n=(n=n||window.event).keyCode||n.which||n,e[t].includes(n)||e[t=0].includes(n)){var i=e[++t];if("function"!=typeof i)return;i(),t=0}}}}]),e}(),Yl=Bn.Keys,zl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).deviceTime="",i.timer=null,i.showLatencyInfo=!1,i.setupSequenceChecker(),i.handleKeyDown=i.handleKeyDown.bind(g(i)),i}return c(n,[{key:"name",get:function(){return"latency__info"}},{key:"supportedVersion",get:function(){return{min:'"0.11.5"'}}},{key:"template",get:function(){return Ge('<h1 class="date"></h1>\n<h2 class="latency-seconds"></h2>')}},{key:"attributes",get:function(){return{id:"latency-info",class:"latency__info ".concat(ne.isSmartTvEnvironment?"latency__info--tv":"")}}},{key:"playbackCurrentTimestamp",get:function(){return this.container.playback.currentTimestamp}},{key:"isLive",get:function(){return this.container.getPlaybackType()===Je.LIVE}},{key:"currentDateTime",get:function(){return jn.currentServerDateTime()}},{key:"setupSequenceChecker",value:function(){var e=this;this.sequenceChecker=(new Wl).sequence(Yl.VK_LEFT,Yl.VK_DOWN,Yl.VK_RIGHT,Yl.VK_RIGHT,Yl.VK_DOWN,Yl.VK_LEFT,Yl.VK_UP,Yl.VK_LEFT,(function(){return e._toggleEasterEgg()}))}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,xe.PLAYBACK_PLAY,this.bindKeyDown),this.listenTo(this.container,Gn.LATENCY_INFO_TOGGLE_REQUEST,this._toggleEasterEgg),this.listenTo(this.container,Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST,this._toggleKeyEvents)}},{key:"bindKeyDown",value:function(){this.isLive&&document.addEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){this.sequenceChecker({keyCode:e.keyCode})}},{key:"_show",value:function(){this._startTimer(),this.render()}},{key:"_toggleKeyEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shouldDisableKeyEvents;t?this._unbindKeyEvents():this.bindKeyDown()}},{key:"_toggleEasterEgg",value:function(){this.showLatencyInfo=!this.showLatencyInfo,this.showLatencyInfo?this._show():this._hide()}},{key:"_startTimer",value:function(){var e=this;this.timer||(this.timer=setInterval((function(){return e._showTime()}),1e3))}},{key:"_hide",value:function(){clearInterval(this.timer),this.timer=null,this.$el.empty()}},{key:"_updateView",value:function(){this.showLatencyInfo&&(this.$el.find("#latency-info .date").text(this.deviceTime),this.$el.find("#latency-info .latency-seconds").text("".concat(this.latencyInfo,"s")))}},{key:"_formatTime",value:function(e){var t=[e.getHours(),e.getMinutes(),e.getSeconds()].map((function(e){return e.toString().padStart(2,"0")})),n=b(t,3),i=n[0],r=n[1],a=n[2];return"".concat(i,":").concat(r,":").concat(a)}},{key:"_showTime",value:function(){var e=new Date;if(this.deviceTime=this._formatTime(e),this.playbackCurrentTimestamp){var t=this.currentDateTime.getTime(),n=1e3*this.playbackCurrentTimestamp;this.latencyInfo=Math.trunc((t-n)/1e3)}else this.latencyInfo="not available";this._updateView()}},{key:"render",value:function(){var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .latency__info {\n  background: rgba(0, 0, 0, 0.6);\n  position: fixed;\n  z-index: 3;\n  left: 25px;\n  top: 25px;\n  box-sizing: border-box;\n  padding: 10px;\n  font-size: 16px;\n  color: white;\n}\n.clappr-player#wp3-player-0 .latency__info--tv {\n  font-size: 24px;\n}",{playerId:this.options.playerId});return this.$el.html(this.template()),this.el.appendChild(e[0]),this.container.$el.append(this.el),this}},{key:"_unbindKeyEvents",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"destroy",value:function(){this._unbindKeyEvents(),clearInterval(this.timer),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ht),ql=/^https?:\/\/([a-z0-9\.\-]*)\.globoi?\.com/,$l=/^https?:\/\/[w]*\.?(techtudo)\.com\.br/,Xl=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).siteName=i.options.siteName,i.listenToOnce(i.container.playback,Gn.WM_RESOURCE_READY,i.onResourceReady),i.embedPlugin(),i}return c(n,[{key:"name",get:function(){return"comscore"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"environment",get:function(){return this.container.options._env}},{key:"scorecardBeacon",get:function(){return"".concat(this.environment.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/beacon.js")}},{key:"embedPlugin",value:function(){var e=this;if(!window.COMSCORE){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src=this.scorecardBeacon,t.onload=function(){return e.ready()},document.head.appendChild(t)}}},{key:"ready",value:function(){this.isReady=!0,this.trigger("comscore:ready")}},{key:"onResourceReady",value:function(e){var t=this;window.COMSCORE?(this.video=e,this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container,xe.CONTAINER_STOP,this.onStop),this.listenToOnce(this.container,xe.CONTAINER_ENDED,this.onStop)):this.listenToOnce(this,"comscore:ready",(function(){return t.onResourceReady(e)}))}},{key:"onPlay",value:function(){var e={c2:6035227,c3:this.getSiteName(),c4:this.video.channel,c5:this.getVideoType(),c6:null,c10:"1|1",rn:Math.random()};window.location.host.match(/globotv\.globo\.com$/)&&(e.c6="Globotv - "+this.video.channel),COMSCORE.beacon(e)}},{key:"onStop",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"getSiteName",value:function(){return this.siteName?this.siteName:this.getSubdomain(window.location.href)}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(ql)||e.match($l);return t?t[1]:null}return null}},{key:"getVideoType",value:function(){return{ad:"09",live:"03"}[this.video.kind]||"02"}}]),n}(ct),Ql=/([a-z0-9\.\-]*)\.globoi?\.com/,Jl=/[w]*\.?(techtudo)\.com\.br/,Zl="*null",eu=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).options.daxExtras||(i.options.daxExtras=i.options.daxextras),i.adError=!1,i.isReady=!1,i.started=!1,i.currentTime=0,i.embedScript(),i}return c(n,[{key:"name",get:function(){return"streamsense"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"waitForDFP",get:function(){return!ne.isChromecast&&!ne.isMobile}},{key:"isAdPlayback",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"currentTimeInMilliseconds",get:function(){return this.toMilliseconds(this.currentTime)}},{key:"streamsenseScript",get:function(){return"".concat(this.options._env.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/vendor/libs/comScore-JS-6.3.1.181004.min.js")}},{key:"scorecardMeasurement",get:function(){return"".concat(this.options._env.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/p?c1=2&c2=6035227&ns_site=globo")}},{key:"contentType",get:function(){var e="live"===this.video.kind,t=!e&&this.video.duration/1e3/60;return e?"vc13":!e&&t>=10?"vc12":"vc11"}},{key:"bindEvents",value:function(){var e=this;this.waitForDFP&&(this.listenTo(this.container,Gn.DFP_CONTENT_RESUME,(function(){return e.checkAd(!1)})),this.listenTo(this.container,Gn.DFP_AD_ERROR,(function(){return e.checkAd(!0)})),this.listenTo(this.container,Gn.DFP_CONTENT_ENDED,this.bindPlaybackEvents)),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,(function(t){return e.setupStart(t)}))}},{key:"bindPlaybackEvents",value:function(){var e,t,n=this,i=(d(e={},xe.CONTAINER_TIMEUPDATE,this.timeUpdate),d(e,xe.CONTAINER_PLAY,this.onPlay),d(e,xe.CONTAINER_PAUSE,this.onPause),d(e,xe.CONTAINER_ERROR,this.onError),d(e,xe.CONTAINER_SEEK,this.onSeek),d(e,xe.CONTAINER_STATE_BUFFERING,this.onBuffering),e),r=(d(t={},xe.PLAYBACK_STOP,this.onEnded),d(t,xe.PLAYBACK_ENDED,this.onEnded),d(t,xe.PLAYBACK_ERROR,this.onEnded),t);Object.keys(i).forEach((function(e){var t=i[e];n.stopListening(n.container,e,t),n.listenTo(n.container,e,t)})),Object.keys(r).forEach((function(e){var t=r[e];n.stopListening(n.container.playback,e,t),n.listenTo(n.container.playback,e,t)}))}},{key:"setupStart",value:function(e){var t=this;this.video=e,!this.isReady&&!window.ns_||!this.dfpReady&&this.waitForDFP?this.listenToOnce(this,Gn.STREAMSENSE_READY,(function(){return t.setupStart(e)})):(this.start(),!this.waitForDFP&&this.bindPlaybackEvents())}},{key:"checkAd",value:function(e){this.adError=e,this.dfpReady=!0,!this.started&&this.setupStart(this.video),this.bindPlaybackEvents()}},{key:"ready",value:function(){window.ns_?(this.isReady=!0,this.trigger(Gn.STREAMSENSE_READY)):this.disable()}},{key:"embedScript",value:function(){var e=this;if(!window.ns_||!window.ns_.StreamingAnalytics){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",this.streamsenseScript),t.onload=function(){return e.ready()},t.onerror=function(){return e.ready()},document.head.appendChild(t)}}},{key:"start",value:function(){this.video&&ns_.StreamingAnalytics&&(this.streamSense=new ns_.StreamingAnalytics({liveEndpointURL:this.scorecardMeasurement}),this.setStreamSenseInitData(),this.setClip(),this.started=!0)}},{key:"setStreamSenseInitData",value:function(){this.streamSense.setLabels&&this.streamSense.setLabels({ns_st_mp:"Player",ns_st_mv:"7.154.0"}),this.streamSense.createPlaybackSession&&this.streamSense.createPlaybackSession({ns_st_pl:this.video.program+"-"+this.video.title})}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(Ql)||e.match(Jl);return t?t[1]:null}return null}},{key:"setClip",value:function(){var e={short:"vc11",full:"vc12",live:"vc13",collaborative:"vc21",ad:"va00"}[this.contentType],t=this.container.options.dax&&this.container.options.dax.url,n=this.container.options.dax&&this.container.options.dax;n||(n=this.container.options.domain);var i=n||t&&new URL(t).hostname||document.location.hostname,r={c3:this.getSubdomain(i),c4:this.video.channel,ns_st_ty:e,ns_st_ct:this.contentType,ns_st_pr:this.video.program,ns_st_ep:this.video.title,ns_st_st:this.video.channel,ns_st_pu:"Globo",ns_st_ge:this.video.category,ns_st_ci:""+this.video.id,ns_st_cu:t||document.location.href,ns_st_cl:this.video.duration||0,ns_st_cn:1,ns_st_pn:1,ns_st_tp:1,ns_st_ia:Zl,ns_st_ce:Zl,ns_st_ddt:Zl,ns_st_tdt:Zl};Object.assign(r,this.options.daxExtras),this.streamSense.getPlaybackSession&&this.streamSense.getPlaybackSession().setAsset(r)}},{key:"timeUpdate",value:function(e){this.currentTime=e.current}},{key:"onPlay",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPlay(this.currentTimeInMilliseconds)}},{key:"onPause",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPause(this.currentTimeInMilliseconds)}},{key:"onEnded",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds)}},{key:"onBuffering",value:function(){this.started&&!this.isAdPlayback&&this.video&&"Live"===this.video.type&&this.streamSense.notifyBufferStart(this.currentTimeInMilliseconds)}},{key:"onSeek",value:function(){this.onPause()}},{key:"onError",value:function(){}},{key:"toMilliseconds",value:function(e){return 1e3*e>>0}},{key:"destroy",value:function(){this.started&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),tu=jn.Ajax,nu=jn.loadUrlAsImage,iu=jn.hexGrf,ru=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).url=i.webmediaApiHit,i}return c(n,[{key:"name",get:function(){return"webmedia_api_hit"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"type",get:function(){return ne.isMobile?"mobile_browser":"desktop"}},{key:"environment",get:function(){return this.container.options._env}},{key:"webmediaApiHit",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://stats.video.globo.com"):"".concat(this.environment.protocol,"://stats.video.dev.globoi.com")}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.fillIds),this.listenToOnce(this.container.playback,xe.PLAYBACK_PLAY,this.seed),this.listenToOnce(this.container.playback,xe.PLAYBACK_ENDED,this.bindEvents),this.listenToOnce(this.container.playback,xe.PLAYBACK_STOP,this.bindEvents)}},{key:"fillIds",value:function(e){this.videoId=e.id,this.programId=e.programId}},{key:"seed",value:function(){var e=this;if(this.videoId&&this.programId){var t="hitStats_".concat(+new Date),n="/hits/".concat(this.videoId,"?type=").concat(this.type,"&callback=").concat(t),i="".concat(this.url).concat(n);tu.jsonp({url:i,callbackName:t,timeout:5e3}).then((function(t){return e.hit(t)}),this.logError)}else this.logError("no argument was passed")}},{key:"hit",value:function(e){var t=e.data,n="".concat(t).concat(iu(t+"w3bM3d!A")),i="hitIncStats_".concat(+new Date),r="/hits/".concat(this.videoId,"/").concat(this.programId,"/").concat(n,"?type=").concat(this.type,"&callback=").concat(i),a="".concat(this.url).concat(r);nu(a)}},{key:"logError",value:function(e){Re.error(this.name,"Webmedia api hit was not possible because ",e)}}]),n}(ct),au=/\n?(\r?\n){2}/,ou=/\r?\n/,su=/([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]*)?/,lu=/[0-9:,]+/g,uu=/[^\S\r\n]+$/gm,cu=function(){function e(t){var n=this;l(this,e),this.subtitleItems=[];var i=t.replace(uu,"").split(au).filter((function(e){return n.isValid(e)}));this.subtitleItems=i.map((function(e){return n.parseSubtitle(e)}))}return c(e,[{key:"isCurrentSubtitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t>=e.start&&t<=e.end}},{key:"getSubtitleAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.subtitleItems[e]}},{key:"getSubtitleBy",value:function(e){for(var t=0,n=this.subtitleItems.length-1,i=Math.floor((t+n)/2);!this.isCurrentSubtitle(this.subtitleItems[i],e)&&t<n;)e>this.subtitleItems[i].start?t=i+1:n=i-1,i=Math.floor((t+n)/2);return this.isCurrentSubtitle(this.subtitleItems[i],e)?{index:i,subtitle:this.subtitleItems[i]}:void 0}},{key:"isValid",value:function(e){return e&&""!==e.trim()}},{key:"millisFromTimestamp",value:function(e){e=e.match(su);var t=60*parseInt(e[1],10)*60*1e3;return t+=60*parseInt(e[2],10)*1e3,t+=1e3*parseInt(e[3],10),e[4]&&(t+=parseInt(e[4],10)),t}},{key:"parseSubtitle",value:function(e){var t=-1,n=-1,i="",r=e.split(ou);if(r.length>=2){var a=r[1].match(lu);if(a[0]&&(t=this.millisFromTimestamp(a[0])),a[1]&&(n=this.millisFromTimestamp(a[1])),-1!==t&&-1!==n)i=r.slice(2).join("<br>");return{start:t,end:n,content:i}}}}]),e}(),du="undefined"!=typeof window?window:void 0!==vo?vo:"undefined"!=typeof self?self:{},hu=Array.prototype.slice,fu=function(e,t){"length"in e||(e=[e]);e=hu.call(e);for(;e.length;){var n=e.shift(),i=t(n);if(i)return i;n.childNodes&&n.childNodes.length&&(e=hu.call(n.childNodes).concat(e))}};var pu=gu;function gu(e,t){if(!(this instanceof gu))return new gu(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}gu.prototype.nodeType=8,gu.prototype.nodeName="#comment",gu.prototype.toString=function(){return"[object Comment]"};var vu=mu;function mu(e,t){if(!(this instanceof mu))return new mu(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}mu.prototype.type="DOMTextNode",mu.prototype.nodeType=3,mu.prototype.nodeName="#text",mu.prototype.toString=function(){return this.data},mu.prototype.replaceData=function(e,t,n){var i=this.data,r=i.substring(0,e),a=i.substring(e+t,i.length);this.data=r+n+a,this.length=this.data.length};var yu=function(e){var t=this,n=e.type;e.target||(e.target=t);t.listeners||(t.listeners={});var i=t.listeners[n];if(i)return i.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)};var Au=function(e,t){var n=this;n.listeners||(n.listeners={});n.listeners[e]||(n.listeners[e]=[]);-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)};var bu=function(e,t){var n=this;if(!n.listeners)return;if(!n.listeners[e])return;var i=n.listeners[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)};var Eu=ku,_u=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function ku(e){switch(e.nodeType){case 3:return wu(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],n=e.tagName;"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(n=n.toLowerCase());t.push("<"+n+function(e){var t=[];for(var n in e)Tu(e,n)&&t.push({name:n,value:e[n]});for(var i in e._attributes)for(var r in e._attributes[i]){var a=e._attributes[i][r],o=(a.prefix?a.prefix+":":"")+r;t.push({name:o,value:a.value})}e.className&&t.push({name:"class",value:e.className});return t.length?Su(t):""}(e)+function(e){var t=e.dataset,n=[];for(var i in t)n.push({name:"data-"+i,value:t[i]});return n.length?Su(n):""}(e)),_u.indexOf(n)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(ku)):e.textContent||e.innerText?t.push(wu(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+n+">"));return t.join("")}(e)}}function Tu(e,t){var n=typeof e[t];return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function Su(e){var t=[];return e.forEach((function(e){var n=e.name,i=e.value;"style"===n&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var i=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+i+";"})),t}(i)),t.push(n+'="'+(wu(i).replace(/"/g,"&quot;")+'"'))})),t.length?" "+t.join(" "):""}function wu(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Cu="http://www.w3.org/1999/xhtml",Iu=Ru;function Ru(e,t,n){if(!(this instanceof Ru))return new Ru(e);var i=void 0===n?Cu:n||null;this.tagName=i===Cu?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}Ru.prototype.type="DOMElement",Ru.prototype.nodeType=1,Ru.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},Ru.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},Ru.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},Ru.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},Ru.prototype.setAttributeNS=function(e,t,n){var i=null,r=t,a=t.indexOf(":");(a>-1&&(i=t.substr(0,a),r=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[r]={value:n,prefix:i}},Ru.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],i=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},Ru.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},Ru.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},Ru.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},Ru.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},Ru.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},Ru.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},Ru.prototype.removeEventListener=bu,Ru.prototype.addEventListener=Au,Ru.prototype.dispatchEvent=yu,Ru.prototype.focus=function(){},Ru.prototype.toString=function(){return Eu(this)},Ru.prototype.getElementsByClassName=function(e){var t=e.split(" "),n=[];return fu(this,(function(e){if(1===e.nodeType){var i=(e.className||"").split(" ");t.every((function(e){return-1!==i.indexOf(e)}))&&n.push(e)}})),n},Ru.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return fu(this.childNodes,(function(n){1!==n.nodeType||"*"!==e&&n.tagName.toLowerCase()!==e||t.push(n)})),t},Ru.prototype.contains=function(e){return fu(this,(function(t){return e===t}))||!1};var Du=Lu;function Lu(e){if(!(this instanceof Lu))return new Lu;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}Lu.prototype.type="DocumentFragment",Lu.prototype.nodeType=11,Lu.prototype.nodeName="#document-fragment",Lu.prototype.appendChild=Iu.prototype.appendChild,Lu.prototype.replaceChild=Iu.prototype.replaceChild,Lu.prototype.removeChild=Iu.prototype.removeChild,Lu.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")};var Pu=Ou;function Ou(e){}Ou.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},Ou.prototype.preventDefault=function(){};var xu=Mu;function Mu(){if(!(this instanceof Mu))return new Mu;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var Nu=Mu.prototype;Nu.createTextNode=function(e){return new vu(e,this)},Nu.createElementNS=function(e,t){var n=null===e?null:String(e);return new Iu(t,this,n)},Nu.createElement=function(e){return new Iu(e,this)},Nu.createDocumentFragment=function(){return new Du(this)},Nu.createEvent=function(e){return new Pu},Nu.createComment=function(e){return new pu(e,this)},Nu.getElementById=function(e){return e=String(e),fu(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},Nu.getElementsByClassName=Iu.prototype.getElementsByClassName,Nu.getElementsByTagName=Iu.prototype.getElementsByTagName,Nu.contains=Iu.prototype.contains,Nu.removeEventListener=bu,Nu.addEventListener=Au,Nu.dispatchEvent=yu;var Bu,Fu=new xu,Uu=void 0!==vo?vo:"undefined"!=typeof window?window:{};"undefined"!=typeof document?Bu=document:(Bu=Uu["__GLOBAL_DOCUMENT_CACHE@4"])||(Bu=Uu["__GLOBAL_DOCUMENT_CACHE@4"]=Fu);var Vu=Bu;var Hu=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null},ju=Vu.createElement&&Vu.createElement("textarea"),Ku={rt:"ruby"},Gu={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Wu={v:"title",lang:"lang"},Yu={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var zu=function(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!Ku[t.localName]||Ku[t.localName]===e.localName}function r(t,n){var i=Gu[t];if(!i)return null;var r=e.document.createElement(i),a=Wu[t];return a&&n&&(r[a]=n.trim()),r}for(var a,o,s=e.document.createElement("div"),l=s,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((o=a,ju.innerHTML=o,o=ju.textContent,ju.textContent="",o)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=Hu(a.substr(1,a.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(!i(l,c))continue;if(h[2]){var f=h[2].split(".");f.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(Object.prototype.hasOwnProperty.call(Yu,n)){var i=t?"background-color":"color",r=Yu[n];c.style[i]=r}})),c.className=f.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return s},qu=function(e,t){return e&&t?zu(e,t):null};function $u(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}$u.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},$u.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},$u.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},$u.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},$u.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},$u.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},$u.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},$u.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}};var Xu=$u;function Qu(){}Qu.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)Object.prototype.hasOwnProperty.call(e,n)&&(t.style[n]=e[n])},Qu.prototype.formatStyle=function(e,t){return 0===e?0:e+t};var Ju=Qu,Zu=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];var ec=function(e){for(var t=0;t<Zu.length;t++){var n=Zu[t];if(e>=n[0]&&e<=n[1])return!0}return!1};var tc=function(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(n,e);i=a(n);)for(var o=0;o<i.length;o++)if(t=i.charCodeAt(o),ec(t))return"rtl";return"ltr"};function nc(e,t,n){Ju.call(this),this.cue=t,this.cueDiv=zu(e,t.text);var i={color:n.color||"rgba(255, 255, 255, 1)",backgroundColor:n.backgroundColor||"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:n.display||"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",padding:n.padding,borderRadius:n.borderRadius};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:tc(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}nc.prototype=Object.create(Ju.prototype),nc.prototype.constructor=nc;var ic=nc;var rc=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i};var ac=function(e,t,n,i){var r=new Xu(t),a=t.cue,o=rc(a),s=[];if(a.snapToLines){var l;switch(a.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(o),d=n[l]+u,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),r.move(h,c)}else{var f=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=f/2;break;case"end":o-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new Xu(t)}var p=function(e,t){for(var r,a=new Xu(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(r=new Xu(e),o=l),e=new Xu(a)}return r||a}(r,s);t.move(p.toCSSCompatValues(n))},oc=function(e,t,n,i){if(!e||!t||!n)return null;for(i=i||{};n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],o=Xu.getSimpleBoxPosition(r),s=i.fontSize||Math.round(.05*o.height*100)/100,l=i.fontFamily||"sans-serif",u=Object.assign({font:s+"px "+l},i,u);!function(){for(var n,i,s=0;s<t.length;s++)i=t[s],n=new ic(e,i,u),r.appendChild(n.div),ac(e,n,o,a),i.displayState=n.div,a.push(Xu.getSimpleBoxPosition(n))}()}else for(var c=0;c<t.length;c++)r.appendChild(t[c].displayState)};function sc(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}sc.prototype=Object.create(Error.prototype),sc.prototype.constructor=sc,sc.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};var lc=sc;function uc(){this.values=Object.create(null)}uc.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var cc=uc;var dc=function(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length)t(o[0],o[1])}};var hc=function(e,t,n){var i=e;function r(){var t=Hu(e);if(null===t)throw new lc(lc.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new lc(lc.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new cc;dc(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line",-1)}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position",-1)}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)},fc=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new e.TextDecoder("utf8"),this.regionList=[]};fc.prototype.reportOrThrowError=function(e){if(!(e instanceof lc))throw e;this.onparsingerror&&this.onparsingerror(e)},fc.prototype.parse=function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?dc(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new cc;dc(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",Hu(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):dc(e,(function(e,n){if("Region"===e)!function(e){var n=new cc;if(dc(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new cc;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new lc(lc.Errors.BadSignature);t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{hc(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},fc.prototype.flush=function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new lc(lc.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this};var pc=fc;function gc(module){return module.default||module}function vc(){}vc.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},vc.convertCueToDOMTree=gc(qu),vc.processCues=gc(oc),vc.Parser=gc(pc);var mc=vc;var module,yc=(module=qu).default||module,Ac={"":1,lr:1,rl:1},bc={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Ec(e){return"string"==typeof e&&(!!bc[e.toLowerCase()]&&e.toLowerCase())}function _c(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,o=t,s=n,l=null,u="",c=!0,d="auto",h="start",f="auto",p="auto",g=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Ac[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Ec(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=Ec(e);t?(p=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=Ec(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}_c.prototype.getCueAsHTML=function(){return yc(window,this.text)};var kc=_c,Tc={"":!0,up:!0};function Sc(e){return"number"==typeof e&&e>=0&&e<=100}var wc=function(){var e=100,t=3,n=0,i=100,r=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Sc(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Sc(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Sc(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Sc(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Sc(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t=function(e){return"string"==typeof e&&!!Tc[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):o=t}}})},Cc=yo((function(module){var e=module.exports={WebVTT:mc,VTTCue:kc,VTTRegion:wc};du.vttjs=e,du.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,i=du.VTTCue,r=du.VTTRegion;e.shim=function(){du.VTTCue=t,du.VTTRegion=n},e.restore=function(){du.VTTCue=i,du.VTTRegion=r},du.VTTCue||e.shim()})),Ic=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).subtitleItems=i.parseVttFile(e),i}return c(n,[{key:"init",value:function(){return{parser:new Cc.WebVTT.Parser(window,Cc.WebVTT.StringDecoder()),cues:[]}}},{key:"bindEvents",value:function(e,t){e.onparsingerror=function(e){Re.error(this.name,"\n Error when trying to parse WebVTT file: ".concat(e))},e.oncue=function(e){t.push(e)}}},{key:"parseVttFile",value:function(e){if(e){var t=this.init(),n=t.parser,i=t.cues;return this.bindEvents(n,i),n.parse(e),n.flush(),i}}},{key:"getActiveCue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subtitleItems,n=E(t),i=n.length,r=0,a=i-1,o=Math.floor((i-1)/2),s=n[o],l=n.splice(0,o+1),u=n;if(!(r>a)&&s.startTime)return e>=s.startTime&&e<=s.endTime?[s]:i<=1?[]:e<=s.startTime?this.getActiveCue(e,l):e>s.startTime?this.getActiveCue(e,u):void 0}},{key:"processActiveCue",value:function(e,t,n){Cc.WebVTT.processCues(window,e,t,n)}}]),n}(Me),Rc={fontFamily:"clearsans-bold",padding:"0.2em",borderRadius:"0.2em",display:"inline-block"},Dc=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).render(),i.createCachedElements(),i.idPlayback=i.container.playback,i.enableWebVtt=!!i.options.shouldDeviceUseWebVTT,i}return c(n,[{key:"attributes",get:function(){return{class:"subtitle__wrapper","data-subtitle":""}}},{key:"name",get:function(){return"subtitle"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<p class="subtitle"></p>\n')}},{key:"tagVideo",get:function(){return this.idPlayback.videoEl}},{key:"subtitleTrackAutoHandled",get:function(){return ne.isiOS||ne.isSafari&&"hls_fairplay_playback"===this.idPlayback.innerPlaybackName}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.updateSubtitle),this.listenTo(this.container,Gn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Gn.WM_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_SHOW,(function(){return e.onMediaControlShow()})),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_HIDE,(function(){return e.onMediaControlHide()})),this.listenTo(this.container,Gn.WM_MASTERTOPIP,(function(){return e.$el.hide()})),this.listenTo(this.container,Gn.WM_PIPTOMASTER,(function(){return e.$el.show()})),this.listenTo(this.container,xe.CONTAINER_RESIZE,this.onPlayerResize),this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.onPlay)}},{key:"onPlay",value:function(){this.createCachedElements(),this.updateCurrentSize(),this.updateResponsiveStyle()}},{key:"updateCurrentSize",value:function(){this.currentWidth=this.container.el.clientWidth,this.currentHeight=this.container.el.clientHeight}},{key:"onSubtitleAvailable",value:function(e,t){this.availableSubtitles=e,this.enableWebVtt=e.some((function(e){return"webvtt"===e.type})),this.generateSubtitleParser(t),this.updateStyle(),this.setInitialSubtitle()}},{key:"generateSubtitleParser",value:function(e){var t=this;this.availableContents=e.map((function(e){return e&&(t.enableWebVtt?new Ic(e):new cu(e))}))}},{key:"onMediaControlShow",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-hide").addClass("subtitle--opacity-media-control-show")}},{key:"onMediaControlHide",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-show").addClass("subtitle--opacity-media-control-hide")}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.updateSize(),this.updateStyle()}},{key:"setInitialSubtitle",value:function(){var e=this,t=this.availableSubtitles.find((function(e){return e.selected}));this.subtitleTrackAutoHandled?setTimeout((function(){return e.onSubtitleChanged(t)})):this.onSubtitleChanged(t)}},{key:"onSubtitleChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.subtitleTrackAutoHandled)this.changeTextTrack(e);else{var t=this.availableContents[e.id];t?(this.subtitleParser=t,this.currentIndex=0,this.$el.show(),this.$subtitle.addClass("subtitle--hidden")):(delete this.subtitleParser,delete this.currentIndex,this.$subtitle.html(""),this.$el.hide())}}},{key:"changeTextTrack",value:function(e){var t=this.tagVideo.textTracks;Object.values(t).forEach((function(e){return e.mode="hidden"}));var n=Object.values(t).find((function(t){return e.keys.includes(t.language)}));n&&(n.mode="showing")}},{key:"updateSize",value:function(){jn.applySizeClass(this.$el,this.container.$el.width())}},{key:"updateStyle",value:function(){this.enableWebVtt&&this.processVttActiveCue(),this.updateFontSize(),this.updateVerticalPosition()}},{key:"updateFontSize",value:function(){this.$subtitle.css({fontSize:this.getFontSize()})}},{key:"updateVerticalPosition",value:function(){this.enableWebVtt?this.$el.css({bottom:"auto"}):this.$el.css({bottom:this.getVerticalPosition()})}},{key:"updateSubtitle",value:function(e){this.subtitleParser&&(this.enableWebVtt?this.updateWebVTTSubtitleContent(e.current):this.updateSrtSubtitleContent(1e3*e.current))}},{key:"updateWebVTTSubtitleContent",value:function(e){this.subtitleParser.subtitleItems&&(this.activeSubtitle=this.subtitleParser.getActiveCue(e),this.activeSubtitle&&!!this.activeSubtitle.length?(this.$el.addClass("subtitle__wrapper--override-webvtt"),this.$subtitle.removeClass("subtitle--hidden"),this.processVttActiveCue()):this.$subtitle.addClass("subtitle--hidden"))}},{key:"processVttActiveCue",value:function(){this.resetVttCueStyle(),this.subtitleParser&&this.subtitleParser.processActiveCue(this.activeSubtitle,this.$subtitle[0],this.getVttStyles())}},{key:"resetVttCueStyle",value:function(){this.activeSubtitle&&this.activeSubtitle[0]&&(this.activeSubtitle[0].hasBeenReset=this.activeSubtitle[0].playerWidth!==this.currentWidth,this.activeSubtitle[0].playerWidth=this.currentWidth)}},{key:"getVttStyles",value:function(){return i({fontSize:this.getFontSize()},Rc)}},{key:"updateSrtSubtitleContent",value:function(e){var t=this.subtitleParser.getSubtitleAt(this.currentIndex),n=this.subtitleParser.isCurrentSubtitle(t,e);if(!n){var i=this.currentIndex+1,r=this.subtitleParser.getSubtitleAt(i);if(n=this.subtitleParser.isCurrentSubtitle(r,e))this.currentIndex=i,t=r;else if(r&&(e>r.end||e<t.start)){var a=this.subtitleParser.getSubtitleBy(e);t=a&&a.subtitle,a&&(this.currentIndex=a.index),n=!!a}}t&&this.$subtitle.html()!=t.content&&this.$subtitle.html(t.content),n?this.$subtitle.removeClass("subtitle--hidden"):this.$subtitle.addClass("subtitle--hidden")}},{key:"getMediaControlLowerHeight",value:function(){return this.$mediaControlPanelLower&&this.$mediaControlPanelLower.getBoundingClientRect().height||80}},{key:"getVerticalPosition",value:function(){return this.currentHeight/12}},{key:"getFontSize",value:function(){return this.currentWidth<560?14:2.5*this.currentWidth/100}},{key:"createCachedElements",value:function(){this.$subtitle=this.$el.find(".subtitle");var e=".clappr-player#wp3-player-".concat(this.options.playerId," .media-control-panel__lower");this.$mediaControlPanelLower=document.querySelector(e)}},{key:"render",value:function(){var e=Kn.getStyleFrom('.clappr-player#wp3-player-0 .subtitle {\n  background-color: rgba(0, 0, 0, 0.7);\n  position: relative;\n  font-family: "clearsans-bold", sans-serif;\n  font-size: 14px;\n  color: #f1f1f1;\n  line-height: 1.4;\n  margin: auto;\n  display: inline-block;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .subtitle--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-show, .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n  transition: opacity 0.3s ease-in-out;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-show {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper {\n  display: flex;\n  bottom: 0;\n  position: absolute;\n  width: 100%;\n  z-index: 993;\n  will-change: transform;\n  transition: transform 0.3s ease-out;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt {\n  /* This section is responsible for override wrapper styles for WebVTT resources */\n  bottom: auto;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle {\n  background-color: transparent;\n  /* The WebVTT parser lib calculates based on the screen size where to put\n    the subtitles. This leaves 10/12 portion so it wont be placed on the screen limit */\n  height: 98%;\n  width: 98%;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle i {\n  font-family: "clearsans-bolditalic";\n}\n.clappr-player#wp3-player-0 .cast-enabled .subtitle__wrapper, .clappr-player#wp3-player-0 .cast-connecting .subtitle__wrapper {\n  display: none;\n}',{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.container.$el.append(this.el),this}}]),n}(ht),Lc=function(){function e(){l(this,e),this.youboraTimersStopped=!1,this.metrics={},this.youboraTimers={},this.initYouboraTimers()}return c(e,[{key:"YOUBORA_SERVICES",get:function(){return["init","adInit","adStart","adJoinTime","adStop","joinTime"]}},{key:"initYouboraTimers",value:function(){var e=this;this.YOUBORA_SERVICES.forEach((function(t){return e.youboraTimers[t]=0}))}},{key:"delta",value:function(e,t){var n=this.youboraTimers[e]-this.youboraTimers[t];return n>0?n:0}},{key:"onTimemark",value:function(e){var t=e.time,n=e.service,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="init"!==n&&this.youboraTimersStopped;-1===this.YOUBORA_SERVICES.indexOf(n)||r||(this.youboraTimers[n]=t,this.setAdMetrics(),this.setDFPMetrics(),this.setContentMetrics(),this.willSendParams(n)&&(this.setParams(i),this.initYouboraTimers()))}},{key:"setAdMetrics",value:function(){this.metrics.adInitTime=this.delta("adInit","init"),this.metrics.adStartTime=this.delta("adStart","adInit"),this.metrics.adJoinTime=this.delta("adJoinTime","adStart")}},{key:"setDFPMetrics",value:function(){this.metrics.dfpSetupTime=this.metrics.adStartTime+this.metrics.adJoinTime,this.metrics.dfpRunTime=this.delta("adStop","adInit"),this.metrics.dfpTime=this.metrics.dfpSetupTime?this.metrics.dfpSetupTime:this.metrics.dfpRunTime;var e=this.youboraTimers.adStop&&this.youboraTimers.adJoinTime;this.metrics.dfpWatchedTime=e?this.youboraTimers.adStop-this.youboraTimers.adJoinTime:0}},{key:"setContentMetrics",value:function(){this.metrics.contentStartTime=this.youboraTimers.adStop?this.delta("joinTime","adStop"):0,this.metrics.joinTime=this.delta("joinTime","init")-this.metrics.dfpWatchedTime}},{key:"willSendParams",value:function(e){var t="joinTime"===e;return this.youboraTimersStopped=t,t}},{key:"setParams",value:function(e){e.youboraMetrics=this.metrics}}]),e}(),Pc=Ki.Video,Oc=jn.getExperimentsList,xc=jn.API_VERSION,Mc=jn.getPlatformName,Nc=jn.toQueryString,Bc=jn.secondsToMillis,Fc=jn.getCookie,Uc=jn.session,Vc=jn.User,Hc=jn.autoplayManager,jc=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).initValues(),i.video={},i.setVideoSessionID(),i.browser="".concat(ne.name).concat(ne.version),i.playerId=Kt.playerId,i.url="".concat(i.horizonHost,"/auth-session/activity/webmedia/watch"),i.domain=i.options.domain||window.location.hostname.replace("www.","").split(".")[0],i.experiments=Oc(i.options),Hc.onAutoplayAvailable(i.onAutoplaySuccess.bind(g(i)),i.options,i.onAutoplayFailed.bind(g(i))),i.youboraTimemark=new Lc,i.externalData={},i.onDFPInit(),i}return c(n,[{key:"name",get:function(){return"horizon"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"isLive",get:function(){return"live"===this.video.kind||"live"===this.container.getPlaybackType()}},{key:"isAdsDisabled",get:function(){return this.options.skipDFP||!1}},{key:"currentTime",get:function(){return this.currentTimeValue},set:function(e){this.currentTimeValue=e}},{key:"horizonHost",get:function(){return"".concat(this.options._env.protocol,"://horizon.globo.com")}},{key:"tenant",get:function(){var e=this.options.horizon;return(void 0===e?{}:e).tenant||"unknown"}},{key:"referrer",get:function(){var e=this.options.horizon,t=void 0===e?{}:e;return null==t?void 0:t.referrer}},{key:"isEncrypted",get:function(){var e=this.video&&this.video.encrypted;return void 0!==e?e:"unknown"}},{key:"playbackName",get:function(){var e=this.container,t=e&&e.playback;return t?t.innerPlaybackName||t.name||"":null}},{key:"bufferingTime",get:function(){this.isBuffering&&(this.bufftime+=ke.now()-this.buffstarttime,this.buffstarttime=ke.now());var e=this.bufftime;return this.bufftime=0,Math.trunc(e)}},{key:"shouldIgnoreVolumeUpdate",value:function(e,t){var n=!this.isReady&&!this.container.playback.isPlaying();return null===e||n||!t}},{key:"setYouboraParams",value:function(e){var t=this.externalData&&this.externalData.youboraMetrics||{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}},{key:"setVideoSessionID",value:function(){this.params.video_session_id=Uc.getVideoSessionId(this.options.playerId)}},{key:"setDeviceInfo",value:function(){var e=this;Object.keys(this.options.deviceInfo).forEach((function(t){e.params["device_".concat(t)]=e.options.deviceInfo[t]}))}},{key:"getPercentage",value:function(e){return 0===e?e:e/this.session.duration*100}},{key:"initValues",value:function(){this.params={},this.dfpInit=0,this.bufftime=0,this.playRequestTime=0,this.isBuffering=!1,this.hasStartedClip=!1,this.isPlaying=!1}},{key:"bindEvents",value:function(){this.listenToOnce(this.container,xe.CONTAINER_PLAY,this.onFirstPlaying),this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED_READY,this.onPlayRequested),this.listenTo(this.container,xe.CONTAINER_PLAY,this.play),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.pause),this.listenTo(this.container,xe.CONTAINER_SEEK,this.seek),this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.timeUpdate),this.listenTo(this.container,xe.CONTAINER_ENDED,this.end),this.listenTo(this.container,xe.CONTAINER_DESTROYED,this.end),this.listenTo(this.container,xe.CONTAINER_STOP,this.end),this.listenTo(this.container,xe.CONTAINER_STATS_REPORT,this.onOldStatsReport),this.listenTo(this.container,xe.CONTAINER_ERROR,this.onError),this.listenTo(this.container,xe.CONTAINER_PIP_ENTER,this.onPIPEnter),this.listenTo(this.container,xe.CONTAINER_PIP_EXIT,this.onPIPExit),this.listenTo(this.container,Gn.WM_STATS_REPORTED,this.onStatsReport),this.listenTo(this.container,Gn.WM_MUTED,this.onVolumeMuted),this.listenTo(this.container,Gn.WM_UNMUTED,this.onVolumeUnmuted),this.listenTo(this.container,Gn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Gn.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.container,Gn.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,Gn.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenTo(this.container,Gn.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,Gn.WM_GA_UNTRACKED_EVENT,this.onGoogleAnalyticsEventUntracked),this.listenTo(this.container.playback,Gn.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,Gn.WILL_SELECT_FALLBACK_SOURCE,this.onFallbackSource),this.listenTo(this.container.playback,Gn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,Gn.WILL_RENEW_RESOURCE,this.onRenewResource),this.listenTo(this.container.playback,Gn.WM_WROOM_WAITING,this.onWRWaiting),this.listenToOnce(this.container,xe.Custom.DAI_ERROR,this.onDaiError),this.listenToOnce(this.container,xe.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded),this.listenToOnce(this.container,Gn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats)}},{key:"onPlayRequested",value:function(){this.playRequestTime=ke.now(),this.isReady=!0}},{key:"onMetadataLoaded",value:function(e){e&&(this.video=e,this.params.playback_id=e.id,this.params.subscriber_only=e.isSubscriberOnly,this.params.title=e.title,this.params.program=e.program,this.params.channel=e.channel,this.params.kind=e.kind,this.setExperimentsParams())}},{key:"setExperimentsParams",value:function(){this.experiments.length>0&&this.experiments[0]&&(this.params.experiment_1=this.experiments[0]),this.experiments.length>1&&this.experiments[1]&&(this.params.experiment_2=this.experiments[1])}},{key:"onStreamingDataLoaded",value:function(e){var t=e.pop,n=e.host;this.params.host=n,this.params.pop=t}},{key:"onFallbackSource",value:function(e){this.notifyAction(Bc(this.currentTime),"will_fallback_source",e)}},{key:"onFallbackSourceSelected",value:function(e){this.notifyAction(Bc(this.currentTime),"fallback_source_selected",e)}},{key:"onRenewResource",value:function(e){this.notifyAction(Bc(this.currentTime),"willRenewResource",e)}},{key:"onDaiError",value:function(e){if(e.notifiable){var t=e.errorCode,n=e.errorMessage;this.notifyAction(Bc(this.currentTime),"dai_error",{daiErrorCode:t,daiErrorMessage:n})}}},{key:"onDaiResourceLoaded",value:function(e){var t=e.implementationType;this.notifyAction(Bc(this.currentTime),"dai_resource_loaded",{implementationType:t})}},{key:"onDFPInit",value:function(){this.dfpInit=ke.now()}},{key:"onAdNotServed",value:function(){this.params.dfp_status="not served"}},{key:"onAdError",value:function(){this.params.dfp_status="error"}},{key:"onOldStatsReport",value:function(e){this.isLive&&(this.params.dvr=e.dvr?1:0)}},{key:"onStatsReport",value:function(e){e.extra.bitratesHistory.length>0&&(this.params.nominal_bitrate=e.extra.bitratesHistory[e.extra.bitratesHistory.length-1].bitrate),this.params.avg_bitrate=Math.trunc(e.extra.bitrateWeightedMean),this.params.session_time=Math.trunc(e.timers.session),this.params.watch_time=Math.trunc(e.timers.watch)}},{key:"onFirstPlaying",value:function(){if(this.listenToOnce(this.container,xe.CONTAINER_STATE_BUFFERING,this.buffering),this.isAd&&!this.dfp_startup_time)return this.params.dfp_status="delivered",void(this.params.dfp_startup_time=Math.trunc(ke.now()-this.dfpInit));this.params.startup_time=Math.trunc(ke.now()-this.playRequestTime)}},{key:"onVolumeMuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(Bc(this.currentTime),{mute_status:!0})}},{key:"onVolumeUnmuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(Bc(this.currentTime),{mute_status:!1})}},{key:"onSubtitleChanged",value:function(e){this.hasStartedClip&&this.notify(Bc(this.currentTime),{subtitle_status:"none"===e.language?"disabled":"enabled",subtitle_language:e.language})}},{key:"onLocationAvailable",value:function(e){this.params.lat=e.latitude,this.params.long=e.longitude}},{key:"onCurrentProgramUpdated",value:function(e){void 0!==e.program&&(this.params.program=e.program),void 0!==e.channel&&(this.params.channel=e.channel)}},{key:"onGoogleAnalyticsEventUntracked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;this.params.ga_untracked_event=n}},{key:"onPIPEnter",value:function(){this.notifyAction(Bc(this.currentTime),"pip_enter")}},{key:"onPIPExit",value:function(){this.notifyAction(Bc(this.currentTime),"pip_exit")}},{key:"onWRWaiting",value:function(){this.params.wroom=1,this.isLive?this.ping():this.sendRequest("".concat(this.url,"?").concat(Nc(this.params)))}},{key:"onAutoplaySuccess",value:function(){this.params.autoPlayAvailable=!0}},{key:"onAutoplayFailed",value:function(){this.params.autoPlayAvailable=!1}},{key:"updateAuthorizedWRState",value:function(){this.params.wroom=0,this.ping()}},{key:"onResourceRequestStats",value:function(e){var t=e.retries,n=e.usedFallback;this.retryHistory=JSON.stringify({attempts:t,fallback:n})}},{key:"onResourceReady",value:function(){this.updateAuthorizedWRState(),!this.session&&this.startSession(),this.retryHistory&&this.notifyRequestStats(this.retryHistory)}},{key:"play",value:function(){var e=this;this.isAd||(this.notifyPlayOrSeek(Bc(this.currentTime)),this.isPlaying||(this.breakTimerId=setInterval((function(){e.isPlaying=!0,e.notifyRelevantPoint(Bc(e.currentTime))}),15e3),this.ping()),this.doingSeek=!1,this.paused=!1)}},{key:"pause",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.userInvoked,r=void 0!==i&&i;this.pauseTimerId=setTimeout((function(){t.notifyAction(Bc(t.currentTime),"pause",{user_invoked:r})}),100)}},{key:"seek",value:function(){this.pauseTimerId&&(clearTimeout(this.pauseTimerId),this.pauseTimerId=null),this.doingSeek=!0}},{key:"timeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentTime=e.current}},{key:"onBufferStart",value:function(){this.isBuffering=!0,this.buffstarttime=ke.now()}},{key:"onBufferEnd",value:function(){this.isBuffering=!1,this.bufftime+=ke.now()-this.buffstarttime}},{key:"buffering",value:function(){this.onBufferStart(),this.listenToOnce(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.bufferfull)}},{key:"bufferfull",value:function(){this.onBufferEnd(),this.listenToOnce(this.container,xe.CONTAINER_STATE_BUFFERING,this.buffering)}},{key:"end",value:function(){this.notifyAction(Bc(this.currentTime),"stop"),this.cancelBreakTimer(),this.cancelPing(),this.initValues()}},{key:"clear",value:function(){this.params.dfp_startup_time=null,this.params.dfp_status=null}},{key:"cancelBreakTimer",value:function(){clearInterval(this.breakTimerId),clearInterval(this.playOrSeekTimerId),this.breakTimerId=null,this.isPlaying=!1}},{key:"cancelPing",value:function(){this.isLive&&(clearInterval(this.pingTimerId),this.pingTimerId=null)}},{key:"startSession",value:function(){var e=(new Date).getTime().toString();this.lastNotifiedPoint=-1,this.totalActions=0,this.isLive&&(this.params.signal=this.video.selectedResource.signal,this.params.started_at=e),this.video.providerId&&(this.params.gst=Fc("GST")),this.session={duration:this.video.duration,started_at:e,play:0,seek:0,pause:0,stop:0,mute:0,unmute:0,subtitle_enable:0,subtitle_disable:0,will_fallback_source:0,fallback_source_selected:0,willRenewResource:0,dai_error:0,retry_history:0,pip_enter:0,pip_exit:0,dai_resource_loaded:0},this.doingSeek=!1,this.hasStartedClip=!0}},{key:"notifyRelevantPoint",value:function(e){if(this.hasStartedClip){var t=this.getPercentage(e),n=5*Math.floor(t/5);n>this.lastNotifiedPoint?(this.notify(e),this.lastNotifiedPoint=n):this.verbose&&Re.info(this.name,"do not notify: ".concat(n," !> ").concat(this.lastNotifiedPoint))}}},{key:"notifyPlayOrSeek",value:function(e){var t=this,n=this.doingSeek;this.playOrSeekTimerId=setTimeout((function(){n?t.notifyAction(e,"seek"):t.notifyAction(e,"play")}),100)}},{key:"notifyRequestStats",value:function(e){this.notifyAction(Bc(this.currentTime),"retry_history",{retryHistory:e})}},{key:"notifyAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.hasStartedClip){var i=++this.session[t];n["".concat(t,"_total")]=i,n["".concat(t,"_id_").concat(i)]=e,this.notify(e,n)}}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.hasStartedClip){this.setCommonParams();var n=++this.totalActions,r=i(i(i({},t),this.params),{},d({duration:this.session.duration,started_at:this.session.started_at,last_at:(new Date).getTime().toString(),btime:this.bufferingTime},"time_".concat(n),e));1===n&&this.setYouboraParams(r),this.sendRequest("".concat(this.url,"?").concat(Nc(r))),this.clear()}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isLive?"watchlive":"watch";this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/").concat(t),this.params.started_at=(new Date).getTime().toString(),this.params.error=e.code||"unknown",this.params.errorDescription=e.description||"unknown",this.params.retryHistory=this.retryHistory,this.setCommonParams(),this.setExperimentsParams(),this.sendRequest("".concat(this.url,"?").concat(Nc(this.params)))}},{key:"ping",value:function(){var e=this;this.isLive&&(this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/watchlive"),this.params.dvr=this.params.dvr||0,this.setCommonParams(),this.pingTimerId||(this.sendPing(),this.pingTimerId=setInterval((function(){e.sendPing()}),6e4)))}},{key:"sendPing",value:function(){this.params.btime=this.bufferingTime,this.params.n=++this.totalActions;var e=Object.assign({},this.params);1===this.totalActions&&this.setYouboraParams(e),this.sendRequest("".concat(this.url,"?").concat(Nc(e)))}},{key:"sendRequest",value:function(e){return ne.isSmartTvEnvironment?this.sendRequestWithHeaders(e):this.sendRequestAsJsonP(e)}},{key:"sendRequestAsJsonP",value:function(e){var t=new Image;return t.src=e,t}},{key:"sendRequestWithHeaders",value:function(e){var t=this;$.ajax({url:e,xhrFields:{withCredentials:!0},headers:d({},this.options.token?"GLBID":"GLBUID",this.options.token||Vc.uid),error:function(e,n,i){return Re.warn(t.name,"could not send request: ".concat(i))}})}},{key:"setCommonParams",value:function(){var e,t=(null===(e=this.video)||void 0===e?void 0:e.id)||this.options.src||this.options.sources,n=this.video&&this.video.playerType||Pc.getPlayerType();this.setVideoSessionID(),this.options.deviceInfo&&this.setDeviceInfo(),this.params.player_id=this.playerId,this.params.browser=this.browser,this.params.object="video:".concat(t),this.params.playback_id=this.params.playback_id||t,this.params.playback=this.playbackName,this.params.player_type=n,this.params.platform=Mc(n),this.params.ads_disabled=this.isAdsDisabled,this.params.encrypted=this.isEncrypted,this.params.url=document.location.href,this.params.domain=this.domain,this.params.Referrer=this.referrer,this.params.cdn=this.video.cdn,this.params.player_version="7.154.0",this.params.api_version=xc,this.params.tenant=this.tenant}}]),n}(ct),Kc={prod:{id:"G-5401XJ0K8J",apiSecret:"jUsypDSXQHSEFT8K5wwT1Q"}},Gc="G-TY5Q77JETQ",Wc="_brF28yETmKW94YG07jvAg",Yc={"G-WPDK1YFMPF":"DPExjjlIQvySlMYz-witTQ","G-N6CD657Q6B":"EgSUj9Z3SOCDsM3-wRaBYQ"},zc=function(){function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;l(this,e);var s=i.user_id,u=void 0===s?null:s,c=i.endpoint_keys,d=void 0===c?{}:c,h=i.event_params,f=void 0===h?{}:h,p=i.user_properties,g=void 0===p?{}:p;this.environment=r,this.apiURL=this.environment.googleMeasurementProtocolUrl,this.userId=u,this.eventParams=f,this.clientId=d.clientId||d.client_id,this.userProperties=g,this.deviceProperties=a,this.defaultMeasurementId=(null===(t=Kc[this.environment.name])||void 0===t?void 0:t.id)||Gc,this.productMeasurementId=d.measurementId||d.measurement_id,this.apiSecret=d.api_secret||Yc[this.productMeasurementId]||(null===(n=Kc[this.environment.name])||void 0===n?void 0:n.apiSecret)||Wc,this.isIFrame=o}return c(e,[{key:"sendEvent",value:function(){}}]),e}(),qc=function(e){h(n,e);var t=m(n);function n(){var e;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._loadGTagScript(),e}return c(n,[{key:"_loadGTagScript",value:function(){var e=this;jn.registerGlobal("wm_player_gtag"),window.wm_player_gtag?this.gtag=window.wm_player_gtag:jn.embedScript("".concat(this.environment.googleAnalyticsTagScript,"?id=").concat(this.defaultMeasurementId)).then((function(){function t(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date);var n={send_page_view:!1,client_id:e.clientId};e.isIFrame&&t("set",{cookie_flags:"SameSite=None;Secure;Partitioned"}),t("config",e.defaultMeasurementId,n),window.wm_player_gtag=e.gtag=t}),(function(e){Re.warn(n.name,"error loading Google Analytics!",e)}))}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gtag&&this.gtag("event",e,i(i(i({},t),this.eventParams),{},{send_to:this.productMeasurementId,user_id:this.userId,user_properties:i(i({},this.deviceProperties),this.userProperties)}))}}]),n}(zc),$c=function(e){h(a,e);var t,n=m(a);function a(){var e;l(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return!(e=n.call.apply(n,[this].concat(i))).clientId&&Re.warn("google analytics","Collect: Measurement requires a client_id."),e}return c(a,[{key:"_parseProperties",value:function(e){return Object.keys(e).reduce((function(t,n){return e[n]&&(t[n]={value:e[n]}),t}),{})}},{key:"sendEvent",value:(t=s(r().mark((function e(t){var n,a,o,s,l,u,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=this.productMeasurementId||this.defaultMeasurementId,o="".concat(this.apiURL,"?measurement_id=").concat(a,"&api_secret=").concat(this.apiSecret),s=this._parseProperties(this.deviceProperties),l=this._parseProperties(this.userProperties),u=i(i({client_id:this.clientId},this.userId&&{user_id:this.userId}),{},{user_properties:i(i({},s),l),events:[{name:t,params:i(i({},n),this.eventParams)}]}),e.next=8,$.ajax({url:o,type:"POST",data:JSON.stringify(u)});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(zc),Xc=jn.toDurationString,Qc=jn.toLowerCase,Jc={excerpt:"short",segment:"short",episode:"full"},Zc=function(){function e(t){var n=t.isArchived,i=t.isSubscriberOnly,r=t.id,a=t.channel,o=t.program,s=t.title,u=t.channelId,c=t.programId,d=t.exhibitedAt,h=t.kind,f=t.createdAt,p=t.serviceId,g=t.category,v=t.duration,m=t.transmission,y=t.autoPlay,A=t.domain,b=t.initialTime,E=t.schemaVersion,_=t.ambient,k=t.mediaRights,T=t.platform,S=t.playerVersion;l(this,e),this.video_grade_acervo=n?"acervo":"grade",this.video_fechado_aberto=i?"fechado":"aberto",this.video_id=r,this.video_channel=a,this.video_program=o,this.video_episode=s,this.video_channel_id=u,this.video_program_id=c,this.video_air_date_tv=d,this.video_date_created=f,this.video_length_ms=Math.trunc(v/1e3),this.video_player_version=S,this.video_place=null==m?void 0:m.affiliate.code,this.video_service_id=p,this.video_category=Qc(g),this.video_length_bucket=Xc(v),this.video_autoplay=y,this.video_domain=A,this.video_type=Jc[h]||h,this.video_keep_watching=b>0?"true":"false",this.video_tracking_version=E,this.video_playback="online",this.consumption_environment=_,this.platform=T,this.setVideoMediaRights(k)}return c(e,[{key:"setVideoMediaRights",value:function(e){var t=this;if(e){var n=1;e.forEach((function(e){var i="video_media_rights_".concat(n),r=t[i]||"",a=r?"|".concat(e):e;(r+a).length<=500?t[i]=r+a:n<4&&n++}))}}},{key:"setSessionIdDimension",value:function(e){this.video_session_id=e}},{key:"setVideoPlaceDimension",value:function(e){var t=e.affiliate;t&&(this.video_place=t.code)}},{key:"setAdErrorDimension",value:function(e){this.video_ad_error=e}},{key:"setDVRDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?t?"em-dvr":"em-simulcast":"nao-disponivel";this.video_dvr=n}},{key:"setProgramDimension",value:function(e){var t=e.program,n=e.channel,i={video_epg_program_id:e.programId,video_epg_program:t,video_epg_channel_id:e.channelId,video_epg_channel:n};for(var r in i)this[r]=i[r]}},{key:"setLanguageDimension",value:function(e,t){if(t){var n=t.languageISO_639_2B,i=t.language,r=t.role;this["video_".concat(e)]=n||i,"caption"===r||"description"===r?this["video_".concat(e,"_type")]=r:delete this["video_".concat(e,"_type")]}}}]),e}(),ed=1e3,td=function(){function e(){l(this,e)}return c(e,[{key:"setVideoStart",value:function(){this.video_start=1}},{key:"setVideoComplete",value:function(){this.video_complete=1}},{key:"setVideoSeek",value:function(){this.video_seek=1}},{key:"setVideoQuickSeek",value:function(){this.video_quick_seek=1}},{key:"setVideoSkip",value:function(e,t){this["video_".concat({skip_intro:"open",skip_recap:"summary"}[e],"_skip_").concat(t)]=1}},{key:"setVideoAutoSkip",value:function(){this.video_autoskip=1}},{key:"setVideoBuffer",value:function(){this.video_buffer=1}},{key:"setVideoBufferTime",value:function(e,t,n,i){var r;this.video_buffer_time=null!==(r=this.video_buffer_time)&&void 0!==r?r:0,this._calculateBufferTime(e,t,n,i)}},{key:"setVideoBuckets",value:function(e){var t=this;e.forEach((function(e){t["video_bucket_".concat(e)]=1}))}},{key:"setVideoPlayTime",value:function(e,t,n,i){this._calculatePlayTime(e,t,n,i)}},{key:"_calculateBufferTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0&&e>0&&t>e;return n?(this.video_buffer_time+=(t-e)/ed,this.video_buffer_time):this.video_buffer_time}},{key:"_calculatePlayTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.video_playtime=(t-e)/ed,this.video_buffer_time&&(this.video_playtime-=this.video_buffer_time),this._shouldResetPlaytime(n,i)&&(this.video_playtime=0)}},{key:"_shouldResetPlaytime",value:function(e,t){var n=e?300:t/1e3*3;return this.video_playtime>n||this.video_playtime<0}}]),e}(),nd=[100,90,75,50,25,10],id=function(){function e(t){l(this,e),this._calculateVideoBuckets(t)}return c(e,[{key:"getCurrentBuckets",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=[],i=T(this._buckets);try{for(i.s();!(e=i.n()).done;){var r=e.value;t>=r.time&&n.push(r.percentage)}}catch(e){i.e(e)}finally{i.f()}var a=this._buckets.filter((function(e){var t=e.percentage;return!n.includes(t)}));return this._buckets=a,n}},{key:"_calculateVideoBuckets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._buckets=[];for(var t=0,n=nd;t<n.length;t++){var i=n[t],r=i/100*e;this._buckets.push({percentage:i,time:r})}}}]),e}(),rd={event_name:"video_start",event_category:"video",event_action:"start"},ad={event_name:"video_play",event_category:"video",event_action:"play"},od={event_name:"video_pause",event_category:"video",event_action:"pause"},sd={event_name:"video_complete",event_category:"video",event_action:"end"},ld={event_name:"video_milestone",event_category:"video",event_action:"milestone"},ud=jn.seekStringToSeconds,cd=jn.session,dd=jn.now,hd="object"===a(window.onbeforeunload)?"beforeunload":"unload",fd=function(e){h(n,e);var t=m(n);function n(e){var i;l(this,n);var r=(i=t.call(this,e)).options,a=r.ga4,o=r._env,s=r.isIFrame,u=ne.isSmartTvEnvironment?$c:qc;return i.collect=new u(a,o,i._getDeviceProperties(),s),i.boundOnEnd=i.onStop.bind(g(i)),i._resetOriginalSessionState(),i}return c(n,[{key:"name",get:function(){return"google-analytics4"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"schemaVersion",get:function(){return"15.0"}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"platform",get:function(){return ne.isSmartTvEnvironment?"big screen":ne.isMobile?"mobile":"desktop"}},{key:"ambient",get:function(){return ne.isSmartTvEnvironment?"app_tv":"web"}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.onFirstPlay),this.listenTo(this.playback,xe.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.playback,xe.PLAYBACK_DVR,this.setDVRDimension),this.listenTo(this.container,xe.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,Gn.DFP_CONTENT_RESUME,this.onAdResume),this.listenTo(this.container,Gn.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,Gn.WM_SUBTITLE_CHANGED,this.setSubtitleDimension),this.listenTo(this.container,Gn.WM_AUDIO_CHANGED,this.setAudioDimension),this.listenTo(this.container,Gn.DID_CHANGE_CURRENT_PROGRAM,this.setProgramDimension),this.listenTo(this.container,Gn.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,Gn.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container,Gn.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,Gn.SKIP_BUTTON_SHOW,this.onSkipButtonShow),this.listenTo(this.container,Gn.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap)}},{key:"bindCustomEvents",value:function(){window.addEventListener(hd,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){var t={autoPlay:this.options.autoPlay,domain:this.container.options.domain||document.location.hostname,initialTime:this.options.resumeAt||ud(),schemaVersion:this.schemaVersion,ambient:this.ambient,platform:this.platform},n=i(i(i({},e),t),{},{playerVersion:"7.154.0"});this.videoDuration=e.duration,this.customDimensions=new Zc(n),this.customMetrics=new td,this.videoBucketMap=new id(e.duration)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transmission,n=cd.getVideoSessionId(this.options.playerId);this.customDimensions.setSessionIdDimension(n),t&&this.customDimensions.setVideoPlaceDimension(t)}},{key:"onFirstPlay",value:function(){this._captureOriginalSessionState(),this._initializeVideoSession(),this.sendEvent(rd),this._bindPlaybackEvents(),this.bindCustomEvents()}},{key:"onPlay",value:function(){this.sendEvent(ad)}},{key:"onPause",value:function(){this.setVideoPlayTimeMetric(),this.sendEvent(od),this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.onPlay)}},{key:"onComplete",value:function(){this.customMetrics.setVideoComplete(),this.setVideoPlayTimeMetric(),this.sendEventWithOriginalOptions(sd),this._prepareToReplay()}},{key:"onStop",value:function(){this.setVideoPlayTimeMetric(),this.sendEventWithOriginalOptions(sd),this._prepareToReplay()}},{key:"onSeek",value:function(){this.customMetrics.setVideoSeek()}},{key:"onQuickSeek",value:function(){this.customMetrics.setVideoQuickSeek()}},{key:"onBuffering",value:function(){this.loadInitialTime=dd(),this.customMetrics.setVideoBuffer(),this.listenToOnce(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.onBufferFull)}},{key:"onBufferFull",value:function(){this.loadEndTime=dd(),this.customMetrics.setVideoBufferTime(this.loadInitialTime,this.loadEndTime)}},{key:"onSkipButtonClicked",value:function(e){var t=e.name;this.customMetrics.setVideoSkip(t,"click")}},{key:"onSkipButtonShow",value:function(e){var t=e.name;this.customMetrics.setVideoSkip(t,"show")}},{key:"onAutoSkipRecap",value:function(){this.customMetrics.setVideoAutoSkip()}},{key:"onAdResume",value:function(){this.customDimensions.setAdErrorDimension(!1)}},{key:"onAdError",value:function(){this.customDimensions.setAdErrorDimension(!0)}},{key:"onStatsReported",value:function(e){var t=e.timers;this.watchedTime=t.watch}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.current,n=this.isLive?this.watchedTime/1e3:t,r=this._calculateMinute(n),a="minute - ".concat(r);r&&(this.setVideoPlayTimeMetric(),this.sendEvent(i(i({},ld),{},{event_label:a,event_minute:a})))}},{key:"setProgramDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.customDimensions.setProgramDimension(t)}},{key:"setSubtitleDimension",value:function(e){this.customDimensions.setLanguageDimension("subtitle",e)}},{key:"setAudioDimension",value:function(e){this.customDimensions.setLanguageDimension("audio",e)}},{key:"setDVRDimension",value:function(e){this.customDimensions.setDVRDimension(this.container.isDvrEnabled(),e)}},{key:"setVideoBucketsMetric",value:function(){var e=this.videoBucketMap.getCurrentBuckets(this.watchedTime);this.customMetrics.setVideoBuckets(e)}},{key:"setVideoPlayTimeMetric",value:function(){var e=dd();this.customMetrics.setVideoPlayTime(this.initialPlayTime,e,this.isLive,this.videoDuration)}},{key:"sendEvent",value:function(e){var t=e.event_label||this.customDimensions.video_program;!this.isLive&&this.setVideoBucketsMetric(),this.collect.sendEvent(e.event_name,i(i(i({},e),{},{event_label:t},this.customDimensions),this.customMetrics)),this._resetMetrics()}},{key:"sendEventWithOriginalOptions",value:function(e){if(!this._hasOriginalSessionState())return this.sendEvent(e);var t=this._getOriginalCollector(),n=this._getOriginalDimensionsWithSession(),r=e.event_label||n.video_program;!this.isLive&&this.setVideoBucketsMetric(),t.sendEvent(e.event_name,i(i(i({},e),{},{event_label:r},n),this.customMetrics)),this._resetMetrics()}},{key:"_calculateMinute",value:function(e){var t=Math.trunc(e),n=0!==t&&this.lastCheckedSecond!==t&&t%60<1;return this.lastCheckedSecond=t,n?Math.trunc(e/60):0}},{key:"_getDeviceProperties",value:function(){var e=this.options.deviceInfo;return{platform:this.platform,consumption_environment:this.ambient,tv_maker:(null==e?void 0:e.manufacturer)||ne.device&&ne.device.brand,tv_model:(null==e?void 0:e.model)||ne.device&&ne.device.model}}},{key:"_captureOriginalSessionState",value:function(){this.originalOptions=$.extend(!0,{},this.options),this.originalCustomDimensions=$.extend(!0,{},this.customDimensions),this._createOriginalCollector()}},{key:"_createOriginalCollector",value:function(){var e=this.originalOptions,t=e.ga4,n=e._env,i=e.isIFrame,r=ne.isSmartTvEnvironment?$c:qc;this.originalCollect=new r(t,n,this._getDeviceProperties(),i)}},{key:"_resetOriginalSessionState",value:function(){this.originalOptions=null,this.originalCollect=null,this.originalCustomDimensions=null}},{key:"_initializeVideoSession",value:function(){this.setDVRDimension(),this.setSubtitleDimension(this.playback.currentSubtitle),this.setAudioDimension(this.playback.currentAudio),this.customMetrics.setVideoStart()}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.onComplete),this.listenTo(this.playback,xe.PLAYBACK_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_DESTROYED,this.onStop)}},{key:"_unbindPlaybackEvents",value:function(){var e=this;[xe.PLAYBACK_PLAY,xe.PLAYBACK_ENDED,xe.PLAYBACK_STOP].forEach((function(t){return e.stopListening(e.playback,t)})),this.stopListening(this.container,xe.CONTAINER_DESTROYED)}},{key:"_getOriginalCollector",value:function(){return this.originalCollect||this.collect}},{key:"_getOriginalDimensionsWithSession",value:function(){var e=this.originalOptions||this.options,t=cd.getVideoSessionId(e.playerId);return i(i({},this.originalCustomDimensions||this.customDimensions),{},{video_session_id:t})}},{key:"_resetMetrics",value:function(){this.customMetrics=new td,this.initialPlayTime=dd()}},{key:"_hasOriginalSessionState",value:function(){return null!==this.originalOptions&&null!==this.originalCollect}},{key:"_prepareToReplay",value:function(){this._unbindPlaybackEvents(),this.unbindCustomEvents(),this._resetOriginalSessionState(),this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.onFirstPlay)}},{key:"unbindCustomEvents",value:function(){window.removeEventListener(hd,this.boundOnEnd)}},{key:"destroy",value:function(){this.unbindCustomEvents(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),pd=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).rendered=!1,i}return c(n,[{key:"name",get:function(){return"waiting_room"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ge('<div class="waiting-room__aligner">\n<div class="waiting-room__main-text">Estamos lotados! Tentaremos carregar a transmissão novamente em </div>\n<p class="waiting-room__countdown"></p>\n</div>\n')}},{key:"attributes",get:function(){return{class:"waiting-room"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,Gn.WM_WROOM_WAITING,this.onResponse)}},{key:"onResponse",value:function(){var e=this;this.retryInterval=this.setRetryInterval(),this.rendered?this.updateScreenVisibility("flex"):this.render(),this.countdownStart=Date.now(),this.retryID=setTimeout((function(){e.retry()}),this.retryInterval),this.countdownID=setInterval((function(){e.updateScreen()}),1e3)}},{key:"retry",value:function(){clearInterval(this.retryID),clearInterval(this.countdownID),this.updateScreenVisibility("none"),this.container.playback.trigger(Gn.WILL_RESTART_PLAYBACK,"wroom")}},{key:"updateScreen",value:function(){this.updateCountdownElement(this.updateCountdownTime())}},{key:"updateScreenVisibility",value:function(e){this.$el[0].style.display=e}},{key:"updateCountdownElement",value:function(e){this.$el.find(".waiting-room__countdown").text(this.toSeconds(e))}},{key:"updateCountdownTime",value:function(){return this.retryInterval-(Date.now()-this.countdownStart)}},{key:"toSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"setRetryInterval",value:function(){return Math.round(-2e4*Math.random())+5e4}},{key:"render",value:function(){if(!this.rendered){this.$el.html(this.template());var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .waiting-room {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: #202020;\n  background-size: cover;\n  z-index: 999;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n}\n.clappr-player#wp3-player-0 .waiting-room__aligner {\n  flex-grow: 1;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .waiting-room__main-text {\n  color: rgb(204, 204, 204);\n  font-weight: 700;\n  font-size: 18px;\n  width: 100%;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .waiting-room__countdown {\n  color: rgb(204, 204, 204);\n  font-weight: 700;\n  font-size: 18px;\n  margin: 0 auto;\n  background-color: rgba(0, 0, 0, 0.5);\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  line-height: 50px;\n  display: inline-block;\n  text-align: center;\n}",{baseUrl:this.options.baseUrl,playerId:this.options.playerId});return this.$el.append(e[0]),this.container.$el.append(this.el),this.rendered=!0,this}}}]),n}(ht),gd="6.8.42",vd=function(){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.slice,n=this,i=t.call(arguments,1);function r(){var r=n.prototype&&this instanceof n;return n.apply(!r&&e||this,i.concat(t.call(arguments)))}return r.prototype=n.prototype,r},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function!");for(var n=this.length,i=0;i<n;i++)e.call(t,this[i],i,this)},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)}},md=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},yd=function(){},Ad=function(){};Ad.prototype={constructor:function(){}},Ad.extend=function(e,t){var n,i=this;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},md(n,i,t),n.prototype=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return yd.prototype=e,new yd}(i.prototype),e&&md(n.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};var bd=Ad,Ed=function(e){return"[object Array]"===Object.prototype.toString.call(e)},_d=bd.extend({on:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},Ed(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),Ed(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,n){"function"==typeof n&&n({type:e,data:t,target:this})}}),kd=_d,Td={_emitter:new kd,on:function(){Td._emitter.on.apply(Td._emitter,arguments)},off:function(){Td._emitter.off.apply(Td._emitter,arguments)},emit:function(){Td._emitter.emit.apply(Td._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(e,t,n){if("undefined"!=typeof console&&console.log&&"undefined"!=typeof document){n=n||"darkcyan";var i,r={5:"e",4:"w",3:"n",2:"d",1:"v"}[t=t||Td.Level.NOTICE],a="[Youbora]"+Td._getCurrentTime()+" "+r+":";if(this.emit("log",{level:t,msg:e,prefix:a}),Td.logLevel<=t)if(Td.plainLogs||document.documentMode)Td._plainReport(e,a);else i=t===Td.Level.ERROR&&console.error?console.error:t===Td.Level.WARNING&&console.warn?console.warn:t===Td.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,Ed(e)?(e.splice(0,0,a,"color: "+n),i.apply(console,e)):i.call(console,a,"color: "+n,e)}},_getCurrentTime:function(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"},_plainReport:function(e,t){if(e instanceof Array)for(var n in e)Td._plainReport(e[n],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},error:function(){Td.report([].slice.call(arguments),Td.Level.ERROR,"darkred")},warn:function(){Td.report([].slice.call(arguments),Td.Level.WARNING,"darkorange")},notice:function(){Td.report([].slice.call(arguments),Td.Level.NOTICE,"darkgreen")},debug:function(){Td.report([].slice.call(arguments),Td.Level.DEBUG,"indigo")},verbose:function(){Td.report([].slice.call(arguments),Td.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){"undefined"!=typeof window&&window.location&&this._parseLevelFromUrl(window.location.search)},_parseLevelFromUrl:function(e){if(e){var t=/\?.*&*youbora-debug=(.+)/i.exec(e);null!==t&&(Td.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(e)&&(Td.plainLogs=!0)}}},Sd=Td,wd={stripProtocol:function(e){var t=e;try{t=e.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){Sd.warn(e)}return t},addProtocol:function(e,t){var n="http://localhost/";try{n="http://"+e,t||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?n="https://"+e:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(n="//"+e)}catch(e){Sd.warn(e)}return n},parseNumber:function(e,t){return!isNaN(e)&&e>=0&&e!==1/0&&e!==-1/0&&null!=e?e:t},logAllEvents:function(e,t,n){try{if(Sd.logLevel<=Sd.Level.DEBUG){n=n||function(e){Sd.debug("Event: "+e.type)};var i=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),i=t):i=i.concat(t));for(var r=0;r<i.length;r++)"function"==typeof e?e.call(window,i[r],n):e.on?e.on(i[r],n):e.addEventListener&&e.addEventListener(i[r],n)}}catch(e){Sd.error(e)}},buildRenditionString:function(e,t,n){1===arguments.length&&(n=e,e=null,t=null);var i=null;return e&&t&&(i=e+"x"+t),"number"==typeof n&&!isNaN(n)&&n>=1&&(i?i+="@":i="",i+=n<1e3?Math.round(n)+"bps":n<1e6?(n=Math.round(n/1e3))+"Kbps":(n=Math.round(n/1e4)/100)+"Mbps"),i},buildErrorParams:function(e,t,n,i){var r={};return"object"==typeof e&&null!==e?r=e:(r.errorCode=e||"FAILURE",r.msg=t||r.errorCode,r.errorMetadata=n,r.errorLevel=i),r},calculateAdViewability:function(e,t){var n=!0;if("undefined"!=typeof window&&e&&"function"==typeof e.getBoundingClientRect){var i=e.getBoundingClientRect();if(i.top>=window.innerHeight||i.bottom<=0||i.right<=0||i.left>=window.innerWidth)n=!1;else{var r=Math.trunc(i.height*i.width),a=i.top>0?i.top:0,o=i.bottom>window.innerHeight?window.innerHeight:i.bottom,s=i.left>0?i.left:0;n=100*(((i.right>window.innerWidth?window.innerWidth:i.right)-s)*(o-a))>r*(t||50)}}return n},getMetricsFrom:function(e,t){var n=e||t;for(var i in n)if("object"!=typeof n[i]||!n[i].value){var r={};r.value=n[i],n[i]=r}return n},assign:md,isArray:Ed},Cd=wd,Id=bd.extend({getCdnTraffic:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)e=CdnBalancerStats.cdn.totalDownloadedBytes;else if("undefined"!=typeof Streamroot)e=this._getStreamrootPeerObject("cdn",!1)||this._getStreamrootInstanceObject("cdnDownload");else if("undefined"!=typeof peer5&&peer5.getStats)e=peer5.getStats().totalHttpDownloaded;else if("undefined"!=typeof teltoo&&teltoo.getStats){var t=teltoo.getStats();e=t.totalReceivedBytes-t.p2pReceivedBytes}return e},getMultiCdnInfo:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn&&CdnBalancerStats.cdn.cdns){var t=CdnBalancerStats.p2p;e={P2P:{downloaded_bytes:t.downloadedBytes,uploaded_bytes:t.uploadedBytes,downloaded_chunks:t.downloadedSegments,uploaded_chunks:t.uploadedSegments,errors:t.failedRequests?t.failedRequests.total:0,missed_downloaded_chunks:t.failedRequests?t.failedRequests.absent:0,timeout_errors:t.failedRequests?t.failedRequests.timeout:0,other_errors:t.failedRequests?t.failedRequests.error:0,late_uploaded_chunks:t.discardedUploadedSegments,late_uploaded_bytes:t.discardedUploadedBytes,late_downloaded_bytes:t.discardedDownloadedBytes,time:t.downloadMillis,active_peers:t.activePeers,peers:t.totalPeers}},CdnBalancerStats.cdn.cdns.forEach((function(t){e[t.name]={downloaded_bytes:t.bytes,downloaded_chunks:t.chunks,errors:t.failures,time:t.downloadMillis}}))}return e},getSegmentDuration:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.segmentDuration?CdnBalancerStats.segmentDuration:null},getBalancerResponseId:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn?CdnBalancerStats.cdn.responseUUID:null},getP2PTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.downloadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("p2p",!0)||this._getStreamrootInstanceObject("dnaDownload"):"undefined"!=typeof peer5&&peer5.getStats?e=peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats&&(e=teltoo.getStats().p2pReceivedBytes),e},getUploadTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.uploadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("upload",!0)||this._getStreamrootInstanceObject("dnaUpload"):"undefined"!=typeof peer5&&peer5.getStats&&(e=peer5.getStats().totalP2PUploaded),e},getIsP2PEnabled:function(){var e=!1;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p)e=CdnBalancerStats.p2p.downloadEnabled;else if("undefined"!=typeof Streamroot)if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;else Streamroot.instances&&Streamroot.instances.forEach((function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}));else"undefined"!=typeof peer5&&peer5.isEnabled?e=peer5.isEnabled():"undefined"!=typeof teltoo&&(e=!0);return e},_getStreamrootPeerObject:function(e,t){var n=null;if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var i in Streamroot.peerAgents){var r=Streamroot.peerAgents[i];!r.stats||t&&!r.isP2PEnabled||(n+=r.stats[e])}return n},_getStreamrootInstanceObject:function(e){var t=null;return Streamroot.instances&&Streamroot.instances.forEach((function(n){n.stats&&n.stats.currentContent&&(t+=n.stats.currentContent[e])})),t}}),Rd=bd.extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=-1,n=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=n);var i=this.pauseTime?n-this.pauseTime:0,r=this.stopTime?this.stopTime:n;t=this.offset-i+(r-this.startTime)}return t},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pauseTime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new Rd;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}}),Dd=Rd,Ld=bd.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new Dd},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer),this._timer=null}catch(e){"undefined"!=typeof atv&&(atv.clearTimeout(this._timer),this._timer=null)}},_setTick:function(){if(this.isRunning){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(e){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}}}),Pd={Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}},Od={GET:"get",POST:"post"},xd={AdPosition:{Preroll:"pre",Midroll:"mid",Postroll:"post"},ManifestError:{NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"},RequestMethod:Od,Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"},AdInsertionType:{ClientSide:"csai",ServerSide:"ssai"},Adapter:Pd},Md=bd.extend({constructor:function(e,t,n,i){this.xhr=this.createXHR(),this.host=e||"",this.service=t||"",this.params=n||{},this.options=Cd.assign({},Md.defaultOptions,i),this.retries=0,this.sendPostRequest=!1,this.preparedPostRequest=!1,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var e={};try{e=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){Sd.error(e)}return e},getXHR:function(){return this.xhr},getResponse:function(){return this.xhr.response},getResponseText:function(){return this.xhr.responseText},getResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t,n){return this.xhr.addEventListener?this.xhr.addEventListener(e,t.bind(this,this,n)):e===Md.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&t.bind(this,this,n)}.bind(this)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e="?";for(var t in this.params){var n=this.params[t];if(null!==n&&"object"==typeof n){var i=JSON.stringify(n);"{}"!==i&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")}else null!=n&&""!==n&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}return e.slice(0,-1)}catch(e){return Sd.error(e),""}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},setPostRequest:function(e){this.sendPostRequest=e},getParamsForPostMessages:function(){var e={};try{var t=this.getParam("timemark"),n=this.getParam("code"),i=this.getParam("sessionRoot"),r=this.getParam("sessionId");t&&(e.timemark=t),n&&(e.code=n),i&&(e.sessionRoot=i),r&&(e.sessionId=r)}catch(e){Sd.error(e)}return e},send:function(){try{try{this.sendPostRequest&&!this.preparedPostRequest&&(this.options.method="POST",this.body=JSON.stringify(this.params),this.params=this.getParamsForPostMessages(),this.preparedPostRequest=!0)}catch(e){}if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(this.options.retryAfter>0&&this.options.maxRetries>0){0===this.retries&&this.on(Md.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)Sd.error('Aborting failed request "'+this.service+'". Max retries reached.');else{Sd.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(e){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):Sd.error(e)}}}.bind(this))}for(var t in Sd.logLevel<=Sd.Level.VERBOSE&&Sd.verbose("XHR Req: "+this.getUrl()),Md._globalListeners)Md._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){Sd.error(e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){Md._globalListeners[e]=Md._globalListeners[e]||[],Md._globalListeners[e].push(t)},offEvery:function(e,t){if(Md._globalListeners[e]){var n=Md._globalListeners[e].indexOf(t);-1!==n&&Md._globalListeners[e].splice(n,1)}}}),Nd=Md,Bd=kd.extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(Bd.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}}),Fd=Bd,Ud=bd.extend({constructor:function(e){this.transforms=[],this.pluginRef=e,this._requests=[]},sendRequest:function(e,t,n){e&&("function"==typeof t&&e.on(Nd.Event.SUCCESS,t,n),this._registerRequest(e))},buildRequest:function(e,t,n,i){var r=new Nd(e,t,n=n||{});"function"==typeof i&&r.on(Nd.Event.SUCCESS,i),this._registerRequest(r)},addTransform:function(e){e.parse&&e.isBlocking?(this.transforms.push(e),e.on(Fd.Event.DONE,this._processRequests.bind(this))):Sd.warn(e+" is not a valid RequestTransform.")},removeTransform:function(e){var t=this.transforms.indexOf(e);-1!==t?this.transforms.splice(t,1):Sd.warn("Trying to remove unexisting Transform '"+e+"'.")},_registerRequest:function(e){if(this.pluginRef){var t=this.pluginRef.options;t.authToken&&(e.options.requestHeaders.Authorization=t.authType+" "+t.authToken)}this._requests.push(e),this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];for(var t=[];e.length;){var n=e.shift(),i=this._transform(n);i===Fd.STATE_NO_BLOCKED?(this.pluginRef&&(n.host=this.pluginRef.getHost()),n.send()):i===Fd.STATE_BLOCKED&&t.push(n)}for(;t.length;)this._requests.push(t.shift())},_transform:function(e){var t=Fd.STATE_NO_BLOCKED;return this.transforms.forEach((function(n){n.isBlocking(e)?t=Fd.STATE_BLOCKED:(n.parse(e),n.getState()===Fd.STATE_OFFLINE&&(t=Fd.STATE_OFFLINE))})),t}}),Vd=Ud,Hd=Fd.extend({constructor:function(e,t){Fd.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=t,this._httpSecure=e.options["app.https"],this._plugin=e,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if(this._plugin.storage.isEnabled()&&((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData()))return this.setData(this._plugin.getStoredData()),null;var e=xd.Service.DATA,t={outputformat:"json"};null!==(t=this._plugin.requestBuilder.buildParams(t,e))&&(Sd.notice(e+" "+t.system),"nicetest"===t.system&&Sd.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new Nd(this._plugin.getHost(),e,t).on(Nd.Event.SUCCESS,this._receiveData.bind(this)).on(Nd.Event.ERROR,this._failedData.bind(this)).send())},setData:function(e){try{var t=JSON.parse(e);this._plugin.options["parse.fdsResponseHost"]&&(e=e.replace(t.q.h,this._plugin.options["parse.fdsResponseHost"](t.q.h)),t=JSON.parse(e)),this.response.msg=e,this.response.host=Cd.addProtocol(t.q.h,this._httpSecure),this.response.code=t.q.c,this.response.pingTime=t.q.pt||5,this.response.beatTime=t.q.i&&t.q.i.bt||30,this.response.sessionExpire=t.q.i&&t.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(e){Sd.error("Fastdata response is invalid.")}},_receiveData:function(e,t){var n=e.getResponse();this.setData(n)},_failedData:function(e,t){Sd.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSession:function(){return this._session},setSession:function(e){this._session=e},setHost:function(e){this.response.host=e},parse:function(e){e.host=e.host||this.response.host,e.params.system=this._plugin.getAccountCode(),e.params.sessionRoot=e.params.sessionRoot||this.getSession(),-1!==Hd.EventList.PingTime.indexOf(e.service)&&(e.params.pingTime=e.params.pingTime||this.response.pingTime),-1===Hd.EventList.Infinity.indexOf(e.service)?e.params.code=e.params.code||this.getViewCode():e.params.sessionId=e.params.sessionRoot,-1!==Hd.EventList.CreateView.indexOf(e.service)&&(this._plugin.infinity.infinityStarted||this._plugin.storage.isEnabled()&&this._plugin.storage.getLocal("infinityStarted"))&&(e.params.parentId=e.params.sessionRoot,e.params.navContext=e.params.navContext||this._plugin.getContext())}},{EventList:{CreateView:[xd.Service.START,xd.Service.INIT,xd.Service.ERROR],Infinity:[xd.Service.NAV,xd.Service.SESSION_START,xd.Service.SESSION_STOP,xd.Service.EVENT,xd.Service.BEAT],PingTime:[xd.Service.START,xd.Service.PING]}}),jd=Hd,Kd=kd.extend({constructor:function(e){this._realResource=null,this._lastManifest=null,this._transportFormat=null,this.iterations=3,this._headers=e},done:function(){this.iterations=3,this.emit(Kd.Event.DONE)},parse:function(e,t){},getResource:function(){return this._realResource},getTransportFormat:function(){return this._transportFormat},getLastManifest:function(){return this._lastManifest},shouldExecute:function(e){return!0}},{Event:{DONE:"done"}}),Gd=Kd,Wd={MP4:"MP4",MPEG2:"TS",CMF:"CMF"},Yd=Gd.extend({parse:function(e,t,n){n=n||"";var i=null;try{i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv|\.m4a)((\?|;)\S*|\n|\r|$))/i.exec(e.replaceAll(",URI=","\n").replaceAll('"',"").replaceAll(",","\n"))}catch(e){Sd.warn("Parse HLS Regex failed",e),this.done()}if(null!==i){var r=i[1].trim(),a="",o=n.lastIndexOf("/");if(0!==r.indexOf("http")&&-1!==o){if("/"===r[0]&&"/"!==r[1]){var s=n.indexOf("/")+1;s+=n.substr(s,n.length).indexOf("/")+1,s+=n.substr(s,n.length).indexOf("/"),r=n.slice(0,s)+r}else r=n.slice(0,o)+"/"+r;a=n.slice(0,o)+"/"}if(".m3u8"===i[3]||".m3u"===i[3])if(t)this._parseWithManifest(t,a,i);else{var l=new Nd(r,null,null,{cache:!0,requestHeaders:this._headers});l.on(Nd.Event.SUCCESS,function(e){this._parseWithManifest(e,a,i)}.bind(this)),l.on(Nd.Event.ERROR,function(e){this.done()}.bind(this)),l.send()}else{switch(i[3]){case".mp4":case".m4s":case".m4a":this._transportFormat=Wd.MP4;break;case".ts":this._transportFormat=Wd.MPEG2;break;case".cmfv":this._transportFormat=Wd.CMF}this._realResource=r,this.done()}}else this.done()},_parseWithManifest:function(e,t,n){this._lastManifest=e,this.parse(e.getResponseText(),null,t+n[2])},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("#EXTM3U"));return t}}),zd=Yd,qd=kd.extend({constructor:function(e){this._options=Cd.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(qd.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestMethod:function(e){return this._options.requestMethod=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var n=JSON.stringify(this._options.requestHeaders);this._responses[n]?this._parseResponse(this._responses[n]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),n="{}"!==t,i=new Nd(e,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders,cache:!0});i.on(Nd.Event.SUCCESS,function(e){this._responses[t]=e.getResponseHeaders(),this._parseResponse(this._responses[t])}.bind(this)),i.on(Nd.Event.ERROR,function(t){n?(this._options.requestHeaders={},this._requestResponse(e)):this.done()}.bind(this)),i.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){var n=t.headerName?t.headerName.toLowerCase():"";n&&e.split("\n").forEach(function(e){var i=e.indexOf(":");-1!==i&&(e.slice(0,i).toLowerCase()===n&&this._executeParser(t,e.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(e,t){try{var n=e.regex.exec(t.trim());if(null!==n)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case qd.ElementType.HOST:this._cdnNodeHost=n[1];break;case qd.ElementType.TYPE:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case qd.ElementType.HOST_AND_TYPE:this._cdnNodeHost=n[1],this._cdnNodeTypeString=n[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case qd.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=n[2];break;case qd.ElementType.NAME:this._cdnName=n[1].toUpperCase()}}catch(e){Sd.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}},shouldExecute:function(){return!0}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(e,t){qd._cdnConfigs.Balancer.parsers[0].headerName=e,qd._cdnConfigs.Balancer.parsers[1].headerName=t},create:function(e){if(qd._cdnConfigs[e])return new qd(qd._cdnConfigs[e]);Sd.warn("Tried to create an unexisting CdnParser named "+e)},add:function(e,t){qd._cdnConfigs[e]=t}});qd.add("Level3",{cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(e){if(e){if(0===e.indexOf("TCP_HIT")||0===e.indexOf("TCP_MEM_HIT")||0===e.indexOf("TCP_IMS_HIT"))return 1;if(0===e.indexOf("TCP_MISS"))return 2}return 0}}),qd.add("Cloudfront",{cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}),qd.add("Akamai",{cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/},{element:"host",headerName:"akamai-mon-iucid-del",regex:/(.*)/},{element:"type",headerName:"akamai-cache-status",regex:/(.+)\sfrom\schild/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(e){var t=e.toLowerCase();return-1!==t.indexOf("hit")?1:-1!==t.indexOf("miss")?2:0}}),qd.add("Highwinds",{cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}}),qd.add("Fastly",{cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}}),qd.add("Telefonica",{cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(e){if(e){if(-1!==e.indexOf("p")||-1!==e.indexOf("c"))return 1;if(-1!==e.indexOf("i")||-1!==e.indexOf("m"))return 2}return 0}}),qd.add("Amazon",{cdnName:"AMAZON",parsers:[{element:"host",headerName:"x-amz-cf-pop",regex:/(.+)/},{element:"type",headerName:"x-cache",regex:/(.+)\sfrom.+/}],parseType:function(e){return-1!==e.toLowerCase().indexOf("hit")?1:-1!==e.toLowerCase().indexOf("miss")?2:0}}),qd.add("Edgecast",{cdnName:"EDGECAST",parsers:[{element:"host",headerName:"Server",regex:/\((.+)\/.+\)/},{element:"type",headerName:"X-Cache",regex:/(.+)/}],parseType:function(e){return"HIT"===e?1:2}}),qd.add("Balancer",{parsers:[{element:"name",headerName:null,regex:/(.+)/},{element:"host",headerName:null,regex:/(.+)/}]}),qd.add("NosOtt",{cdnName:"NOSOTT",parsers:[{element:"host",headerName:"X-NOS-Server",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(.*)/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}});var $d=qd,Xd=kd.extend({constructor:function(e){this.plugin=e,this.headerName="x-cdn"},init:function(){var e=null;this.plugin&&(e=this.plugin.getAdapter()&&this.plugin.getAdapter().getURLToParse()?this.plugin.getAdapter().getURLToParse():this.plugin.getResource()),this.plugin&&this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isStarted&&this._request(e)},done:function(e){this.emit(Xd.Events.DONE,e)},error:function(){this.emit(Xd.Events.ERROR)},_successfulRequest:function(e){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"]));var t=e.getResponseHeaders().split("\n"),n=null;for(var i in t){var r=t[i],a=r.indexOf(this.headerName);a>-1&&(n=r.substring(a+this.headerName.length+1,r.length-1).replace(" ",""))}this.done(n)},_failedRequest:function(){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"])),Sd.warn("CDN switch detection request failed"),this.error()},_request:function(e){var t=new Nd(e,null,null,{method:"HEAD",cache:!0});t.on(Nd.Event.SUCCESS,this._successfulRequest.bind(this)),t.on(Nd.Event.ERROR,this._failedRequest.bind(this)),t.send()}},{Events:{DONE:"done",ERROR:"error"}}),Qd=Xd,Jd=Gd.extend({parse:function(e,t){if(t)this.parseLocation(t,e);else{var n=new Nd(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Nd.Event.SUCCESS,function(t){this.parseLocation(t,e)}.bind(this)),n.on(Nd.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},parseLocation:function(e,t){this.iterations--;var n=new RegExp(/<Location>([\s\S]+)<\/Location>/);try{this._lastManifest=e;var i=e.getResponseText(),r=n.exec(i);if(r&&r[1])var a=this._htmlDecode(r[1].replace("\n",""));a&&a!==t&&this.iterations>0?this.parse(a):this.parseFinalResource(i,t)}catch(e){Sd.warn("Dash parse failed"),this.done()}},_htmlDecode:function(e){if("undefined"!=typeof document&&"function"==typeof document.createElement){var t=document.createElement("textarea");return t.innerHTML=e,t.childNodes&&t.childNodes.length?t.childNodes[0].nodeValue:e}return e},parseFinalResource:function(e,t){var n=new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/),i=new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/),r=new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/),a=null;try{a=n.exec(e)||r.exec(e)||i.exec(e),this._getManifestMetadata(e),a&&a[1]&&this._isFullUrl(a[1])?a[1].indexOf('"')>0?this._realResource=a[1].substr(0,a[1].indexOf('"')).replace("\n",""):this._realResource=a[1].replace("\n",""):this._realResource=t}catch(e){Sd.warn("Dash manifest parse failed")}this.done()},_getManifestMetadata:function(e){try{var t=new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/).exec(e),n=null;switch(t[1]){case"mp4":case"m4s":n=Wd.MP4;break;case"mp2t":n=Wd.MPEG2;break;case"cmfv":n=Wd.CMF}this._transportFormat=n}catch(e){Sd.warn("Couldnt find the transport format")}},_isFullUrl:function(e){return-1!==e.indexOf("http")},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("<MPD"));return t}}),Zd=Jd,eh=Gd.extend({parse:function(e,t){if(t)this._parseWithManifest(t);else{this._realResource=e;var n=new Nd(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Nd.Event.SUCCESS,function(e){this._parseWithManifest(e)}.bind(this)),n.on(Nd.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},_parseWithManifest:function(e){this._lastManifest=e;var t=e.getResponseHeaders(),n=!1;e&&e.xhr&&e.xhr.responseURL&&e.xhr.responseURL!==this._realResource?(this._realResource=e.xhr.responseURL,this.parse(this._realResource),n=!0):t.split("\n").forEach(function(e){e.startsWith("Location:")&&(this._realResource=e.slice(10),this.parse(this._realResource),n=!0)}.bind(this)),n||this.done()}}),th=Fd.extend({constructor:function(e){th.__super__.constructor.apply(this,arguments),this._plugin=e,this._realResource=null,this._transportFormat=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._realResource},_getInitialCdnResource:function(){return this._realResource||this._initResource},getTransportFormat:function(){return this._transportFormat},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){e?this._isBusy||(this._isBusy=!0,this._initResource=e,this._parseManifestEnabled=this._plugin.isParseManifest(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),$d.setBalancerHeaderName(this._plugin.getParseCdnNodeNameHeader(),this._plugin.getParseNodeHeader()),this._setTimeout(),this._parseManifestEnabled?this._isFinalUrl(this._initResource)?(this._realResource=this._initResource,this.done()):this.parseManifest():this._parseCDN()):this.done()},_isFinalUrl:function(e){var t=[".ts",".mp4",".m4s",".cmfv"];for(var n in e=e||"",t){var i=t[n];if(e.lastIndexOf(i)===e.length-i.length)return!0}return!1},_setTimeout:function(){var e=function(){this._isBusy&&(this.done(),Sd.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this);try{this._parseTimeout=setTimeout(e,3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(e,3e3):Sd.error(t)}},parseManifest:function(e,t){var n=this._plugin.options["parse.manifest.auth"],i=[new eh(n),new Zd(n),new zd(n)];this._parseManifest(i,e,t||this._initResource)},_parseManifest:function(e,t,n,i){if(e.length>0){var r=e[0];r.shouldExecute(t)?(r.on(Gd.Event.DONE,function(){this._parseManifest(e.slice(1,e.length),r.getLastManifest(),r.getResource(),r.getTransportFormat()||i)}.bind(this)),r.parse(n,t)):this._parseManifest(e.slice(1,e.length),t,n,i)}else this._transportFormat=i,this._realResource=n,this._parseCDN()},_parseCDN:function(){if(this._plugin.isCdnSwitch())this.switchDetector=new Qd(this._plugin),this.switchDetector.on(Qd.Events.DONE,function(e){this._cdnName=e.data,this.done()}.bind(this)),this.switchDetector.on(Qd.Events.ERROR,function(){this.done()}.bind(this)),this.switchDetector.init();else if(this._cdnEnabled&&this._cdnList.length>0){var e=this._cdnList.shift();if(this.getNodeHost())return;var t=$d.create(e);t?(t.on($d.Event.DONE,function(){this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),t.parse(this._getInitialCdnResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===xd.Service.START){var t=this._plugin.requestBuilder.lastSent;t.parsedResource=e.params.parsedResource=this.getResource()||e.params.parsedResource,t.transportFormat=e.params.transportFormat=this.getTransportFormat()||e.params.transportFormat,this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost()||e.params.nodeHost,t.nodeType=e.params.nodeType=this.getNodeType()||e.params.nodeType,t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString()||e.params.nodeTypeString)}}}),nh=th,ih=Fd.extend({constructor:function(e,t){this._sendRequest=!1,this._isBusy=!1,this.plugin=e,this.session=t,this.transformName="Offline"},parse:function(e){e&&this.plugin.offlineStorage&&this.plugin.offlineStorage.addEvent(e.service,e.params)},hasToSend:function(e){return!1},getState:function(){return Fd.STATE_OFFLINE}}),rh=ih,ah=bd.extend({exists:function(e){return ah.Dictionary.hasOwnProperty(e)},getNewName:function(e){var t=ah.Dictionary[e];return Sd.warn('The option "'+e+'" is deprecated, use "'+t+'" instead'),t}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","parse.hls":"parse.manifest","parse.dash":"parse.manifest","parse.locationHeader":"parse.manifest","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.customDimension.1","ad.extraparam.2":"ad.customDimension.2","ad.extraparam.3":"ad.customDimension.3","ad.extraparam.4":"ad.customDimension.4","ad.extraparam.5":"ad.customDimension.5","ad.extraparam.6":"ad.customDimension.6","ad.extraparam.7":"ad.customDimension.7","ad.extraparam.8":"ad.customDimension.8","ad.extraparam.9":"ad.customDimension.9","ad.extraparam.10":"ad.customDimension.10"}}),oh=ah,sh={HDS:"HDS",HLS:"HLS",MSS:"MSS",DASH:"DASH",RTMP:"RTMP",RTP:"RTP",RTSP:"RTSP",DVB:"DVB",DVBC:"DVB-C",DVBT:"DVB-T",DVBT2:"DVB-T2",MULTICAST:"MULTICAST"},lh=bd.extend({constructor:function(e){this.enabled=!0,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.authToken=null,this.authType="Bearer",this.preventZombieViews=!0,this.offline=!1,this.referer=null,this.referral=null,this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["user.privacyProtocol"]=null,this["parse.manifest"]=!1,this["parse.manifest.auth"]={},this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNodeHeader"]="",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Amazon","Cloudfront","Level3","Fastly","Highwinds","Telefonica","Edgecast","NosOtt"],this["parse.fdsResponseHost"]=null,this["parse.cdnSwitchHeader"]=!1,this["parse.cdnTTL"]=60,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.id"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["device.EDID"]=null,this["device.isAnonymous"]=!1,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.isLive.noMonitor"]=!1,this["content.title"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.segmentDuration"]=null,this["content.bitrate"]=null,this["content.totalBytes"]=null,this["content.sendTotalBytes"]=!1,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.transportFormat"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.autodetect.language"]=!0,this["content.subtitles"]=null,this["content.autodetect.subtitles"]=!0,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.creativeId"]=null,this["ad.provider"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.duration"]=null,this["ad.expectedPattern"]=null,this["ad.givenAds"]=null,this["ad.breaksTime"]=null,this["ad.expectedBreaks"]=null,this["ad.givenBreaks"]=null,this["ad.ignore"]=!1,this["ad.blockerDetected"]=null,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["content.customDimensions"]={},this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this["errors.fatal"]=[],this["errors.nonFatal"]=[],this["errors.ignore"]=[],this.linkedViewId=null,this.waitForMetadata=!1,this.pendingMetadata=[],this.method=Od.GET,this["playhead.monitor"]=!0,this["readyState.monitor"]=!0,this.setOptions(e)},setOptions:function(e,t){var n=!1;if(void 0===t){t=this,n=!0;var i=new oh}if(void 0!==e)for(var r in e){var a=!1,o=null;n&&(this.hasOwnProperty(r)||(i.exists(r)?(o=i.getNewName(r),a=!0):Sd.warn('The option "'+r+'" does not exist, so it cannot be set'))),"object"!=typeof t[r]||null===t[r]||Array.isArray(t[r])||"parse.cdnNode.list"!==r?a?t[o]=e[r]:t[r]=e[r]:this.setOptions(e[r],t[r])}},setExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=20&&(e=e.slice(0,20));e.length<20;)e.push(null);e.forEach(function(e,t){this["content.customDimension."+(t+1).toString()]=e}.bind(this))}},setCustomDimensions:function(){lh.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=10&&(e=e.slice(0,10));e.length<10;)e.push(null);e.forEach(function(e,t){this["ad.customDimension."+(t+1).toString()]=e}.bind(this))}},setAdCustomDimensions:function(){lh.prototype.setAdExtraParams.apply(this,arguments)}},{StreamingProtocol:sh,TransportFormat:Wd,RequestMethod:Od}),uh=lh,ch=Fd.extend({_services:[xd.Service.INIT,xd.Service.START,xd.Service.OFFLINE_EVENTS],isBlocking:function(e){if(this._isBusy&&null!=e)if(-1!==this._services.indexOf(e.service))this.done();else if(e.service===xd.Service.ERROR)return!1;return Fd.prototype.isBlocking.apply(this,arguments)}}),dh=ch,hh=bd.extend({constructor:function(e,t,n,i){this.prefix=e||"youbora",this.disableCookies=t,this.forceCookies=n,this.disabled=i},isEnabled:function(){if(this.disabled)return!1;var e=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){e=!1}return e},setLocal:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".local."+e,t)}catch(e){Sd.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return n},getLocal:function(e){return this.disabled?null:this._localGetRemove("getItem","_getCookie",e)},removeLocal:function(e){return this.disabled?null:this._localGetRemove("removeItem","_removeCookie",e)},_localGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage[e](this.prefix+"."+n):this[t](this.prefix+".local."+n)}catch(e){Sd.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return i},setSession:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".session."+e,t)}catch(e){Sd.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return n},getSession:function(e){return this.disabled?null:this._sessionGetRemove("getItem","_getCookie",e)},removeSession:function(e){return this.disabled?null:this._sessionGetRemove("removeItem","_removeCookie",e)},_sessionGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage[e](this.prefix+"."+n):this[t](this.prefix+".session."+n)}catch(e){Sd.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return i},getStorages:function(e){return this.getSession(e)||this.getLocal(e)},setStorages:function(e,t){this.setSession(e,t),this.setLocal(e,t)},removeStorages:function(e){this.removeSession(e),this.removeLocal(e)},_setCookie:function(e,t){if("undefined"!=typeof document){var n=";";"undefined"!=typeof location&&(n+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=e+"="+t+n}},_getCookie:function(e){if("undefined"!=typeof document)for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},_removeCookie:function(e){this._setCookie(e,"")}}),fh=hh,ph=bd.extend({constructor:function(){this.storage=new fh("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,""),this.viewList.push(e),this.storage.setLocal("views",this.viewList),this.actualView=e},addEvent:function(e,t){if("/start"===e&&this._newView(),"/init"===e)return null;if(!this.actualView)return null;var n='{"request":"'+e.slice(1)+'",';for(var i in n+='"unixtime":'+Date.now()+",",t){if(void 0===t[i])break;n+='"'+i+'":',"code"===i?n+='"CODE_PLACEHOLDER",':"sessionId"===i?n+='"SESSION_PLACEHOLDER",':"sessionRoot"===i?n+='"ROOT_PLACEHOLDER",':"string"==typeof t[i]?n+='"'+t[i]+'",':"object"==typeof t[i]?n+='"'+JSON.stringify(t[i]).replace(/"/g,'\\"')+'",':n+=t[i]+","}n=n.slice(0,-1),n+="}";var r=this.storage.getLocal(this.actualView);""!==r&&(r+=","),this.storage.setLocal(this.actualView,r+n)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(this.givenIds.indexOf(t)<0)return this.givenIds.push(t),["["+this.storage.getLocal(t)+"]",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal("views",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e="";this.storage.getLocal("views")?e=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===e?this.viewList=[]:"function"==typeof e.split&&(this.viewList=e.split(","))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(e)>=0?this._getValidId():e},sent:function(){this.givenIds=[]}}),gh=ph,vh=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","segmentDuration","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","dimensions","playerStartupTime","obfuscateIp","privacyProtocol","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","transportFormat","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution","linkedViewId","edid","cdnBalancerResponseUUID","triggeredEvents"],mh=["player","playhead","adTitle","position","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","adInsertionType","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable","adNumber","adNumberInBreak","breakNumber"],yh=bd.extend({constructor:function(e){this._plugin=e,this._adNumber=0,this._adNumberInBreak=0,this.lastSent={}},fetchParams:function(e,t,n){e=e||{},t=t||[];for(var i=0;i<t.length;i++){var r=t[i];if(!e[r]){var a=yh.getters[r];if(this._plugin[a]){var o=this._plugin[a]();null===o||n&&this.lastSent[r]===o||(e[r]=o,this.lastSent[r]=o)}else Sd.warn("Trying to call undefined getter "+r+":"+a)}}return e},getGetters:function(){return yh.getters},buildBody:function(e){return this.fetchParams(null,yh.bodyParams[e],!1)},buildParams:function(e,t){return e=e||{},this.fetchParams(e,yh.params[t],!1),this.fetchParams(e,yh.differentParams[t],!0),e},getNewAdNumber:function(){var e=this.lastSent.adNumber;return e&&this.lastSent.position===this._plugin.getAdPosition()?e+=1:e=1,this.lastSent.adNumber=e,e},getNewAdNumberInBreak:function(){return this._adNumberInBreak++,this.lastSent.adNumberInBreak=this._adNumberInBreak,this._adNumberInBreak},getNewBreakNumber:function(){var e=1;return this._adNumberInBreak=0,this.lastSent.breakNumber&&(e=this.lastSent.breakNumber+1),this.lastSent.breakNumber=e,e},getChangedEntities:function(){return this.fetchParams({},yh.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/init":vh,"/start":vh,"/joinTime":["joinDuration","playhead","bitrate","triggeredEvents"],"/pause":["playhead","triggeredEvents"],"/resume":["pauseDuration","playhead","triggeredEvents"],"/seek":["seekDuration","playhead","triggeredEvents"],"/bufferUnderrun":["bufferDuration","playhead","triggeredEvents"],"/error":["player","playhead","triggeredEvents"].concat(vh),"/stop":["bitrate","totalBytes","playhead","pauseDuration","metrics","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","triggeredEvents"],"/infinity/video/event":[],"/adInit":mh,"/adStart":mh,"/adJoin":["playhead","position","adJoinDuration","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adPause":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adResume":["playhead","position","adPlayhead","adPauseDuration","adNumber","adNumberInBreak","breakNumber"],"/adBufferUnderrun":["playhead","position","adPlayhead","adBufferDuration","adNumber","adNumberInBreak","breakNumber"],"/adStop":["playhead","position","adPlayhead","adBitrate","adTotalDuration","pauseDuration","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/adClick":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adError":["playhead"].concat(mh),"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["position","givenAds","expectedAds","breakNumber","adInsertionType"],"/adBreakStop":["position","breakNumber"],"/adQuartile":["position","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics","totalBytes","segmentDuration"],"/infinity/session/start":["accountCode","username","userType","anonymousUser","route","page","referer","referral","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion","isp","connectionType","ip","obfuscateIp","privacyProtocol","dimensions","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","edid"],"/infinity/session/stop":["sessionMetrics"],"/infinity/session/nav":["route","page","scrollDepth"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",segmentDuration:"getSegmentDuration",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",totalBytes:"getTotalBytes",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",transportFormat:"getTransportFormat",obfuscateIp:"getObfuscateIp",privacyProtocol:"getPrivacyProtocol",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",dimensions:"getCustomDimensions",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",position:"getAdPosition",adNumber:"getAdNumber",adNumberInBreak:"getAdNumberInBreak",breakNumber:"getBreakNumber",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",adInsertionType:"getAdInsertionType",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",edid:"getEDID",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",page:"getPageName",playerStartupTime:"getPlayerStartupTime",pageLoadTime:"getPageLoadTime",cdnDownloadedTraffic:"getCdnTraffic",multiCdnInfo:"getMultiCdnInfo",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",cdnBalancerResponseUUID:"getBalancerResponseId",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",scrollDepth:"getScrollDepth",adsBlocked:"getIsBlocked",linkedViewId:"getLinkedViewId",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}}),Ah=yh,bh=Fd.extend({isBlocking:function(e){return!e.params.sessionId}}),Eh=bh,_h=kd.extend({constructor:function(e){this._plugin=e,this.infinityStopped=!1,this.infinityStarted=!1},andBeyond:function(){_h.prototype.begin.apply(this,arguments)},begin:function(e,t){(t=t||!1)&&(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._plugin.restartViewTransform()),this._comm=new Vd(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new Eh(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),this.fireSessionStart(e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(e){this.infinityStopped&&(this._plugin.restartViewTransform(),this._comm=new Vd(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new Eh(this._plugin)),this.infinityStopped=!1),this.infinityStarted||(this._plugin.storage.setLocal("infinityStarted","true"),this.infinityStarted=!0,this.emit(_h.Event.SESSION_START,this._getParamsJson(e,null,null,!0,!0)),this._setLastActive())},fireSessionStop:function(e){this.infinityStarted&&(this.infinityStopped=!0,this.infinityStarted=!1,this._plugin.storage.removeStorages("infinityStarted"),this.emit(_h.Event.SESSION_STOP,e),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive"))},newSession:function(e,t){this.isActive()&&(this.infinityStarted?this.fireSessionStop():(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._comm&&this._comm.removeTransform(this._plugin.viewTransform),this._plugin.restartViewTransform(),this._comm&&this._comm.addTransform(this._plugin.viewTransform))),this._plugin.setOptions(e),this.begin(t)},fireNav:function(e){this.isActive()&&(this.infinityStarted=!0,this.emit(_h.Event.NAV,this._getParamsJson(e,null,null,!0)))},_sendExtraBeat:function(){if(this._plugin&&this._plugin._beat){var e=(new Date).getTime(),t=this._plugin._beat.chrono.startTime?e-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(t),this._plugin._beat.chrono.startTime=e}this._setLastActive()},fireEvent:function(e,t,n,i){if(this.infinityStarted){var r=this._getParamsJson(t,n,e);Cd.assign(r.params,i||{}),this.emit(_h.Event.EVENT,r),this._setLastActive()}},register:function(e,t){this._registeredProperties={dimensions:e,values:t},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(e,t){this._registeredProperties||this.register(e,t)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(e,t,n,i,r){var a={};if(n&&(a.name=n),a.dimensions=e||{},a.values=t||{},this._registeredProperties){for(var o in this._registeredProperties.dimensions)a.dimensions[o]=this._registeredProperties.dimensions[o];for(var s in this._registeredProperties.values)a.values[s]=this._registeredProperties.values[s]}var l={params:a};return i&&(l.params.dimensions.page&&(l.params.page=l.params.dimensions.page,delete l.params.dimensions.page),l.params.dimensions.route&&(l.params.route=l.params.dimensions.route,delete l.params.dimensions.route),r||delete l.params.dimensions,delete l.params.values),l},isActive:function(){var e=this._plugin.storage.getLocal("infinityStarted");if(this.infinityStarted||e&&"false"!==e)return!0;var t=(new Date).getTime();return Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}}),kh=_h,Th=function(e){var t,n,i=(e=e||window).document,r=function(t){var n=!1;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();(n={top:Math.max(r.top,0),left:Math.max(r.left,0),bottom:Math.min(r.bottom,e.innerHeight||i.documentElement.clientHeight),right:Math.min(r.right,e.innerWidth||i.documentElement.clientWidth)}).bottom<=n.top||n.right<=n.left?n=!1:n.area=(n.bottom-n.top)*(n.right-n.left)}return n},a=function(e,t){if(t){var n=r(e);n&&o.push({url:t,area:n.area,rect:n})}},o=[],s=[],l=.1;try{var u=e.performance.timing.navigationStart;!function(){for(var t=i.getElementsByTagName("*"),n=/url\(.*(http.*)\)/gi,s=0;s<t.length;s++){var l=t[s],u=e.getComputedStyle(l);if("IMG"===l.tagName&&a(l,l.src),u["background-image"]){n.lastIndex=0;var c=n.exec(u["background-image"]);c&&c.length>1&&a(l,c[1].replace('"',""))}if("IFRAME"===l.tagName)try{var d=r(l);if(d){var h=Th(l.contentWindow);h&&o.push({tm:h,area:d.area,rect:d})}}catch(e){}}}(),function(){for(var t={},n=e.performance.getEntriesByType("resource"),i=0;i<n.length;i++)t[n[i].name]=n[i].responseEnd;for(var r=0;r<o.length;r++)"tm"in o[r]||(o[r].tm=void 0!==t[o[r].url]?t[o[r].url]:0)}(),function(){"msFirstPaint"in e.performance.timing&&(t=e.performance.timing.msFirstPaint-u);for(var n=e.performance.getEntriesByType("paint"),r=0;r<n.length;r++)"first-paint"===n[r].name&&(t=n[r].startTime);if(void 0===t||t<0||t>12e4){t=e.performance.timing.responseStart-u;for(var a={},o=i.getElementsByTagName("head")[0].children,s=0;s<o.length;s++){var l=o[s];"SCRIPT"===l.tagName&&l.src&&!l.async&&(a[l.src]=!0),"LINK"===l.tagName&&"stylesheet"===l.rel&&l.href&&(a[l.href]=!0)}for(var c=e.performance.getEntriesByType("resource"),d=!1,h=0;h<c.length;h++)if(d||!a[c[h].name]||"script"!==c[h].initiatorType&&"link"!==c[h].initiatorType)d=!0;else{var f=c[h].responseEnd;(void 0===t||f>t)&&(t=f)}}t=Math.max(t,0)}(),function(){for(var n={0:0},r=0,a=0;a<o.length;a++){var u=t;"tm"in o[a]&&o[a].tm>t&&(u=o[a].tm),void 0===n[u]&&(n[u]=0),n[u]+=o[a].area,r+=o[a].area}var c=Math.max(i.documentElement.clientWidth,e.innerWidth||0)*Math.max(i.documentElement.clientHeight,e.innerHeight||0);if(c>0&&(c=Math.max(c-r,0)*l,void 0===n[t]&&(n[t]=0),n[t]+=c,r+=c),r){for(var d in n)n.hasOwnProperty(d)&&s.push({tm:d,area:n[d]});s.sort((function(e,t){return e.tm-t.tm}));for(var h=0,f=0;f<s.length;f++)h+=s[f].area,s[f].progress=h/r}}(),function(){if(s.length){n=0;for(var e=0,i=0,r=0;r<s.length;r++){var a=s[r].tm-e;a>0&&i<1&&(n+=(1-i)*a),e=s[r].tm,i=s[r].progress}}else n=t}()}catch(e){}return n},Sh=Th,wh=bd.extend({constructor:function(e){if(this.infinity=e.infinity,this.timeObject=null,this.playerSetup=null,this.perfObject=null,this.myTimesObject={},"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("load",this._windowLoaded.bind(this)),window.performance&&window.performance.timing)){try{"function"==typeof window.performance.getEntriesByType&&(this.perfObject=window.performance)}catch(e){}this.timeObject=window.performance.timing}try{if("function"==typeof PerformanceObserver){var t=new PerformanceObserver(function(e,t){var n=e.getEntries();this.myTimesObject.largestContentfulPaint=n[n.length-1].renderTime}.bind(this));PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>-1&&t.observe({entryTypes:["largest-contentful-paint"]})}}catch(e){}},_windowLoaded:function(){this.myTimesObject.onLoad=(new Date).getTime(),this._getEnoughFPS(),setTimeout(this._fireLoadTimesEvent.bind(this),1e3)},_fireLoadTimesEvent:function(){this._getLastMetrics(),this.infinity.fireEvent("loadTimes",{},this._getAllValues())},_getAllValues:function(){var e={PageLoadTime:this.getPageLoadTime(),DNSTime:this.getDnsTime(),TCPTime:this.getTcpTime(),HandshakeTime:this.getHandshakeTime(),DomReadyTime:this.getDomReadyTime(),BackendTime:this.getBackendTime(),FrontendTime:this.getFrontendTime(),VisualReady:this.getTimeToVisuallyReady(),TimeToInteractive:this.getTimeToInteractive(),JsTime:this.getJSTime(),CssTime:this.getCSSTime(),ImageTime:this.getImageTime(),FontTime:this.getFontTime(),AvgReqLatency:this.getAvgReqLatency(),MaxReqLatency:this.getMaxReqLatency(),FirstPaint:this.getFirstPaint(),FirstContentfulPaint:this.getFirstContentfulPaint(),LargestContentfulPaint:this.getLargestContentfulPaint(),SpeedIndex:this.getSpeedIndex()};for(var t in e)null===e[t]||void 0===e[t]||e[t]<0?delete e[t]:e[t]=Math.round(e[t]);return e},getPageLoadTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.loadEventEnd-this.timeObject.navigationStart),e},getPlayerStartupTime:function(){var e=null;return this.timeObject&&this.playerSetup&&(e=this.playerSetup-this.timeObject.navigationStart),e},getDnsTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domainLookupEnd-this.timeObject.domainLookupStart),e},getTcpTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.connectEnd-this.timeObject.connectStart),e},getHandshakeTime:function(){var e=null;return this.timeObject&&this.timeObject.secureConnectionStart&&(e=this.timeObject.connectEnd-this.timeObject.secureConnectionStart),e},getDomReadyTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domComplete-this.timeObject.navigationStart),e},getBackendTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.responseStart-this.timeObject.navigationStart),e},getFrontendTime:function(){var e=null;return this.timeObject&&(e=this.myTimesObject.onLoad-this.timeObject.responseStart),e},getTimeToVisuallyReady:function(){var e=this.myTimesObject.firstPaint||0;return this.timeObject?Math.max(e,this.timeObject.domContentLoadedEventEnd-this.timeObject.navigationStart||0):e||null},getTimeToInteractive:function(){if(this.myTimesObject.fps&&this.getTimeToVisuallyReady())return Math.max(this.myTimesObject.fps,this.getTimeToVisuallyReady());setTimeout(function(){this.getTimeToInteractive()}.bind(this),500)},getJSTime:function(){return this._getXTime("script")},getCSSTime:function(){return this._getXTime("css")},getImageTime:function(){return this._getXTime("img")},getFontTime:function(){return this._getXTime("css",[".woff",".otf",".ttf"])},getAvgReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=0,t=0,n=this.perfObject.getEntriesByType("resource");for(var i in n)n[i].requestStart&&n[i].responseStart&&(t+=n[i].responseStart-n[i].requestStart),e++;return t/e}}catch(e){}return null},getFirstPaint:function(){return this.myTimesObject?this.myTimesObject.firstPaint:null},getFirstContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.firstContentfulPaint:null},getLargestContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.largestContentfulPaint:null},getMaxReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=this.perfObject.getEntriesByType("resource"),t=0;for(var n in e)e[n].requestStart&&e[n].responseStart&&(t=Math.max(t,e[n].responseStart-e[n].requestStart));return t}}catch(e){}return null},getSpeedIndex:function(){var e=null;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.getEntriesByType)try{e=Sh()}catch(e){}return e},_getXTime:function(e,t){var n=0;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var i=this.perfObject.getEntriesByType("resource");for(var r in i)if(i[r].initiatorType===e)if(t){var a=!1;for(var o in t)i[r].name.indexOf(t[o]>0)&&(a=!0);a&&(n+=i[r].duration)}else n+=i[r].duration}}catch(e){}return Math.round(n)||null},_getLastMetrics:function(){var e=null,t=null;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var n=this.perfObject.getEntriesByType("paint");for(var i in n)"first-paint"===n[i].name?e=n[i].startTime:"first-contentful-paint"===n[i].name&&(t=n[i].startTime)}}catch(e){}!e&&this.timeObject&&(e=this.timeObject.msFirstPaint-this.timeObject.navigationStart),this.myTimesObject.firstPaint=e,this.myTimesObject.firstContentfulPaint=t,this.getTimeToInteractive()},_getEnoughFPS:function(){if(!this.timeObject||"undefined"==typeof window)return!0;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){};this.preFPS=(new Date).getTime(),e(function(){var e=(new Date).getTime();e<this.preFPS+50?this.myTimesObject.fps=e-this.timeObject.navigationStart:setTimeout(function(){return this._getEnoughFPS()}.bind(this),50)}.bind(this))},setPlayerSetupTime:function(){this.playerSetup=this.playerSetup||(new Date).getTime()}}),Ch=wh,Ih=bd.extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(e){if("undefined"!=typeof document){var t=this._getSettings();"hidden"===document.visibilityState?this._toBackground(t):"visible"===document.visibilityState&&this._toForeground(t)}},_toBackground:function(e){if(this.isInBackground=!0,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.stopChronoView(),"string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(this.plugin.infinity.infinityStarted){this.lastBeatTime=(new Date).getTime();var t=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(t),this.plugin._beat.stop()}}},_toForeground:function(e){if(this.isInBackground=!1,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.startChronoView(),"string"==typeof e&&e&&this.plugin.infinity.infinityStarted){var t=(new Date).getTime();t-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(t-this.lastBeatTime),this.plugin._beat.start()):this.plugin.infinity.newSession()}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this._fireX("firePause")},_fireStop:function(){this._fireX("fireStop"),this.plugin.fireStop()},_fireX:function(e){this.adsAdapter=this.plugin.getAdsAdapter(),this.adsAdapter&&this.adsAdapter[e](),this.contentAdapter=this.plugin.getAdapter(),this.contentAdapter&&this.contentAdapter[e]()},canBlockStartCalls:function(){return this.isInBackground&&!0===this.plugin.options["background.enabled"]&&this._getSettings()}}),Rh=Ih,Dh=bd.extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}}),Lh=bd.extend({constructor:function(e){this.pluginref=e,this.listenerReference=this._changeListener.bind(this),this.loadReference=this._loadListener.bind(this),this.isEnabled=!1,this.pageHeight=0,this.maxHeight=0,this.startDetection()},startDetection:function(){this.isEnabled||"undefined"==typeof window||"function"!=typeof window.addEventListener||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),window.addEventListener("load",this.loadReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.removeEventListener&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),window.removeEventListener("load",this.loadReference),this.isEnabled=!1)},getScrollDepth:function(){var e=null;return this.maxHeight&&this.pageHeight&&(e=Math.min(Math.trunc(this.maxHeight/this.pageHeight*100),100)),e},_loadListener:function(){if("undefined"!=typeof document){var e=document.documentElement;e&&(this.pageHeight=Math.round(e.scrollHeight,e.clientHeight,e.offsetHeight),this.maxHeight=window.innerHeight,this._updateCompletionRate())}},_changeListener:function(){if(this.pageHeight){var e=this.maxHeight;this.maxHeight=Math.max(this.maxHeight,window.pageYOffset+window.innerHeight),e!==this.maxHeight&&this._updateCompletionRate()}var t=this.pluginref.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())},_updateCompletionRate:function(){setTimeout(function(){this.pluginref.storage.setSession("pageScrollDepth",this.getScrollDepth())}.bind(this),3e3)}}),Ph=Lh,Oh=bd.extend({constructor:function(e){this.plugin=e},getAllData:function(){var e=this.getNonRandomData();return e.timestamp=this.getTimestamp(),e},getNonRandomData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._getNavigatorValue("userAgent")},getVirtualCores:function(){return this._getNavigatorValue("hardwareConcurrency")},getLanguage:function(){return this._getNavigatorValue("language")},getAvailableLanguages:function(){return this._getNavigatorValue("languages")},getResolution:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.width.toString()+navigator.screen.height.toString())}catch(e){}return e},getColorDepth:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.colorDepth)}catch(e){}return e},getMemory:function(){return this._getNavigatorValue("deviceMemory")},getTouchscreen:function(){return this._getNavigatorValue("maxTouchPoints")||!1},getLocalStorage:function(){var e=!1;try{e="undefined"!=typeof localStorage}catch(e){}return e},getSessionStorage:function(){var e=!1;try{e="undefined"!=typeof sessionStorage}catch(e){}return e},getCookiesAvailable:function(){return this._getNavigatorValue("cookieEnabled")||!1},getHasFlash:function(){var e=!1;try{var t=this._getNavigatorValue("plugins");e=t&&"object"==typeof t["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}return e},getPluginList:function(){var e=null;try{var t=this._getNavigatorValue("plugins");if(t&&0!==t.length){for(var n="",i=0;i<navigator.plugins.length;i++)n+=navigator.plugins[i].description+" "+navigator.plugins[i].filename+" "+navigator.plugins[i].name+" ";e=n}}catch(e){}return e},getTimeZone:function(){var e=null;try{e=(new Date).getTimezoneOffset().toString()}catch(e){}return e},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator},_getNavigatorValue:function(e){var t=null;try{this._navigatorCheck()&&(t=navigator[e])}catch(e){}return t}}),xh=Oh,Mh=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,r,a,o;return r=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^o^r^a:n|i?1073741824&o?3221225472^o^r^a:1073741824^o^r^a:o^r^a}function i(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,r,a),o),l)),n(t(e,s),i)}function r(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,r,a),o),l)),n(t(e,s),i)}function a(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,r,a),o),l)),n(t(e,s),i)}function o(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,r,a),o),l)),n(t(e,s),i)}function s(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var l,u,c,d,h,f,p,g,v,m=Array();for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e),m=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),a=Array(r-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[r-2]=n<<3,a[r-1]=n>>>29,a}(e),f=1732584193,p=4023233417,g=2562383102,v=271733878,l=0;l<m.length;l+=16)u=f,c=p,d=g,h=v,f=i(f,p,g,v,m[l+0],7,3614090360),v=i(v,f,p,g,m[l+1],12,3905402710),g=i(g,v,f,p,m[l+2],17,606105819),p=i(p,g,v,f,m[l+3],22,3250441966),f=i(f,p,g,v,m[l+4],7,4118548399),v=i(v,f,p,g,m[l+5],12,1200080426),g=i(g,v,f,p,m[l+6],17,2821735955),p=i(p,g,v,f,m[l+7],22,4249261313),f=i(f,p,g,v,m[l+8],7,1770035416),v=i(v,f,p,g,m[l+9],12,2336552879),g=i(g,v,f,p,m[l+10],17,4294925233),p=i(p,g,v,f,m[l+11],22,2304563134),f=i(f,p,g,v,m[l+12],7,1804603682),v=i(v,f,p,g,m[l+13],12,4254626195),g=i(g,v,f,p,m[l+14],17,2792965006),f=r(f,p=i(p,g,v,f,m[l+15],22,1236535329),g,v,m[l+1],5,4129170786),v=r(v,f,p,g,m[l+6],9,3225465664),g=r(g,v,f,p,m[l+11],14,643717713),p=r(p,g,v,f,m[l+0],20,3921069994),f=r(f,p,g,v,m[l+5],5,3593408605),v=r(v,f,p,g,m[l+10],9,38016083),g=r(g,v,f,p,m[l+15],14,3634488961),p=r(p,g,v,f,m[l+4],20,3889429448),f=r(f,p,g,v,m[l+9],5,568446438),v=r(v,f,p,g,m[l+14],9,3275163606),g=r(g,v,f,p,m[l+3],14,4107603335),p=r(p,g,v,f,m[l+8],20,1163531501),f=r(f,p,g,v,m[l+13],5,2850285829),v=r(v,f,p,g,m[l+2],9,4243563512),g=r(g,v,f,p,m[l+7],14,1735328473),f=a(f,p=r(p,g,v,f,m[l+12],20,2368359562),g,v,m[l+5],4,4294588738),v=a(v,f,p,g,m[l+8],11,2272392833),g=a(g,v,f,p,m[l+11],16,1839030562),p=a(p,g,v,f,m[l+14],23,4259657740),f=a(f,p,g,v,m[l+1],4,2763975236),v=a(v,f,p,g,m[l+4],11,1272893353),g=a(g,v,f,p,m[l+7],16,4139469664),p=a(p,g,v,f,m[l+10],23,3200236656),f=a(f,p,g,v,m[l+13],4,681279174),v=a(v,f,p,g,m[l+0],11,3936430074),g=a(g,v,f,p,m[l+3],16,3572445317),p=a(p,g,v,f,m[l+6],23,76029189),f=a(f,p,g,v,m[l+9],4,3654602809),v=a(v,f,p,g,m[l+12],11,3873151461),g=a(g,v,f,p,m[l+15],16,530742520),f=o(f,p=a(p,g,v,f,m[l+2],23,3299628645),g,v,m[l+0],6,4096336452),v=o(v,f,p,g,m[l+7],10,1126891415),g=o(g,v,f,p,m[l+14],15,2878612391),p=o(p,g,v,f,m[l+5],21,4237533241),f=o(f,p,g,v,m[l+12],6,1700485571),v=o(v,f,p,g,m[l+3],10,2399980690),g=o(g,v,f,p,m[l+10],15,4293915773),p=o(p,g,v,f,m[l+1],21,2240044497),f=o(f,p,g,v,m[l+8],6,1873313359),v=o(v,f,p,g,m[l+15],10,4264355552),g=o(g,v,f,p,m[l+6],15,2734768916),p=o(p,g,v,f,m[l+13],21,1309151649),f=o(f,p,g,v,m[l+4],6,4149444226),v=o(v,f,p,g,m[l+11],10,3174756917),g=o(g,v,f,p,m[l+2],15,718787259),p=o(p,g,v,f,m[l+9],21,3951481745),f=n(f,u),p=n(p,c),g=n(g,d),v=n(v,h);return(s(f)+s(p)+s(g)+s(v)).toLowerCase()},Nh=bd.extend({constructor:function(e){this.plugin=e,this.dataExtractor=new xh,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),this.plugin.storage.setLocal("youboraDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),Mh(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraDeviceUUID")}}),Bh=Nh,Fh=bd.extend({constructor:function(){this.reset()},reset:function(){this.join=new Dd,this.seek=new Dd,this.pause=new Dd,this.buffer=new Dd,this.total=new Dd,this.viewedMax=[]}}),Uh=bd.extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isVideoStateBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0}}),Vh=bd.extend({constructor:function(e,t,n){this._adapter=e,this._seekEnabled=t&Vh.Type.SEEK,this._bufferEnabled=t&Vh.Type.BUFFER,n=n||800,this._chrono=new Dd,this._lastPlayhead=0,n>0&&(this._timer=new Ld(this.progress.bind(this),n))},start:function(){this.stop(),this.canBeUsed()&&this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*Vh.kBUFFER_THRESHOLD_RATIO,n=e*Vh.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),n*=this._adapter.getPlayrate());var i=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-i);r<t?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1,"playheadMonitor"):r>n?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1,"playheadMonitor"):(this._seekEnabled&&this._adapter.fireSeekEnd(null,"playheadMonitor"),this._bufferEnabled&&this._adapter.fireBufferEnd(null,"playheadMonitor")),this._lastPlayhead=i},canBeUsed:function(){var e=this._adapter.plugin;return!(!e||!e.getPlayheadMonitorEnabled()||!this._seekEnabled&&!this._bufferEnabled)&&(!e.getIsLive()||!e.options["content.isLive.noMonitor"])},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2}),Hh=Vh,jh=bd.extend({constructor:function(e,t){this._adapter=e,this._videoElement=e.getVideoObject(),this._startedStateCheck=!1,this._intervalCheckId=null,this._intervalMilliseconds=t||300},start:function(){var e=this._adapter.plugin;e&&e.getReadyStateMonitorEnabled()&&this._videoElement&&!this._startedStateCheck&&(this._intervalCheckId=setInterval(this.checkStateProperty.bind(this),this._intervalMilliseconds),this._startedStateCheck=!0)},stop:function(){try{this._startedStateCheck&&this._intervalCheckId&&clearInterval(this._intervalCheckId),this._intervalCheckId=null,this._startedStateCheck=!1}catch(e){Sd.error("Produced error stopping the network monitor")}},checkStateProperty:function(e){try{this._videoElement&&this._adapter&&this._videoElement.readyState&&(this._videoElement.readyState>3&&!this._adapter.flags.isSeeking?this._adapter.flags.isBuffering?this.fireBufferEnd({},"stateMonitor"):this._adapter.flags.isJoined||this.fireJoin({},"stateMonitor"):this._videoElement.readyState<4&&!this._adapter.flags.isBuffering&&this.fireBufferBegin({},!1,"stateMonitor",!0))}catch(e){}}}),Kh=jh,Gh={getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},getAdInsertionType:function(){return null},fireClick:function(e){"string"==typeof e&&(e={url:e}),this.emit(Pd.Event.CLICK,{params:e})},fireQuartile:function(e){this.flags.isStarted&&"number"==typeof e&&e>this.flags.lastQuartileSent&&e<4&&(this.flags.lastQuartileSent++,this.emit(Pd.Event.QUARTILE,{params:{quartile:e}}))},startChronoView:function(){if(this.getIsVisible()&&!this.plugin.backgroundDetector.isInBackground){var e=this.chronos.viewedMax;0!==e.length&&0===e[e.length-1].stopTime||(e.push(new Dd),e[e.length-1].start())}},stopChronoView:function(){var e=this.chronos.viewedMax;e[0]&&e.length>0&&0===e[e.length-1].stopTime&&e[e.length-1].stop()},fireManifest:function(e,t){var n={params:e};"string"==typeof e&&(n={params:{errorType:e,errorMessage:t}}),this.emit(Pd.Event.MANIFEST,n)},fireSkip:function(e){void 0===e&&(e={}),e.skipped=!0,this.fireStop(e)},fireBreakStart:function(e){this.emit(Pd.Event.PODSTART,{params:e})},fireBreakStop:function(e){this.emit(Pd.Event.PODSTOP,{params:e})}},Wh={getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getCdnTraffic:function(){return null},getP2PTraffic:function(){return null},getUploadTraffic:function(){return null},getIsP2PEnabled:function(){return null},getSegmentDuration:function(){return null},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},getAudioCodec:function(){return null},getVideoCodec:function(){return null},getURLToParse:function(){return null},fireSeekBegin:function(e,t,n){if(this._discardFalseBuffers(),this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;Sd.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();try{this.fireEventsStruct.seek=[],n?this.fireEventsStruct.seek.push(n):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}this.flags.isSeeking=!0,this.emit(Pd.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e,t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&this.flags.isSeeking){try{t?this.fireEventsStruct.seek.push(t):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.seek,this.cancelSeek(),this.emit(Pd.Event.SEEK_END,{params:e})}},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireEvent:function(e,t,n,i){var r=i||{};r.name=e||"",r.dimensions=t||{},r.values=n||{},this.emit(Pd.Event.VIDEO_EVENT,{params:r})}},Yh=kd.extend({constructor:function(e){this.flags=new Uh,this.chronos=new Fh,this.fireEventsStruct={},this.fireEventsStruct.buffer=[],this.fireEventsStruct.seek=[],this.monitor=null,this.plugin=null,this.player=null,this._isAdsAdapter=null,this.setPlayer(e),this.tag=this.player,Sd.notice("Adapter "+this.getVersion()+" with Lib "+gd+" is ready.")},setPlayer:function(e){this.player&&this.unregisterListeners(),"string"==typeof e&&"undefined"!=typeof document?this.player=document.getElementById(e):this.player=e,this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.stopMonitor(),this.stopReadyStateMonitor(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(e,t,n){this.stopMonitor();var i=0;e&&(i|=Hh.Type.BUFFER),t&&(i|=Hh.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new Hh(this,i,n)},stopMonitor:function(){this.monitor&&this.monitor.stop()},monitorReadyState:function(e){this.stopReadyStateMonitor(),this.stateMonitor=new Kh(this,e)},startReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.start()},stopReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.stop()},checkReadyState:function(e,t){try{this.plugin&&this.plugin.getReadyStateMonitorEnabled()&&e&&(e>3&&!this.flags.isSeeking?this.flags.isBuffering?this.fireBufferEnd({},t+"-readyState"):this.flags.isJoined||this.fireJoin({},t+"-readyState"):e<4&&!this.flags.isBuffering&&this.fireBufferBegin({},!1,t+"-readyState",!0))}catch(e){Sd.error("Can't check readyState property correctly")}},getPlayhead:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getTotalBytes:function(){return null},getTitle:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return gd+"-generic-js"},getVideoObject:function(){return null},fireInit:function(e,t){this.plugin&&this.plugin.fireInit(e,t)},fireStart:function(e,t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),t&&((e=e||{}).triggeredEvents=[t]),this.startReadyStateMonitor(),this.emit(Pd.Event.START,{params:e}))},fireJoin:function(e,t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this.plugin||!this.plugin.isInitiated||this.fireStart({},t),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Pd.Event.JOIN,{params:e}))},firePause:function(e,t){this._discardFalseBuffers(),this.flags.isBuffering&&this.fireBufferEnd(null,"firePauseCall"),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Pd.Event.PAUSE,{params:e}))},fireResume:function(e,t){this._discardFalseBuffers(),this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Pd.Event.RESUME,{params:e}))},fireBufferBegin:function(e,t,n,i){if(i=i||!1,this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;Sd.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();try{this.fireEventsStruct.buffer=[],n?this.fireEventsStruct.buffer.push(n):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}this.flags.isBuffering=!0,this.flags.isVideoStateBuffering=i,this.emit(Pd.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e,t){if(this.flags.isJoined&&this.flags.isBuffering){try{t?this.fireEventsStruct.buffer.push(t):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.buffer,this.cancelBuffer(),this.emit(Pd.Event.BUFFER_END,{params:e})}},_discardFalseBuffers:function(){try{this.flags.isBuffering&&this.flags.isVideoStateBuffering&&this._getDeltaBufferTime()<=100&&this.cancelBuffer()}catch(e){}},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.flags.isVideoStateBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},_getDeltaBufferTime:function(){return this.chronos&&this.chronos.buffer?this.chronos.buffer.getDeltaTime(!1):0},fireStop:function(e,t){(this._isAds()||this.plugin&&this.plugin._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this.plugin&&this.plugin.isInitiated))&&(this.stopMonitor(),this.stopReadyStateMonitor(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Pd.Event.STOP,{params:e}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length))},setIsAds:function(e){this._isAdsAdapter=e},_isAds:function(){return this._isAdsAdapter},fireCasted:function(e,t){e||(e={}),e.casted=!0,this.fireStop(e,t)},fireError:function(e,t,n,i,r){var a=Cd.buildErrorParams(e,t,n,i);a.code&&delete a.code,r&&((a=a||{}).triggeredEvents=[r]);var o=this.plugin?this.plugin.options:{};void 0!==a.errorCode&&o["errors.ignore"]&&o["errors.ignore"].indexOf(a.errorCode.toString())>-1||(this.emit(Pd.Event.ERROR,{params:a}),void 0!==a.errorCode&&o["errors.fatal"]&&o["errors.fatal"].indexOf(a.errorCode.toString())>-1&&this.fireStop({},r))},fireFatalError:function(e,t,n,i,r){var a=this.plugin?this.plugin.options:{};void 0!==e&&a["errors.ignore"]&&a["errors.ignore"].indexOf(e.toString())>-1||(this.monitor&&this.monitor.stop(),this.fireError(e,t,n,i,r),void 0!==e&&a["errors.nonFatal"]&&a["errors.nonFatal"].indexOf(e.toString())>-1||this.fireStop({},r))}},{Event:Pd.Event});Cd.assign(Yh.prototype,Gh),Cd.assign(Yh.prototype,Wh);var zh=Yh,qh={setAdapter:function(e){if(this.browserLoadTimes&&this.browserLoadTimes.setPlayerSetupTime(),e.plugin)Sd.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdapter(),this._adapter=e,e.plugin=this,e.setIsAds(!1),this.contentAdapterListeners={},this.contentAdapterListeners[zh.Event.START]=this._startListener.bind(this),this.contentAdapterListeners[zh.Event.JOIN]=this._joinListener.bind(this),this.contentAdapterListeners[zh.Event.PAUSE]=this._pauseListener.bind(this),this.contentAdapterListeners[zh.Event.RESUME]=this._resumeListener.bind(this),this.contentAdapterListeners[zh.Event.SEEK_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[zh.Event.SEEK_END]=this._seekEndListener.bind(this),this.contentAdapterListeners[zh.Event.BUFFER_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[zh.Event.BUFFER_END]=this._bufferEndListener.bind(this),this.contentAdapterListeners[zh.Event.ERROR]=this._errorListener.bind(this),this.contentAdapterListeners[zh.Event.STOP]=this._stopListener.bind(this),this.contentAdapterListeners[zh.Event.VIDEO_EVENT]=this._videoEventListener.bind(this),this.contentAdapterListeners)this._adapter.on(t,this.contentAdapterListeners[t])},getAdapter:function(){return this._adapter},removeAdapter:function(){if(this._adapter){if(this._adapter.dispose(),this._adapter.plugin=null,this.contentAdapterListeners){for(var e in this.contentAdapterListeners)this._adapter.off(e,this.contentAdapterListeners[e]);delete this.contentAdapterListeners}this._adapter=null}},_startListener:function(e){this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{},n=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();(n=!this.options.forceInit&&(n&&this._isExtraMetadataReady()))&&!this.isInitiated?(this._send(xd.WillSendEvent.WILL_SEND_START,xd.Service.START,t),this._adSavedError(),this._adSavedManifest(),Sd.notice(xd.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),this._send(xd.WillSendEvent.WILL_SEND_INIT,xd.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),Sd.notice(xd.Service.INIT+" "+(t.title||t.mediaResource)))},_retryStart:function(e){this._isExtraMetadataReady()&&(this._send(xd.WillSendEvent.WILL_SEND_START,xd.Service.START,{}),this.startDelayed=!1)},_joinListener:function(e){var t={};Cd.assign(t,e.data.params||{}),this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this._adapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(xd.WillSendEvent.WILL_SEND_START,xd.Service.START,t):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),Sd.notice(xd.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0),t=e.data.params||{},this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),this._send(xd.WillSendEvent.WILL_SEND_JOIN,xd.Service.JOIN,t),Sd.notice(xd.Service.JOIN+" "+t.joinDuration+"ms"))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};this._send(xd.WillSendEvent.WILL_SEND_PAUSE,xd.Service.PAUSE,t),Sd.notice(xd.Service.PAUSE+" at "+t.playhead+"s")},_resumeListener:function(e){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireBreakStop();var t=e.data.params||{};this._send(xd.WillSendEvent.WILL_SEND_RESUME,xd.Service.RESUME,t),Sd.notice(xd.Service.RESUME+" "+t.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),e.type&&e.type.includes("buffer")?Sd.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.buffer):Sd.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.seek)},_seekEndListener:function(e){var t=e.data.params||{};this._send(xd.WillSendEvent.WILL_SEND_SEEK,xd.Service.SEEK,t),Sd.notice(xd.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_bufferEndListener:function(e){var t=e.data.params||{};this._send(xd.WillSendEvent.WILL_SEND_BUFFER,xd.Service.BUFFER,t),Sd.notice(xd.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_errorListener:function(e){this._blockError(e.data.params)||(this.fireError(e.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(e){var t=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg)&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){this.fireStop(e.data.params||{})},_isStopReady:function(e){var t=!1;if(!this.requestBuilder.lastSent.live&&this._adsAdapter&&this._adapter&&(!this._adapter.getPlayhead()||this._adapter.getPlayhead()>=this.requestBuilder.lastSent.mediaDuration-1)){var n=0,i=this.options["ad.expectedPattern"];if(i&&i.post&&i.post[0])n=i.post[0];else if(this.requestBuilder.lastSent.breaksTime){if(this.requestBuilder.lastSent.position===xd.AdPosition.Postroll&&(n=this.requestBuilder.lastSent.givenAds),!n&&this.requestBuilder.lastSent.breaksTime){var r=this.requestBuilder.lastSent.breaksTime;if(r.length>0&&this.requestBuilder.lastSent.mediaDuration)Math.round(r[r.length-1])+1>=this.requestBuilder.lastSent.mediaDuration&&(n=1)}}else t=!0;n<=this.playedPostrolls&&(t=!0)}else t=!0;return t},_videoEventListener:function(e){this._send(xd.WillSendEvent.WILL_SEND_VIDEO_EVENT,xd.Service.VIDEO_EVENT,e.data.params)},_isExtraMetadataReady:function(e){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var t=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(e){if(t.hasOwnProperty(e))return!!this[t[e]]()}.bind(this)).indexOf(!1)<0}},$h=qh,Xh={getHost:function(){var e=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(e=this.viewTransform.response.host),Cd.addProtocol(Cd.stripProtocol(e),this.options["app.https"])},getUserType:function(){return this.options["user.type"]},isParseManifest:function(){return this.options["parse.manifest"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isCdnSwitch:function(){return this.options["parse.cdnSwitchHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getParseNodeHeader:function(){return this.options["parse.cdnNodeHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]},getPrivacyProtocol:function(){var e=this.options["user.privacyProtocol"];return"string"==typeof e&&(e=e.toLowerCase()),"optin"===e||"optout"===e?e:null},getCustomDimensions:function(){var e=this.options["content.customDimensions"];return"object"==typeof e?e:null},getExtraparam1:function(){return this.options["content.customDimension.1"]},getExtraparam2:function(){return this.options["content.customDimension.2"]},getExtraparam3:function(){return this.options["content.customDimension.3"]},getExtraparam4:function(){return this.options["content.customDimension.4"]},getExtraparam5:function(){return this.options["content.customDimension.5"]},getExtraparam6:function(){return this.options["content.customDimension.6"]},getExtraparam7:function(){return this.options["content.customDimension.7"]},getExtraparam8:function(){return this.options["content.customDimension.8"]},getExtraparam9:function(){return this.options["content.customDimension.9"]},getExtraparam10:function(){return this.options["content.customDimension.10"]},getExtraparam11:function(){return this.options["content.customDimension.11"]},getExtraparam12:function(){return this.options["content.customDimension.12"]},getExtraparam13:function(){return this.options["content.customDimension.13"]},getExtraparam14:function(){return this.options["content.customDimension.14"]},getExtraparam15:function(){return this.options["content.customDimension.15"]},getExtraparam16:function(){return this.options["content.customDimension.16"]},getExtraparam17:function(){return this.options["content.customDimension.17"]},getExtraparam18:function(){return this.options["content.customDimension.18"]},getExtraparam19:function(){return this.options["content.customDimension.19"]},getExtraparam20:function(){return this.options["content.customDimension.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return{lib:gd,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var e={};return this.getDeviceCode()&&(e.deviceCode=this.getDeviceCode()),this.getModel()&&(e.model=this.getModel()),this.getBrand()&&(e.brand=this.getBrand()),this.getDeviceType()&&(e.deviceType=this.getDeviceType()),this.getDeviceName()&&(e.deviceName=this.getDeviceName()),this.getOsName()&&(e.osName=this.getOsName()),this.getOsVersion()&&(e.osVersion=this.getOsVersion()),this.getBrowserName()&&(e.browserName=this.getBrowserName()),this.getBrowserVersion()&&(e.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(e.browserType=this.getBrowserType()),this.getBrowserEngine()&&(e.browserEngine=this.getBrowserEngine()),e!=={}?e:null},getEDID:function(){var e=this.options["device.EDID"];return e?e.toString():null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]},getAnonymousUser:function(){return this.options["user.anonymousId"]},getEmail:function(){return this.options["user.email"]},getReferer:function(){var e=this.options.referer||"";return!e&&"undefined"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){var e=this.options.referral||"";return e||"undefined"==typeof document||(e=document.referrer),e},getLanguage:function(){var e=null;return"undefined"!=typeof navigator&&(e=navigator.language),e},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){var e=null;return this.offlineStorage&&(e=this.offlineStorage.getView()),e},getDeviceUUID:function(){var e=null;return this.options["device.isAnonymous"]||(e=this.options["device.id"]||this.uuidGenerator.getKey()),e},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]},getIsBlocked:function(){return this.options["ad.blockerDetected"]},isMethodPostEnabled:function(){return this.options.method&&this.options.method.toLowerCase()===Od.POST},getPlayheadMonitorEnabled:function(){return this.options["playhead.monitor"]},getReadyStateMonitorEnabled:function(){return this.options["readyState.monitor"]}},Qh={getPlayhead:function(){var e=this._safeGetterAdapter("getPlayhead");return Cd.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter&&this._adapter.flags&&!this._adapter.flags.isPaused)try{e=this._adapter.getPlayrate()}catch(e){Sd.warn("An error occured while calling getPlayrate",e)}return e},getFramesPerSecond:function(){return this._safeGetterAdapter("getFramesPerSecond","content.fps")},getSegmentDuration:function(){return this.hybridNetwork.getSegmentDuration()||this._safeGetterAdapter("getSegmentDuration","content.segmentDuration")},getDroppedFrames:function(){var e=this._safeGetterAdapter("getDroppedFrames");return e||(e=this.getWebkitDroppedFrames()),Cd.parseNumber(e,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var e=this._safeGetterAdapter("getDuration","content.duration")||null;return Cd.parseNumber(Math.round(e),null)},getBitrate:function(){var e=this._safeGetterAdapter("getBitrate","content.bitrate");return e&&-1!==e||(e=this.getWebkitBitrate()),Cd.parseNumber(e,-1)},getTotalBytes:function(){return this.options["content.sendTotalBytes"]?this._safeGetterAdapter("getTotalBytes","content.totalBytes"):null},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getThroughput:function(){var e=this._safeGetterAdapter("getThroughput","content.throughput");return Cd.parseNumber(e,-1)},getRendition:function(){return this._safeGetterAdapter("getRendition","content.rendition")},getTitle:function(){return this._safeGetterAdapter("getTitle","content.title")},getTitle2:function(){return this._safeGetterAdapter("getTitle2","content.program")},getIsLive:function(){var e=this.options["content.isLive"];return e||!1===e||(e=this._safeGetterAdapter("getIsLive")||!1),e},getResource:function(){return this._safeGetterAdapter("getResource","content.resource")},getParsedResource:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getResource()),(e=e||this._safeGetterAdapter("getURLToParse"))===this.getResource()?null:e},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){return this._safeGetterAdapter("getPlayerVersion")||""},getPlayerName:function(){return this._safeGetterAdapter("getPlayerName")||""},getCdn:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getCdnName()),e||this.options["content.cdn"]},getPluginVersion:function(){var e=this.getAdapterVersion();return e||(e=gd+"-adapterless-js"),e},getLibVersion:function(){return gd},getAdapterVersion:function(){return this._safeGetterAdapter("getVersion")},getCdnTraffic:function(){return this._safeGetterAdapter("getCdnTraffic")||this.hybridNetwork.getCdnTraffic()},getMultiCdnInfo:function(){return this.hybridNetwork.getMultiCdnInfo()},getBalancerResponseId:function(){return this.hybridNetwork.getBalancerResponseId()},getP2PTraffic:function(){return this._safeGetterAdapter("getP2PTraffic")||this.hybridNetwork.getP2PTraffic()},getUploadTraffic:function(){return this._safeGetterAdapter("getUploadTraffic")||this.hybridNetwork.getUploadTraffic()},getIsP2PEnabled:function(){return this._safeGetterAdapter("getIsP2PEnabled")||this.hybridNetwork.getIsP2PEnabled()},getStreamingProtocol:function(){var e=this.options["content.streamingProtocol"];if(e)for(var t in sh)if(sh[t]===e)return e;return null},getTransportFormat:function(){var e=this.options["content.transportFormat"];if(e||!this.options["parse.manifest"]||this.resourceTransform.isBlocking()||(e=this.resourceTransform.getTransportFormat()),e)for(var t in Wd)if(Wd[t]===e)return e;return null},getHouseholdId:function(){return this._safeGetterAdapter("getHouseholdId")},getLatency:function(){return this.getIsLive()?this._safeGetterAdapter("getLatency"):null},getPacketLoss:function(){return this._safeGetterAdapter("getPacketLoss")},getPacketSent:function(){return this._safeGetterAdapter("getPacketSent")},getVideoMetrics:function(){return Cd.getMetricsFrom(this._adapter?this._adapter.getMetrics():null,this.options["content.metrics"])},getPlayerStartupTime:function(){return this.browserLoadTimes.getPlayerStartupTime()},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){var e=this.options["content.playbackType"];if(!e){var t=this.options["content.isLive"];"boolean"!=typeof t&&(t=this._safeGetterAdapter("getIsLive")),"boolean"==typeof t&&(e=t?"Live":"VoD")}return e},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this._safeGetterAdapter("getVideoCodec","content.encoding.videoCodec")},getAudioCodec:function(){return this._safeGetterAdapter("getAudioCodec","content.encoding.audioCodec")},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]},getLinkedViewId:function(){return this.options.linkedViewId},_safeGetterAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adapter&&"function"==typeof this._adapter[e]&&(n=this._adapter[e]())}catch(t){Sd.warn("An error occured while calling "+e,t)}return n}},Jh=Qh,Zh={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e){if(e.plugin)Sd.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdsAdapter(),e.plugin=this,this._adsAdapter=e,e.setIsAds(!0),this.adsAdapterListeners={},this.adsAdapterListeners[zh.Event.START]=this._adStartListener.bind(this),this.adsAdapterListeners[zh.Event.JOIN]=this._adJoinListener.bind(this),this.adsAdapterListeners[zh.Event.PAUSE]=this._adPauseListener.bind(this),this.adsAdapterListeners[zh.Event.RESUME]=this._adResumeListener.bind(this),this.adsAdapterListeners[zh.Event.BUFFER_BEGIN]=this._adBufferBeginListener.bind(this),this.adsAdapterListeners[zh.Event.BUFFER_END]=this._adBufferEndListener.bind(this),this.adsAdapterListeners[zh.Event.STOP]=this._adStopListener.bind(this),this.adsAdapterListeners[zh.Event.ERROR]=this._adErrorListener.bind(this),this.adsAdapterListeners[zh.Event.CLICK]=this._adClickListener.bind(this),this.adsAdapterListeners[zh.Event.MANIFEST]=this._adManifestListener.bind(this),this.adsAdapterListeners[zh.Event.PODSTART]=this._adBreakStartListener.bind(this),this.adsAdapterListeners[zh.Event.PODSTOP]=this._adBreakStopListener.bind(this),this.adsAdapterListeners[zh.Event.QUARTILE]=this._adQuartileListener.bind(this),this.adsAdapterListeners)this._adsAdapter.on(t,this.adsAdapterListeners[t])},removeAdsAdapter:function(){if(this._adsAdapter){if(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this.adsAdapterListeners){for(var e in this.adsAdapterListeners)this._adsAdapter.off(e,this.adsAdapterListeners[e]);delete this.adsAdapterListeners}this.resizeScrollDetector.stopDetection(),this._adsAdapter=null}},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(null,"adStartListener"),this._adapter.fireSeekEnd(null,"adStartListener"),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.chronos.viewedMax=[]);var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),(this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_START,xd.Service.AD_START,t)):(this.adInitSent=!0,t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_INIT,xd.Service.AD_INIT,t))},_adJoinListener:function(e){var t={};Cd.assign(t,e.data.params||{}),this.adInitSent&&!this.adStartSent&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_START,xd.Service.AD_START,t)),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),t=e.data.params||{},this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_JOIN,xd.Service.AD_JOIN,t),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_PAUSE,xd.Service.AD_PAUSE,t)},_adResumeListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_RESUME,xd.Service.AD_RESUME,t)},_adBufferBeginListener:function(e){Sd.notice("Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_BUFFER,xd.Service.AD_BUFFER,t)},_adStopListener:function(e){this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime();var t=e.data.params||{};if(t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_STOP,xd.Service.AD_STOP,t),this.requestBuilder.lastSent.position===xd.AdPosition.Postroll){var n=this.options["ad.expectedPattern"];this.playedPostrolls++,(this.requestBuilder.lastSent.givenAds&&this.requestBuilder.lastSent.givenAds<=this.playedPostrolls||!this.requestBuilder.lastSent.givenAds&&n&&n.post&&n.post[0]&&n.post[0]<=this.playedPostrolls)&&this.fireStop()}this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(e){var t=e.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(e.data.params)?null:(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted||(t.adNumber=this.requestBuilder.getNewAdNumber(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak()),this.isBreakStarted||(t.breakNumber=this.requestBuilder.getNewBreakNumber()),void this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_ERROR,xd.Service.AD_ERROR,t)):(this._savedAdError=e,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(e){var t=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg&&this._lastAdErrorParams.adCreativeId===this.getAdCreativeId()&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_CLICK,xd.Service.AD_CLICK,t)},_adManifestListener:function(e){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return this._savedAdManifest=e,null;var t=e.data.params||{};this.isAdsManifestSent=!0,this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_MANIFEST,xd.Service.AD_MANIFEST,t)}},_adBreakStartListener:function(e){if(!this.isBreakStarted){this.isBreakStarted=!0,this._adapter&&this._adapter.firePause();var t=e.data.params||{};t.breakNumber=this.requestBuilder.getNewBreakNumber(),this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_POD_START,xd.Service.AD_POD_START,t),this.adConnected=!1}},_adBreakStopListener:function(e){if(this.isBreakStarted){this.isBreakStarted=!1;var t=e.data.params||{};t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_POD_STOP,xd.Service.AD_POD_STOP,t),this.adConnected=!1,this._adapter&&this._adapter.fireResume()}},_adQuartileListener:function(e){var t=e.data.params||{};t.quartile&&this._sendAdEventIfAllowed(xd.WillSendEvent.WILL_SEND_AD_QUARTILE,xd.Service.AD_QUARTILE,t)},_sendAdEventIfAllowed:function(e,t,n){this.options["ad.ignore"]||this._send(e,t,n),Sd.notice(t)}},ef=Zh,tf={getAdPlayerVersion:function(){return this._safeGetterAdsAdapter("getPlayerVersion")||""},getAdPosition:function(){var e=xd.AdPosition.Preroll;if(this._adsAdapter)try{var t=this._adsAdapter.getPosition();xd.AdPosition.Preroll!==t&&xd.AdPosition.Midroll!==t&&xd.AdPosition.Postroll!==t||(e=t)}catch(e){Sd.warn("An error occured while calling getAdPosition",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?xd.AdPosition.Midroll:xd.AdPosition.Preroll),e},getAdNumber:function(){return this.requestBuilder.lastSent.adNumber||0},getAdNumberInBreak:function(){return this.requestBuilder.lastSent.adNumberInBreak||0},getBreakNumber:function(){return this.requestBuilder.lastSent.breakNumber||0},getAdPlayhead:function(){var e=this._safeGetterAdsAdapter("getPlayhead");return Cd.parseNumber(e,0)},getAdDuration:function(){var e=this._safeGetterAdsAdapter("getDuration","ad.duration");return Cd.parseNumber(e,0)},getAdBitrate:function(){var e=this._safeGetterAdsAdapter("getBitrate");return e&&-1!==e||(e=this.getWebkitAdBitrate()),Cd.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adsAdapter&&this._adsAdapter.tag&&this._adsAdapter.tag.webkitVideoDecodedByteCount){var e=this._adsAdapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adsAdapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adsAdapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getAdTitle:function(){return this._safeGetterAdsAdapter("getTitle","ad.title")},getAdResource:function(){return this._safeGetterAdsAdapter("getResource","ad.resource")},getAdCampaign:function(){return this._safeGetterAdsAdapter("getCampaign","ad.campaign")},getAdCreativeId:function(){return this._safeGetterAdsAdapter("getCreativeId","ad.creativeId")},getAdProvider:function(){return this._safeGetterAdsAdapter("getProvider","ad.provider")},getAdAdapterVersion:function(){return this._safeGetterAdsAdapter("getVersion")},getAdMetadata:function(){return this.options["ad.metadata"]},getAdInsertionType:function(){return this._safeGetterAdsAdapter("getAdInsertionType")},getGivenBreaks:function(){return this._safeGetterAdsAdapter("getGivenBreaks","ad.givenBreaks")},getExpectedBreaks:function(){var e=null,t=this.options["ad.expectedBreaks"],n=this.options["ad.expectedPattern"];if(t)e=t;else if(n)e=0,e=n.pre?n.pre.length:0,e+=n.mid?n.mid.length:0,e+=n.post?n.post.length:0;else if(this._adsAdapter)try{e=this._adsAdapter.getExpectedBreaks()}catch(e){Sd.warn("An error occured while calling expectedBreaks",e)}return e},getExpectedPattern:function(){return this._safeGetterAdsAdapter("getExpectedPattern","ad.expectedPattern")},getBreaksTime:function(){return this._safeGetterAdsAdapter("getBreaksTime","ad.breaksTime")},getGivenAds:function(){return this._safeGetterAdsAdapter("getGivenAds","ad.givenAds")},getExpectedAds:function(){var e=null;try{if(this._adsAdapter){var t=this.options["ad.expectedPattern"];if(t&&this.getAdPosition()){var n=[];if(t.pre&&(n=n.concat(t.pre)),t.mid&&(n=n.concat(t.mid)),t.post&&(n=n.concat(t.post)),n.length>0){var i=this.requestBuilder.lastSent.breakNumber;i>n.length&&(i=n.length),e=n[i-1]}}else e=this._adsAdapter.getExpectedAds()}}catch(e){Sd.warn("An error occured while calling expectedAds",e)}return e},getAdsExpected:function(){var e=null;try{e=this.getExpectedPattern()||this.getGivenAds()||!1}catch(e){Sd.warn("An error occured while calling givenAds or expectedPattern",e)}return e},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){return this._getTimeMaxOrAcum(!0)},getAdViewability:function(){return this._getTimeMaxOrAcum()},_getTimeMaxOrAcum:function(e){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.forEach((function(n){e?t+=n.getDeltaTime(!1):t=Math.max(n.getDeltaTime(!1),t)})),t},getAudioEnabled:function(){return this._safeGetterAdsAdapter("getAudioEnabled")},getIsSkippable:function(){return this._safeGetterAdsAdapter("getIsSkippable")},getIsFullscreen:function(){return this._safeGetterAdsAdapter("getIsFullscreen")},_safeGetterAdsAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adsAdapter&&"function"==typeof this._adsAdapter[e]&&(n=this._adsAdapter[e]())}catch(t){Sd.warn("An error occured while calling "+e,t)}return n}},nf=tf,rf={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(t=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(t,["pauseDuration"]):this.requestBuilder.fetchParams(t,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(t=this.requestBuilder.fetchParams(t,["playhead"])),this._adapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["bufferDuration"])),this._adapter.flags.isSeeking&&(t=this.requestBuilder.fetchParams(t,["seekDuration"]))),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(t=this.requestBuilder.fetchParams(t,["adPlayhead","adViewedDuration","adViewability"]),t=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(t,["adPauseDuration"]):this.requestBuilder.fetchParams(t,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["adBufferDuration"]))),this._send(xd.WillSendEvent.WILL_SEND_PING,xd.Service.PING,t),this.startDelayed&&this._retryStart(),Sd.verbose(xd.Service.PING)}},af={fireInit:function(e,t){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},t&&(e.triggeredEvents=[t]),this._send(xd.WillSendEvent.WILL_SEND_INIT,xd.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),Sd.notice(xd.Service.INIT+" "+(e.title||e.mediaResource)))},fireError:function(e,t,n,i){this.fireInit();var r=Cd.buildErrorParams(e,t,n,i);r.code&&delete r.code,this._send(xd.WillSendEvent.WILL_SEND_ERROR,xd.Service.ERROR,r),this._adSavedError(),this._adSavedManifest(),Sd.notice(xd.Service.ERROR+" "+r.errorLevel+" "+r.errorCode),"fatal"===r.errorLevel&&this.fireStop()},fireFatalError:function(e,t,n,i){this.fireError(e,t,n,i),this.fireStop()},fireStop:function(e){if(this.isInitiated||this.isStarted){this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&(this._adsAdapter.fireStop(),this._adsAdapter.fireBreakStop()),e=e||{},this._send(xd.WillSendEvent.WILL_SEND_STOP,xd.Service.STOP,e);var t=this._adapter?this._adapter.chronos:null;t&&(t.total.stop(),t.join.reset(),t.pause.reset(),t.buffer.reset(),t.seek.reset()),Sd.notice(xd.Service.STOP+" at "+e.playhead+"s"),this._reset()}},fireOfflineEvents:function(e){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?Sd.error("Adapters have to be stopped"):(this._offlineParams=e,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(Fd.Event.DONE,this.offlineReference))):Sd.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){if(this.options.disableStorage)return null;var e=this._offlineParams;for(this._initComm();;){var t=this.requestBuilder.buildBody(xd.Service.OFFLINE_EVENTS).viewJson;if(null===t[0])break;var n=this.viewTransform.nextView(),i=t[0].replace(/CODE_PLACEHOLDER/g,n.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"");this._send(xd.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,xd.Service.OFFLINE_EVENTS,e,i,"POST",function(e,t){this.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.offlineStorage.sent(),this._offlineParams=null}},of=af,sf={_initInfinity:function(){this.infinity.on(kh.Event.NAV,this._navListener.bind(this)),this.infinity.on(kh.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(kh.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(kh.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(e,t,n){var i={params:n=this.requestBuilder.buildParams(n,t),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,i),this.infinity._comm&&null!==n&&this.options.enabled){this.lastServeiceSent=t;var r=new Nd(null,t,n);this.isMethodPostEnabled()&&r.setPostRequest(!0),this.infinity._comm.sendRequest(r)}},_navListener:function(e){var t=e.data.params||{};this._sendInfinity(xd.WillSendEvent.WILL_SEND_NAV,xd.Service.NAV,t),this._beat.isRunning||this._beat.start(),Sd.notice(xd.Service.NAV+" "+t.route)},_sessionStartListener:function(e){var t=e.data.params||{};this._sendInfinity(xd.WillSendEvent.WILL_SEND_SESSION_START,xd.Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),Sd.notice(xd.Service.SESSION_START+" "+t.route)},_sessionStopListener:function(e){var t=e.data.params||{};this._sendInfinity(xd.WillSendEvent.WILL_SEND_SESSION_STOP,xd.Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),Sd.notice(xd.Service.SESSION_STOP+" "+t.route)},_eventListener:function(e){var t=e.data.params||{};this._sendInfinity(xd.WillSendEvent.WILL_SEND_EVENT,xd.Service.EVENT,t),Sd.notice(xd.Service.EVENT+" "+t.name)},_sendBeat:function(e){var t={diffTime:e};this._sendInfinity(xd.WillSendEvent.WILL_SEND_BEAT,xd.Service.BEAT,t),this.infinity&&this.infinity._setLastActive(),Sd.verbose(xd.Service.BEAT)},getSessionMetrics:function(){return Cd.getMetricsFrom(this.options["session.metrics"])}},lf=sf,uf={getContext:function(){return"Default"},getScrollDepth:function(){var e=this.storage.getSession("pageScrollDepth");return this.storage.removeSession("pageScrollDepth"),e},getSession:function(){var e=this.storage.getStorages("session");if("undefined"===e&&(e=void 0),!e){var t=this.getStoredData();if(t)try{e=JSON.parse(t).q.c}catch(e){}}return e},getStorageHost:function(){var e=null,t=this.getStoredData();if(t)try{e=JSON.parse(t).q.h}catch(e){}return e?Cd.addProtocol(e,this.options["app.https"]):e},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(e){this.storage.setStorages("data",e)},setSession:function(e){this.storage.setStorages("session",e)},setDataTime:function(e){this.storage.setStorages("dataTime",e)},setLastActive:function(e){this.storage.setStorages("lastactive",e)},getPageName:function(){if("undefined"!=typeof document&&document.title)return document.title},getPageLoadTime:function(){return this.browserLoadTimes.getPageLoadTime()},getIsSessionExpired:function(){var e=(new Date).getTime();return!this.getSession()||this.infinity.getFirstActive()<e-this.sessionExpire},getIsDataExpired:function(){var e=(new Date).getTime();return!this.storage.isEnabled()||!this.getStoredData()||this.infinity.getFirstActive()<e-this.sessionExpire}},cf=uf,df=kd.extend({constructor:function(e,t,n){"string"!=typeof t||n||(n=t,t=null),this.storage=new fh,this.uuidGenerator=new Bh(this),this.infinity=new kh(this),this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new Dd,this.options=new uh(e),this.storage=new fh(null,this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.options.disableStorage||(this.offlineStorage=new gh),this._adapter=null,this._adsAdapter=null,this._ping=new Ld(this._sendPing.bind(this),5e3),this._beat=new Ld(this._sendBeat.bind(this),3e4),this._refreshData=new Ld(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||18e4,this.requestBuilder=new Ah(this),this.resourceTransform=new nh(this),this.lastEventTime=null,this.restartViewTransform(n),this._initInfinity(),this.hybridNetwork=new Id,this.browserLoadTimes=new Ch(this),this.deviceDetector=new Dh,this.backgroundDetector=new Rh(this),this.resizeScrollDetector=new Ph(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),t&&this.setAdapter(t)},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted||this.restartViewTransform()},restartViewTransform:function(e){this.viewTransform=new jd(this),this.viewTransform.on(jd.Event.DONE,this._receiveData.bind(this)),e?this.viewTransform.setData(e):this.getIsDataExpired()||!this.getStorageHost()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(e){this._ping.interval=1e3*e.target.response.pingTime,this._beat.interval=1e3*e.target.response.beatTime,this.sessionExpire=1e3*e.target.response.sessionExpire,this.storage.setStorages("data",e.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSession(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code),this.storage.setStorages("host",this.viewTransform.response.host)):(this.viewTransform.setSession(this.getSession()),this.viewTransform.setHost(this.getStorageHost()))},_reset:function(){this._stopPings(),this.resourceTransform=new nh(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1},_send:function(e,t,n,i,r,a,o){var s=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&s>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=t===xd.Service.STOP?null:s,n=this.requestBuilder.buildParams(n,t),this.getIsLive()&&(n.mediaDuration=this.options["content.duration"],n.playhead=void 0);var l={params:n,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,l),this._comm&&(null!==n||void 0!==r)&&this.options.enabled){this.lastServeiceSent=t;var u={};void 0!==r&&"GET"!==r&&(u.method=r);var c=new Nd(null,t,n,u);i&&c.setBody(i),this.isMethodPostEnabled()&&c.setPostRequest(!0),this._comm.sendRequest(c,a,o)}},_initComm:function(){var e=this.getResource();this._adapter&&this._adapter.getURLToParse()&&(e=this._adapter.getURLToParse()),this.resourceTransform.init(e),this._comm=new Vd,this._comm.addTransform(new dh),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new rh(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(e){e&&(this.options.setOptions(e),"boolean"==typeof e["background.enabled"]&&(e["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},getFastDataConfig:function(){return this.viewTransform.response.msg},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:xd.WillSendEvent});Cd.assign(df.prototype,$h),Cd.assign(df.prototype,Xh),Cd.assign(df.prototype,Jh),Cd.assign(df.prototype,ef),Cd.assign(df.prototype,nf),Cd.assign(df.prototype,rf),Cd.assign(df.prototype,of),Cd.assign(df.prototype,lf),Cd.assign(df.prototype,cf);var hf=df,ff=pf,pf={noConflict:function(){return pf=ff,this}};pf.VERSION=gd,pf.polyfills=vd,pf.polyfills(),pf.Object=bd,pf.Emitter=kd,pf.Log=Sd,pf.Log.loadLevelFromUrl(),pf.Util=Cd,pf.HybridNetwork=Id,pf.Chrono=Dd,pf.Timer=Ld,pf.Constants=xd,pf.Request=Nd,pf.Communication=Vd,pf.Transform=Fd,pf.ViewTransform=jd,pf.ResourceTransform=nh,pf.CdnParser=$d,pf.HlsParser=zd,pf.DashParser=Zd,pf.OfflineParser=rh,pf.LocationheaderParser=eh,pf.Options=uh,pf.Plugin=hf,pf.Storage=fh,pf.RequestBuilder=Ah,pf.PlayheadMonitor=Hh,pf.Adapter=zh,pf.adapters={},pf.Infinity=kh,pf.BackgroundDetector=Rh,pf.DeviceDetector=Dh,pf.UUIDGenerator=Bh,pf.registerAdapter=function(e,t){this.adapters[e]=t}.bind(pf),pf.unregisterAdapter=function(e){this.adapters[e]=null}.bind(pf);var gf=pf;var vf=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"getVersion",value:function(){return"youbora-6"}},{key:"getPlayerName",value:function(){return"clappr-web"}},{key:"getPlayerVersion",value:function(){return"7.154.0"}},{key:"getTitle",value:function(){return this.player.video.title}},{key:"getPlayhead",value:function(){return this.player.idPlayback.currentTime}},{key:"getDuration",value:function(){return this.player.video.duration/1e3}},{key:"getIsLive",value:function(){var e;return!(null===(e=this.player.video)||void 0===e||!e.isLive)}},{key:"getResource",value:function(){return this.player.resource}},{key:"getBitrate",value:function(){return this.bitrate||-1}},{key:"getRendition",value:function(){return this.rendition}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.player.listenToOnce(this.player.idPlayback,xe.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenTo(this.player.container,Gn.WATCH_SESSION_END,this.watchSessionEndListener.bind(this)),this.references={},this.references[xe.PLAYBACK_PAUSE]=this.pauseListener.bind(this),this.references[xe.PLAYBACK_SEEK]=this.seekStart.bind(this),this.references[xe.PLAYBACK_SEEKED]=this.seekStopListener.bind(this),this.references[xe.PLAYBACK_BUFFERING]=this.bufferingListener.bind(this),this.references[xe.PLAYBACK_BUFFERFULL]=this.bufferfullListener.bind(this),this.references[xe.PLAYBACK_ERROR]=this.errorListener.bind(this),this.references[xe.PLAYBACK_BITRATE]=this.bitrateListener.bind(this),this.references[Gn.WILL_CHANGE_SOURCE]=this.useFallbackSource.bind(this),this.references[Gn.WILL_RENEW_RESOURCE]=this.renewResource.bind(this),this.references)this.player.listenTo(this.player.idPlayback,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.player.stopListening(this.player.container,Gn.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,xe.PLAYBACK_PLAY),this.player.stopListening(this.player.idPlayback,Gn.WM_PLAY_REQUESTED),this.references)this.player.stopListening(this.player.idPlayback,e),delete this.references[e]}},{key:"onReplayRequested",value:function(){this.fireInit(void 0,Gn.WM_PLAY_REQUESTED)}},{key:"onFirstPlayListener",value:function(){this.fireStart(void 0,xe.PLAYBACK_PLAY),this.fireJoin(void 0,xe.PLAYBACK_PLAY),this.player.listenTo(this.player.idPlayback,xe.PLAYBACK_PLAY,this.playListener.bind(this))}},{key:"playListener",value:function(){this.fireResume(void 0,xe.PLAYBACK_PLAY)}},{key:"pauseListener",value:function(){this.firePause(void 0,xe.PLAYBACK_PAUSE)}},{key:"watchSessionEndListener",value:function(){this.fireStop(void 0,Gn.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,xe.PLAYBACK_PLAY),this.player.listenToOnce(this.player.idPlayback,xe.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenToOnce(this.player.idPlayback,Gn.WM_PLAY_REQUESTED,this.onReplayRequested.bind(this))}},{key:"seekStart",value:function(){this.fireSeekBegin(void 0,!1,xe.PLAYBACK_SEEK)}},{key:"seekStopListener",value:function(){this.fireSeekEnd(void 0,xe.PLAYBACK_SEEKED)}},{key:"bufferingListener",value:function(){this.fireBufferBegin(void 0,!1,xe.PLAYBACK_BUFFERING)}},{key:"bufferfullListener",value:function(){this.fireBufferEnd(void 0,xe.PLAYBACK_BUFFERFULL)}},{key:"errorListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError(null==e?void 0:e.code,null==e?void 0:e.description)}},{key:"bitrateListener",value:function(e){this.bitrate=e.bitrate,e.bandwidth&&e.width&&e.height&&(this.rendition=gf.Util.buildRenditionString(e.width,e.height,e.bandwidth))}},{key:"useFallbackSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errorcode:e.errorCode,errormessage:e.errorMessage,source:e.source};this.fireEvent("New Source",t)}},{key:"renewResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errorcode:e.renewReason,errormessage:e.description};this.fireEvent("Renew resource",t)}}]),n}(gf.Adapter),mf=1,yf=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).requestState=mf,i}return c(n,[{key:"getTitle",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getTitle()}},{key:"getAdInsertionType",value:function(){var e,t,n=gf.Constants.AdInsertionType,i=n.ServerSide,r=n.ClientSide;return null!==(e=this.ad)&&void 0!==e&&null!==(t=e.isServerSide)&&void 0!==t&&t.call(e)?i:r}},{key:"getPosition",value:function(){var e,t,n=null===(e=this.ad)||void 0===e||null===(t=e.getAdPodInfo())||void 0===t?void 0:t.getPodIndex();return this.ad&&0!==n?-1===n?"post":"mid":"pre"}},{key:"getIsSkippable",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.isSkippable()}},{key:"getCreativeId",value:function(){var e,t,n,i,r;return(null===(e=this.ad)||void 0===e||null===(t=e.g)||void 0===t?void 0:t.creativeId)||(null===(n=this.ad)||void 0===n||null===(i=n.creative)||void 0===i?void 0:i.id)||(null===(r=this.ad)||void 0===r?void 0:r.getCreativeId())}},{key:"getResource",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getMediaUrl()}},{key:"getDuration",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getDuration()}},{key:"getPlayhead",value:function(){var e;return(null===(e=this.adPlayback)||void 0===e?void 0:e.getCurrentTime())||0}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.references={},this.references[Gn.DID_START_ADS_MANAGER]=this.onDidStartAdsManager.bind(this),this.references[Gn.DID_SET_AD_PLAYBACK]=this.onDidSetAdPlayback.bind(this),this.references[Gn.DFP_AD_METADATA]=this.onAdMetadata.bind(this),this.references[Gn.DFP_AD_LOADED]=this.onAdLoaded.bind(this),this.references[Gn.DFP_CONTENT_PAUSE]=this.onContentPause.bind(this),this.references[Gn.DFP_AD_STARTED]=this.onAdStarted.bind(this),this.references[Gn.DFP_AD_BUFFERING]=this.onAdBuffering.bind(this),this.references[Gn.DFP_AD_BUFFERFULL]=this.onAdBufferfull.bind(this),this.references[Gn.DFP_AD_ERROR]=this.onAdError.bind(this),this.references[Gn.DFP_AD_PAUSE]=this.onAdPause.bind(this),this.references[Gn.DFP_AD_RESUME]=this.onAdResume.bind(this),this.references[Gn.DFP_AD_SKIPPED]=this.onAdSkipped.bind(this),this.references[Gn.DFP_AD_CLICKED]=this.onAdClicked.bind(this),this.references[Gn.DFP_AD_COMPLETED]=this.onAdCompleted.bind(this),this.references[Gn.DFP_CONTENT_RESUME]=this.onContentResume.bind(this),this.references)this.player.listenTo(this.player.container,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.references)this.player.stopListening(this.player.container,e),delete this.references[e]}},{key:"onDidStartAdsManager",value:function(){this.fireStart()}},{key:"onDidSetAdPlayback",value:function(e){this.adPlayback=e}},{key:"onAdMetadata",value:function(){this.fireManifest()}},{key:"onAdLoaded",value:function(e){this.ad=e}},{key:"onContentPause",value:function(){this.fireStart(),this.fireBreakStart()}},{key:"onAdStarted",value:function(){this.fireStart(),this.fireJoin()}},{key:"onAdBuffering",value:function(){this.fireBufferBegin(void 0,!1,Gn.DFP_AD_BUFFERING)}},{key:"onAdBufferfull",value:function(){this.fireBufferEnd(void 0,Gn.DFP_AD_BUFFERFULL)}},{key:"onAdPause",value:function(){this.firePause()}},{key:"onAdResume",value:function(){this.fireResume()}},{key:"onAdSkipped",value:function(){this.fireSkip()}},{key:"onAdClicked",value:function(){this.fireClick()}},{key:"onAdCompleted",value:function(){this.fireStop()}},{key:"onContentResume",value:function(){this.fireBreakStop()}},{key:"onAdError",value:function(){var e,t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError((null==r?void 0:r.type)||(null==r?void 0:r.code)||(null==r||null===(e=r.ad)||void 0===e||null===(t=e.error)||void 0===t?void 0:t.code),(null==r?void 0:r.message)||(null==r?void 0:r.description)||(null==r||null===(n=r.ad)||void 0===n||null===(i=n.error)||void 0===i?void 0:i.description)),this._isAdEmpty(r)&&(this.fireBreakStop(),this.fireResume())}},{key:"_isAdEmpty",value:function(e){var t,n;return 1009===(null==e||null===(t=e.message)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorCode)||2001===(null==e?void 0:e.code)||"adLoadError-1009"===(null==e?void 0:e.type)}}]),n}(gf.Adapter),Af=function(){function e(){l(this,e)}return c(e,null,[{key:"initialBandwidthEstimateEnabled",get:function(){var e,t,n=ne.isSmartTvEnvironment?"player-tv-".concat(null===(e=Bn.osName())||void 0===e?void 0:e.toLowerCase(),"-isolated-experiment-02"):"player-isolated-experiment-02",i=(((null===(t=window.WM)||void 0===t?void 0:t.Settings)||{}).PlayerExperiments||{})[n],r=(null==i?void 0:i.properties)||{};return{enableHLSBandwidthEstimateHandler:"true"===r.enableHLSBandwidthEstimateHandler,enableShakaBandwidthEstimateHandler:"true"===r.enableShakaBandwidthEstimateHandler}}}]),e}(),bf="bandwidthEstimate",Ef=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"name",get:function(){return"bandwidth_estimate_handler"}},{key:"bindEvents",value:function(){this.idPlayback=this.container.playback,this.listenToOnce(this.idPlayback,xe.Custom.PLAYBACK_INNER_CREATED,this._onInnerPlaybackCreated)}},{key:"_onInnerPlaybackCreated",value:function(){this.listenTo(this.idPlayback.playback,xe.PLAYBACK_FRAGMENT_BUFFERED,this._onFragmentBuffered)}},{key:"_onFragmentBuffered",value:function(){this.idPlayback.bandwidthEstimate&&jn.LocalStorage.store(bf,this.idPlayback.bandwidthEstimate)}}],[{key:"initialBandwidthEstimateForHLSJS",get:function(){return n.initialBandwidthEstimate||5e5}},{key:"initialBandwidthEstimateForShaka",get:function(){return n.initialBandwidthEstimate||1e6}},{key:"initialBandwidthEstimate",get:function(){var e=jn.LocalStorage.load(bf);if(e=e?parseInt(e):null,!ne.isSmartTvEnvironment)return e;var t=Af.initialBandwidthEstimateEnabled,n=t.enableHLSBandwidthEstimateHandler,i=t.enableShakaBandwidthEstimateHandler;return n&&i?e:null}}]),n}(ct),_f=Ki.Video,kf=jn.getExperimentsList,Tf=jn.API_VERSION,Sf=jn.getPlatformName,wf=jn.session,Cf=jn.toLowerCase,If=jn.autoplayManager,Rf=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).idPlayback=i.container.playback,i.plugin=i.createPlugin(),i.bindInitEvent(),i}return c(n,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"name",get:function(){return"globo_youbora_plugin"}},{key:"accountCode",get:function(){var e;return null!==(e=this.options.youbora)&&void 0!==e&&e.account?this.options.youbora.account:"prod"===this.options._env.name?"globo":"globodev"}},{key:"product",get:function(){var e=this.options.product;return void 0===e?{}:e}},{key:"deviceTypeMapping",get:function(){return{tv:"TV",settopbox:"STB"}}},{key:"smartTVOptions",get:function(){return["webOS","VIDAA","Tizen","Vivo","Netrange","Claro","Orsay","TitanOS","Kepler"].includes(Bn.osName())?{"device.model":Bn.deviceModel(),"device.brand":Bn.deviceBrand(),"device.type":this.deviceTypeMapping[Bn.deviceType()],"device.osName":Bn.osName(),"device.osVersion":Bn.sdkVersion()}:{}}},{key:"location",get:function(){return document.location}},{key:"initialBandwidthEstimate",get:function(){return this._initialBandwidthEstimate?this._initialBandwidthEstimate:this._initialBandwidthEstimate=Ef.initialBandwidthEstimate}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,Gn.WM_PLAYBACK_WILL_PLAY,this.onWillPlay),this.listenToOnce(this.container,Gn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats),this.listenToOnce(this.container,xe.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded),this.listenToOnce(this.container,Gn.DFP_AD_REQUESTED,this.onAdsRequested)}},{key:"bindInitEvent",value:function(){If.onAutoplayAvailable(this.onAutoPlayAvailable.bind(this),this.options,this.onAutoPlayDisabled.bind(this))}},{key:"onAutoPlayAvailable",value:function(){this.plugin.fireInit()}},{key:"onAutoPlayDisabled",value:function(){this.listenToOnce(this.container.playback,Gn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.plugin.setOptions(this.createYouboraOptions())}},{key:"onPlayRequestedReady",value:function(){this.plugin.fireInit(void 0,Gn.WM_PLAY_REQUESTED_READY)}},{key:"onAdsRequested",value:function(e){var t=e.adTagUrl;this.plugin.options["content.customDimensions"].ADS_REQUEST_URL=t}},{key:"onResourceReady",value:function(e){var t,n,r,a={"content.transactionCode":wf.getVideoSessionId(this.options.playerId),"content.cdn":(e.cdn||"").toUpperCase(),"content.resource":e.selectedResource.url,"content.customDimension.11":"live"===this.video.kind?this.video.transmission.signal:"","content.customDimension.14":(null===(t=e.selectedResource)||void 0===t?void 0:t.playbackApiVersion)||"","content.customDimension.15":this.video.selectedResource&&this.video.selectedResource.resourcePOP||"","content.customDimension.10":this.container.playback.innerPlaybackName,"content.customDimension.20":!(null===(n=this.video.selectedResource)||void 0===n||!n.dai),"content.customDimensions":i({},this.plugin.options["content.customDimensions"])};a["content.customDimensions"].LOW_LATENCY_RESOURCE=null===(r=e.selectedResource)||void 0===r?void 0:r.hasLowLatency,this.plugin.setOptions(a)}},{key:"onResourceRequestStats",value:function(e){var t={"content.customDimension.16":e.usedFallback};this.plugin.setOptions(t)}},{key:"onDaiResourceLoaded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.streamId,r={"content.customDimension.17":!0,"content.customDimension.18":n,"content.customDimensions":i({},this.plugin.options["content.customDimensions"])};null!==(e=this.video.selectedResource)&&void 0!==e&&e.shouldLoadDAIPodServing&&(r["content.customDimensions"].DAI_POD_SERVING_ENABLED=!0),this.plugin.setOptions(r)}},{key:"onWillPlay",value:function(){var e={"content.resource":this.video.selectedResource.url};this.plugin.setOptions(e)}},{key:"getPlayerVersion",value:function(){var e="7.154.0",t=window.GloboplaySDKPlugins,n=void 0===t?{}:t;return n.Version&&(e="".concat(e,"/").concat(n.Version)),e}},{key:"createPlugin",value:function(){var e,t=new gf.Plugin(this.createYouboraOptions(),null,null===(e=this.options.youbora)||void 0===e?void 0:e.dataReq);return t.setAdapter(new vf(this)),t.setAdsAdapter(new yf(this)),t}},{key:"createYouboraOptions",value:function(){var e,t,n,r,a,o,s,l,u,c,d,h,f,p,g,v=i({enabled:!0,accountCode:this.accountCode,"app.https":!this.options.httpOnly,"app.name":null===(e=this.product)||void 0===e?void 0:e.name,"app.releaseVersion":null===(t=this.product)||void 0===t?void 0:t.version,"user.name":this.options.globoId,"content.cdn":null===(n=this.video)||void 0===n?void 0:n.cdn,"content.channel":null===(r=this.video)||void 0===r?void 0:r.channelId,"content.drm":null!==(a=this.video)&&void 0!==a&&a.encrypted?null===(o=this.video)||void 0===o?void 0:o.drm:null,"content.id":null===(s=this.video)||void 0===s?void 0:s.id,"content.isLive":null===(l=this.video)||void 0===l?void 0:l.isLive,"content.program":null===(u=this.video)||void 0===u?void 0:u.programId,"content.resource":this.resource,"content.title":null===(c=this.video)||void 0===c?void 0:c.title,"content.transactionCode":wf.getVideoSessionId(this.options.playerId),"ad.campaign":this.options.adUnit||(null===(d=this.video)||void 0===d?void 0:d.adUnit)||"","content.customDimension.1":this.options.src,"content.customDimension.2":(null===(h=this.video)||void 0===h?void 0:h.programId)||"","content.customDimension.3":(null===(f=this.video)||void 0===f?void 0:f.channelId)||"","content.customDimension.4":this.getPlayerVersion(),"content.customDimension.5":Tf,"content.customDimension.6":Cf(null===(p=this.video)||void 0===p?void 0:p.kind)||"","content.customDimension.7":this.location.hostname,"content.customDimension.8":Sf(_f.getPlayerType()),"content.customDimension.9":kf(this.options).toString(),"content.customDimension.10":this.container.playback.innerPlaybackName||this.container.playback.name,"content.customDimension.11":void 0,"content.customDimension.12":!!this.options.autoPlay,"content.customDimension.13":this.container.getPlaybackType()!==Je.LIVE&&!!this.options.resumeAt&&this.options.resumeAt>0,"content.customDimension.14":"","content.customDimension.15":void 0,"content.customDimension.16":!1,"content.customDimension.17":(null===(g=this.video)||void 0===g||!g.isLive)&&null,"content.customDimension.18":"","content.customDimension.19":!!this.options.skipDFP,"content.customDimension.20":void 0,"background.enabled":!1,"errors.ignore":[hn.PLAYLIST_LOAD_ERROR.code],"content.customDimensions":{CONSUMPTION_URL:this.location.origin+this.location.pathname,URL:this.location.href}},this.smartTVOptions),m=!!this.options.disasterRecoveryMode,y=this.initialBandwidthEstimate;return y&&(v["content.customDimensions"].INITIAL_BANDWIDTH_ESTIMATE=y),m&&(v["content.customDimensions"].DISASTER_RECOVERY_MODE=m),v}},{key:"destroy",value:function(){this.removeAdapters(),A(f(n.prototype),"destroy",this).call(this)}},{key:"removeAdapters",value:function(){this.plugin&&(this.plugin.removeAdapter(),this.plugin.removeAdsAdapter())}}]),n}(ct),Df="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Df&&Df,Lf="URLSearchParams"in Df,Pf="Symbol"in Df&&"iterator"in Symbol,Of="FileReader"in Df&&"Blob"in Df&&function(){try{return new Blob,!0}catch(e){return!1}}(),xf="FormData"in Df,Mf="ArrayBuffer"in Df;if(Mf)var Nf=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Bf=ArrayBuffer.isView||function(e){return e&&Nf.indexOf(Object.prototype.toString.call(e))>-1};function Ff(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function Uf(e){return"string"!=typeof e&&(e=String(e)),e}function Vf(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Pf&&(t[Symbol.iterator]=function(){return t}),t}function Hf(e){this.map={},e instanceof Hf?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function jf(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Kf(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Gf(e){var t=new FileReader,n=Kf(t);return t.readAsArrayBuffer(e),n}function Wf(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Yf(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Of&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:xf&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Lf&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Mf&&Of&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Wf(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Mf&&(ArrayBuffer.prototype.isPrototypeOf(e)||Bf(e))?this._bodyArrayBuffer=Wf(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Lf&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Of&&(this.blob=function(){var e=jf(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=jf(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Gf)}),this.text=function(){var e,t,n,i=jf(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Kf(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},xf&&(this.formData=function(){return this.text().then($f)}),this.json=function(){return this.text().then(JSON.parse)},this}Hf.prototype.append=function(e,t){e=Ff(e),t=Uf(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Hf.prototype.delete=function(e){delete this.map[Ff(e)]},Hf.prototype.get=function(e){return e=Ff(e),this.has(e)?this.map[e]:null},Hf.prototype.has=function(e){return this.map.hasOwnProperty(Ff(e))},Hf.prototype.set=function(e,t){this.map[Ff(e)]=Uf(t)},Hf.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Hf.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Vf(e)},Hf.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Vf(e)},Hf.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Vf(e)},Pf&&(Hf.prototype[Symbol.iterator]=Hf.prototype.entries);var zf=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function qf(e,t){if(!(this instanceof qf))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof qf){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Hf(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Hf(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),zf.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function $f(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function Xf(e,t){if(!(this instanceof Xf))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Hf(t.headers),this.url=t.url||"",this._initBody(e)}qf.prototype.clone=function(){return new qf(this,{body:this._bodyInit})},Yf.call(qf.prototype),Yf.call(Xf.prototype),Xf.prototype.clone=function(){return new Xf(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Hf(this.headers),url:this.url})},Xf.error=function(){var e=new Xf(null,{status:0,statusText:""});return e.type="error",e};var Qf=[301,302,303,307,308];Xf.redirect=function(e,t){if(-1===Qf.indexOf(t))throw new RangeError("Invalid status code");return new Xf(null,{status:t,headers:{location:e}})};var Jf=Df.DOMException;try{new Jf}catch(e){Jf=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},Jf.prototype=Object.create(Error.prototype),Jf.prototype.constructor=Jf}function Zf(e,t){return new Promise((function(n,i){var r=new qf(e,t);if(r.signal&&r.signal.aborted)return i(new Jf("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Hf,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new Xf(r,i))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new Jf("Aborted","AbortError"))}),0)},a.open(r.method,function(e){try{return""===e&&Df.location.href?Df.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&(Of?a.responseType="blob":Mf&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Hf?r.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,Uf(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&r.signal.removeEventListener("abort",o)}),a.send(void 0===r._bodyInit?null:r._bodyInit)}))}Zf.polyfill=!0,Df.fetch||(Df.fetch=Zf,Df.Headers=Hf,Df.Request=qf,Df.Response=Xf);var ep=(window.WM&&window.WM.Settings||{}).lockClientPoolingInterval||29e3,tp=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"lock_client"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"lockKey",get:function(){return this.playback.selectedResource.session}},{key:"endpoint",get:function(){return"".concat(this.options._env.protocol,"://watcher.playback.video.globo.com/heartbeat")}},{key:"bindEvents",value:function(){this.listenTo(this.playback,Gn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(e){e.selectedResource.session&&this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_PLAY,this.startPolling),this.listenTo(this.playback,xe.PLAYBACK_STOP,this.stopPolling),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.stopPolling),this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.stopPolling)}},{key:"startPolling",value:function(){var e=this;this._pollTimerId||(this._pollTimerId=setInterval((function(){return e.sendPing()}),ep),this.sendPing())}},{key:"sendPing",value:function(){var e=this,t=new Headers;t.append("Authorization","Bearer ".concat(this.lockKey));var n={method:"POST",headers:t};fetch(this.endpoint,n).then((function(t){if(403===t.status)return t.json().then((function(n){return e.onPingResponse({status:t.status,body:n})}))})).catch((function(t){return Re.warn(e.name,"error",t)}))}},{key:"onPingResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.body;if(Re.info(this.name,{status:t,body:n}),403===t&&(null==n?void 0:n.code)===hn.SIMULTANEOUS_ACCESS.code){var i={useCodePrefix:!1};this.playback.trigger(xe.PLAYBACK_ERROR,this.createError(hn.SIMULTANEOUS_ACCESS,i))}}},{key:"stopPolling",value:function(){this._pollTimerId&&(clearInterval(this._pollTimerId),delete this._pollTimerId)}},{key:"destroy",value:function(){this.stopPolling(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),np=jn.getCurrentTime,ip=1,rp=0,ap=-1,op=1,sp=0,lp=-1,up=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).daiHasPlayed=!1,i}return c(n,[{key:"name",get:function(){return"simulcast-ping"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"pingInterval",get:function(){return 6e4}},{key:"selectedResource",get:function(){return this.video.selectedResource}},{key:"isDvrInUse",get:function(){return this.container.isDvrEnabled()?this.container.isDvrInUse()?ip:rp:ap}},{key:"hasDaiPlayed",get:function(){return this.daiHasPlayed?op:this.selectedResource.dai?sp:lp}},{key:"playbackHasLatencyInfo",get:function(){return null!==this.innerPlayback.currentProgramDateTime&&null!==this.innerPlayback.latency}},{key:"currentProgramDateTime",get:function(){var e;return null===(e=this.innerPlayback)||void 0===e?void 0:e.currentProgramDateTime.getTime()}},{key:"isLowLatencyAvailable",get:function(){return Bn.hasLowLatency}},{key:"isLowLatencyPlaying",get:function(){return this.selectedResource.hasLowLatency}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,xe.Custom.DAI_AD_BREAK_STARTED,(function(){return e.daiHasPlayed=!0})),this.listenTo(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.bindPlaybackEvents)}},{key:"bindPlaybackEvents",value:function(e){e.isLive&&(this.video=e,this.listenTo(this.playback,xe.PLAYBACK_STOP,this.stopTimer),this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.stopTimer),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.stopTimer),this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.onPlay))}},{key:"onPlay",value:function(){this.startTimer(),this.heartbeatTick()}},{key:"heartbeatTick",value:function(){if(this.innerPlayback){if(!this.playbackHasLatencyInfo)return this.container.trigger(Gn.SIMULCAST_PING,np(this.innerPlayback));var e={liveEndOfPlaylist:this.getLiveEndOfPlaylist(),liveEdge:this.getLiveEdge(),isDvrInUse:this.isDvrInUse,hasDaiPlayed:this.hasDaiPlayed,lowLatencyAvailable:this.isLowLatencyAvailable?1:0,isLowLatencyPlaying:this.isLowLatencyPlaying?1:0};this.container.trigger(Gn.SIMULCAST_PING,e)}}},{key:"getLiveEdge",value:function(){if(!this.container.isDvrInUse())return Math.trunc(this.currentProgramDateTime/1e3);var e=this.innerPlayback.getProgramDateTime(),t=(new Date(e).getTime()+1e3*this.innerPlayback.getDuration())/1e3;return Math.trunc(t)}},{key:"getLiveEndOfPlaylist",value:function(){var e=1e3*this.innerPlayback.latency,t=(this.currentProgramDateTime+e)/1e3;return Math.trunc(t)}},{key:"startTimer",value:function(){this.heartbeat=setInterval(this.heartbeatTick.bind(this),this.pingInterval)}},{key:"stopTimer",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopTimer(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),cp=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e))._isVideoFinished=!1,i}return c(n,[{key:"name",get:function(){return"watch_session"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"dfp",get:function(){return this.options.dfp}},{key:"bindEvents",value:function(){this.listenTo(this.container,Gn.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onVideoFinished),this.listenTo(this.container,xe.CONTAINER_STOP,this.onVideoFinished)}},{key:"onAllAdsCompleted",value:function(){this.sendEvent()}},{key:"onVideoFinished",value:function(){this._isVideoFinished=!0,this.sendEvent()}},{key:"sendEvent",value:function(){var e=this;(this.dfp.isAllAdsCompleted||this.dfp.shouldSkipAd||this.dfp.error)&&this._isVideoFinished&&setTimeout((function(){e.container.trigger(Gn.WATCH_SESSION_END),e.onWatchSessionEnd()}))}},{key:"onWatchSessionEnd",value:function(){this._isVideoFinished=!1}}]),n}(ct),dp=yo((function(module,e){
/*! For license information please see globocom-horizon.js.LICENSE.txt */
!function(e,t){module.exports=t()}(self,(()=>(()=>{var e={914:function(e,t,n){var i;e=n.nmd(e),function(){var r=(e&&e.exports,"object"==typeof n.g&&n.g);r.global!==r&&r.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var o=function(e){throw new a(e)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,l="",u=-1,c=e.length-a;++u<c;)t=e.charCodeAt(u)<<16,n=e.charCodeAt(++u)<<8,i=e.charCodeAt(++u),l+=s.charAt((r=t+n+i)>>18&63)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+s.charAt(63&r);return 2==a?(t=e.charCodeAt(u)<<8,n=e.charCodeAt(++u),l+=s.charAt((r=t+n)>>10)+s.charAt(r>>4&63)+s.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(u),l+=s.charAt(r>>2)+s.charAt(r<<4&63)+"=="),l},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",u=-1;++u<t;)i=s.indexOf(e.charAt(u)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(i=function(){return u}.call(t,n,t,e))||(e.exports=i)}()},92:(e,t,n)=>{n(491).polyfill()},491:e=>{function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},215:(e,t,n)=>{var i,r,a;void 0===(r="function"==typeof(i=a=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),l=s.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var u=t(s[0]);if(l=(i.read||i)(l,u)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(r[u]=l,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){a(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))})?i.call(t,n,t,e):i)||(e.exports=r),e.exports=a()},976:function(e,t){var n,i;void 0===(i="function"==typeof(n=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,l=document,u=i.async,c=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((s=l.createElement("link")).rel="stylesheet",s.href=h,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(s=l.createElement("img")).src=h:((s=l.createElement("script")).src=t,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(a)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<c)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,s)&&l.head.appendChild(s)}function s(e,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<s;r++)o(e[r],i,n)}(e,(function(e){a(l,e),t&&a({success:t,error:n},e),r(s,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return s.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,a,o,s=[],l=e.length,u=l;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};l--;)a=e[l],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t},s})?n.apply(t,[]):n)||(e.exports=i)},916:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n=this.event&&this.event.type,i="unload"===n||"beforeunload"===n,r="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("POST",e,!i),r.withCredentials=!0,r.setRequestHeader("Accept","*/*"),"string"==typeof t?(r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.responseType="text/plain"):t instanceof Blob&&t.type&&r.setRequestHeader("Content-Type",t.type);try{r.send(t)}catch(e){return!1}return!0}function n(){return"navigator"in this&&"sendBeacon"in this.navigator}(function(){n.call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=t.bind(this))}).call("object"===("undefined"==typeof window?"undefined":e(window))?window:{})},31:(e,t)=>{!function(e){var t,n,i,r=String.fromCharCode;function a(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return r(e>>t&63|128)}function l(e){if(!(4294967168&e))return r(e);var t="";return 4294965248&e?4294901760&e?4292870144&e||(t=r(e>>18&7|240),t+=s(e,12),t+=s(e,6)):(o(e),t=r(e>>12&15|224),t+=s(e,6)):t=r(e>>6&31|192),t+r(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(e=255&t[i],i++,!(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return o(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,i=-1,r="";++i<n;)r+=l(t[i]);return r},e.decode=function(e){t=a(e),n=t.length,i=0;for(var o,s=[];!1!==(o=c());)s.push(o);return function(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=r((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=r(t);return a}(s)}}(t)},471:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var i=n||0,r=t;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},814:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},550:(e,t,n)=>{var i=n(814),r=n(471);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{n.r(i),n.d(i,{HorizonClient:()=>St,IDManager:()=>wt,Settings:()=>T}),n(92);var e=n(550),t=n.n(e);const r=function(e,t){var n=(window.horizonResources=window.horizonResources||{},window.horizonResources);return n[e]=n[e]||t,n[e]},a={MINIMUM:50,MAXIMUM:1e3,DEFAULT:100},o={MINIMUM:1,MAXIMUM:100,DEFAULT:10},s={MINIMUM:5e3,MAXIMUM:2e4,DEFAULT:1e4};var l="QUEUE_STATUS",u="SEND_STATUS",c="ID_STATUS",d="SCHEMAS_STATUS",h="REQUEUING_STATUS",f="VALIDATION_STATUS",p="DISCARDED_BY_OVERFLOW",g="DISCARDED_BY_EXPIRED",v="QUEUE_VALIDATED_CURRENT_SIZE",m="SEND_FAILURE",y="IO_EXCEPTION",A="SUCCESS",b="FAILED",E={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:3e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_CONFIGS_HOST:"https://horizon-config-api-gcp-us-prod.apps.tsuru.gcp.i.globo/",HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:r("clientInstanceUUID",t()()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"3.6.0",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0,METRICS_SEND_INTERVAL:18e4},_=function(e,t,n,i){E[e]=t<=n?n:t>=i?i:t},k={avoidCookieUsage:function(){E.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){E.USE_HTTPS=!1},useQAConfiguration:function(){E.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",E.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",E.HORIZON_CONFIGS_HOST="horizon-config-api-gcp-qa.rpaasv2-be.tsuru.dev.gcp.i.globo",E.HORIZON_REQUEST_ENCODING="json"},useJSONEncoding:function(){E.HORIZON_REQUEST_ENCODING="json"},changeEventbusBufferSize:function(e){if(e&&Number.isInteger(e)&&!(e<=0)){_("EVENTS_BUFFER_SIZE",e,a.MINIMUM,a.MAXIMUM),console.log("changeEventbusBufferSize: ".concat(e))}},changeEventbusBulkSize:function(e){if(e&&Number.isInteger(e)&&!(e<=0)){_("EVENTS_BULK_SIZE",e,o.MINIMUM,o.MAXIMUM)}},changeEventbusSenderInterval:function(e){if(e&&Number.isInteger(e)&&!(e<=0)){_("EVENTS_SENDER_INTERVAL",e,s.MINIMUM,s.MAXIMUM)}}};const T=Object.assign(E,k);var S=n(976),w=n.n(S),C={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_STRING_NUMERIC_STRING:"[Horizon] numericString should be string.",INVALID_EMPTY_NUMERIC_STRING:"[Horizon] numericString should be empty.",INVALID_NUMERIC_STRING:"[Horizon] Invalid number. Field with NumericString must to be number.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",INVALID_RELATION_ID:"[Horizon] Invalid relation identification.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},I={mustBeDefined:function(e){throw new Error("".concat(C.MUST_BE_DEFINED,": ").concat(e,"."))}};const R=Object.assign(C,I);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function L(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}const P=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=new Map},t=[{key:"addMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])this.data.set(e,t);else{var n=this.data.get(e)||0;this.data.set(e,n+t)}}},{key:"getMetrics",value:function(){return new Map(this.data)}}],t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,L(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var N=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metricCollectors=x(x(x(x(x(x({},l,{}),u,{}),c,{}),d,{}),h,{}),f,{}),this.allTenants=[],this.initialQueueSizeValidated=0,this.initialQueueSizeUnvalidated=0,this.horizonClientUUID={}},t=[{key:"addMetric",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"general";null!==e&&(this.metricCollectors[e][i]||(this.metricCollectors[e][i]=new P,"general"===i||this.allTenants.includes(i)||this.allTenants.push(i)),e===l&&t===v?this.metricCollectors[e][i].addMetric(t,n,!0):this.metricCollectors[e][i].addMetric(t,n))}},{key:"getMetrics",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";return this.metricCollectors[e]&&this.metricCollectors[e][t]?this.metricCollectors[e][t].getMetrics():null}},{key:"addHttpMetric",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"general";null!==e&&(this.metricCollectors[e][i]||(this.metricCollectors[e][i]=new P,"general"===i||this.allTenants.includes(i)||this.allTenants.push(i)),this.metricCollectors[e][i].addMetric(t,n))}},{key:"getHttpMetrics",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";return this.metricCollectors[e]&&this.metricCollectors[e][t]?this.metricCollectors[e][t].getMetrics():null}},{key:"setCurrentHorizonClientUUID",value:function(e,t){this.horizonClientUUID[e]=t}},{key:"getCurrentHorizonClientUUID",value:function(e){return this.horizonClientUUID[e]}},{key:"getAllTenants",value:function(){return this.allTenants}}],t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,M(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const B=function(){var e=r("metrics",{});return e.metricCollector||(e.metricCollector=new N),e.metricCollector};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function U(e,t,n){return(t=function(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}var H={ready:[]},j=["url"],K=function(){return!!window.tv4},G=function(e){return null===e||isNaN(e)&&!isNaN(Date.parse(e))?null:R.INVALID_DATE},W=function(e){return"string"!=typeof e?R.INVALID_STRING_NUMERIC_STRING:""===e.trim()?R.INVALID_EMPTY_NUMERIC_STRING:Number.isFinite(Number(e))?null:R.INVALID_NUMERIC_STRING};const Y={validateFor:function(e,t,n){var i=B();if(!K())throw new Error("".concat(R.ERROR_LOADING_RESOURCE," Validator is not ready."));if(!t)throw i.addMetric(f,b,1,n),new Error("".concat(R.INVALID_DATA," Argument: schema."));if(!/\d+\.\d+/.test(e.version))throw i.addMetric(f,b,1,n),new Error(R.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw i.addMetric(f,b,1,n),new Error("".concat(R.INVALID_DATA," ").concat(e.id," ").concat(e.version,". ").concat(tv4.error))},validateArgs:function(e,t){var n=B(),i=Object.prototype.hasOwnProperty;if(!(e&&i.call(e,"id")&&i.call(e,"version")&&i.call(e,"properties")))throw n.addMetric(f,b,1,t),new Error("".concat(R.INVALID_FORMAT," Missing properties: ").concat(JSON.stringify(e)));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==V(e.properties))throw n.addMetric(f,b,1,t),new Error("".concat(R.INVALID_FORMAT," Wrong object type: ").concat(JSON.stringify(e)));if(j.filter((function(t){return e[t]&&"string"!=typeof e[t]})).length>0)throw n.addMetric(f,b,1,t),new Error("".concat(R.INVALID_FORMAT," Wrong object type: ").concat(JSON.stringify(e)));if(e.id.length<2||e.version.length<3)throw n.addMetric(f,b,1,t),new Error("".concat(R.INVALID_FORMAT," Invalid property size: ").concat(JSON.stringify(e)));var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);delete r.id,delete r.version,delete r.properties,delete r.contentType;var a=Object.keys(r);if(a.length>0&&!a.every((function(e){return-1!==j.indexOf(e)})))throw n.addMetric(f,b,1,t),new Error("".concat(R.INVALID_FORMAT," Extra keys aren't allowed: ").concat(JSON.stringify(r)))},tv4IsValidData:G,tv4IsNumericString:W,isReady:K,onReady:function(e){if(K())return e();if(H.ready.length>T.HORIZON_CALLBACK_STACK_LIMIT)throw new Error("".concat(R.LIMIT_EXCEEDED," Validator callback stack."));return H.ready.unshift(e)},load:function(){if(!w().isDefined("tv4")){var e=T.USE_HTTPS?"https://":"http://",t="".concat(e).concat(T.SCHEMA_VALIDATOR_SCRIPT_URL);w()([t],"tv4",{async:!0,numRetries:T.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",G),tv4.addFormat("numericString",W),H.ready.forEach((function(e){return e()}))},error:function(e){throw new Error("".concat(R.SCHEMA_VALIDATOR_ERROR_LOADING," ").concat(e))}})}}};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function X(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}const Q=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metricCollector=t},(t=[{key:"formatQueueMetric",value:function(e){var t=g,n=p,i=v;return[{queueOverflow:e&&e.get(n)||0,expired:e&&e.get(t)||0,validatedCurrentSize:e&&e.get(i)||0,unvalidatedCurrentSize:e&&e.get("QUEUE_UNVALIDATED_CURRENT_SIZE")||0}]}},{key:"formatSendStatusHttpCodeMetric",value:function(e){return e?Array.from(e.entries()).map((function(e){var t=q(e,2);return{sendStatusCode:t[0],sendStatusQuantity:t[1]}})):[]}},{key:"formatIdStatusHttpCodeMetric",value:function(e){return e?Array.from(e.entries()).map((function(e){var t=q(e,2);return{idStatusCode:t[0],idStatusQuantity:t[1]}})):[]}},{key:"formatSchemaStatusHttpCodeMetric",value:function(e){return e?Array.from(e.entries()).map((function(e){var t=q(e,2);return{schemaStatusCode:t[0],schemaStatusQuantity:t[1]}})):[]}},{key:"formatRequeuingMetric",value:function(e){var t=m,n=y;return[{requeuingStatusResponse:t.toLowerCase(),requeuingStatusQuantity:e&&e.get(t)||0},{requeuingStatusResponse:n.toLowerCase(),requeuingStatusQuantity:e&&e.get(n)||0}]}},{key:"formatValidationMetric",value:function(e){var t=A,n=b;return[{validationStatusResponse:t.toLowerCase(),validationStatusQuantity:e&&e.get(t)||0},{validationStatusResponse:n.toLowerCase(),validationStatusQuantity:e&&e.get(n)||0}]}},{key:"formatConfigurationStatusMetric",value:function(e){var t=T.USE_HTTPS,n=T.AVOID_COOKIE_USAGE,i=T.HORIZON_TRACK_HOST,r=T.HORIZON_SCHEMAS_HOST,a=T.HORIZON_REQUEST_ENCODING,o=T.EVENTS_BUFFER_SIZE,s=T.EVENTS_BULK_SIZE,l=T.EVENTS_SENDER_INTERVAL;return JSON.stringify({USE_HTTPS:t,AVOID_COOKIE_USAGE:n,HORIZON_TRACK_HOST:i,HORIZON_SCHEMAS_HOST:r,HORIZON_REQUEST_ENCODING:a,EVENTS_BUFFER_SIZE:o,EVENTS_BULK_SIZE:s,EVENTS_SENDER_INTERVAL:l,HORIZON_CLIENT_UUID:this.metricCollector.getCurrentHorizonClientUUID(e),TENANTS_IN_INSTANCE:this.metricCollector.getAllTenants()})}},{key:"reportAllMetrics",value:function(e){var t=this.metricCollector.getHttpMetrics(u,e),n=this.metricCollector.getHttpMetrics(c),i=this.metricCollector.getHttpMetrics(d),r=this.metricCollector.getMetrics(l,e),a=this.metricCollector.getMetrics(h,e),o=this.metricCollector.getMetrics(f,e);return{id:"horizon-sdk-metrics",version:"1.1",contentType:"metrics",properties:{queueStatus:this.formatQueueMetric(r),sendStatus:this.formatSendStatusHttpCodeMetric(t),idStatus:this.formatIdStatusHttpCodeMetric(n),schemaStatus:this.formatSchemaStatusHttpCodeMetric(i),requeuingStatus:this.formatRequeuingMetric(a),validationStatus:this.formatValidationMetric(o),configurationStatus:this.formatConfigurationStatusMetric(e)}}}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,X(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Z(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var ee=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastMetricsSentTimestamp={},this.metricsSendInterval=t,this.initialDelaySet=n,this.wasFirstSend={}},(t=[{key:"shouldSendMetricsNow",value:function(e){var t=Date.now();return t-(this.lastMetricsSentTimestamp[e]||0)+100>=(this.wasFirstSend[e]?this.metricsSendInterval:this.initialDelaySet)&&(this.lastMetricsSentTimestamp[e]=t,this.wasFirstSend[e]=!0,!0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Z(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}const ie=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]},(t=[{key:"isRunning",get:function(){return!!this.tickIntervalId}},{key:"tick",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ne(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();n(916);var re=n(215),ae=n.n(re);const oe=function(e){var t=T.EVENTS_SENDER_MIN_INTERVAL,n=T.EVENTS_SENDER_MAX_INTERVAL,i=Number(ae().get("_hzt.interval"))||T.EVENTS_SENDER_INTERVAL;i<=n&&i>=t&&e.interval!==i&&e.reschedule(i)};function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ce(i.key),i)}}function ce(e){var t=function(e){if("object"!=se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}var de=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.MAXIMUM,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=n,this.metricCollector=i,this.queueName=t}return t=e,i=[{key:"fromArray",value:function(t,n){var i=new e(this.productName,n,this.metricCollector);return t.forEach((function(e){return i.push(e)})),i}}],(n=[{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}},{key:"push",value:function(e){this.metricDiscardedEvents(),this._queue=[e].concat(function(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.slice(0,this.maxSize-1)))}},{key:"metricDiscardedEvents",value:function(){if(this.metricCollector){var e=this._queue.length;this.slice(0,this.maxSize-1).length<e&&this.metricCollector.addMetric(l,p,this.queueName)}}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}}])&&ue(t.prototype,n),i&&ue(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();const he=de;var fe=n(914),pe=n.n(fe),ge=n(31),ve=n.n(ge),me={base64:function(e){var t=new FormData;return t.append("data",pe().encode(ve().encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function Ae(){Ae=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ye(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ye(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function be(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}var Ee=function(e,t,n){var i=n.status,r=n.statusText,a=n.response;i>=200&&i<400?e({status:i,statusText:r,data:JSON.parse(a)}):t({status:i,statusText:r})};const _e={request:function(e,t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.open(e,t,!0),r.onload=function(){return Ee(n,i,r)},r.onerror=function(e){return i(e)},r.send()}))},post:function(){var e,t=(e=Ae().mark((function e(t,n,i){return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=new XMLHttpRequest;a.open("POST",t,!0),a.withCredentials=!0,Object.keys(n).forEach((function(e){a.setRequestHeader(e,n[e])})),a.onload=function(){return Ee(e,r,a)},a.onerror=function(e){return r(e)},a.send(JSON.stringify(i))})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){be(a,i,r,o,s,"next",e)}function s(e){be(a,i,r,o,s,"throw",e)}o(void 0)}))});return function(e,n,i){return t.apply(this,arguments)}}()};function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Te(){Te=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ke(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ke(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function Se(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Se(a,i,r,o,s,"next",e)}function s(e){Se(a,i,r,o,s,"throw",e)}o(void 0)}))}}function Ce(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}var Ie=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"send",value:(r=we(Te().mark((function e(t,n){var i,r,a,o=arguments;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>2&&void 0!==o[2]?o[2]:"json",n){e.next=3;break}return e.abrupt("return",null);case 3:return r=this.preparePayload(n,i),a={isSent:!1,status:0},a=this.sendBySendBeacon(t,r),e.next=8,this.sendByFetch(t,r,a);case 8:return a=e.sent,e.next=11,this.sendByXMLHttpRequest(t,r,i,a);case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"preparePayload",value:function(e,t){return function(e){if(!(e in me))throw new Error("".concat(R.UNSUPPORTED_ENCODER," Invalid ").concat(e," encoder."));return me[e]}(t)(e)}},{key:"sendBySendBeacon",value:function(e,t){var n=!1;try{n=navigator.sendBeacon(e,t)}catch(e){n=!1}return{isSent:n,status:200}}},{key:"sendByFetch",value:(i=we(Te().mark((function e(t,n,i){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isSent){e.next=2;break}return e.abrupt("return",i);case 2:return e.abrupt("return",fetch(t,{method:"POST",credentials:"include",body:n}).then((function(e){return e.ok||console.error("Failed to send Horizon events using fetch. Status ".concat(e.status," - ").concat(e.statusText)),{isSent:e.ok,status:e.status}})).catch((function(e){return{isSent:!1,status:e.status||-1}})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"sendByXMLHttpRequest",value:(n=we(Te().mark((function e(t,n,i,r){var a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isSent){e.next=2;break}return e.abrupt("return",r);case 2:return a={},"json"===i&&(a={"Content-Type":"application/json"}),e.abrupt("return",_e.post(t,a,n).then((function(e){return{isSent:!0,status:e.status}})).catch((function(e){return{isSent:!1,status:e.status||-1}})));case 5:case"end":return e.stop()}}),e)}))),function(e,t,i,r){return n.apply(this,arguments)})}],t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ce(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,i,r}();function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function De(){De=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Re(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Re(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function Le(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Le(a,i,r,o,s,"next",e)}function s(e){Le(a,i,r,o,s,"throw",e)}o(void 0)}))}}function Oe(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var xe=function(){return e=function e(t,n,i,r,a,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||R.mustBeDefined("tenant"),this.instanceID=n||R.mustBeDefined("instanceID"),this.deviceGroup=i||R.mustBeDefined("deviceGroup"),this.environment=r||R.mustBeDefined("environment"),this.metricCollector=o,this.queue=new he(this.currentTenant,T.EVENTS_BUFFER_SIZE,this.metricCollector),this.idManager=a,this.dispatchNumber=1,this.actionCounter=0,this.dispatcher=new Ie,this.metricCollector.setCurrentHorizonClientUUID(this.currentTenant,n),(new ie).every(T.EVENTS_SENDER_INTERVAL).call(Pe(De().mark((function e(){var t;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.queue=s.filterQueue(),t=s.prepareRequest(),e.next=4,s.dispatch(t,T.HORIZON_REQUEST_ENCODING);case 4:e.sent||t.actions.forEach((function(e){return s.enqueue(e)}));case 6:case"end":return e.stop()}}),e)})))).call(oe).start()},t=[{key:"length",get:function(){return this.queue.length}},{key:"setMaxQueueSize",value:function(e){this.queue=he.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-T.EVENTS_DISCARD_AFTER_MSECS,t=this.queue.length,n=this.queue.filter((function(t){return t.actionTs>e})),i=t-n.length;return this.metricCollector.addMetric(l,g,i,this.currentTenant),n}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,T.EVENTS_BULK_SIZE);return this.metricCollector.addMetric(l,v,this.queue.length,this.currentTenant),this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(R.INVALID_REQUEST);return e.actions.length>0}},{key:"prepareUrl",value:function(){var e=T.USE_HTTPS?"https://":"http://",t=this.idManager.getAsKeyValue(),n=t?"?".concat(t):"";return"".concat(e).concat(ae().get("_hzt.host")||T.HORIZON_TRACK_HOST,"/event/").concat(this.currentTenant).concat(n)}},{key:"dispatch",value:(n=Pe(De().mark((function e(t){var n,i,r,a,o=arguments;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"json",this.isValidRequest(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return i=t.actions.length,r=this.prepareUrl(),this.dispatchNumber+=1,e.next=8,this.dispatcher.send(r,t,n);case 8:return a=e.sent,this.handleMetrics(a.isSent,a.status,i),e.abrupt("return",a.isSent);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleMetrics",value:function(e,t,n){if(this.metricCollector.addHttpMetric(u,t,n,this.currentTenant),!e){var i=-1===t?y:m;this.metricCollector.addHttpMetric(h,i,n,this.currentTenant)}}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(R.INVALID_TIMESTAMP);this.queue.push(e),this.metricCollector.addMetric(l,v,this.queue.length,this.currentTenant)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,T.HORIZON_REQUEST_ENCODING)}}}],t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Oe(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Me=function(e,t,n,i){var a=r("bus",{}),o="".concat(e,"-").concat(t);return a[o]||(a[o]=new xe(e,T.HORIZON_CLIENT_UUID,t,n,i,B())),a[o]},Ne=function(e,t){setTimeout((function(){return e(t)}),1)};function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Fe(e){var t=function(e){if("object"!=Be(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Be(t)?t:t+""}var Ue="statusReady",Ve="statusNotReady",He="statusError",je=function(){return r("schemas",{data:{}})},Ke=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=Ve,this.metricCollector=B(),this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}},(t=[{key:"get",value:function(e,t){var n="".concat(e,"-").concat(t);if(!this.isReady())throw new Error("".concat(R.COMPONENT_NOT_READY));var i=je().data[n];if(!i)throw new Error("".concat(R.UNSUPPORTED_TYPE,": ").concat(n));return i}},{key:"isReady",value:function(){return this.state===Ue}},{key:"retry",value:function(){var e=this;this.state="statusScheduled",this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=Ve,e.load()}),T.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===Ue)return e(je().data);if(this.callbacks.onReady.length>T.HORIZON_CALLBACK_STACK_LIMIT)throw new Error("".concat(R.LIMIT_EXCEEDED," Schemas callback stack."));return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===He?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var e=this,t=je();if(this.state===Ve){this.state="statusLoading",this.callbacks.onLoad.forEach((function(e){return e()}));var n=T.USE_HTTPS?"https://":"http://";_e.request("GET","".concat(n).concat(this.url)).then((function(n){var i=n.status,r=n.data;t.data=Object.assign(t.data||{},r),e.metricCollector.addHttpMetric(d,i),e.state=Ue,e.callbacks.onReady.forEach((function(e){return Ne(e,t.data)}))})).catch((function(t){var n=t.status;e.metricCollector.addHttpMetric(d,n),e.state=He,e.callbacks.onError.forEach((function(e){return Ne(e,t)})),e.retry()}))}}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Fe(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function We(){We=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ge(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ge(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function Ye(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Ye(a,i,r,o,s,"next",e)}function s(e){Ye(a,i,r,o,s,"throw",e)}o(void 0)}))}}function qe(){return $e.apply(this,arguments)}function $e(){return($e=ze(We().mark((function e(){var t,n,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.USE_HTTPS?"https://":"http://",e.prev=2,e.next=5,_e.request("GET","".concat(t).concat(""));case 5:return n=e.sent,i=n.data,e.abrupt("return",i.Config);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}const Xe={getConfig:function(){var e=ze(We().mark((function e(t){var n,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r("sampling",{}))[t]){e.next=6;break}return e.next=4,qe();case 4:i=e.sent,n[t]=i||{platform:"js",sample:[{schema:"horizon-sdk-metrics",sampling:.05}],tenant:"".concat(t)};case 6:return e.abrupt("return",n[t]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var Qe=function(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null},Je=function(e){return window.utag_data?window.utag_data[e]:null};function Ze(){Ze=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==nt(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(nt(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function et(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function tt(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){et(a,i,r,o,s,"next",e)}function s(e){et(a,i,r,o,s,"throw",e)}o(void 0)}))}}function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(e){var t=function(e){if("object"!=nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nt(t)?t:t+""}var rt=function(){return r("idManager",{loggedIDs:null,anonymousIDs:null,sessionIDs:null})},at=["GLBID","GST","EXT_ID","globoId"],ot="statusReady",st="statusNotReady",lt="statusError",ut=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n?ot:st,this.metricCollector=B(),this.url=t,this.bypass=n,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}},t=[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===ot)return e(this.getClientIDs());if(this.callbacks.onReady.length>T.HORIZON_CALLBACK_STACK_LIMIT)throw new Error("".concat(R.LIMIT_EXCEEDED," IDManager callback stack."));return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===lt?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error("".concat(R.COMPONENT_NOT_READY));if(this.bypass)return"";var e=this.getClientIDs();return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}},{key:"getClientIDs",value:function(){var e=rt();return Object.assign(e.loggedIDs||{},e.anonymousIDs||{},e.sessionIDs||{})}},{key:"isReady",value:function(){return this.state===ot}},{key:"retry",value:function(){var e=this;this.state="statusScheduled",this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=st,e.load()}),T.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===at.indexOf(e))throw Error(R.INVALID_AUTH_TOKEN);var n,i,r,a=rt();a.loggedIDs=Object.assign(a.loggedIDs||{},(n={},r=t,(i=it(i=e))in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n))}},{key:"setAnonymousUser",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=rt();if(null==n.anonymousIDs||t){if(!("glb_uid"in e)||!("glb_uid_public"in e)||!("glbuidjwt"in e))throw R.mustBeDefined("glb_uid, glb_uid_public and glbuidjwt");var i={glb_uid:e.glb_uid,glb_uid_public:e.glb_uid_public,glbuidjwt:e.glbuidjwt};n.anonymousIDs=Object.assign(n.anonymousIDs||{},i)}}},{key:"getAnonymousUser",value:function(){return rt().anonymousIDs}},{key:"getHsid",value:function(){return rt().sessionIDs}},{key:"setSessionID",value:function(e){e.hsid&&(rt().sessionIDs={hsid:e.hsid})}},{key:"removeLoggedUser",value:function(){var e=rt();at.forEach((function(t){e.loggedIDs[t]&&delete e.loggedIDs[t]}))}},{key:"load",value:function(){var e=this;if(this.state===st){this.state="statusLoading",this.callbacks.onLoad.forEach((function(e){return e()}));var t=T.USE_HTTPS?"https://":"http://";_e.request("GET","".concat(t).concat(this.url)).then((function(t){var n=t.status,i=t.data;e.metricCollector.addHttpMetric(c,n),e.setSessionID(i),e.setAnonymousUser(i,!1),e.state=ot,e.callbacks.onReady.forEach((function(t){return Ne(t,e.getClientIDs())}))})).catch((function(t){var n=t.status;e.metricCollector.addHttpMetric(c,n),e.state=lt,e.callbacks.onError.forEach((function(e){return Ne(e,t)})),e.retry()}))}}}],t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,it(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),ct=function(e){var t=rt();if(!t.instance){var n=e||"".concat(T.HORIZON_TRACK_HOST,"/").concat(T.HORIZON_TRACK_IDENTIFICATION_RESOURCE),i=!1===T.AVOID_COOKIE_USAGE;t.instance=new ut(n,i)}return t.instance},dt=function(){var e=tt(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ct()).isReady()){e.next=4;break}return e.next=4,new Promise((function(e,t){n.onError((function(){t(new Error("Error loading IDManager"))})),n.onReady(e),n.load()}));case 4:return e.abrupt("return",t(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=tt(Ze().mark((function e(){var t,n,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.AVOID_COOKIE_USAGE){e.next=6;break}if(t=ct(),!(n=t.getAnonymousUser())){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",dt((function(e){var t=e.getAnonymousUser();if(t)return t;throw new Error("Anonymous user not found")})));case 6:return i=ae().get("glb_uid"),e.abrupt("return",{glb_uid:i,glb_uid_public:void 0,glbuidjwt:void 0});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const ft={getInstance:ct,getContextManager:rt,setLoggedUser:function(e,t){if(!T.AVOID_COOKIE_USAGE)throw Error(R.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||R.mustBeDefined("tokenName"),t&&0!==t.length||R.mustBeDefined("tokenValue"),ct().setLoggedUser(e,t)},removeLoggedUser:function(){if(!T.AVOID_COOKIE_USAGE)throw Error(R.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);ct().removeLoggedUser()},setAnonymousUser:function(e){ct().setAnonymousUser(e)},getAnonymousUser:ht,getHsid:function(){var e=tt(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.AVOID_COOKIE_USAGE){e.next=5;break}return e.next=3,dt(function(){var e=tt(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getHsid());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t=e.sent,e.abrupt("return",t?t.hsid:void 0);case 5:return e.abrupt("return",ae().get("hsid"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return(t=bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function yt(){yt=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:S(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var A={};u(A,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&i.call(E,o)&&(A=E);var _=y.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==mt(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function S(t,n,i){var r=h;return function(a,o){if(r===f)throw Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var u=d(t,n,i);if("normal"===u.type){if(r=i.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function w(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(mt(t)+" is not iterable")}return m.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},k(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function At(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function bt(e){var t=function(e){if("object"!=mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:t+""}var Et="stateNotReady",_t="stateLoading",kt=["web","instant-article","app"],Tt=function(){return e=function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"web";if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=i||Qe("SITE_ID")||Je("ut.profile")||"unknown",this.deviceGroup=a||Qe("MOBILE_GROUP")||Je("platform")||"unknown",this.initialDelay=6e4,this.defaultContentType=o,-1===kt.indexOf(s))throw Error(R.INVALID_ENVIRONMENT);this.environment=s,this.validator=Y,this.clientVersion=T.PACKAGE_VERSION,this.state=Et,this.referer=document.referrer;var l=null,u=null,c=null,d=null,h=null;this.configRemote=null,this.targetHorizonClientUUID=0,this.loadConfig(this.tenant);var f=function(){return r("horizonActionInfo",{horizonActionSequence:0,horizonClientContextID:t()()})};this.getHorizonActionSequence=function(){var e=f();return 2147483647===e.horizonActionSequence&&(e.horizonActionSequence=0),e.horizonActionSequence+=1,e.horizonActionSequence},this.getHorizonClientContextID=function(){return f().horizonClientContextID},this.getHorizonActionExtraAttributes=function(){return""},this.updateHorizonClientContextID=function(){f().horizonClientContextID=t()()},this.setMetricsCollector=function(e){d=e},this.getMetricsCollector=function(){if(!d){var e=B();n.setMetricsCollector(e)}return d},this.metricsReport=new Q(this.getMetricsCollector()),this.setMetricsManager=function(e){h=e},this.getMetricsManager=function(){if(!h){var e=(t=T.METRICS_SEND_INTERVAL,i=n.initialDelay,(a=r("metrics",{})).metricManager||(a.metricManager=new ee(t,i)),a.metricManager);n.setMetricsManager(e)}var t,i,a;return h},this.setSchemasProvider=function(e){l=e},this.getSchemasProvider=function(){if(!l){var e=((t=je()).provider||(t.provider=new Ke("".concat(T.HORIZON_SCHEMAS_HOST,"/schemas"))),t.provider);n.setSchemasProvider(e)}var t;return l},this.setEventBus=function(e){u=e},this.getEventBus=function(){if(!u){var e=Me(n.tenant,n.deviceGroup,n.environment,n.getIdManager());n.setEventBus(e)}return u},this.setIdManager=function(e){c=e},this.getIdManager=function(){if(!c){var e=ft.getInstance();n.setIdManager(e)}return c},this.isReady=function(){return!!l&&!!c&&n.validator.isReady()&&l.isReady()&&c.isReady()},this.startScheduler=function(e){setTimeout((function(){n.sendMetrics(),(new ie).every(T.metricsInterval).call((function(){return n.sendMetrics()})).start()}),e)},this.startScheduler(this.initialDelay),this.normalizeUUID=function(e){for(var t=[],n=0;n<e.length;n+=2){var i=e.substr(n,2);t.push(parseInt(i,16))}return((t[0]<<24|t[1]<<16|t[2]<<8|t[3])+Math.pow(2,31))/(Math.pow(2,32)-1)},this.targetHorizonClientUUID=this.normalizeUUID(T.HORIZON_CLIENT_UUID),window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&n.unload()}))},n=[{key:"loadConfig",value:(i=yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.getConfig(t);case 2:this.configRemote=e.sent;case 3:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){At(a,n,r,o,s,"next",e)}function s(e){At(a,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(e){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer,horizonRelationId:e,horizonActionUUID:t()(),horizonActionSequence:this.getHorizonActionSequence(),horizonClientContextID:this.getHorizonClientContextID(),horizonActionExtraAttributes:this.getHorizonActionExtraAttributes()}}},{key:"sendMetrics",value:function(){if(this.getMetricsManager().shouldSendMetricsNow(this.tenant)){var e=this.metricsReport.reportAllMetrics(this.tenant);this.send([e])}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t,this.tenant),this.getMetricsCollector().addMetric(f,A,1,this.tenant)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state="stateReady",e()):(this.state=_t,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=_t,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=_t,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady((function(){return e.flush()}))}},{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&"string"!=typeof n)throw new Error("".concat(R.INVALID_RELATION_ID," Wrong relationId type. It should be a String: actual type is ").concat(mt(n)));[].concat(e).forEach((function(e){if(t.configRemote&&t.configRemote.sample){var i=t.configRemote.sample.find((function(t){return t.schema===e.id}));if(i&&t.targetHorizonClientUUID>i.sampling)return}t.validator.validateArgs(e,t.tenant),t.sendWithInfo(e,t.getScopeInfo(n))}))}},{key:"sendWithInfo",value:function(e,t){var n=this;if(!this.isReady())return this.state===Et&&this.flush(),void this.onReady((function(){return n.sendWithInfo(e,t)}));this.validateBeforeEnqueue(e);var i=gt(gt({},t),e);i.contentType||(this.defaultContentType||R.mustBeDefined("contentType"),i.contentType=this.defaultContentType),this.getEventBus().enqueue(i)}},{key:"newContextId",value:function(){this.updateHorizonClientContextID()}},{key:"getContextId",value:function(){return this.getHorizonClientContextID()}}],n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,bt(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i,a}();const St=Tt;var wt={setLoggedUser:ft.setLoggedUser,removeLoggedUser:ft.removeLoggedUser,setAnonymousUser:ft.setAnonymousUser,getAnonymousUser:ft.getAnonymousUser,getHsid:ft.getHsid}})(),i})()))})),hp=mo(dp),fp=t({__proto__:null,default:hp},[dp]),pp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(l(this,e),e.instance)return e.instance;this._useVanilla=r,this.initHorizonClient(t,n,i)}var t;return c(e,[{key:"initHorizonClient",value:function(e,t,n){var i=ne.isSmartTvEnvironment?"tv":null,r=hp||fp;"prod"!==e&&r.Settings.useQAConfiguration(),t&&r.Settings.useHTTPOnly(),this.horizon=new r.HorizonClient(n,i),this.saveInstance()}},{key:"saveInstance",value:function(){e.instance=this}},{key:"send",value:(t=s(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.horizon.send(t);case 3:return e.abrupt("return",i({success:!0},t));case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",i({success:!1,error:e.t0.message||e.t0},t));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return t.apply(this,arguments)})},{key:"unload",value:function(){this.horizon.unload()}},{key:"isVanilla",value:function(){return this._useVanilla}}]),e}(),gp=jn.session,vp="object"===a(window.onbeforeunload)?"beforeunload":"unload",mp=function(e){return function(e){h(a,e);var t,n=m(a);function a(e){var t;l(this,a),(t=n.call(this,e))[e.type]=e;var i=t.options._env&&t.options._env.name||"",r=t.options.httpOnly,o=t.options.horizon&&t.options.horizon.tenant||(ne.isSmartTvEnvironment?"player":null),s=t.options.useVanilla||!1;return t.horizon=new pp(i,r,o,s),t.setupUnload(),t}return c(a,[{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"playerId",get:function(){return Kt.playerId}},{key:"videoSessionId",get:function(){return gp.getVideoSessionId(this.options.playerId)}},{key:"contentType",get:function(){return"monitoring"}},{key:"location",get:function(){return document.location}},{key:"basicData",get:function(){return{id:this.id,version:this.version,contentType:this.contentType}}},{key:"VanillaData",get:function(){return{referer:this.location.origin+this.location.pathname||"not-informed",url:this.location.href||"not-informed"}}},{key:"setupUnload",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(vp,this.boundOnEnd)}},{key:"bindEvents",value:function(){}},{key:"onUnload",value:function(){}},{key:"onEnd",value:function(){this.onUnload(),this.horizon.unload()}},{key:"send",value:(t=s(r().mark((function e(){var t,n,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=i(i({},this.basicData),{},{properties:t}),this.horizon.isVanilla()&&Object.assign(n,this.VanillaData),e.prev=3,e.next=6,this.horizon.send(n);case 6:a=e.sent,this.sendMetricsXray(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),Re.error(this.name,"Error when trying to send data to Horizon",e.t0),this.sendMetricsXray(i({success:!1,error:e.t0.message||e.t0},n));case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})},{key:"sendMetricsXray",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=(null==i?void 0:i.id)||"unknown",a=(null==i||null===(e=i.properties)||void 0===e?void 0:e.event)||"",o="horizon:".concat(r,":").concat(a);null===(t=this.container)||void 0===t||null===(n=t.trigger)||void 0===n||n.call(t,Gn.TRACE_VIEW_TRACKING_POINT,{content:o,data:i})}},{key:"destroy",value:function(){window.removeEventListener(vp,this.boundOnEnd),this.stopListening(),A(f(a.prototype),"destroy",this).call(this)}}]),a}(e)},yp=/^\s+|\s+$/g,Ap=/^[-+]0x[0-9a-f]+$/i,bp=/^0b[01]+$/i,Ep=/^0o[0-7]+$/i,_p=parseInt,kp="object"==typeof vo&&vo&&vo.Object===Object&&vo,Tp="object"==typeof self&&self&&self.Object===Object&&self,Sp=kp||Tp||Function("return this")(),wp=Object.prototype.toString,Cp=Math.max,Ip=Math.min,Rp=function(){return Sp.Date.now()};function Dp(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Lp(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==wp.call(e)}(e))return NaN;if(Dp(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Dp(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(yp,"");var n=bp.test(e);return n||Ep.test(e)?_p(e.slice(2),n?2:8):Ap.test(e)?NaN:+e}var Pp=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function p(e){return u=e,s=setTimeout(v,t),c?f(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=Rp();if(g(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?Ip(n,a-(e-u)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,o)}function y(){var e=Rp(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return p(l);if(d)return s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=Lp(t)||0,Dp(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Cp(Lp(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},y.flush=function(){return void 0===s?o:m(Rp())},y},Op=function(){return{}},xp=function(e){return{subject:e}},Mp=function(e,t){return{subject:t,value:e}},Np=function(e,t){return{subject:t}},Bp=jn.getCurrentTime,Fp=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).counter=0,i}return c(n,[{key:"name",get:function(){return"events-schema"}},{key:"id",get:function(){return"player-events"}},{key:"version",get:function(){return"2.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"playbackType",get:function(){return this.container&&this.container.getPlaybackType()}},{key:"playHeadTimeLive",get:function(){return this.innerPlayback&&Bp(this.innerPlayback)||-1}},{key:"playHeadTimeVOD",get:function(){return this.container&&parseInt(1e3*this.container.getCurrentTime(),10)||-1}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"coreEvents",get:function(){var e;return d(e={},xe.CORE_FULLSCREEN,(function(e,t){return{subject:t,value:e}})),d(e,xe.CORE_RESIZE,(function(e,t){var n=e.width,i=e.height;return{value:"".concat(n,"x").concat(i),subject:t}})),d(e,xe.CORE_SCREEN_ORIENTATION_CHANGED,(function(e,t){return{subject:t,value:e.orientation}})),d(e,Gn.WM_PIP_ADDED,Op),d(e,Gn.WM_PIP_DISCARDED,Op),d(e,Gn.WM_MASTER_ADDED,Op),d(e,Gn.WM_MASTER_CHANGED,Op),d(e,Gn.WM_PIPTOMASTER,Op),d(e,Gn.WM_MASTERTOPIP,Op),d(e,Gn.MEDIACONTROL_DOUBLE_TAP,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide,n=void 0===t?"":t;return{value:n}})),d(e,Gn.WILL_SHOW_QUICK_SEEK_HINT,Op),d(e,Gn.WILL_HIDE_QUICK_SEEK_HINT,Op),d(e,Gn.START_DRAGGING_SEEKBAR,Op),d(e,Gn.STOP_DRAGGING_SEEKBAR,Op),d(e,Gn.FRAME_AD_INFO,(function(e){var t=e.version,n=e.player;return{value:JSON.stringify({version:t,player:n})}})),d(e,Gn.WILL_FRAME_AD,Op),d(e,Gn.DID_FRAME_AD,Op),d(e,Gn.WILL_GAM_FRAME_AD,(function(e){return{value:JSON.stringify(e)}})),d(e,Gn.DID_GAM_FRAME_AD,Op),d(e,Gn.WILL_URL_FRAME_AD,Op),d(e,Gn.DID_URL_FRAME_AD,Op),d(e,Gn.WILL_IMAGE_FRAME_AD,Op),d(e,Gn.DID_IMAGE_FRAME_AD,Op),d(e,Gn.WILL_QRCODE_FRAME_AD,Op),d(e,Gn.DID_QRCODE_FRAME_AD,Op),d(e,Gn.WILL_PIXEL_FRAME_AD,Op),d(e,Gn.DID_PIXEL_FRAME_AD,Op),d(e,Gn.WILL_DISPLAY_FRAME_AD,Op),d(e,Gn.DID_DISPLAY_FRAME_AD,Op),d(e,Gn.WILL_HIDE_FRAME_AD,Op),d(e,Gn.DID_HIDE_FRAME_AD,Op),d(e,Gn.SKIP_FRAME_AD,Op),e}},{key:"mediaControlEvents",get:function(){var e;return d(e={},Gn.MEDIACONTROL_MODAL_SHOW,Op),d(e,Gn.MEDIACONTROL_MODAL_HIDE,Op),d(e,Gn.MEDIACONTROL_ITEMCLICKED,xp),d(e,xe.MEDIACONTROL_RENDERED,xp),d(e,Gn.WM_VOLUME_SHOW,xp),d(e,Gn.WM_VOLUME_HIDE,xp),d(e,Gn.WM_SHARE_SHOW,xp),d(e,Gn.WM_SHARE_HIDE,xp),e}},{key:"containerEvents",get:function(){var e,t=(d(e={},xe.CONTAINER_CLICK,Np),d(e,xe.CONTAINER_DESTROYED,Np),d(e,xe.CONTAINER_DBLCLICK,Np),d(e,xe.CONTAINER_VOLUME,(function(e,t){return{value:Math.round(e),subject:t}})),d(e,xe.Custom.DAI_RESOURCE_LOADED,(function(e){return{value:e.implementationType}})),d(e,Gn.DFP_AD_LOADED,Op),d(e,Gn.DFP_AD_CLOSED,Op),d(e,Gn.DFP_AD_STARTED,Op),d(e,Gn.DFP_AD_RESUME,Op),d(e,Gn.DFP_AD_PAUSE,Op),d(e,Gn.DFP_AD_CLICKED,Op),d(e,Gn.DFP_AD_COMPLETED,Op),d(e,Gn.DFP_AD_SKIPPED,Op),d(e,Gn.DFP_AD_NOTSERVED,Op),d(e,Gn.DFP_AD_METADATA,Op),d(e,Gn.DFP_ALL_ADS_COMPLETED,Op),d(e,Gn.DFP_CONTENT_PAUSE,Op),d(e,Gn.DFP_CONTENT_RESUME,Op),d(e,Gn.DFP_CONTENT_STARTED,Op),d(e,Gn.DFP_CONTENT_ENDED,Op),d(e,Gn.DFP_FINISHED,Op),d(e,Gn.WM_MUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),d(e,Gn.WM_UNMUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),d(e,Gn.WM_AUDIO_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),d(e,Gn.WM_AUDIO_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,Gn.WM_LOCATION_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,Gn.WM_SUBTITLE_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),d(e,Gn.SKIP_BUTTON_CLICKED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),d(e,Gn.SKIP_BUTTON_SHOW,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),d(e,Gn.DID_CHANGE_CURRENT_PROGRAM,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,Gn.WILL_QUICK_SEEK,Op),d(e,Gn.WILL_AUTO_SKIP_RECAP,Op),d(e,Gn.WM_GA_UNTRACKED_EVENT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;return{value:n}})),d(e,Gn.SIMULCAST_PING,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,Gn.WM_RESOURCE_REQUEST_STATS,(function(e){var t=e.retries,n=e.usedFallback;return{value:JSON.stringify({attempts:t,fallback:n}),eventName:"retry_history"}})),d(e,Gn.DID_REACH_LIVE_STOP_TIME,Op),d(e,Gn.MOSAIC_ENABLED,Op),d(e,Gn.REPORT_STATS_TOGGLE_REQUEST,Op),d(e,Gn.LATENCY_INFO_TOGGLE_REQUEST,Op),d(e,Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST,Op),e);return t}},{key:"playbackEvents",get:function(){var e;return d(e={},xe.PLAYBACK_READY,Mp),d(e,xe.PLAYBACK_BUFFERING,Mp),d(e,xe.PLAYBACK_BUFFERFULL,Mp),d(e,xe.PLAYBACK_LOADEDMETADATA,(function(e,t){var n=e.duration;return{subject:t,value:Math.round(n)}})),d(e,xe.PLAYBACK_HIGHDEFINITIONUPDATE,Mp),d(e,xe.PLAYBACK_BITRATE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,xe.PLAYBACK_DVR,Mp),d(e,xe.PLAYBACK_ENDED,xp),d(e,xe.PLAYBACK_PLAY_INTENT,xp),d(e,xe.PLAYBACK_PLAY,xp),d(e,xe.PLAYBACK_PAUSE,(function(e,t){return{subject:e,value:JSON.stringify(t)}})),d(e,xe.PLAYBACK_SEEK,xp),d(e,xe.PLAYBACK_SEEKED,xp),d(e,xe.PLAYBACK_STOP,xp),d(e,xe.PLAYBACK_LEVEL_SWITCH,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),d(e,xe.PLAYBACK_SUBTITLE_AVAILABLE,xp),d(e,Gn.WM_WROOM_WAITING,Np),d(e,Gn.WM_PLAY_REQUESTED_READY,Np),d(e,Gn.WILL_SELECT_FALLBACK_SOURCE,(function(e){return{value:JSON.stringify(e)}})),d(e,Gn.WILL_CHANGE_SOURCE,(function(e){return{value:JSON.stringify(e)}})),d(e,Gn.FALLBACK_SOURCE_SELECTED,(function(e){return{value:JSON.stringify(e)}})),d(e,Gn.WILL_RENEW_RESOURCE,(function(e){return{value:JSON.stringify(e)}})),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_READY,this.bindContainerEvents),Object.entries(this.coreEvents).forEach((function(t){var n=b(t,2),i=n[0],r=n[1];e.subscribeEvent(e.core,i,r)})),Object.entries(this.mediaControlEvents).forEach((function(t){var n=b(t,2),i=n[0],r=n[1];e.subscribeEvent(e.mediaControl,i,r)}))}},{key:"onUnload",value:function(){this.sendEvent("user","DID_LEAVE")}},{key:"playheadTime",value:function(){return this.playbackType?this.playbackType===Je.LIVE?this.playHeadTimeLive:this.playHeadTimeVOD:-1}},{key:"handleEventArgs",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=t.apply(void 0,i),o=a.subject,s=a.value,l=a.eventName;this.sendEvent(o,l||e,s)}},{key:"subscribeEvent",value:function(e,t,n){this.listenTo(e,t,Pp(this.handleEventArgs.bind(this,t,n),500,{leading:!0,trailing:!0}))}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.bindPlaybackEvents(),Object.entries(this.containerEvents).forEach((function(t){var n=b(t,2),i=n[0],r=n[1];e.subscribeEvent(e.container,i,r)})))}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.playback&&Object.entries(this.playbackEvents).forEach((function(t){var n=b(t,2),i=n[0],r=n[1];e.subscribeEvent(e.playback,i,r)}))}},{key:"sendEvent",value:function(e,t,n){this.send(Object.assign({},this.baseProperties,{subject:e||"unknown"},t&&{event:t.toString()},n&&{value:n.toString()},{playheadTime:this.playheadTime()},{counter:parseInt(this.counter,10)})),this.counter+=1}}]),n}(mp(dt)),Up=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"session-info-schema"}},{key:"id",get:function(){return"player-session-info"}},{key:"version",get:function(){return"2.6"}},{key:"innerPlayback",get:function(){return this.container.playback.playback}},{key:"startAt",get:function(){return"live"===this.container.getPlaybackType()?this.options.liveStartTime:this.options.resumeAt}},{key:"globoId",get:function(){return this.options.globoId}},{key:"baseProperties",get:function(){var e={playerId:this.playerId,videoSessionId:this.videoSessionId,autoPlay:!!this.options.autoPlay,disableAds:!!this.options.skipDFP,enableFrameAds:!!this.options.enableFrameAds},t=!!this.options.disasterRecoveryMode;return t&&(e.disasterRecoveryMode=t),this.globoId&&(e.globoId=this.globoId),this.startAt&&(e.startAt=Math.floor(this.startAt)),e}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Gn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send(i(i(i({},this.baseProperties),this.containerProperties()),this.videoProperties(e)))}},{key:"containerProperties",value:function(){return{playback:this.innerPlayback.name,muted:!this.container.playback.getVolume()}}},{key:"liveProps",value:function(e){return{duration:-1,dvr:this.container.isDvrEnabled(),signal:e.transmission.signal}}},{key:"videoProperties",value:function(e){var t={videoId:e.id,programId:e.programId,channelId:e.channelId,kind:e.kind,encrypted:e.encrypted,subscriberOnly:e.isSubscriberOnly,adult:e.adult,cdn:e.cdn,duration:e.duration,downloadedSession:!1};return e.encrypted&&(t.drmProtocol=e.drm),"live"==e.kind&&(t=i(i({},t),this.liveProps(e))),t}}]),n}(mp(ct)),Vp=jn.API_VERSION,Hp=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).chromecastStatus=i.getChromecastStatus(),i}return c(n,[{key:"name",get:function(){return"environment-web-info-schema"}},{key:"id",get:function(){return"player-environment-web"}},{key:"version",get:function(){return"2.0"}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_READY,this.sendEvents)}},{key:"getChromecastStatus",value:function(){return Promise.race([this.subscribe(this.listenTo.bind(this,this.core,Gn.CHROMECAST_SCRIPT_ERROR)).then((function(){return"script-load-error"})),this.subscribe(this.listenTo.bind(this,this.core,Gn.CHROMECAST_API_ERROR)).then((function(){return"api-error"})),this.subscribe(this.listenTo.bind(this,this.core,Gn.CHROMECAST_INITIALIZE_ERROR)).then((function(){return"initialize-error"})),this.subscribe(this.listenTo.bind(this,this.core,Gn.CHROMECAST_AVAILABLE)).then((function(){return"available"})),this.subscribe(this.listenTo.bind(this,this.core,Gn.CHROMECAST_UNAVAILABLE)).then((function(){return"unavailable"}))]).then((function(e){return{castStatus:e}})).catch((function(){return{castStatus:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,apiVersion:Vp,browserVersion:ne.data.fullVersion||Bn.sdkVersion()||"not-informed",browser:ne.name||Bn.osName()||"not-informed",location:this.core.options.domain||document.location.hostname}),this.chromecastStatus]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(E(t))))}))}}]),n}(mp(dt)),jp=Ki.Video,Kp=jn.getDeviceType,Gp=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).deviceInfo=i.options.deviceInfo||{},i}return c(n,[{key:"name",get:function(){return"environment-info-schema"}},{key:"id",get:function(){return"player-environment-data"}},{key:"version",get:function(){return"3.0"}},{key:"osVersion",get:function(){return(ne.isSmartTvEnvironment?this.deviceInfo.firmwareVersion:ne.os.fullVersion)||"other"}},{key:"deviceModel",get:function(){return ne.isSmartTvEnvironment&&(this.deviceInfo.model||ne.device.model)||"not-informed"}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_READY,this.sendEvents)}},{key:"initialSize",value:function(){return this.subscribe(this.listenTo.bind(this,this.core,xe.CORE_RESIZE)).then((function(e){var t=e.width,n=e.height;return{initialSize:"".concat(t,"x").concat(n)}})).catch((function(){return{initialSize:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,os:this.deviceInfo.os||ne.os.name||Bn.osName()||"not-informed",osVersion:this.osVersion,playerVersion:"7.154.0",playerType:jp.getPlayerType(),application:this.core.options.domain||document.location.hostname,deviceType:Kp(),applicationVersion:this.core.options.applicationVersion||"not-informed",networkType:"None/web",deviceModel:this.deviceModel}),this.initialSize()]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(E(t))))}))}}]),n}(mp(dt)),Wp=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"errors-schema"}},{key:"id",get:function(){return"player-errors"}},{key:"version",get:function(){return"2.2"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{playerId:this.playerId,videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,xe.CORE_READY,this.bindContainerEvents),this.listenToCoreErrors()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenToOnce(this.container.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToContainerErrors())}},{key:"listenToContainerErrors",value:function(){var e=this;this.listenTo(this.container,xe.CONTAINER_ERROR,this.sendEvents),this.listenTo(this.container,Gn.DFP_AD_ERROR,(function(t){var n=e.formatAdErrors(t);e.sendEvents(n)})),this.listenTo(this.container,Gn.WM_VIDEO_METADATA_ERROR,this.sendEvents),this.listenTo(this.container,Gn.WM_RESOURCE_ERROR,this.sendEvents)}},{key:"listenToCoreErrors",value:function(){this.listenTo(this.core,Gn.CHROMECAST_API_ERROR,this.sendEvents),this.listenTo(this.core,Gn.CHROMECAST_SCRIPT_ERROR,this.sendEvents),this.listenTo(this.core,Gn.CHROMECAST_INITIALIZE_ERROR,this.sendEvents),this.listenTo(this.core,Gn.CHROMECAST_LAUNCH_ERROR,this.sendEvents),this.listenTo(this.core,Gn.CHROMECAST_MEDIA_LOAD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.GAM_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.URL_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.IMAGE_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.QRCODE_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.PIXEL_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.DISPLAY_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.HIDE_FRAME_AD_ERROR,this.sendEvents),this.listenTo(this.core,Gn.ERROR_FRAME_AD,this.sendEvents)}},{key:"onMetadataLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.kind=e.kind}},{key:"formatAdErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===a(e.message)?{code:e.message&&e.message.getType&&e.message.getType()||"",message:e.message&&e.message.getMessage&&e.message.getMessage()}:e}},{key:"videoProperties",value:function(){var e=this.container.options,t=parseInt(null==e?void 0:e.source,10);return{videoId:jn.isVideoId(t)?t:-1,kind:this.kind||""}}},{key:"errorProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{code:String(e.code||e.type||"unknown"),clientCode:e.clientCode||"unknown",message:e.description||e.message||"unknown",extraData:""}}},{key:"sendEvents",value:function(e){this.send(i(i(i({},this.baseProperties),this.videoProperties()),this.errorProperties(e)))}}]),n}(mp(dt)),Yp=function(e){h(n,e);var t=m(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"name",get:function(){return"ad-config-schema"}},{key:"id",get:function(){return"player-ad-config"}},{key:"version",get:function(){return"2.0"}},{key:"dfp",get:function(){return this.container.options.dfp}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.container,Gn.DFP_AD_LOADED,this.sendEvents)}},{key:"adConfigProperties",value:function(e){return i(i({},this.adProperties(e)),this.dfpProperties())}},{key:"adProperties",value:function(e){return{adId:e.getAdId(),linear:e.isLinear(),position:this.getAdPosition(e),skippable:e.isSkippable(),duration:parseInt(e.getDuration(),10),timeOffset:parseInt(e.getAdPodInfo().getTimeOffset(),10)}}},{key:"dfpProperties",value:function(){return{adUnit:this.dfp.adUnit,adCustomData:this.dfp.adCustomData,accountId:this.dfp.adAccountId,cmsId:this.dfp.adCmsId}}},{key:"getAdPosition",value:function(e){if(!e.isLinear())return"overlay";switch(e.getAdPodInfo().getPodIndex()){case 0:return"pre-roll";case-1:return"pos-roll";default:return"mid-roll"}}},{key:"sendEvents",value:function(e){this.send(i(i({},this.baseProperties),this.adConfigProperties(e)))}}]),n}(mp(ct)),zp={EnvironmentInfo:Gp,EnvironmentWebInfo:Hp,SessionInfoSchema:Up,ErrorsInfo:Wp,EventsInfo:Fp,AdConfigSchema:Yp},qp=Object.entries(zp).reduce((function(e,t){var n=b(t,2),i=n[0],r=n[1];return e[r.type]=e[r.type]||{},e[r.type][i]=r,e}),{}),$p=qp.core,Xp=qp.container,Qp=function(e){return(t=e,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).match(/skd\:\/\/(.*)$/)[1];var t},Jp=function(e,t,n){var i="string"==typeof t?function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t):t,r=0,a=new ArrayBuffer(e.byteLength+4+i.byteLength+4+n.byteLength),o=new DataView(a);new Uint8Array(a,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,i.byteLength,!0),r+=4;var s=new Uint16Array(a,r,i.length);return s.set(i),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},Zp=function(e){h(n,e);var t=m(n);function n(){var e;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReadyState=!1,e.certificate=null,e.setupDRM(e.options.fairplay||{}),e}return c(n,[{key:"name",get:function(){return"hls_fairplay_playback"}},{key:"events",get:function(){return i(i({},A(f(n.prototype),"events",this)),{},{webkitneedkey:this.onNeedKey})}},{key:"_setup",value:function(){this.setupDRM(this.options.fairplay||{})}},{key:"load",value:function(e){this._setup(),A(f(n.prototype),"load",this).call(this,e)}},{key:"_ready",value:function(){this.certificate&&A(f(n.prototype),"_ready",this).call(this)}},{key:"setupDRM",value:function(e){this.certificateUrl=e.certificate,this.serverUrl=e.server,this.certificateUrl&&this.loadCertificate()}},{key:"loadCertificate",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("load",(function(t){return e.onCertificateLoaded(t)}),!1),t.addEventListener("error",(function(t){return e.onCertificateError(t)}),!1),t.open("GET",this.certificateUrl,!0),t.send()}},{key:"onCertificateLoaded",value:function(e){var t=e.target;this.certificate=new Uint8Array(t.response),this._ready(),Re.info(this.name,"Certificate loaded successfully")}},{key:"onCertificateError",value:function(e){var t=this.createError({code:"certificateError",description:"Failed to retrieve the server certificate",raw:e});this.trigger(xe.PLAYBACK_ERROR,t),Re.error(this.name,"Failed to retrieve the server certificate",t)}},{key:"onNeedKey",value:function(e){var t=e.target,n=e.initData,i=Qp(n);n=Jp(n,i,this.certificate),this.createMediaKeys(t),this.createKeySession(t,n,i)}},{key:"createMediaKeys",value:function(e){if(!e.webkitKeys){var t=WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?"com.apple.fps.1_0":null;if(t)e.webkitSetMediaKeys(new WebKitMediaKeys(t));else{var n=this.createError({code:"unsupportedKeySystem",description:"Could not create MediaKeys. Key System not supported"});this.trigger(xe.PLAYBACK_ERROR,n),Re.error(this.name,"Could not create MediaKeys. Key System not supported",n)}}}},{key:"createKeySession",value:function(e,t,n){if(e.webkitKeys){var i=e.webkitKeys.createSession("video/mp4",t);if(i)i.contentId=n,this.bindKeySessionEvents(i);else{var r=this.createError({code:"mediaKeysError",description:"Could not create key session"});this.trigger(xe.PLAYBACK_ERROR,r),Re.error(this.name,"Could not create key session",r)}}}},{key:"bindKeySessionEvents",value:function(e){var t=this;e.addEventListener("webkitkeymessage",(function(e){return t.licenseRequestReady(e)}),!1),e.addEventListener("webkitkeyadded",(function(e){return t.onKeyAdded(e)}),!1),e.addEventListener("webkitkeyerror",(function(e){return t.onKeyError(e)}),!1)}},{key:"onKeyAdded",value:function(e){Re.info(this.name,"Decryption key was added to session",e)}},{key:"onKeyError",value:function(e){var t=this.createError({code:"decryptionKeyError",description:"A decryption key error was encountered",level:"WARN",raw:e});Re.warn(this.name,"A decryption key error was encountered",t)}},{key:"licenseRequestReady",value:function(e){var t=this,n=e.target,i=e.message,r=new XMLHttpRequest,a="spc=".concat(encodeURIComponent(function(e){for(var t,n,i,r,a,o,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)r=(t=e[c++])>>2,a=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,o=(15&n)<<2|(i=c<e.length?e[c++]:Number.NaN)>>6,s=63&i,isNaN(n)?(o=64,s=64):isNaN(i)&&(s=64),u+=l.charAt(r)+l.charAt(a)+l.charAt(o)+l.charAt(s);return u}(i)));r.responseType="text",r.session=n,r.addEventListener("load",(function(e){return t.onLicenseRequestLoaded(e)}),!1),r.addEventListener("error",(function(e){return t.onLicenseRequestError(e)}),!1),r.open("POST",this.serverUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),Re.info(this.name,"License request ready")}},{key:"onLicenseRequestLoaded",value:function(e){var t=e.target,n=t.session,i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}(JSON.parse(t.responseText.trim()).ckc);n.update(i),Re.info(this.name,"License loaded successfully")}},{key:"onLicenseRequestError",value:function(e){var t=this.createError({code:"licenseRequestError",description:"The license request failed",raw:e});this.trigger(xe.PLAYBACK_ERROR,t),Re.error(this.name,"The license request failed",t)}}]),n}(mt);Zp.canPlay=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.encrypted,r=e.split("?")[0].match(/.*\.(.*)$/)||[],a=r.length>1&&"m3u8"===r[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t;return!(!ne.isSafari&&!ne.isiOS||!a||!i)};var eg=yo((function(module,e){module.exports=function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(t);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function a(e){if(Array.isArray(e))return r(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t=f(t),b(e,g()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,w(i.key),i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=_(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},h.apply(null,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function v(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function _(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function k(e,t,n,i){var r=h(f(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof r?function(e){return r.apply(n,e)}:r}function T(e){return a(e)||v(e)||C(e)||m()}function S(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function w(e){var t=S(e,"string");return"symbol"==typeof t?t:t+""}function C(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}var I=e.Utils.now,R=e.Utils.listContainsIgnoreCase,D=-1,L=16;e.Events.register("PLAYBACK_FRAGMENT_CHANGED"),e.Events.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var P=function(t){function n(){var e;l(this,n);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(e=s(this,n,[].concat(i))).options.hlsPlayback=A(A({},e.defaultOptions),e.options.hlsPlayback),e._timeUpdateThrottleDelay=200,e._timeUpdateFiringRate=.2,e._durationChangeMinOffset=.5,e._setInitialState(),e}return p(n,t),c(n,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.11.4"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?D:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"latency",get:function(){return this._hls.latency}},{key:"liveSyncPosition",get:function(){return this._hls.liveSyncPosition}},{key:"currentProgramDateTime",get:function(){return this._hls.playingDate}},{key:"_startTime",get:function(){return this._playbackType===e.Playback.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return I()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,n=(e.remote+t)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,n=this._now-t.local,i=(t.remote+n)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(i,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"sourceMedia",get:function(){return this.options.src}},{key:"currentTimestamp",get:function(){return this._currentFragment?(this._currentFragment.programDateTime+1e3*(this.el.currentTime-this._currentFragment.start))/1e3:null}},{key:"_setInitialState",value:function(){this._minDvrSize=void 0===this.options.hlsMinimumDvrSize?60:this.options.hlsMinimumDvrSize,this._extrapolatedWindowNumSegments=this.options.playback&&void 0!==this.options.playback.extrapolatedWindowNumSegments?this.options.playback.extrapolatedWindowNumSegments:2,this._playbackType=e.Playback.VOD,this._lastTimeUpdate={current:0,total:0,firstFragDateTime:0},this._lastTimeUpdateFiredTime=0,this._lastDuration=null,this._playableRegionStartTime=0,this._localStartTimeCorrelation=null,this._localEndTimeCorrelation=null,this._playableRegionDuration=0,this._programDateTime=0,this._durationExcludesAfterLiveSyncPoint=!1,this._segmentTargetDuration=null,this._playlistType=null,this._recoverAttemptsRemaining=this.options.hlsRecoverAttempts||L}},{key:"_setup",value:function(){this._destroyHLSInstance(),this._createHLSInstance(),this._listenHLSEvents(),this._attachHLSMedia()}},{key:"_destroyHLSInstance",value:function(){this._hls&&(this._manifestLoading=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._setInitialState(),this._hls.destroy(),this._hls=null)}},{key:"_createHLSInstance",value:function(){var e=A({},this.options.playback.hlsjsConfig);this._hls=new i.default(e)}},{key:"_attachHLSMedia",value:function(){this._hls&&this._hls.attachMedia(this.el)}},{key:"_listenHLSEvents",value:function(){var e=this;this._hls&&(this._hls.once(i.default.Events.MEDIA_ATTACHED,(function(){e.options.hlsPlayback.preload&&e._hls.loadSource(e.options.src)})),this._hls.on(i.default.Events.MANIFEST_LOADING,(function(){return e._manifestLoading=!0})),this._hls.on(i.default.Events.LEVEL_LOADED,(function(t,n){return e._updatePlaybackType(t,n)})),this._hls.on(i.default.Events.LEVEL_UPDATED,(function(t,n){return e._onLevelUpdated(t,n)})),this._hls.on(i.default.Events.LEVEL_SWITCHED,(function(t,n){return e._onLevelSwitch(t,n)})),this._hls.on(i.default.Events.FRAG_CHANGED,(function(t,n){return e._onFragmentChanged(t,n)})),this._hls.on(i.default.Events.FRAG_LOADED,(function(t,n){return e._onFragmentLoaded(t,n)})),this._hls.on(i.default.Events.FRAG_BUFFERED,(function(t,n){return e._onFragmentBuffered(t,n)})),this._hls.on(i.default.Events.FRAG_PARSING_METADATA,(function(t,n){return e._onFragmentParsingMetadata(t,n)})),this._hls.on(i.default.Events.ERROR,(function(t,n){return e._onHLSJSError(t,n)})),this._hls.on(i.default.Events.SUBTITLE_TRACK_LOADED,(function(t,n){return e._onSubtitleLoaded(t,n)})),this._hls.on(i.default.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this.bindCustomListeners())}},{key:"bindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var n=t.eventName,i=t.once?"once":"on";n&&e._hls["".concat(i)](n,t.callback)}))}},{key:"unbindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var n=t.eventName;n&&e._hls.off(n,t.callback)}))}},{key:"_onFragmentParsingMetadata",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:t,data:n})}},{key:"render",value:function(){return this._ready(),k(n,"render",this,3)([])}},{key:"_ready",value:function(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(e.Events.PLAYBACK_READY,this.name))}},{key:"_recover",value:function(t,n,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){e.Log.error("hlsjs: failed to recover",{evt:t,data:n}),i.level=e.PlayerError.Levels.FATAL;var r=this.createError(i);this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError(),this.play();else this._recoveredDecodingError=!0,this._hls.recoverMediaError(),this.play()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=e>0?this._duration*(e/100):this._duration;this.seek(t)}},{key:"seek",value:function(t){t<0&&(e.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),t+=this._startTime,this.el.currentTime=t}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateSettings",value:function(){this._playbackType===e.Playback.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(e.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(t,n){var r,a={code:"".concat(n.type,"_").concat(n.details),description:"".concat(this.name," error: type: ").concat(n.type,", details: ").concat(n.details),raw:n};if(n.response&&(a.description+=", response: ".concat(JSON.stringify(n.response))),n.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,n.type){case i.default.ErrorTypes.NETWORK_ERROR:switch(n.details){case i.default.ErrorDetails.MANIFEST_LOAD_ERROR:case i.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case i.default.ErrorDetails.MANIFEST_PARSING_ERROR:case i.default.ErrorDetails.LEVEL_LOAD_ERROR:case i.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.Log.error("hlsjs: unrecoverable network fatal error.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();break;default:e.Log.warn("hlsjs: trying to recover from network error.",{evt:t,data:n}),a.level=e.PlayerError.Levels.WARN,this._hls.startLoad()}break;case i.default.ErrorTypes.MEDIA_ERROR:e.Log.warn("hlsjs: trying to recover from media error.",{evt:t,data:n}),a.level=e.PlayerError.Levels.WARN,this._recover(t,n,a);break;default:e.Log.error("hlsjs: could not recover from error.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else e.Log.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(n))return e.Log.error("hlsjs: could not load decrypt key.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),void this.stop();a.level=e.PlayerError.Levels.WARN,e.Log.warn("hlsjs: non-fatal error occurred",{evt:t,data:n})}}},{key:"_keyIsDenied",value:function(e){return e.type===i.default.ErrorTypes.NETWORK_ERROR&&e.details===i.default.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._shouldThrottleTimeUpdate(t)||(this._lastTimeUpdate=t,this._lastTimeUpdateFiredTime=this._now,this.trigger(e.Events.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_shouldThrottleTimeUpdate",value:function(e){var t=Math.abs(e.current-this._lastTimeUpdate.current)<this._timeUpdateFiringRate,n=Math.abs(e.total-this._lastTimeUpdate.total)<this._durationChangeMinOffset,i=e.firstFragDateTime===this._lastTimeUpdate.firstFragDateTime,r=t&&n&&i,a=this._now-this._lastTimeUpdateFiredTime<this._timeUpdateThrottleDelay;return r&&a}},{key:"_onDurationChange",value:function(){var e=this.getDuration();Math.abs(this._lastDuration-e)<this._durationChangeMinOffset||(this._lastDuration=e,k(n,"_onDurationChange",this,3)([]))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var t=[],n=0,i=0;i<this.el.buffered.length;i++)t=[].concat(T(t),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=t[i].start&&this.el.currentTime<=t[i].end&&(n=i);var r={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(e.Events.PLAYBACK_PROGRESS,r,t)}}},{key:"load",value:function(e){this._stopTimeUpdateTimer(),this.options.src=e,this._setup()}},{key:"play",value:function(){!this._hls&&this._setup(),!this._manifestLoading&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),k(n,"play",this,3)([]),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&this.el.pause()}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&k(n,"stop",this,3)([]),this._destroyHLSInstance()}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._destroyHLSInstance(),k(n,"destroy",this,3)([])}},{key:"_updatePlaybackType",value:function(t,n){this._playbackType=n.details.live?e.Playback.LIVE:e.Playback.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===e.Playback.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(e.Events.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(t,n){this._segmentTargetDuration=n.details.targetduration,this._playlistType=n.details.type||null;var r=!1,a=!1,o=n.details.fragments,s=this._playableRegionStartTime,l=this._playableRegionDuration;if(0!==o.length){if(o[0].rawProgramDateTime&&(this._programDateTime=o[0].rawProgramDateTime),this._playableRegionStartTime!==o[0].start&&(r=!0,this._playableRegionStartTime=o[0].start),r)if(this._localStartTimeCorrelation){var u=this._localStartTimeCorrelation,c=this._now-u.local,d=(u.remote+c)/1e3;d<o[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*o[0].start}:d>s+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(o[0].start,s+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(o[0].start+this._extrapolatedWindowDuration/2)};var h=n.details.totalduration;if(this._playbackType===e.Playback.LIVE){var f=n.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||i.default.DefaultConfig.liveSyncDurationCount);f<=h?(h-=f,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}h!==this._playableRegionDuration&&(a=!0,this._playableRegionDuration=h);var p=o[0].start+h,g=s+l;if(p!==g)if(this._localEndTimeCorrelation){var v=this._localEndTimeCorrelation,m=this._now-v.local,y=(v.remote+m)/1e3;y>p?this._localEndTimeCorrelation={local:this._now,remote:1e3*p}:y<p-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(p-this._extrapolatedWindowDuration)}:y>g&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*g})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*p};a&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(t,n){this._currentFragment=n.frag,this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_CHANGED,n)}},{key:"_onFragmentLoaded",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_LOADED,n)}},{key:"_onFragmentBuffered",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_BUFFERED,n)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(e.Events.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===e.Playback.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(t,n){this.levels.length||this._fillLevels(),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_END),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH,n);var i=this._hls.levels[n.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(e.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(e.Events.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:n.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===e.Playback.LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===e.Playback.VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function(){return i.default}}])}(e.HTML5Video);return P.canPlay=function(e,t){var n=e.split("?")[0].match(/.*\.(.*)$/)||[],r=n.length>1&&"m3u8"===n[1].toLowerCase()||R(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!i.default.isSupported()||!r)},P}(Pl,Os)})),tg=yo((function(module,e){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var t="undefined"!=typeof window?window:vo,n={};for(var i in function(e,t,module){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
var n;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function l(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function u(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=a[t[n]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&r(o.prototype,e,{configurable:!0,writable:!0,value:function(){return s(i(this))}})}return e}));var c,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var h;e:{var f={};try{f.__proto__={a:!0},h=f.a;break e}catch(e){}h=!1}c=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=c;function g(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.zh=t.prototype}function v(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function m(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function y(e,t){e.i={Ee:t,Le:!0},e.g=e.m||e.j}function A(e,t,n){return e.g=n,{value:t}}function b(e){e.g=0}function E(e,t,n){e.m=t,null!=n&&(e.j=n)}function _(e){e.m=0,e.j=2}function k(e,t){e.g=t,e.m=0}function T(e){e.m=0;var t=e.i.Ee;return e.i=null,t}function S(e){e.u=[e.i],e.m=0,e.j=0}function w(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Le?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function C(e){this.g=new v,this.h=e}function I(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,y(e.g,t),R(e)}return e.g.l=null,i.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,y(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Le)throw t.Ee;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return m(e.g),e.g.l?t=I(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=R(e)),t},this.throw=function(t){return m(e.g),e.g.l?t=I(e,e.g.l.throw,t,e.g.s):(y(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.l;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new D(new C(e)))}function P(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Je:r,v:a}}return{Je:-1,v:void 0}}function M(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function N(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}v.prototype.s=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.A=function(e){this.g=e},o("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=a.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;r((function(){if(e.B()){var t=a.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.H=function(e){var t=this.j();e.Lc(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Lc(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Lc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=l(e),a=r.next();!a.done;a=r.next())i(a.value).Lc(t,n)}))},t.all=function(e){var n=l(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Lc(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),o("WeakMap",(function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=l(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function a(e){if(!O(e,s)){var t=new n;r(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&a(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(a(e),!O(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return i(e)&&O(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return i(e)&&O(e,s)&&O(e[s],this.g)},t.prototype.delete=function(e){return!!(i(e)&&O(e,s)&&O(e[s],this.g))&&delete e[s][this.g]},t})),o("Map",(function(e){function t(){var e={};return e.Qa=e.next=e.head=e}function n(e,t){var n=e.g;return s((function(){if(n){for(;n.head!=e.g;)n=n.Qa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&O(e.h,n))for(e=0;e<i.length;e++){var r=i[e];if(t!=t&&r.key!=r.key||t===r.key)return{id:n,list:i,index:e,fa:r}}return{id:n,list:i,index:-1,fa:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=l(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(l([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).fa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,!0)},r.prototype.clear=function(){this.h={},this.g=this.g.Qa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).fa},r.prototype.get=function(e){return(e=i(this,e).fa)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),o("Set",(function(e){function t(e){if(this.g=new Map,e){e=l(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(l([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),o("Array.prototype.findIndex",(function(e){return e||function(e,t){return x(this,e,t).Je}})),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){return-1!==M(this,e,"includes").indexOf(e,t||0)}})),o("Array.prototype.find",(function(e){return e||function(e,t){return x(this,e,t).v}})),o("String.prototype.startsWith",(function(e){return e||function(e,t){var n=M(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}})),o("Array.prototype.keys",(function(e){return e||function(){return N(this,(function(e){return e}))}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)O(i,r)&&(e[r]=i[r])}return e};o("Object.assign",(function(e){return e||B})),o("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),o("Array.prototype.values",(function(e){return e||function(){return N(this,(function(e,t){return t}))}})),o("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),o("Array.prototype.entries",(function(e){return e||function(){return N(this,(function(e,t){return[e,t]}))}})),o("String.prototype.repeat",(function(e){return e||function(e){var t=M(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),o("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),o("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)O(e,t)&&n.push(e[t]);return n}})),o("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),o("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),o("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)O(e,t)&&n.push([t,e[t]]);return n}}));var F=this||self;function U(e,t){e=e.split(".");var n,i=F;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function V(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function H(e){return e.h/(1-Math.pow(e.g,e.i))}function j(){this.h=new V(2),this.j=new V(5),this.g=0,this.i=128e3,this.l=16e3}function K(){}function G(){}function W(){}function Y(e){var t=P.apply(1,arguments);q.has(e)||(q.add(e),W.apply(K,u(t)))}function z(){}V.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},j.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},j.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},j.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(H(this.h),H(this.j))};var q=new Set;if(e.console&&e.console.log.bind){var $={},X=($[1]=console.error.bind(console),$[2]=console.warn.bind(console),$[3]=console.info.bind(console),$[4]=console.log.bind(console),$[5]=console.debug.bind(console),$[6]=console.debug.bind(console),$);W=X[2],G=X[1]}function Q(e){if(J.has(e))return J.get(e);var t=MediaSource.isTypeSupported(e);return J.set(e,t),t}var J=new Map;function Z(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function ee(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function te(e,t,n){if(n||(n=Z),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=l(e)).next();!r.done;i={md:i.md},r=e.next()){if(i.md=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.md,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ne(e,t,n){if(n||(n=Z),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function ie(e,t,n){this.startTime=e,this.direction=ce,this.endTime=t,this.payload=n,this.region=new be,this.position=null,this.positionAlign=ae,this.size=0,this.textAlign=oe,this.writingMode=de,this.lineInterpretation=he,this.line=null,this.lineHeight="",this.lineAlign=fe,this.displayAlign=le,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=me,this.fontStyle=ye,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function re(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ne(e.nestedCues,t.nestedCues,re))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!ne(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}ie.prototype.clone=function(){var e,t=new ie(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},U("shaka.text.Cue",ie);var ae="auto";ie.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:ae};var oe="center",se={LEFT:"left",RIGHT:"right",CENTER:oe,START:"start",END:"end"};ie.textAlign=se;var le="after",ue={BEFORE:"before",CENTER:"center",AFTER:le};ie.displayAlign=ue;var ce="ltr";ie.direction={HORIZONTAL_LEFT_TO_RIGHT:ce,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var de="horizontal-tb";ie.writingMode={HORIZONTAL_TOP_TO_BOTTOM:de,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var he=0;ie.lineInterpretation={LINE_NUMBER:he,PERCENTAGE:1};var fe="start",pe={CENTER:"center",START:fe,END:"end"};ie.lineAlign=pe;var ge={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};ie.defaultTextColor=ge;var ve={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};ie.defaultTextBackgroundColor=ve;var me=400;ie.fontWeight={NORMAL:me,BOLD:700};var ye="normal",Ae={NORMAL:ye,ITALIC:"italic",OBLIQUE:"oblique"};function be(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ee,this.scroll=_e}ie.fontStyle=Ae,ie.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},U("shaka.text.CueRegion",be);var Ee=1;be.units={PX:0,PERCENTAGE:Ee,LINES:2};var _e="";function ke(){}function Te(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Se(e)==Se(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ce(e);t=Ce(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Se(e){return e instanceof ArrayBuffer?e:e.buffer}function we(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ce(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Ie(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Re(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Se(e),t,Math.min(t+Math.max(n,0),r)-t)}function De(e,t,n){var i=P.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}be.scrollMode={NONE:_e,UP:"up"},U("shaka.util.BufferUtils",ke),ke.toDataView=Ie,ke.toUint8=Ce,ke.toArrayBuffer=we,ke.equal=Te,De.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},U("shaka.util.Error",De),De.Severity={RECOVERABLE:1,CRITICAL:2},De.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},De.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
var Le=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */function Pe(e){var t;e instanceof Pe?(Oe(this,e.Ea),this.pb=e.pb,this.Ha=e.Ha,xe(this,e.Kb),this.qa=e.qa,Me(this,e.g.clone()),this.fb=e.fb):e&&(t=String(e).match(Le))?(Oe(this,t[1]||"",!0),this.pb=Ne(t[2]||""),this.Ha=Ne(t[3]||"",!0),xe(this,t[4]),this.qa=Ne(t[5]||"",!0),Me(this,t[6]||"",!0),this.fb=Ne(t[7]||"")):this.g=new Ge(null)}function Oe(e,t,n){e.Ea=n?Ne(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function xe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Kb=t}else e.Kb=null}function Me(e,t,n){t instanceof Ge?e.g=t:(n||(t=Be(t,je)),e.g=new Ge(t))}function Ne(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Be(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Fe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=Pe.prototype).Ea="",n.pb="",n.Ha="",n.Kb=null,n.qa="",n.fb="",n.toString=function(){var e=[],t=this.Ea;if(t&&e.push(Be(t,Ue,!0),":"),t=this.Ha){e.push("//");var n=this.pb;n&&e.push(Be(n,Ue,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Kb)&&e.push(":",String(t))}return(t=this.qa)&&(this.Ha&&"/"!=t.charAt(0)&&e.push("/"),e.push(Be(t,"/"==t.charAt(0)?He:Ve,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.fb)&&e.push("#",Be(t,Ke)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.Ea&&(t=new Pe);var n=!!e.Ea;n?Oe(t,e.Ea):n=!!e.pb,n?t.pb=e.pb:n=!!e.Ha,n?t.Ha=e.Ha:n=null!=e.Kb;var i=e.qa;if(n)xe(t,e.Kb);else if(n=!!e.qa){if("/"!=i.charAt(0))if(this.Ha&&!this.qa)i="/"+i;else{var r=t.qa.lastIndexOf("/");-1!=r&&(i=t.qa.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.qa=i:n=""!==e.g.toString(),n?Me(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},n.clone=function(){return new Pe(this)};var Ue=/[#\/\?@]/g,Ve=/[#\?:]/g,He=/[#\?]/g,je=/[#\?@]/g,Ke=/#/g;function Ge(e){this.g=e||null}function We(e){if(!e.la&&(e.la={},e.Oc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," ")),r=r||"",e.add(a,decodeURIComponent(r.replace(/\+/g," ")))}}function Ye(e,t){return e.concat(t)}function ze(){}function qe(e){return null!=e}function $e(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Pe(e)}));return e.map((function(e){return new Pe(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(Ye,[]).map((function(e){return e.toString()}))}function Xe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Qe(e,t){if(1==t.length)return t[0];if(null!=(e=Je(e,t)))return e;throw new De(2,4,4025,t)}function Je(e,t){for(var n=l(tt[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=l(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==Ze?"":null}(n=Ge.prototype).la=null,n.Oc=null,n.add=function(e,t){We(this),this.g=null;var n=this.la.hasOwnProperty(e)?this.la[e]:null;return n||(this.la[e]=n=[]),n.push(t),this.Oc++,this},n.set=function(e,t){return We(this),this.g=null,this.la.hasOwnProperty(e)?this.la[e]=[t]:this.add(e,t),this},n.toString=function(){if(this.g)return this.g;if(!this.la)return"";var e,t=[];for(e in this.la)for(var n=encodeURIComponent(e),i=this.la[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},n.clone=function(){var e=new Ge;if(e.g=this.g,this.la){var t,n={};for(t in this.la)n[t]=this.la[t].concat();e.la=n,e.Oc=this.Oc}return e};var Ze="text",et={va:"video",Hc:"audio",X:Ze,Wb:"image",Gg:"application"},tt={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function nt(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function it(e){this.h=e,this.g=void 0}function rt(e){this.h=e,this.g=null}function at(e){this.h=e,this.g=null}function ot(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function st(e){return""!=gt().canPlayType(e)}function lt(){return pt("Xbox One")}function ut(){return pt("Tizen")}function ct(){return pt("Web0S")&&pt("Chrome/38.0.2125.122 Safari/537.36")}function dt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ut()&&!pt("PC=EOS")&&!pt("VirginMedia")&&!ht()&&!pt("AFT")}function ht(){return pt("PlayStation 4")}function ft(){if(!dt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function pt(e){return(navigator.userAgent||"").includes(e)}function gt(){return mt||(vt||(vt=new at((function(){mt=null}))),(mt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(mt=document.createElement("video")),vt.N(1),mt)}nt.prototype.resolve=function(){},nt.prototype.reject=function(){},it.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},rt.prototype.N=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},rt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},at.prototype.Mb=function(){return this.stop(),this.h(),this},at.prototype.N=function(e){var t=this;return this.stop(),this.g=new rt((function(){t.h()})).N(e),this},at.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new rt((function(){t.g.N(e),t.h()})).N(e),this},at.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},U("shaka.util.Timer",at),at.prototype.stop=at.prototype.stop,at.prototype.tickEvery=at.prototype.Ca,at.prototype.tickAfter=at.prototype.N,at.prototype.tickNow=at.prototype.Mb;var vt=null,mt=null;function yt(){}function At(t){if(!t)return"";if(239==(t=Ce(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!ht())return(t=(new TextDecoder).decode(t)).includes("�")&&G('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(0==(128&t[i])?r=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),65535>=r)n+=String.fromCharCode(r);else{var a=1023&(r-=65536);n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+a)}}return n}function bt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new De(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ie(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Tt.value()(i)}function Et(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Ce(e);if(239==n[0]&&187==n[1]&&191==n[2])return At(n);if(254==n[0]&&255==n[1])return bt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return bt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return bt(e,!1);if(0==n[1]&&0==n[3])return bt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return At(e);throw new De(2,2,2003)}function _t(t){if(e.TextEncoder&&!ht()){var n=new TextEncoder;return we(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return we(n)}function kt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}U("shaka.util.StringUtils",yt),yt.resetFromCharCode=function(){Tt.g=void 0},yt.toUTF16=kt,yt.toUTF8=_t,yt.fromBytesAutoDetect=Et,yt.fromUTF16=bt,yt.fromUTF8=At;var Tt=new it((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ua)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ua));return n}}(t);return null}));function St(){}function wt(e){return e=Ce(e),e=Tt.value()(e),btoa(e)}function Ct(e,t){return t=null==t||t,e=wt(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function It(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Rt(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Dt(e){var t=Ce(e);e="";for(var n=(t=l(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Lt(){for(var e=P.apply(0,arguments),t=0,n=l(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=l(e)).next();!i.done;i=e.next())i=i.value,t.set(Ce(i),n),n+=i.byteLength;return t}function Pt(){}U("shaka.util.Uint8ArrayUtils",St),St.concat=Lt,St.toHex=Dt,St.fromHex=Rt,St.fromBase64=It,St.toBase64=Ct,St.toStandardBase64=wt,U("shaka.dependencies",Pt),Pt.has=function(e){return xt.has(e)},Pt.add=function(e,t){if(!Ot[e])throw Error(e+" is not supported");xt.set(e,(function(){return t}))};var Ot={muxjs:"muxjs"};Pt.Allowed=Ot;var xt=new Map([["muxjs",function(){return e.muxjs}]]);function Mt(e){var t=this;this.o=e,this.m=xt.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",(function(e){t.i=e.captions,t.l.push(Lt(e.initSegment,e.data))})),this.g.on("done",(function(){var e={data:Lt.apply(St,u(t.l)),captions:t.i};t.h.resolve(e),t.j=!1}))}function Nt(e,t){var n=Bt(e),i="audio/aac"==e.toLowerCase().split(";")[0];return!(!xt.get("muxjs")()||!n&&!i)&&(i?Q('audio/mp4; codecs="mp4a.40.2"'):t?Q(Ut(t,e)):(t=Ut("audio",e),e=Ut("video",e),Q(t)||Q(e)))}function Bt(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Ft(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp4a.40.2"':Bt(t)?Ut(e,t):t}function Ut(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",i=e[1],r=Number(e[2]);n=("66"==i?n+"4200":"77"==i?n+"4d00":n+"6400")+(r>>4).toString(16),n+=(15&r).toString(16),t=t.replace(e[0],n)}return t}function Vt(){}function Ht(e,t){return t&&(e+='; codecs="'+t+'"'),e}function jt(e,t,n){return Nt(e=Ht(e,t),n)?Ft(n,e):"audio"==n?e.replace("video","audio"):e}function Kt(e){var t=Wt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Gt(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Wt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function Yt(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function zt(e){return!(!Qt[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function qt(e,t,n){if(e.B=t,t=e.o.get(t))for(var i=l(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function $t(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=l(t.nestedCues)).next();!i.done;i=t.next())$t(e,i.value,n)}function Xt(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=l(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),$t(e,u,r),u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.B&&e.i.append([u]))}for(a=(r=l(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),s=(t=l(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}Mt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},U("shaka.util.MimeUtils",Vt),Vt.getFullType=Ht,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Yt.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},Yt.prototype.remove=function(e,t){var n=this;return L((function(i){if(1==i.g)return A(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),b(i)}))},U("shaka.text.TextEngine",Yt),Yt.prototype.destroy=Yt.prototype.destroy,Yt.findParser=function(e){return Qt[e]},Yt.unregisterParser=function(e){delete Qt[e]},Yt.registerParser=function(e,t){Qt[e]=t};var Qt={};function Jt(){}function Zt(e,t){return e=nn(e),t=nn(t),e.split("-")[0]==t.split("-")[0]}function en(e,t){return e=nn(e),t=nn(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function tn(e,t){return e=nn(e),t=nn(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function nn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=ln.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function rn(e,t){return e=nn(e),(t=nn(t))==e?4:en(t,e)?3:tn(t,e)?2:en(e,t)?1:0}function an(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),ln.get(e)||e}function on(e){return e.language?nn(e.language):e.audio&&e.audio.language?nn(e.audio.language):e.video&&e.video.language?nn(e.video.language):"und"}function sn(e,t){e=nn(e);var n=new Set,i=l(t);for(t=i.next();!t.done;t=i.next())n.add(nn(t.value));for(t=(i=l(n)).next();!t.done;t=i.next())if((t=t.value)==e)return t;for(t=(i=l(n)).next();!t.done;t=i.next())if(en(t=t.value,e))return t;for(t=(i=l(n)).next();!t.done;t=i.next())if(tn(t=t.value,e))return t;for(t=(n=l(n)).next();!t.done;t=n.next())if(en(e,t=t.value))return t;return null}U("shaka.util.LanguageUtils",Jt),Jt.findClosestLocale=sn,Jt.getLocaleForVariant=on,Jt.getLocaleForText=function(e){return nn(e.language||"und")},Jt.getBase=an,Jt.relatedness=rn,Jt.areSiblings=function(e,t){var n=an(e),i=an(t);return e!=n&&t!=i&&n==i},Jt.normalize=nn,Jt.isSiblingOf=tn,Jt.isParentOf=en,Jt.areLanguageCompatible=Zt,Jt.areLocaleCompatible=function(e,t){return(e=nn(e))==(t=nn(t))};var ln=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function un(){this.g={}}function cn(e,t,n,i,r){var a=e.variants;(t.length||n.length)&&(a=function(e,t,n){for(var i={},r=(t=l(t)).next();!r.done;i={xd:i.xd},r=t.next())if(i.xd=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.xd)}}(i)),r.length){e=r;break}for(i={},n=l(n),t=n.next();!t.done;i={jd:i.jd},t=n.next())if(i.jd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.jd)}}(i)),t.length){e=t;break}return e}(a,t,n)),t=function(e){for(var t=new un,n=(e=l(e)).next();!n.done;n=e.next()){var i=hn(n=n.value);t.push(i,n)}return t}(a=Ln(a,i)),t=function(e){var t=0,n=new Map,i=e.size();return e.forEach((function(e,r){for(var a=(r=l(r)).next();!a.done;a=r.next()){var o=(a=a.value).video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1),n.has(o)||n.set(o,new un);var s=n.get(o);s.push(e,a),s.size()===i&&(t=Math.max(t,o))}}})),t?n.get(t):e}(t);var o=function(e,t){for(var n=(t=l(t)).next();!n.done;n=t.next())if((n=n.value)==Bn||n==Fn){if(1==(e=dn(e,n)).size())return e.keys()[0]}else if(n==Un)break;return function(e){var t="",n=1/0;return e.forEach((function(e,i){for(var r=0,a=0,o=(i=l(i)).next();!o.done;o=i.next())r+=o.value.bandwidth||0,++a;(r/=a)<n&&(t=e,n=r)})),t}(e)}(t,r);e.variants=e.variants.filter((function(e){return hn(e)==o}))}function dn(e,t){var n=0,i=new un;return e.forEach((function(e,r){for(var a=0,o=0,s=l(r),u=s.next();!u.done;u=s.next())(u=u.value).decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);(a/=o)>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)})),i}function hn(e){var t="";e.video&&(t=Kt(e.video.codecs));var n="";return e.audio&&(n=Kt(e.audio.codecs)),t+"-"+n}function fn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function pn(e,t,n){for(var i=!1,r=(e=l(e)).next();!r.done;r=e.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=fn(r,t,n),a!=r.allowedByApplication&&(i=!0)}return i}function gn(e,t){return L((function(n){return 1==n.g?A(n,vn(t,0<t.offlineSessionIds.length),2):(En(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return zt(Ht(e.mimeType,e.codecs))}))}(t),A(n,function(e){var t,n,i,r,a,o,s;return L((function(u){switch(u.g){case 1:t=[],n=l(e.imageStreams),i=n.next();case 2:if(i.done){u.A(4);break}if(r=i.value,a=r.mimeType,Vn.has(a)){u.A(5);break}if(!(o=Hn.get(a))){Vn.set(a,!1),u.A(5);break}return A(u,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(o),7);case 7:s=u.h,Vn.set(a,s);case 5:Vn.get(a)&&t.push(r),i=n.next(),u.A(2);break;case 4:e.imageStreams=t,b(u)}}))}(t),0))}))}function vn(e,t){return L((function(n){if(1==n.g)return A(n,mn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=bn(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");n=bn(n=Qe("video",i)),i=An(i=Qe("audio",i));var r=jt(t.mimeType,i,"audio");if(!Q(r))return!1;n=[n,i].join()}if(!Q(i=jt(t.mimeType,n,"video")))return!1;t.codecs=n}if(n=e.audio){if(i=An(n.codecs),!Q(r=jt(n.mimeType,i,"audio")))return!1;n.codecs=i}return lt()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(xn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||xn(e),t)})),b(n)}))}function mn(e,t,n){var i,r,a,o,s,u,c,d,h,f;return L((function(p){if(e.some((function(e){return e.decodingInfos.length})))return p.return();for(i=navigator.mediaCapabilities,r=[],a=function(e,t){var n;return L((function(r){return 1==r.g?(E(r,2),A(r,i.decodingInfo(t),4)):2!=r.g?(n=r.h,e.decodingInfos.push(n),k(r,0)):(T(r),JSON.stringify(t),void b(r))}))},o=l(e),s=o.next();!s.done;s=o.next())for(u=s.value,c=yn(u,t,n),d=l(c),h=d.next();!h.done;h=d.next())f=h.value,r.push(a(u,f));return A(p,Promise.all(r),0)}))}function yn(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");a=bn(a=Qe("video",o)),o=Qe("audio",o),o=jt(r.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(a=bn(a),a=jt(r.mimeType,a,"video"),n.video={contentType:a,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(a=An(i.codecs),a=jt(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],a=new Map;for(var s=(o=l(o)).next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]),a.get(u.keySystem).push(u)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var c=(u=l(a.keys())).next();!c.done;c=u.next()){var d=c.value;c=Object.assign({},n);var h=a.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},s=(h=l(h)).next();!s.done;s=h.next()){if((s=s.value).initData&&s.initData.length){for(var f=new Set,p=l(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),s.persistentStateRequired&&(d.persistentState="required"),s.sessionType&&(d.sessionTypes=[s.sessionType]),i&&(d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}),r&&(d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness})}c.keySystemConfiguration=d,e.push(c)}return e}function An(e){return ut()&&"ac-3"==e.toLowerCase()?"ec-3":e}function bn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function En(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!_n(n,e.audio)||t&&e&&e.video&&!_n(t,e.video))}))}function _n(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function kn(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o),a&&s.push(a);var u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var d=new Set;if(t)for(var h=l(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(f=(h=l(n.roles)).next();!f.done;f=h.next())d.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function Tn(e){return{id:e.id,active:!1,type:Ze,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Sn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function wn(e){return e.__shaka_id||(e.__shaka_id=Nn++),e.__shaka_id}function Cn(e){var t=Rn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function In(e){var t=Rn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Rn(e){return{id:wn(e),active:!1,type:"",bandwidth:0,language:nn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Dn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Ln(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=l(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(e=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,u(e))):i.get(Math.min.apply(Math,u(n)))}function Pn(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var s=sn(nn(t),e.map((function(e){return e.language})));s&&(r=e.filter((function(e){return nn(e.language)==s})))}if(r=r.filter((function(e){return e.forced==i})),n){if((e=On(r,n)).length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(Ye,[]),e.length?On(r,e[0]):r}function On(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function xn(e){var t=[];return e.audio&&t.push(Mn(e.audio)),e.video&&t.push(Mn(e.video)),t.join(", ")}function Mn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(n=un.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},n.get=function(e){return(e=this.g[e])?e.slice():null},n.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},n.forEach=function(e){for(var t in this.g)e(t,this.g[t])},n.size=function(){return Object.keys(this.g).length},n.keys=function(){return Object.keys(this.g)};var Nn=0,Bn="smooth",Fn="powerEfficient",Un="bandwidth",Vn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Hn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function jn(){var e=this;this.l=null,this.o=!1,this.i=new j,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.o){e.i=new j,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}})),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new at((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t)}}))}function Kn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Gn(e,t,n,i){return e&&(t=t.filter((function(t){return fn(t,e,{width:i,height:n})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(n=jn.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},n.init=function(e){this.l=e},n.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight),t=Gn(this.g.restrictions,this.m,t,n),n=this.i.getBandwidthEstimate(Kn(this)),this.m.length&&!t.length&&(t=[(t=Gn(null,this.m,1/0,1/0))[0]]);for(var i=t[0]||null,r=0;r<t.length;r++){for(var a=t[r],o=isNaN(this.u)?1:Math.abs(this.u),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:1/0},u=r+1;u<t.length;u++)if(a.bandwidth!=t[u].bandwidth){l=t[u];break}o=o*l.bandwidth/this.g.bandwidthUpgradeTarget,n>=s&&n<=o&&i.bandwidth!=a.bandwidth&&(i=a)}return this.s=Date.now(),i},n.enable=function(){this.o=!0},n.disable=function(){this.o=!1},n.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.B=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(Kn(this)),e&&this.l(e)}},n.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Kn(this))},n.setVariants=function(e){this.m=e},n.playbackRateChanged=function(e){this.u=e},n.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.N(Wn)})),this.h.observe(this.j))},n.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},U("shaka.abr.SimpleAbrManager",jn),jn.prototype.configure=jn.prototype.configure,jn.prototype.setMediaElement=jn.prototype.setMediaElement,jn.prototype.playbackRateChanged=jn.prototype.playbackRateChanged,jn.prototype.setVariants=jn.prototype.setVariants,jn.prototype.getBandwidthEstimate=jn.prototype.getBandwidthEstimate,jn.prototype.segmentDownloaded=jn.prototype.segmentDownloaded,jn.prototype.disable=jn.prototype.disable,jn.prototype.enable=jn.prototype.enable,jn.prototype.chooseVariant=jn.prototype.chooseVariant,jn.prototype.init=jn.prototype.init,jn.prototype.stop=jn.prototype.stop;var Wn=1;function Yn(e,t){this.g=e,this.h=t}function zn(e,t){var n=new Yn(5,0),i=Xn,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function qn(e,t,n,i){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function $n(e,t,n,i){G([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}Yn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Xn=null;function Qn(e,t){for(this.h=e,this.g=new Set([e]),t=(e=l(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function Jn(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&Zn(n,i)&&ei(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Zn(e=e.video,t=t.video)&&ei(e.roles,t.roles))),!n}function Zn(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return Wt(e)[0]})),t=t.codecs.split(",").map((function(e){return Wt(e)[0]})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ei(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=l(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function ti(e){this.g=e,this.h=new ni(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ni(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function ii(){this.g=oi,this.h=(new Map).set(oi,2).set(ai,1)}function ri(e,t,n){e.h.set(oi,n).set(ai,t)}U("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Qn.prototype.add=function(e){return!!Jn(this.h,e)&&(this.g.add(e),!0)},Qn.prototype.values=function(){return this.g.values()},ti.prototype.create=function(e){var t=this,n=e.filter((function(e){return Jn(t.g,e)}));return n.length?new Qn(n[0],n):this.h.create(e)},ni.prototype.create=function(e){var t=[];t=function(e,t){t=nn(t);var n=sn(t,e.map((function(e){return on(e)})));return n?e.filter((function(e){return n==on(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&((e=Ln(t,this.g)).length&&(t=e)),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new Qn(t[0]),n=(t=l(t)).next();!n.done;n=t.next())n=n.value,Jn(e.h,n)&&e.add(n);return e};var ai=0,oi=1;function si(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function li(e){var t,n;return L((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new De(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),A(i,new Promise((function(e){new at(e).N(n/1e3)})),2))}e.h*=e.m,b(i)}))}function ui(e,t){this.promise=e,this.i=t,this.g=!1}function ci(e){return new ui(Promise.reject(e),(function(){return Promise.resolve()}))}function di(){var e=Promise.reject(new De(2,7,7001));return e.catch((function(){})),new ui(e,(function(){return Promise.resolve()}))}function hi(e){return new ui(Promise.resolve(e),(function(){return Promise.resolve()}))}function fi(e){return new ui(e,(function(){return e.catch((function(){}))}))}function pi(e){return new ui(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function gi(t,n){if(n)if(n instanceof Map)for(var i=l(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function vi(e){var t,n=new gi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ui.prototype.abort=function(){return this.g=!0,this.i()},ui.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ui.prototype.Y=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new nt,o=new De(2,7,7001);return this.promise.then(n(!0),n(!1)),new ui(a,(function(){return i()}))},U("shaka.util.AbortableOperation",ui),ui.prototype.chain=ui.prototype.Y,ui.prototype.finally=ui.prototype.finally,ui.all=pi,ui.prototype.abort=ui.prototype.abort,ui.notAbortable=fi,ui.completed=hi,ui.aborted=di,ui.failed=ci,gi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},gi.prototype.stopImmediatePropagation=function(){this.g=!0},gi.prototype.stopPropagation=function(){},U("shaka.util.FakeEvent",gi);var mi={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function yi(){this.ca=new un,this.Wc=this}function Ai(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function bi(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ei(){this.g=[]}function _i(e,t){e.g.push(t.finally((function(){ee(e.g,t)})))}function ki(e,t,n){yi.call(this),this.i=!1,this.m=new Ei,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function Ti(e,t,n,i){n=n||Di;var r=Li[e];(!r||n>=r.priority)&&(Li[e]={priority:n,jg:t,kg:void 0!==i&&i})}function Si(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function wi(e,t,n,i,r,a,o){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var s=new Pe(n.uris[r]),l=s.Ea,u=!1;l||(Oe(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c=(l=Li[l])?l.jg:null;if(!c)return ci(new De(2,1,1e3,s));var d,h=l.kg,f=null,p=null,g=!1,v=!1;return fi(li(i)).Y((function(){if(e.i)return di();d=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){f&&f.stop(),p&&p.N(s/1e3),e.l&&t==Ri&&(e.l(n,i),u=!0,o.g=r)}),(function(i){e.j&&e.j(i,n,t),v=!0}));if(!h)return i;var a=n.retryParameters.connectionTimeout;a&&(f=new at((function(){g=!0,i.abort()}))).N(a/1e3);var s=n.retryParameters.stallTimeout;return s&&(p=new at((function(){g=!0,i.abort()}))),i})).Y((function(i){f&&f.stop(),p&&p.stop(),null==i.timeMs&&(i.timeMs=Date.now()-d);var r={response:i,Yf:u};return!v&&e.j&&e.j(i.headers,n,t),r}),(function(s){if(f&&f.stop(),p&&p.stop(),e.s){var l=null,u=0;s instanceof De&&(l=s,1001==s.code&&(u=s.data[1])),e.s(n,l,u,g)}if(e.i)return di();if(g&&(s=new De(1,1,1003,n.uris[r],t)),s instanceof De){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return l=new gi("retry",l=(new Map).set("error",s)),e.dispatchEvent(l),r=(r+1)%n.uris.length,wi(e,t,n,i,r,s,o)}throw s}))}function Ci(){this.g=0}function Ii(e,t,n){ui.call(this,e,t),this.h=n}yi.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},yi.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},yi.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),n=(t=l(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Wc,e.currentTarget=this.Wc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},yi.prototype.release=function(){this.ca=null},Ei.prototype.destroy=function(){for(var e=[],t=l(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},g(ki,yi),(n=ki.prototype).je=function(e){this.o=e},n.lg=function(e){this.g.add(e)},n.Bg=function(e){this.g.delete(e)},n.rf=function(){this.g.clear()},n.mg=function(e){this.h.add(e)},n.Cg=function(e){this.h.delete(e)},n.tf=function(){this.h.clear()},n.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),yi.prototype.release.call(this),this.m.destroy()},n.request=function(e,t){var n=this,i=new Ci;if(this.i){var r=Promise.reject(new De(2,7,7001));return r.catch((function(){})),new Ii(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ai(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Ai(t.uris),r=function(e,t,n){for(var i=hi(void 0),r={},a=(e=l(e.g)).next();!a.done;r={sd:r.sd},a=e.next())r.sd=a.value,i=i.Y(function(e){return function(){return n.body&&(n.body=we(n.body)),e.sd(t,n)}}(r));return i.Y(void 0,(function(e){if(e instanceof De&&7001==e.code)throw e;throw new De(2,1,1006,e)}))}(this,e,t);var a=r.Y((function(){return wi(n,e,t,new si(t.retryParameters,!1),0,null,i)})),o=a.Y((function(t){return function(e,t,n){for(var i=hi(void 0),r={},a=(e=l(e.h)).next();!a.done;r={td:r.td},a=e.next())r.td=a.value,i=i.Y(function(e){return function(){var i=n.response;return i.data&&(i.data=we(i.data)),e.td(t,i)}}(r));return i.Y((function(){return n}),(function(e){var t=2;if(e instanceof De){if(7001==e.code)throw e;t=e.severity}throw new De(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;r.promise.then((function(){u=Date.now()-s}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=o.Y((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=u,r.timeMs+=i,t.Yf||!n.l||r.fromCache||e!=Ri||n.l(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Ii(d.promise,(function(){return d.abort()}),i),_i(this.m,r),r},U("shaka.net.NetworkingEngine",ki),ki.prototype.request=ki.prototype.request,ki.prototype.destroy=ki.prototype.destroy,ki.makeRequest=Si,ki.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},ki.prototype.clearAllResponseFilters=ki.prototype.tf,ki.prototype.unregisterResponseFilter=ki.prototype.Cg,ki.prototype.registerResponseFilter=ki.prototype.mg,ki.prototype.clearAllRequestFilters=ki.prototype.rf,ki.prototype.unregisterRequestFilter=ki.prototype.Bg,ki.prototype.registerRequestFilter=ki.prototype.lg,ki.unregisterScheme=function(e){delete Li[e]},ki.registerScheme=Ti,ki.prototype.setForceHTTPS=ki.prototype.je,ki.NumBytesRemainingClass=Ci,g(Ii,ui),ki.PendingRequest=Ii;var Ri=1;ki.RequestType={MANIFEST:0,SEGMENT:Ri,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var Di=3;ki.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Di};var Li={};function Pi(e){this.g=!1,this.h=new nt,this.i=e}function Oi(e,t){if(e.g){if(t instanceof De&&7003==t.code)throw t;throw new De(2,7,7003,t)}}function xi(){this.g=new un}function Mi(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Ni;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Ni=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}Pi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(n=xi.prototype).release=function(){this.nb(),this.g=null},n.C=function(e,t,n,i){this.g&&(e=new Mi(e,t,n,i),this.g.push(t,e))},n.ma=function(e,t,n,i){var r=this;this.C(e,t,(function i(a){r.zc(e,t,i),n(a)}),i)},n.zc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=l(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.zc(),this.g.remove(t,r))},n.nb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,u(t.g[e]));for(n=(t=l(n)).next();!n.done;n=t.next())n.value.zc();this.g.g={}}},U("shaka.util.EventManager",xi),xi.prototype.removeAll=xi.prototype.nb,xi.prototype.unlisten=xi.prototype.zc,xi.prototype.listenOnce=xi.prototype.ma,xi.prototype.listen=xi.prototype.C,xi.prototype.release=xi.prototype.release,Mi.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Ni=void 0;function Bi(e,t){for(var n=[],i=(e=l(e)).next();!i.done;i=e.next())n.push(t(i.value));return n}function Fi(e){for(var t=new Map,n=l(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Ui(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Vi(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=l(e)).next();!n.done;n=e.next()){var i=l(n.value);if(n=i.next().value,i=i.next().value,!t.has(n))return!1;if((n=t.get(n))!=i||null==n)return!1}return!0}function Hi(e,t){this.S=Ie(e),this.h=t==Ki,this.g=0}function ji(){return new De(2,3,3e3)}(n=Hi.prototype).ga=function(){return this.g<this.S.byteLength},n.Z=function(){return this.g},n.Gf=function(){return this.S.byteLength},n.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){throw ji()}},n.$d=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw ji()}},n.K=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw ji()}},n.Pe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw ji()}},n.$a=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0);else t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch(e){throw ji()}if(2097151<t)throw new De(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},n.Za=function(e){if(this.g+e>this.S.byteLength)throw ji();var t=Ce(this.S,this.g,e);return this.g+=e,t},n.skip=function(e){if(this.g+e>this.S.byteLength)throw ji();this.g+=e},n.sg=function(e){if(this.g<e)throw ji();this.g-=e},n.seek=function(e){if(0>e||e>this.S.byteLength)throw ji();this.g=e},n.sc=function(){for(var e=this.g;this.ga()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=Ce(this.S,e,this.g-e),this.g+=1,At(e)},U("shaka.util.DataViewReader",Hi),Hi.prototype.readTerminatedString=Hi.prototype.sc,Hi.prototype.seek=Hi.prototype.seek,Hi.prototype.rewind=Hi.prototype.sg,Hi.prototype.skip=Hi.prototype.skip,Hi.prototype.readBytes=Hi.prototype.Za,Hi.prototype.readUint64=Hi.prototype.$a,Hi.prototype.readInt32=Hi.prototype.Pe,Hi.prototype.readUint32=Hi.prototype.K,Hi.prototype.readUint16=Hi.prototype.$d,Hi.prototype.readUint8=Hi.prototype.Ra,Hi.prototype.getLength=Hi.prototype.Gf,Hi.prototype.getPosition=Hi.prototype.Z,Hi.prototype.hasMoreData=Hi.prototype.ga;var Ki=1;function Gi(){this.i=[],this.h=[],this.g=!1}function Wi(e){for(var t=Qi(e);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function Yi(e){for(var t=Qi(e),n=e.reader.K(),i=0;i<n&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function zi(e){var t=Qi(e);for(e.reader.skip(78);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function qi(e){return function(t){e(t.reader.Za(t.reader.S.byteLength-t.reader.Z()))}}function $i(e){for(var t=0,n=(e=l(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Xi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Qi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Hi.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ki},(n=Gi.prototype).box=function(e,t){return e=$i(e),this.i[e]=Ji,this.h[e]=t,this},n.P=function(e,t){return e=$i(e),this.i[e]=Zi,this.h[e]=t,this},n.stop=function(){this.g=!0},n.parse=function(e,t,n){for(e=new Hi(e,0),this.g=!1;e.ga()&&!this.g;)this.qc(0,e,t,n)},n.qc=function(e,t,n,i){var r=t.Z();if(i&&r+8>t.S.byteLength)this.g=!0;else{var a=t.K(),o=t.K(),s=Xi(o),l=!1;switch(a){case 0:a=t.S.byteLength-r;break;case 1:if(i&&t.Z()+8>t.S.byteLength)return void(this.g=!0);a=t.$a(),l=!0}var u=this.h[o];if(u){var c=null,d=null;if(this.i[o]==Zi){if(i&&t.Z()+4>t.S.byteLength)return void(this.g=!0);c=(d=t.K())>>>24,d&=16777215}o=r+a,n&&o>t.S.byteLength&&(o=t.S.byteLength),i&&o>t.S.byteLength?this.g=!0:(i=o-t.Z(),u({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t=new Hi(t=0<i?t.Za(i):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:l}))}else t.skip(Math.min(r+a-t.Z(),t.S.byteLength-t.Z()))}},U("shaka.util.Mp4Parser",Gi),Gi.headerSize=Qi,Gi.typeToString=Xi,Gi.allData=qi,Gi.visualSampleEntry=zi,Gi.sampleDescription=Yi,Gi.children=Wi,Gi.prototype.parseNext=Gi.prototype.qc,Gi.prototype.parse=Gi.prototype.parse,Gi.prototype.stop=Gi.prototype.stop,Gi.prototype.fullBox=Gi.prototype.P,Gi.prototype.box=Gi.prototype.box;var Ji=0,Zi=1;function er(e){var t=this;this.g=[],this.h=[],this.data=[],(new Gi).box("moov",Wi).box("moof",Wi).P("pssh",(function(e){if(!(1<e.version)){var n=Ce(e.reader.S,-12,e.size);if(t.data.push(n),t.g.push(Dt(e.reader.Za(16))),0<e.version){n=e.reader.K();for(var i=0;i<n;i++){var r=Dt(e.reader.Za(16));t.h.push(r)}}}})).parse(e)}function tr(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var o=new Uint8Array(a),s=Ie(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,1>i?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,0<i)for(s.setUint32(u,n.size),u+=4,n=(t=l(n)).next();!n.done;n=t.next())n=Rt(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,r),o.set(e,u+4),o}function nr(e,t){return 1!=(e=rr(e,t)).length?null:e[0]}function ir(e,t,n){return 1!=(e=ar(e,t,n)).length?null:e[0]}function rr(e,t){for(var n=[],i=(e=l(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.tagName==t&&n.push(i);return n}function ar(e,t,n){for(var i=[],r=(e=l(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function or(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function sr(e,t,n){for(var i=(t=l(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function lr(e){return Array.from(e.childNodes).every(ur)?e.textContent.trim():null}function ur(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function cr(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function dr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function hr(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function fr(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function pr(e){return 0==(e=Number(e))%1?e:null}function gr(e){return 0==(e=Number(e))%1&&0<e?e:null}function vr(e){return 0==(e=Number(e))%1&&0<=e?e:null}function mr(e){return e=Number(e),isNaN(e)?null:e}function yr(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Ar(e,t){var n=new DOMParser,i=Er.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function br(e,t){try{return Ar(At(e),t)}catch(e){return null}}var Er=new it((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function _r(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new xi,this.i=new Map,this.B=[],this.o=new nt,this.h=null,this.m=function(t){n.o.reject(t),e.onError(t)},this.ia=new Map,this.ba=new Map,this.O=new at((function(){return function(e){var t=e.ia,n=e.ba;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.m(new De(2,6,6014)),e.D.cd(Ui(n))}(n)})),this.L=!1,this.J=[],this.M=!1,this.ca=new at((function(){!function(e){e.i.forEach((function(t,n){var i=t.Vd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Vd=r)}))}(n)})).Ca(t),this.o.catch((function(){})),this.j=new Pi((function(){return function(e){return L((function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.o.reject(),e.ca.stop(),e.ca=null,e.O.stop(),e.O=null,A(t,Mr(e),2);case 2:if(!e.l){t.A(3);break}return E(t,4),A(t,e.l.setMediaKeys(null),6);case 6:k(t,5);break;case 4:T(t);case 5:e.l=null;case 3:e.g=null,e.G.clear(),e.u=null,e.B=[],e.h=null,e.m=function(){},e.D=null,e.V=!1,e.F=null,b(t)}}))}(n)})),this.V=!1,this.F=null}function kr(e,t,n){return e.B=n,e.L=0<n.length,Tr(e,t)}function Tr(t,n){var i,r,a,o,s,u,c,d,h,f,p,g;return L((function(v){if(1==v.g){if(i=function(t){if(t=Fi(t.h.clearKeys),0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=t;22!=r.length&&(r=Ct(Rt(t),!1)),22!=(t=e).length&&(t=Ct(Rt(e),!1)),e={kty:"oct",kid:r,k:t},n.push(e),i.push(e.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:Ce(_t(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}(t))for(r=l(n),a=r.next();!a.done;a=r.next())(o=a.value).video&&(o.video.drmInfos=[i]),o.audio&&(o.audio.drmInfos=[i]);for((s=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(u=Fi(t.h.servers),function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=l(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(n,u)),c=l(n),a=c.next();!a.done;a=c.next())for(d=a.value,h=Br(d),f=l(h),p=f.next();!p.done;p=f.next())Vr(p.value,Fi(t.h.servers),Fi(t.h.advanced||{}),t.h.keySystemsMapping);return A(v,mn(n,t.L,t.V),2)}return s||Object.keys(t.h.servers).length?(g=Lr(t,void 0,n),v.return(s?g:g.catch((function(){})))):(t.W=!0,v.return(Promise.resolve()))}))}function Sr(e){var t;return L((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.F){n.A(2);break}return A(n,e.F,3);case 3:return Oi(e.j),n.return();case 2:return E(n,4),e.F=e.l.setMediaKeys(e.u),A(n,e.F,6);case 6:k(n,5);break;case 4:t=T(n),e.m(new De(2,6,6003,t.message));case 5:Oi(e.j),b(n)}}))}function wr(e){var t,n;return L((function(i){switch(i.g){case 1:if(!e.u||!e.g)return i.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){i.A(2);break}return t=Si([e.g.serverCertificateUri],e.h.retryParameters),E(i,3),A(i,e.D.kb.request(5,t).promise,5);case 5:n=i.h,e.g.serverCertificate=Ce(n.data),k(i,4);break;case 3:throw new De(2,6,6017,T(i));case 4:if(e.j.g)return i.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(E(i,6),A(i,e.u.setServerCertificate(e.g.serverCertificate),8)):i.return();case 8:k(i,0);break;case 6:throw new De(2,6,6004,T(i).message)}}))}function Cr(e){for(var t=(e.g?e.g.initData:[])||[],n=l(t),i=n.next();!i.done;i=n.next())Ir(e,(i=i.value).initDataType,i.initData);for(i=(n=l(e.B)).next();!i.done;i=n.next())Pr(e,i.value);return t.length||e.B.length||e.o.resolve(),e.o}function Ir(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=l(i)).next();!r.done;r=i.next())if(Te(n,r.value.initData)&&!pt("Tizen 2"))return;0<e.i.size&&Fr(e)&&(e.o.resolve(),e.o=new nt,e.o.catch((function(){}))),function(e,t,n,i){try{var r=e.u.createSession(i)}catch(t){return void e.m(new De(2,6,6005,t.message))}e.s.C(r,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Or(e,t)})),e.s.C(r,"keystatuseschange",(function(t){return xr(e,t)})),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Vd:1/0,Ja:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof De||(t=new De(2,6,6016,n)),void e.m(t)}e.h.logLicenseExchange&&Ct(n),r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.m(new De(2,6,6006,t.message,t,i))}}))}(e,t,n,e.g.sessionType)}}function Rr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Dr(e){return e=Bi(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function Lr(e,t,n){var i,r,a,o,s,u,c,d,h,f,p,g,v;return L((function(m){switch(m.g){case 1:if(i=new Map,n.length){r=function(e,t,n){for(var i=l(t),r=i.next();!r.done;r=i.next()){var a=l(Br(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new De(2,6,6e3);for(i={},e=l(e.h.preferredKeySystems),r=e.next();!r.done;i={qd:i.qd},r=e.next())for(i.qd=r.value,a=l(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.qd}}(i)))return r.keySystemAccess;for(e=l([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,a=l(t),r=a.next();!r.done;r=a.next()){var o=l(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){var u=l(r=n.get(s.keySystemAccess.keySystem));for(r=u.next();!r.done;r=u.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}(e,n,i),m.A(2);break}return A(m,function(e,t){var n,i,r,a,o,s,u,c,d,h,f,p,g,v,m;return L((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new De(2,6,6e3);for(i=l(t.values()),r=i.next();!r.done;r=i.next())0==(a=r.value).audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=l(e.h.preferredKeySystems),s=o.next();case 2:if(s.done){y.A(4);break}if(u=s.value,!t.has(u)){y.A(3);break}return c=t.get(u),E(y,6),A(y,navigator.requestMediaKeySystemAccess(u,[c]),8);case 8:return n=y.h,y.return(n);case 6:T(y);case 7:Oi(e.j);case 3:s=o.next(),y.A(2);break;case 4:d=l([!0,!1]),h=d.next();case 9:if(h.done){y.A(11);break}f=h.value,p=l(t.keys()),s=p.next();case 12:if(s.done){h=d.next(),y.A(9);break}if(g=s.value,v=t.get(g),m=v.drmInfos.some((function(e){return!!e.licenseServerUri})),m!=f){y.A(13);break}return E(y,15),A(y,navigator.requestMediaKeySystemAccess(g,[v]),17);case 17:return n=y.h,y.return(n);case 15:T(y);case 16:Oi(e.j);case 13:s=p.next(),y.A(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:r=m.h;case 2:if(!(a=r))throw new De(2,6,6001);for(Oi(e.j),E(m,4),e.G.clear(),o=a.getConfiguration(),s=o.audioCapabilities||[],u=o.videoCapabilities||[],c=l(s),d=c.next();!d.done;d=c.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(f=l(u),d=f.next();!d.done;d=f.next())p=d.value,e.G.add(p.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=i.get(a.keySystem),_=[],S=[],w=[],C=[],I=new Set;Ur(b,_,w,S,C,I);var R=e.L?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:_[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||R,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:w[0],serverCertificateUri:S[0],initData:C,keyIds:I},_=(b=l(b)).next();!_.done;_=b.next())(_=_.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=_.distinctiveIdentifierRequired),_.persistentStateRequired&&(y.persistentStateRequired=_.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),_=[],S=[],w=[],C=[],I=new Set,Ur(y.drmInfos,_,w,S,C,I),b={keySystem:b,licenseServerUri:_[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:w[0],serverCertificateUri:S[0],initData:C,keyIds:I};if(e.g=b,!e.g.licenseServerUri)throw new De(2,6,6012,e.g.keySystem);return A(m,a.createMediaKeys(),6);case 6:return g=m.h,Oi(e.j),e.u=g,e.W=!0,A(m,wr(e),7);case 7:Oi(e.j),k(m,0);break;case 4:if(v=T(m),Oi(e.j,v),e.g=null,e.G.clear(),v instanceof De)throw v;throw new De(2,6,6002,v.message)}}))}function Pr(e,t){var n,i,r,a,o;return L((function(s){switch(s.g){case 1:try{n=e.u.createSession("persistent-license")}catch(t){return i=new De(2,6,6005,t.message),e.m(i),s.return(Promise.reject(i))}return e.s.C(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Or(e,t)})),e.s.C(n,"keystatuseschange",(function(t){return xr(e,t)})),r={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},e.i.set(n,r),E(s,2),A(s,n.load(t),4);case 4:return a=s.h,Oi(e.j),a?(r.loaded=!0,Fr(e)&&e.o.resolve(),s.return(n)):(e.i.delete(n),e.m(new De(2,6,6013)),s.return(Promise.resolve()));case 2:o=T(s),Oi(e.j,o),e.i.delete(n),e.m(new De(2,6,6005,o.message));case 3:return s.return(Promise.resolve())}}))}function Or(e,t){var n,i,r,a,o,s,u,c,d,h,f,p;L((function(g){switch(g.g){case 1:return n=t.target,e.h.logLicenseExchange&&Ct(t.message),i=e.i.get(n),r=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=Si([r],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,i&&(o.initData=i.initData,o.initDataType=i.initDataType),Rr(e.g.keySystem)&&function(e){var t=bt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=l((t=Ar(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=It(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),E(g,2),A(g,e.D.kb.request(2,o).promise,4);case 4:u=g.h,k(g,3);break;case 2:return c=T(g),d=new De(2,6,6007,c),e.m(d),i&&i.Ja&&i.Ja.reject(d),g.return();case 3:return e.j.g?g.return():(e.H+=(Date.now()-s)/1e3,e.h.logLicenseExchange&&Ct(u.data),E(g,5),A(g,n.update(u.data),7));case 7:k(g,6);break;case 5:return h=T(g),f=new De(2,6,6008,h.message),e.m(f),i&&i.Ja&&i.Ja.reject(f),g.return();case 6:if(e.j.g)return g.return();p=new gi("drmsessionupdate"),e.D.onEvent(p),i&&(i.Ja&&i.Ja.resolve(),new at((function(){i.loaded=!0,Fr(e)&&e.o.resolve()})).N(jr)),b(g)}}))}function xr(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach((function(t,r){if("string"==typeof r){var a=r;r=t,t=a}if(Rr(e.g.keySystem)&&16==r.byteLength&&(navigator.userAgent.match(/Edge?\//)||ht())){var o=(a=Ie(r)).getUint32(0,!0),s=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),r=Dt(r).slice(0,32),e.ia.set(r,t)}));var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Ja&&(e.i.delete(t),t.close().catch((function(){}))),Fr(e)&&(e.o.resolve(),e.O.N(Kr))}function Mr(e){var t;return L((function(n){return t=Array.from(e.i.entries()),e.i.clear(),A(n,Promise.all(t.map((function(t){var n=(t=l(t)).next().value,i=t.next().value;return L((function(t){return 1==t.g?(E(t,2),e.da||e.B.includes(n.sessionId)||"persistent-license"!==i.type?A(t,function(e){var t;return L((function(n){return 1==n.g?(t=new Promise((function(e,t){new at(t).N(Hr)})),E(n,2),A(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?k(n,0):(T(n),void b(n))}))}(n),5):A(t,n.remove(),5)):2!=t.g?k(t,0):(T(t),void b(t))}))}))),0)}))}function Nr(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=(e=l(e)).next();!i.done;i=e.next()){i=i.value;for(var r={},a=l(t),o=a.next();!o.done;r={Da:r.Da},o=a.next())if(o=o.value,i.keySystem==o.keySystem){r.Da=[],r.Da=r.Da.concat(i.initData||[]),r.Da=r.Da.concat(o.initData||[]),r.Da=r.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(r)),a=i.keyIds&&o.keyIds?new Set([].concat(u(i.keyIds),u(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r.Da,keyIds:a});break}}return n}function Br(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Fr(e){return function(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function Ur(e,t,n,i,r,a){for(var o={},s=(e=l(e)).next();!s.done;o={oa:o.oa},s=e.next()){if(o.oa=s.value,t.includes(o.oa.licenseServerUri)||t.push(o.oa.licenseServerUri),i.includes(o.oa.serverCertificateUri)||i.push(o.oa.serverCertificateUri),o.oa.serverCertificate&&(n.some(function(e){return function(t){return Te(t,e.oa.serverCertificate)}}(o))||n.push(o.oa.serverCertificate)),o.oa.initData){s={};for(var u=l(o.oa.initData),c=u.next();!c.done;s={Dc:s.Dc},c=u.next())s.Dc=c.value,r.some(function(e){return function(t){var n=e.Dc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Te(t.initData,n.initData)}}(s))||r.push(s.Dc)}if(o.oa.keyIds)for(u=(s=l(o.oa.keyIds)).next();!u.done;u=s.next())a.add(u.value)}}function Vr(t,n,i,r){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&(n=n.get(a)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),r[a]&&(t.keySystem=r[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}(n=_r.prototype).destroy=function(){return this.j.destroy()},n.configure=function(e){this.h=e},n.Yb=function(e){var t,n=this;return L((function(i){if(1==i.g)return n.u?(n.l=e,n.s.ma(n.l,"play",(function(){for(var e=l(n.J),t=e.next();!t.done;t=e.next())Or(n,t.value);n.M=!0,n.J=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.s.C(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Mr(n)})),(t=n.g.initData.find((function(e){return 0<e.initData.length})))||"com.apple.fps"!==n.g.keySystem||n.B.length?A(i,Sr(n),2):i.A(2)):(n.s.ma(e,"encrypted",(function(){n.m(new De(2,6,6010))})),i.return());Cr(n),t||n.B.length||n.h.parseInbandPsshEnabled||n.s.C(n.l,"encrypted",(function(e){return function(e,t){return L((function(n){if(1==n.g)return A(n,Sr(e),2);Ir(e,t.initDataType,Ce(t.initData)),b(n)}))}(n,e)})),b(i)}))},n.ic=function(){for(var e=1/0,t=this.i.keys(),n=(t=l(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Qc=function(){return Ui(this.ba)};var Hr=1,jr=5,Kr=.5,Gr=new it((function(){return we(new Uint8Array([0]))}));function Wr(){}function Yr(e,t,n,i){var r,a,o,s;return L((function(l){if(1==l.g)return i&&(r=$r[i.toLowerCase()])?l.return(r):(a=qr(e))&&(o=Xr[a])?l.return(o):i?l.A(2):A(l,zr(e,t,n),3);if(2!=l.g&&(i=l.h)&&(s=$r[i]))return l.return(s);throw new De(2,4,4e3,e)}))}function zr(e,t,n){var i,r,a;return L((function(o){return 1==o.g?((i=Si([e],n)).method="HEAD",A(o,t.request(0,i).promise,2)):(r=o.h,a=r.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}function qr(e){return 1==(e=new Pe(e).qa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}U("shaka.media.ManifestParser",Wr),Wr.unregisterParserByMime=function(e){delete $r[e]},Wr.registerParserByMime=function(e,t){$r[e]=t},Wr.registerParserByExtension=function(e,t){Xr[e]=t};var $r={},Xr={};function Qr(e,t,n,i,r){var a=Zr.value(),o=e.subarray(n.start,n.start+n.size),s=Ie(o),u=new Uint8Array(n.size+a.byteLength);for(u.set(o,0),(o=Ie(u)).setUint32(4,r),u.set(a,n.size),r=s.getUint32(4),o.setUint32(n.size+16,r),Jr(u,0,u.byteLength),r=new Uint8Array(e.byteLength+u.byteLength),n=lt()?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(u,n),r.set(a,n+u.byteLength),i=(e=l(i)).next();!i.done;i=e.next())Jr(r,(i=i.value).start,i.size+u.byteLength);return u=Ie(r,t.start),t=Qi(t),e=u.getUint32(t),u.setUint32(t,e+1),r}function Jr(e,t,n){0!=(t=(e=Ie(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Zr=new it((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function ea(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var l=s=!1,u="white",c="black",d=ta(i,r,s,l,u,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=na(i,r),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var v=g.l,m=g.i,y=g.j,A=g.h;v==s&&m==l&&y==u&&A==c||(d.payload&&e.nestedCues.push(d),d=ta(i,r,v,m,y,A),s=v,l=m,u=y,c=A),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=na(i,r),e.nestedCues.push(d)),d=ta(i,r,s,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function ta(e,t,n,i,r,a){return e=new ie(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function na(e,t){return(e=new ie(e,t,"")).lineBreak=!0,e}function ia(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function ra(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",oa(this)}function aa(e,t,n){return ea(new ie(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function oa(e){ua(e,0,15),e.g=1}function sa(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case ca:i=pa.has(n)?pa.get(n):String.fromCharCode(n);break;case da:i=ga.get(n);break;case ha:e.i[e.g].pop(),i=va.get(n);break;case fa:e.i[e.g].pop(),i=ma.get(n)}i&&e.i[e.g].push(new ia(i,e.m,e.j,e.o,e.l))}}function la(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function ua(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var ca=0,da=1,ha=2,fa=3,pa=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),ga=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),va=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),ma=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function ya(e,t){this.h=_a,this.o=new ra(e,t),this.i=new ra(e,t),this.l=new ra(e,t),this.g=this.i,this.j=0,this.m=null}function Aa(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Ta&&e.h!==Sa&&(r=aa(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,ua(n,0,15),(n=e.l).g=0<n.h?n.h:0,ua(n,0,15),i.g=15),e.h=Ta,i.h=t,r}function ba(e){e.h=ka,e.g=e.l,e.g.h=0}function Ea(e){Y("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Sa}var _a=0,ka=1,Ta=3,Sa=4,wa="black green blue cyan red yellow magenta black".split(" "),Ca="white green blue cyan red yellow magenta white_italics".split(" ");function Ia(){this.l=!1,this.B=this.F=0,this.D=Na,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Ra(this)}function Ra(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Da())}function Da(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function La(e,t){Pa(e)&&(e.i[e.h][e.g]=new ia(t,e.u,e.o,e.m,e.s),e.g++)}function Pa(e){var t=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function Oa(e,t,n){var i=new ie(e.j,t,"");return i.textAlign=e.D===xa?"left":e.D===Ma?"right":oe,(n=ea(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Ia.prototype.isVisible=function(){return this.l};var xa=0,Ma=1,Na=2;function Ba(){this.i=[],this.h=null,this.g=0}function Fa(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Ua(e.h)),e.h=null,e.g=0))}function Ua(e){this.g=0,this.h=e}function Va(e){if(!e.ga())throw new De(2,2,3e3);return e.h[e.g++]}function Ha(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function ja(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=Va(t).value,t=null;for(var r=(n=l(Ka(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Oa(r,i,e.i)),Ra(r);return t}if(137===n)for(n=(t=l(Ka(e,t=Va(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=Va(t).value,t=null,r=(n=l(Ka(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Oa(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=Va(t).value,t=null,r=(n=l(Ka(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=Oa(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return Ga(e,t=Va(t).value,i);if(143===n)return i=Ga(e,255,i),Wa(e),i;if(144===n)t.skip(1),i=Va(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i));else if(145===n)i=Va(t).value,n=Va(t).value,t.skip(1),e.g&&(t=Ya((48&n)>>4,(12&n)>>2,3&n),e.g.s=Ya((48&i)>>4,(12&i)>>2,3&i),e.g.m=t);else if(146===n)i=Va(t).value,t=Va(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=Va(t).value,t.skip(1),e.g&&(e.g.D=3&i);else if(152<=n&&159>=n){if(n=(15&n)-8,!(r=null!==e.h[n])){var a=new Ia;a.j=i,e.h[n]=a}i=Va(t).value,Va(t),Va(t),a=Va(t).value;var o=Va(t).value;t=Va(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&a),t.B=1+(63&o),e.g=e.h[n]}}}return null}function Ka(e,t){for(var n=[],i=0;8>i;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function Ga(e,t,n){for(var i=null,r=(t=l(Ka(e,t))).next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=Oa(a,n,e.i)),e.h[r]=null}return i}function Wa(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Ya(e,t,n){var i={0:0,1:0,2:1,3:1};return qa[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}Ua.prototype.ga=function(){return this.g<this.h.length},Ua.prototype.Z=function(){return this.g},Ua.prototype.skip=function(e){if(this.g+e>this.h.length)throw new De(2,2,3e3);this.g+=e};var za=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),qa="black blue green cyan red magenta yellow white".split(" ");function $a(){this.h=[],this.g=[],this.i=new Ba,this.l=0,this.s=new Map([["CC1",new ya(0,0)],["CC2",new ya(0,1)],["CC3",new ya(1,0)],["CC4",new ya(1,1)]]),this.o=this.m=0,this.j=new Map,Xa(this)}function Xa(e){e.m=0,e.o=0;for(var t=(e=l(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,oa(t.i),oa(t.l),oa(t.o)}function Qa(e,t){var n=t.type;if(16==(112&t.xa)){var i=t.xa>>3&1;0===n?e.m=i:e.o=i}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.xa&&255===t.La||!t.xa&&!t.La||!Za(t.xa)||!Za(t.La))return 45<=++e.l&&Xa(e),null;if(e.l=0,t.xa&=127,t.La&=127,!t.xa&&!t.La)return null;if(e=null,16==(112&t.xa))e:{if(i=t.xa,e=t.La,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16==(240&i)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1];var r=(30&e)>>1;i="white";var a=!1;if(7>r?i=Ca[r]:7===r&&(a=!0),e=1==(1&e),n.h!==Sa){if(r=n.g,n.h===Ta&&t!==r.g){var o=1+t-r.h;la(r,o,1+r.g-r.h,r.h),ua(r,0,o-1),ua(r,t+1,15-t)}r.g=t,n.g.m=e,n.g.j=a,n.g.l=i,n.g.o="black"}}else if(17==(247&i)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",sa(n.g,ca,32),i=!1,"white_italics"===(t=Ca[(14&e)>>1])&&(t="white",i=!0),n.g.m=1==(1&e),n.g.j=i,n.g.l=t;else if(16==(247&i)&&32==(240&e)||23==(247&i)&&45==(255&e))t="black",0==(7&i)&&(t=wa[(14&e)>>1]),n.g.o=t;else if(17==(247&i)&&48==(240&e))sa(n.g,da,e);else if(18==(246&i)&&32==(224&e))sa(n.g,1&i?fa:ha,e);else if(20==(246&i)&&32==(240&e)){switch(e=t.pts,i=null,t.La){case 32:ba(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Aa(n,2,e);break;case 38:i=Aa(n,3,e);break;case 39:i=Aa(n,4,e);break;case 40:sa(n.g,ca,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=e;break;case 42:oa(n.o),Ea(n);break;case 43:Ea(n);break;case 44:t=n.i,i=null,n.h!==Sa&&(i=aa(t,n.j,e)),ua(t,0,15);break;case 45:t=n.g,n.h!==Ta?i=null:(i=aa(t,n.j,e),la(t,(a=t.g-t.h+1)-1,a,t.h),ua(t,0,a-1),ua(t,t.g,15-t.g),n.j=e);break;case 46:ua(n.l,0,15);break;case 47:t=null,n.h!==Sa&&(t=aa(n.i,n.j,e)),i=n.l,n.l=n.i,n.i=i,ba(n),n.j=e,i=t}e=i;break e}e=null}else i=t.La,sa(n.g,ca,t.xa),sa(n.g,ca,i);return e}function Ja(e,t){var n=[];try{for(;t.ga();){var i=Va(t).value,r=(224&i)>>5,a=31&i;if(7===r&&0!=a&&(r=63&Va(t).value),0!=r){e.j.has(r)||e.j.set(r,new Ha(r));for(var o=e.j.get(r),s=t.Z();t.Z()-s<a;){var l=Va(r=t),u=l.value,c=l.pts;if(16===u)u=u<<16|Va(r).value;if(0<=u&&31>=u){var d=c;if(o.g){var h=o.g;switch(r=null,u){case 8:!Pa(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.B-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(r=Oa(h,d,o.i)),h.h+1>=h.F){d=h;for(var f=0,p=1;16>p;p++,f++)d.i[f]=d.i[p];for(p=0;1>p;p++,f++)d.i[f]=Da()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(r=Oa(h,d,o.i)),h.i[h.h]=Da(),h.g=0;break;case 12:h.isVisible()&&(r=Oa(h,d,o.i)),Ra(h),(d=h).h=0,d.g=0}var g=r}else g=null}else if(128<=u&&159>=u)g=ja(o,r,u,c);else{if(4096<=u&&4127>=u)8<=(d=255&u)&&15>=d?r.skip(1):16<=d&&23>=d?r.skip(2):24<=d&&31>=d&&r.skip(3);else if(4224<=u&&4255>=u)128<=(d=255&u)&&135>=d?r.skip(4):136<=d&&143>=d&&r.skip(5);else if(32<=u&&127>=u)r=u,o.g&&La(o.g,127===r?"♪":String.fromCharCode(r));else if(160<=u&&255>=u)o.g&&La(o.g,String.fromCharCode(u));else if(4128<=u&&4223>=u){if(r=255&u,o.g)if(za.has(r)){var v=za.get(r);La(o.g,v)}else La(o.g,"_")}else 4256<=u&&4351>=u&&o.g&&La(o.g,160!=(255&u)?"_":"[CC]");g=null}(r=g)&&n.push(r)}}}}catch(e){if(!(e instanceof De&&3e3===e.code))throw e;Y("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Za(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function eo(){}function to(e,t){var n=null,i=null,r=null,a=e.K();return 1&t&&(r=e.$a()),2&t&&e.skip(4),8&t&&(n=e.K()),16&t&&(i=e.K()),{trackId:a,Ce:n,xf:i,th:r}}function no(e,t){return{we:1==t?e.$a():e.K()}}function io(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.K()}}function ro(e,t,n){var i=e.K(),r=[],a=null;1&n&&(a=e.K()),4&n&&e.skip(4);for(var o=0;o<i;o++){var s={ee:null,sampleSize:null,ed:null};256&n&&(s.ee=e.K()),512&n&&(s.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(s.ed=0==t?e.K():e.Pe()),r.push(s)}return{yh:i,Re:r,wf:a}}function ao(){this.j=new Map,this.i=this.h=0,this.g=oo}eo.prototype.init=function(){},eo.prototype.parse=function(){return[]},ao.prototype.init=function(e){function t(e){(e=e.name)in uo&&(n.g=uo[e])}var n=this,i=[],r=[];if((new Gi).box("moov",Wi).box("mvex",Wi).P("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.K(),t=t.K(),n.h=e,n.i=t})).box("trak",Wi).P("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.K(),i.push(e)})).box("mdia",Wi).P("mdhd",(function(e){e=io(e.reader,e.version),r.push(e.timescale)})).box("minf",Wi).box("stbl",Wi).P("stsd",Yi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",zi).box("sinf",Wi).box("frma",(function(e){(e=Xi(e=e.reader.K()))in uo&&(n.g=uo[e])})).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new De(2,2,2010);this.g==oo&&W("Unable to determine bitstream format for CEA parsing!"),i.forEach((function(e,t){n.j.set(e,r[t])}))},ao.prototype.parse=function(e){var t=this;if(this.g==oo)return[];var n=[],i=this.h,r=this.i,a=[],o=null,s=null,c=null,d=9e4;return(new Gi).box("moof",(function(e){o=e.start,Wi(e)})).box("traf",Wi).P("trun",(function(e){e=ro(e.reader,e.version,e.flags),a=e.Re,s=e.wf})).P("tfhd",(function(e){e=to(e.reader,e.flags),i=e.Ce||t.h,r=e.xf||t.i,e=e.trackId,t.j.has(e)&&(d=t.j.get(e))})).P("tfdt",(function(e){c=no(e.reader,e.version).we})).box("mdat",(function(e){if(null===c)throw new De(2,2,2010);e:{var h=e.reader,f=c,p=d,g=i,v=r,m=a,y=0,A=v;for(m.length&&(A=m[0].sampleSize||v),h.skip((o||0)+(s||0)-e.start-8);h.ga();){e=h.K();var b=h.Ra();switch(t.g){case so:b=6==(b&=31);break;case lo:b=39==(b=b>>1&63)||40==b;break;default:break e}if(b){b=0,m.length>y&&(b=m[y].ed||0),b=(f+b)/p;for(var E,_=[],k=h.Za(e-1),T=E=0;T<k.length;)2==E&&3==k[T]?(E=0,(k=[].concat(u(k))).splice(T,1),k=new Uint8Array(k)):0==k[T]?E++:E=0,T++;for(E=k,T=0;T<E.length;){for(k=0;255==E[T];)k+=255,T++;k+=E[T++];for(var S=0;255==E[T];)S+=255,T++;S+=E[T++],4==k&&_.push(E.subarray(T,T+S)),T+=S}for(E=(_=l(_)).next();!E.done;E=_.next())n.push({ig:E.value,pts:b})}else try{h.skip(e-1)}catch(e){break}0==(A-=e+4)&&(f=m.length>y?f+(m[y].ee||g):f+g,y++,A=m.length>y&&m[y].sampleSize||v)}}})).parse(e,!1),n};var oo=0,so=1,lo=2,uo={avc1:so,avc3:so,hev1:lo,hvc1:lo,dvh1:lo,dvhe:lo};function co(e){this.h=new eo,e.includes("video/mp4")&&(this.h=new ao),this.g=new $a}function ho(e,t){for(var n=(t=l(t=e.h.parse(t))).next();!n.done;n=t.next()){var i=n.value,r=Ce(i.ig);if(0<r.length&&(n=e.g,i=i.pts,181===(r=new Hi(r,0)).Ra()&&49===r.$d()&&1195456820===r.K()&&3===r.Ra())){var a=r.Ra();if(0!=(64&a)){a&=31,r.skip(1);for(var o=0;o<a;o++){var s=r.Ra(),c=(4&s)>>2,d=r.Ra(),h=r.Ra();c&&(0===(s&=3)||1===s?n.h.push({pts:i,type:s,xa:d,La:h,order:n.h.length}):(n.g.push({pts:i,type:s,value:d,order:n.g.length}),n.g.push({pts:i,type:2,value:h,order:n.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i=l(e.h),r=i.next();!r.done;r=i.next())(r=Qa(e,r.value))&&n.push(r);for(r=(i=l(e.g)).next();!r.done;r=i.next())Fa(e.i,r.value);for(r=(i=l(e.i.i)).next();!r.done;r=i.next())r=Ja(e,r.value),n.push.apply(n,u(r));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function fo(e,t,n,i,r){this.ya=e,this.Ba=t,this.ka=n,this.Od=void 0===i?null:i,this.timescale=r}function po(e,t,n,i,r,a,o,s,l,u,c,d,h,f,p){u=void 0===u?[]:u,f=void 0===f?go:f,this.startTime=e,this.j=this.endTime=t,this.u=n,this.Ba=i,this.ka=r,this.h=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l,this.i=u,this.tilesLayout=void 0===c?"":c,this.s=void 0===d?null:d,this.g=void 0===h?null:h,this.status=f,this.l=void 0===p?null:p,this.o=null,this.m=0}co.prototype.init=function(e){this.h.init(e)},fo.prototype.lc=function(){return this.Ba},fo.prototype.hc=function(){return this.ka},U("shaka.media.InitSegmentReference",fo),fo.prototype.getEndByte=fo.prototype.hc,fo.prototype.getStartByte=fo.prototype.lc,(n=po.prototype).ya=function(){return this.u()},n.getStartTime=function(){return this.startTime},n.Ef=function(){return this.endTime},n.lc=function(){return this.Ba},n.hc=function(){return this.ka},n.Vf=function(){return this.tilesLayout},n.Uf=function(){return this.s},n.Eb=function(){return this.status},n.bg=function(){this.status=vo},n.Ye=function(e){this.o=e},n.Sf=function(){return this.o},n.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=l(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},n.oe=function(e){null==this.g?G("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},U("shaka.media.SegmentReference",po),po.prototype.syncAgainst=po.prototype.oe,po.prototype.offset=po.prototype.offset,po.prototype.getThumbnailSprite=po.prototype.Sf,po.prototype.setThumbnailSprite=po.prototype.Ye,po.prototype.markAsUnavailable=po.prototype.bg,po.prototype.getStatus=po.prototype.Eb,po.prototype.getTileDuration=po.prototype.Uf,po.prototype.getTilesLayout=po.prototype.Vf,po.prototype.getEndByte=po.prototype.hc,po.prototype.getStartByte=po.prototype.lc,po.prototype.getEndTime=po.prototype.Ef,po.prototype.getStartTime=po.prototype.getStartTime,po.prototype.getUris=po.prototype.ya;var go=0,vo=1;function mo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function yo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ao(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function bo(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=(e=l(Eo(e))).next();!i.done;i=e.next()){var r=i.value;i=r.start,(r=r.end)>t&&(n+=r-Math.max(i,t))}return n}function Eo(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function _o(){}function ko(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function To(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=At(Ce(e.data,1,n));return e=At(Ce(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(i=At(Ce(e.data,1,n)),e=At(Ce(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(i=e.data.indexOf(0))?null:(i=At(Ce(e.data,0,i)),e=we(e.data.subarray(i.length+1)),t.description=i,t.data=e,t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=At(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=At(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=we(e.data),t):null}function So(e){for(var t=0,n=[];t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9];){var i=ko(e,t+6);for(e[t+5]>>6&1&&(t+=10),i=(t+=10)+i;t+10<i;){var r=e.subarray(t),a=ko(r,4);(a=To(r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)}))&&n.push(a),t+=r.size+10}t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]&&(t+=10)}return n}function wo(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}function Co(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),xh:6+(e[4]<<8|e[5]),pts:null,dts:null},n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),t.data=e.subarray(9+e[8]),t}function Io(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1}function Ro(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&W("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?W("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||W(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function Do(e,t){var n=Lo;switch(t.mimeType){case"video/webm":n=Po;break;case"video/mp4":n=Oo}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}po.Status={Hg:go,qh:vo,Xg:2},U("shaka.util.Id3Utils",_o),_o.getID3Frames=So,wo.prototype.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Io(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71===e[r]){var a=!!(64&e[r+1]),o=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var s=r+5+e[r+4];if(s===r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1),this.o=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.o:a&&(s+=e[s]+1),o={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var l=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<l;){var u=(31&a[s+1])<<8|a[s+2];switch(a[s]){case 15:-1===o.audio&&(o.audio=u,o.audioCodec="aac");break;case 21:-1===o.Ed&&(o.Ed=u);break;case 27:-1===o.video&&(o.video=u,o.videoCodec="avc");break;case 3:case 4:-1===o.audio&&(o.audio=u,o.audioCodec="mp3");break;case 36:-1===o.video&&(o.video=u,o.videoCodec="hvc")}s+=5+((15&a[s+3])<<8|a[s+4])}a=o,null==this.l&&(this.l=a.video),null==this.g&&(this.g=a.audio),null==this.j&&(this.j=a.Ed),i&&!this.s&&(i=!1,r=t-188),this.s=!0;break;case this.l:a=e.subarray(s,r+188),null==this.m&&(s=Co(a))&&null!=s.pts&&(this.m=s.pts/9e4),this.B.push(a);break;case this.g:a=e.subarray(s,r+188),null==this.h&&(s=Co(a))&&null!=s.pts&&(this.h=s.pts/9e4),this.u.push(a);break;case this.j:this.i.push(e.subarray(s,r+188));break;default:i=!0}}return this},wo.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},U("shaka.util.TsParser",wo),Ro.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},U("shaka.lcevc.Dil",Ro),Ro.prototype.release=Ro.prototype.release;var Lo=0,Po=1,Oo=2;function xo(e,t,n,i){var r=this;this.j=e,this.F=null,this.m=t,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=n||function(){},this.D=i||null,this.i={},this.u=new xi,this.o={},this.s=null,this.J=new nt,this.l=function(e,t){var n=new MediaSource;return e.u.ma(n,"sourceopen",(function(){URL.revokeObjectURL(e.M),t.resolve()})),e.M=Qo(n),e.j.src=e.M,n}(this,this.J),this.G=new Pi((function(){return function(e){var t,n,i,r,a,o,s;return L((function(u){if(1==u.g){for(n in t=[],e.i)for(i=e.i[n],r=i[0],e.i[n]=i.slice(0,1),r&&t.push(r.p.catch(ze)),a=l(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new De(2,7,7003,void 0));for(s in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.o)t.push(e.o[s].destroy());return A(u,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.F=null,e.l=null,e.g=null,e.m=null,e.h={},e.o={},e.s=null,e.i={},e.D=null,b(u)}))}(r)})),this.M="",this.B=!1,this.W=new nt}function Mo(e,t,n){e.g||(e.g=new Yt(e.m));var i=e.g;e=e.H,"application/cea-608"!=t&&"application/cea-708"!=t&&(i.j=(0,Qt[t])(),i.j.setSequenceMode?i.j.setSequenceMode(n):W('Text parsers should have a "setSequenceMode" method!'),i.u=e)}function No(e){return!e.l||"ended"==e.l.readyState}function Bo(e,t){return t==Ze?e.g.g:mo(Uo(e,t))}function Fo(e,t){return t==Ze?e.g.h:yo(Uo(e,t))}function Uo(e,t){try{return e.h[t].buffered}catch(e){return null}}function Vo(e,t,n,i,r,a,o){var s,u,c,d,h,f,p,g,v,m,y,E,_,k,T,S,w,C,I,R,D,P;return a=void 0!==a&&a,o=void 0!==o&&o,L((function(O){switch(O.g){case 1:if(t!=(s=et).X){O.A(2);break}if(!e.B){O.A(3);break}return A(O,e.W,4);case 4:u=O.h,e.g.s=u;case 3:return A(O,function(e,t,n,i){var r,a,o,s;return L((function(l){return 1==l.g?A(l,Promise.resolve(),2):e.j&&e.i?null==n||null==i?(e.j.parseInit(Ce(t)),l.return()):(r=e.u?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:r},o=e.j.parseMedia(Ce(t),a),s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m})),e.i.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),void b(l)):l.return()}))}(e.g,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return O.return();case 2:if(c=Ce(n),d=e.L[t],e.o[t]&&(d=e.o[t].o),0>Io(c)?Zo.includes(d)&&((g=So(c)).length&&i&&(v={cueTime:i.startTime,data:c,frames:g,dts:i.startTime,pts:i.startTime},e.V([v],0,i.endTime))):(h=(new wo).parse(c),f=i.startTime-(h.getStartTime()[t]||0),p=function(e){for(var t=[],n=new Uint8Array(0),i=e.i.length-1;0<=i;i--){var r=Co(n=Lt(e.i[i],n));r&&(t.unshift({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:So(r.data),dts:r.dts,pts:r.pts}),n=new Uint8Array(0))}return t}(h),p.length&&e.V(p,f,i?i.endTime:null)),!e.o[t]){r&&t==s.va&&(e.g||Mo(e,"text/vtt",e.B),e.s||(e.s=new co(d)),i?(m=ho(e.s,n)).length&&(y=e.h[s.va].timestampOffset,Xt(e.g,m,i.startTime,i.endTime,y)):e.s.init(n)),O.A(6);break}return a&&e.o[t].g.resetCaptions(),A(O,function(e,t){return e.j=!0,e.h=new nt,e.l=[],e.i=[],t=Ce(t),e.g.push(t),e.g.flush(),e.j&&e.h.reject(new De(2,3,3018)),e.h}(e.o[t],n),7);case 7:E=O.h,e.g||Mo(e,"text/vtt",e.B),E.captions&&E.captions.length&&(_=e.h[s.va].timestampOffset,k=function(e){for(var t=[],n=(e=l(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new ie(n.startTime,n.endTime,n.text)});return t}(E.captions),Xt(e.g,k,i?i.startTime:null,i?i.endTime:null,_)),n=E.data;case 6:if(n=function(e,t,n,i){var r=e.O[i];return null==n&&r&&(ut()||lt())&&"mp4"==e.L[i].split(";")[0].split("/")[1]&&(t=function(e){function t(){r=!0}function n(e){a.push(e),Wi(e)}e=Ce(e);var i,r=!1,a=[],o=[];if((new Gi).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).P("stsd",(function(e){i=e,a.push(e),Yi(e)})).P("encv",t).P("enca",t).P("hev1",(function(e){o.push({box:e,lb:1701733238})})).P("hvc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc3",(function(e){o.push({box:e,lb:1701733238})})).P("ac-3",(function(e){o.push({box:e,lb:1701733217})})).P("ec-3",(function(e){o.push({box:e,lb:1701733217})})).P("mp4a",(function(e){o.push({box:e,lb:1701733217})})).parse(e),r)return e;if(0==o.length||!i)throw Dt(e),new De(2,3,3019);o.reverse();for(var s=l(o),u=s.next();!u.done;u=s.next())u=u.value,e=Qr(e,i,u.box,a,u.lb);return e}(t)),t}(e,n,i?i.startTime:null,t),T=e.h[t],S=Jo,!e.B||T.mode==S||!i){O.A(8);break}if(w=e.l.duration,!(t==s.va||!(s.va in e.h))){O.A(9);break}return C=[T.appendWindowStart,T.appendWindowEnd],T.appendWindowStart=0,T.appendWindowEnd=1/0,I=T.timestampOffset,T.timestampOffset=0,A(O,zo(e,t,(function(){return jo(e,t,n)})),10);case 10:return A(O,zo(e,t,(function(){return Go(e,t)})),11);case 11:return T.timestampOffset=I,T.appendWindowStart=C[0],T.appendWindowEnd=C[1],R=mo(Uo(e,t)),D=(i.startTime||0)-(R||0),e.W.resolve(D),A(O,zo(e,t,(function(){return Ko(e,t,0,w)})),12);case 12:if(t!=s.va){O.A(9);break}return A(O,zo(e,t,(function(){e.j.currentTime-=.001,Yo(e,t)})),9);case 9:return T.mode=S,A(O,e.Aa(w),8);case 8:return i&&e.B&&t!=s.X&&(a||o)&&(P=i.startTime,zo(e,t,(function(){return Go(e,t)})),zo(e,t,(function(){return Wo(e,t,P)}))),A(O,zo(e,t,(function(){jo(e,t,n)})),16);case 16:b(O)}}))}function Ho(e,t){return L((function(n){return t==et.X?e.g?A(n,e.g.remove(0,1/0),0):n.return():A(n,zo(e,t,(function(){return Ko(e,t,0,e.l.duration)})),0)}))}function jo(e,t,n){if("video"==t&&e.D){var i=e.D;i.g&&i.g.appendBuffer(n,"video",i.i)}e.h[t].appendBuffer(n)}function Ko(e,t,n,i){i<=n?Yo(e,t):e.h[t].remove(n,i)}function Go(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Yo(e,t)}function Wo(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Yo(e,t)}function Yo(e,t){var n=e.i[t][0];n&&(n.p.resolve(),$o(e,t))}function zo(e,t,n){return Oi(e.G),n={start:n,p:new nt},e.i[t].push(n),1==e.i[t].length&&Xo(e,t),n.p}function qo(e,t){var n,i,r,a,o;return L((function(s){switch(s.g){case 1:for(r in Oi(e.G),n=[],i={},e.h)i.Ub=new nt,a={start:function(e){return function(){return e.Ub.resolve()}}(i),p:i.Ub},e.i[r].push(a),n.push(i.Ub),1==e.i[r].length&&a.start(),i={Ub:i.Ub};return E(s,2),A(s,Promise.all(n),4);case 4:k(s,3);break;case 2:throw T(s);case 3:try{t()}catch(e){throw new De(2,3,3015,e)}finally{for(o in e.h)$o(e,o)}b(s)}}))}function $o(e,t){e.i[t].shift(),Xo(e,t)}function Xo(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new De(2,3,3017,t)):n.p.reject(new De(2,3,3015,i)),$o(e,t)}}(n=xo.prototype).destroy=function(){return this.G.destroy()},n.init=function(e,t,n){n=void 0!==n&&n;var i,r,a,o,s,u,c,d,h=this;return L((function(f){if(1==f.g)return i=et,A(f,h.J,2);for(h.B=n,r={},a=l(e.keys()),o=a.next();!o.done;r={na:r.na},o=a.next())r.na=o.value,s=e.get(r.na),u=Ht(s.mimeType,s.codecs),r.na==i.X?Mo(h,u,n):(!t&&Q(u)||!Nt(u,r.na)||(h.o[r.na]=new Mt(u),u=Ft(r.na,u)),c=u+h.F.sourceBufferExtraFeatures,d=h.l.addSourceBuffer(c),h.u.C(d,"error",function(e){return function(){h.i[e.na][0].p.reject(new De(2,3,3014,h.j.error?h.j.error.code:0))}}(r)),h.u.C(d,"updateend",function(e){return function(){return Yo(h,e.na)}}(r)),h.h[r.na]=d,h.L[r.na]=u,h.i[r.na]=[],h.O[r.na]=!!s.drmInfos.length);b(f)}))},n.configure=function(e){this.F=e},n.Na=function(){var e={total:Eo(this.j.buffered),audio:Eo(Uo(this,"audio")),video:Eo(Uo(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},n.remove=function(e,t,n){var i=this;return L((function(r){return A(r,e==et.X?i.g.remove(t,n):zo(i,e,(function(){return Ko(i,e,t,n)})),0)}))},n.flush=function(e){var t=this;return L((function(n){return e==et.X?n.return():A(n,zo(t,e,(function(){t.j.currentTime-=.001,Yo(t,e)})),0)}))},n.endOfStream=function(e){var t=this;return L((function(n){return A(n,qo(t,(function(){No(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},n.Aa=function(e){var t=this;return L((function(n){return A(n,qo(t,(function(){if(e<t.l.duration)for(var n in t.h){var i={start:function(){},p:new nt};t.i[n].unshift(i)}t.l.duration=e})),0)}))},n.getDuration=function(){return this.l.duration};var Qo=e.URL.createObjectURL,Jo="sequence",Zo=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function es(e,t,n){this.i=e,this.m=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=void 0===n||n,this.F=0,this.G=!1}function ts(e,t,n){this.l=n,this.j=e,this.s=is(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function ns(e){this.g=e}function is(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=l(Eo(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function rs(e,t,n,i,r){var a=this;this.o=r,this.g=e,this.s=t,this.D=n,this.i=new xi,this.m=!1,this.B=e.readyState,this.u=0,this.h=i,this.l=!1,this.i.C(e,"waiting",(function(){return as(a)})),this.j=new at((function(){as(a)})).Ca(.25)}function as(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.B&&(e.B=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,i=is(n),r=n.g.currentTime,a=Date.now()/1e3;t.g==r&&t.s==i||(t.m=a,t.g=r,t.s=i,t.h=!1),(i=(r=a-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new gi("stalldetected"))),t=!i}t&&(t=e.g.currentTime,i=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=Eo(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)})),0<=e?e:null)}(n=e.g.buffered,t,e.D.gapDetectionThreshold),null==i||0==i&&!e.l||((r=n.start(i))>=e.s.Oa()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,e.u++,e.o(new gi("gapjumped")))))}}}function os(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ss.value().get(t),n.ma(e,t,i))}(n=es.prototype).getDuration=function(){return this.j},n.Kf=function(){return this.g},n.Xe=function(e){this.i=e},n.Aa=function(e){this.j=e},n.Pf=function(){return this.i},n.Ve=function(e){this.s=e},n.yc=function(e){this.u=e},n.me=function(e){this.o=e},n.We=function(e){this.m=e},n.Df=function(){return this.m},n.Ib=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,i=(e=l(e)).next();!i.done;i=e.next())i=i.value,t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime);this.Td(t),this.h=Math.max(this.h,n),null!=this.i&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},n.Md=function(){this.G=!0},n.Td=function(e){this.l=null==this.l?e:Math.min(this.l,e)},n.Sd=function(e){this.g=Math.max(this.g,e)},n.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},n.U=function(){return 1/0==this.j&&!this.u},n.jb=function(){return 1/0!=this.j&&!this.u},n.Pa=function(){return Math.max(this.B,this.gb()-this.o)},n.Ze=function(e){this.B=e},n.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},n.kc=function(e){var t=Math.max(this.l,this.B);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.o+e,this.Oa()))},n.Db=function(){return this.kc(0)},n.Oa=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},n.df=function(){return!(null==this.i||null!=this.h&&this.D)},n.Ue=function(e){this.F=e},U("shaka.media.PresentationTimeline",es),es.prototype.setAvailabilityTimeOffset=es.prototype.Ue,es.prototype.usingPresentationStartTime=es.prototype.df,es.prototype.getSeekRangeEnd=es.prototype.Oa,es.prototype.getSeekRangeStart=es.prototype.Db,es.prototype.getSafeSeekRangeStart=es.prototype.kc,es.prototype.getSegmentAvailabilityEnd=es.prototype.gb,es.prototype.setUserSeekStart=es.prototype.Ze,es.prototype.getSegmentAvailabilityStart=es.prototype.Pa,es.prototype.isInProgress=es.prototype.jb,es.prototype.isLive=es.prototype.U,es.prototype.offset=es.prototype.offset,es.prototype.notifyMaxSegmentDuration=es.prototype.Sd,es.prototype.notifyMinSegmentStartTime=es.prototype.Td,es.prototype.lockStartTime=es.prototype.Md,es.prototype.notifySegments=es.prototype.Ib,es.prototype.getDelay=es.prototype.Df,es.prototype.setDelay=es.prototype.We,es.prototype.setSegmentAvailabilityDuration=es.prototype.me,es.prototype.setStatic=es.prototype.yc,es.prototype.setClockOffset=es.prototype.Ve,es.prototype.getPresentationStartTime=es.prototype.Pf,es.prototype.setDuration=es.prototype.Aa,es.prototype.setPresentationStartTime=es.prototype.Xe,es.prototype.getMaxSegmentDuration=es.prototype.Kf,es.prototype.getDuration=es.prototype.getDuration,ts.prototype.release=function(){this.l=this.j=null,this.i=function(){}},rs.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},rs.prototype.Wd=function(){this.l=!0,as(this)};var ss=new it((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function ls(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new xi,this.i=new fs(e),os(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){ds(i,i.j)}))}function us(e){return e.m?e.g.currentTime:e.j}function cs(e,t){0<e.g.readyState?ps(e.i,t):os(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){ds(e,e.j)}))}function ds(e,t){.001>Math.abs(e.g.currentTime-t)?hs(e):(e.h.ma(e.g,"seeking",(function(){hs(e)})),ps(e.i,0==e.g.currentTime?t:e.g.currentTime))}function hs(e){e.m=!0,e.h.C(e.g,"seeking",(function(){return e.l()}))}function fs(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new at((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function ps(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function gs(e){this.g=e,this.j=!1,this.h=null,this.i=new xi}function vs(e,t,n,i,r,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.u=r,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new ts(new ns(e),t.stallThreshold,n),function(e,t){e.i=t}(t,(function(){i?e.currentTime+=i:(e.pause(),e.play())})),t}(e,n,a),this.j=new rs(e,t.presentationTimeline,n,this.o,a),this.h=new ls(e,(function(){var e=o.j;e.m=!0,e.l=!1;var t=us(o.h);return e=ys(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.s||o.s<t-1)?(o.s=t,cs(o.h,e),e=void 0):(o.u(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Db():e.g.Oa():0>t&&(t=e.g.Oa()+t),ms(e,As(e,t))}(this,i)),this.m=new at((function(){if(0!=o.i.readyState&&!o.i.paused){var e=us(o.h),t=o.g.Db(),n=o.g.Oa();3>n-t&&(t=n-3),e<t&&(e=ys(o,e),o.i.currentTime=e)}}))}function ms(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function ys(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Db(),a=e.g.Oa(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.kc(n),l=e.g.kc(i);return n=e.g.kc(n+i),t>=o?ms(e,t):t>a?a:t<r?Ao(e.i.buffered,l)?l:n:t>=s||Ao(e.i.buffered,t)?t:n}function As(e,t){var n=e.g.Db();return t<n?n:t>(e=e.g.Oa())?e:t}function bs(e){this.g=e,this.h=null,this.i=0,this.j=!1}function Es(e,t){for(var n=(e=l(e.g)).next();!n.done;n=e.next())t(n.value)}function _s(e,t,n){return new bs([new po(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function ks(e,t,n){this.i=e,this.g=t,this.h=n}function Ts(){bs.call(this,[]),this.l=[]}function Ss(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Tc(),this.h=new at((function(){t.g.Me(.25*t.i)}))}function ws(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Tc()!=t&&e.g.le(t))}catch(e){}e.h.Ca(.25),0!=e.g.Tc()&&e.g.le(0)}function Cs(e){var t=this;this.h=e,this.g=new Set,this.i=new at((function(){Is(t,!1)})).Ca(.25)}function Is(e,t){for(var n=l(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Rs(e){yi.call(this),this.g=new Map,this.h=e}function Ds(e){yi.call(this);var t=this;this.g=new Set,this.i=e,this.h=new at((function(){for(var e=t.i(),n=l(t.g),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&(t.g.delete(i),i=new gi("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}function Ls(e){yi.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{rb:null,qb:xs,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:Os,qb:xs,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:Ms,qb:xs,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:xs,qb:Os,ib:function(e,n){return Ps(t,"exit",e,n)}},{rb:xs,qb:Ms,ib:function(e,n){return Ps(t,"exit",e,n)}},{rb:Os,qb:Ms,ib:function(e,n){return Ps(t,"skip",e,n)}},{rb:Ms,qb:Os,ib:function(e,n){return Ps(t,"skip",e,n)}}],this.h=new xi,this.h.C(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Ps(e,t,n,i){t=new gi(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}ls.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},fs.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(n=gs.prototype).yd=function(){var e=this;os(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==e.h||0==e.h?e.j=!0:(e.i.ma(e.g,"seeking",(function(){e.j=!0})),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))}))},n.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},n.zd=function(e){this.h=this.j?this.h:e},n.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},n.ue=function(){return 0},n.te=function(){return 0},n.Ne=function(){},(n=vs.prototype).yd=function(){this.m.Ca(.25)},n.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},n.zd=function(e){cs(this.h,e)},n.Ic=function(){var e=us(this.h);return 0<this.i.readyState&&!this.i.paused?As(this,e):e},n.ue=function(){return this.o?this.o.o:0},n.te=function(){return this.j.u},n.Ne=function(){this.j.Wd()},(n=bs.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},n.cg=function(){this.j=!0},n.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},n.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},n.offset=function(e){if(!this.j)for(var t=l(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},n.pc=function(e){if(!this.j&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,u(e))}},n.Hb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.pc(e),this.eb(t)},n.eb=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},n.Wa=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new po(e.startTime,t,e.u,e.Ba,e.ka,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.s,e.g,e.status,e.l))}},n.fd=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new at((function(){var e=t();e?n.g.push.apply(n.g,u(e)):(n.h.stop(),n.h=null)})),this.h.Ca(e))},bs.prototype[Symbol.iterator]=function(){return this.Cb(0)},bs.prototype.Cb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var a=n.i[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new ks(this,t,i)},U("shaka.media.SegmentIndex",bs),bs.forSingleSegment=_s,bs.prototype.getIteratorForTime=bs.prototype.Cb,bs.prototype.updateEvery=bs.prototype.fd,bs.prototype.fit=bs.prototype.Wa,bs.prototype.evict=bs.prototype.eb,bs.prototype.mergeAndEvict=bs.prototype.Hb,bs.prototype.offset=bs.prototype.offset,bs.prototype.get=bs.prototype.get,bs.prototype.find=bs.prototype.find,bs.prototype.markImmutable=bs.prototype.cg,bs.prototype.release=bs.prototype.release,ks.prototype.vf=function(){return this.g},ks.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.ya().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},ks.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.ya().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},U("shaka.media.SegmentIterator",ks),ks.prototype.next=ks.prototype.next,ks.prototype.current=ks.prototype.current,ks.prototype.currentPosition=ks.prototype.vf,g(Ts,bs),(n=Ts.prototype).clone=function(){var e=new Ts;return e.l=this.l.slice(),e},n.release=function(){for(var e=l(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},n.find=function(e){for(var t=0,n=l(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.i+i.g.length}return null},n.get=function(e){for(var t=0,n=l(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.i+i.g.length}return null},n.offset=function(){},n.pc=function(){},n.eb=function(){},n.Hb=function(){},n.Wa=function(){},n.fd=function(){},U("shaka.media.MetaSegmentIndex",Ts),Ts.prototype.updateEvery=Ts.prototype.fd,Ts.prototype.fit=Ts.prototype.Wa,Ts.prototype.mergeAndEvict=Ts.prototype.Hb,Ts.prototype.evict=Ts.prototype.eb,Ts.prototype.merge=Ts.prototype.pc,Ts.prototype.offset=Ts.prototype.offset,Ts.prototype.get=Ts.prototype.get,Ts.prototype.find=Ts.prototype.find,Ts.prototype.release=Ts.prototype.release,Ss.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Ss.prototype.set=function(e){this.i=e,ws(this)},Ss.prototype.Pc=function(){return this.g.Pc()},Cs.prototype.release=function(){this.i.stop();for(var e=l(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},g(Rs,yi),Rs.prototype.release=function(){this.g.clear(),yi.prototype.release.call(this)},Rs.prototype.j=function(e){for(var t=l(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).rc,r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.Od;break e}}i=null}if((r=i)&&(r=!((r=n.Ae)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r)e:{if(r=e,a=i.contentType,(a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(r>=a[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.Ae=i,JSON.stringify(i),n=new gi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},g(Ds,yi),Ds.prototype.release=function(){this.g.clear(),this.h.stop(),yi.prototype.release.call(this)},g(Ls,yi),Ls.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,yi.prototype.release.call(this)},Ls.prototype.j=function(e,t){for(var n=l(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?Os:e>i.endTime?Ms:xs;this.g.set(i,a);for(var o=l(this.l),s=o.next();!s.done;s=o.next())(s=s.value).rb==r&&s.qb==a&&s.ib(i,t)}};var Os=1,xs=2,Ms=3;function Ns(e,t,n,i,r){return e=Si(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Bs(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Pi((function(){return function(e){var t,n,i,r;return L((function(a){if(1==a.g){for(t=[],n=l(e.j.values()),i=n.next();!i.done;i=n.next())Xs(r=i.value),t.push(Qs(r));return A(a,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,b(a)}))}(n)}))}function Fs(e,t){var n=e.j.get("video");if(n){var i=n.stream;i&&(t?(t=i.trickModeVideo)&&!n.ob&&(Hs(e,t,!1,0,!1),n.ob=i):(i=n.ob)&&(n.ob=null,Hs(e,i,!0,0,!1)))}}function Us(e,t,n,i,r,a){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,a=void 0!==a&&a,e.l=t,e.B&&(t.video&&Hs(e,t.video,n,i,r,a),t.audio&&Hs(e,t.audio,n,i,r,a))}function Vs(e,t){e.o=t,e.B&&Hs(e,t,!0,0,!1)}function Hs(e,t,n,i,r,a){var o=e.j.get(t.type);o||t.type!=Ze?o&&(o.ob&&(t.trickModeVideo?(o.ob=t,t=t.trickModeVideo):o.ob=null),o.stream!=t||r)&&(t.type==Ze&&Mo(e.g.R,Ht(t.mimeType,t.codecs),e.m.sequenceMode),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.aa=null,o.ve=!!a,n&&(o.ac?o.hd=!0:o.ra?(o.bb=!0,o.Nc=i,o.hd=!0):(Xs(o),qs(e,o,!0,i).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,i;return L((function(r){if(1==r.g)return t.ta?(n=t.stream,i=t.ta,n.segmentIndex?r.A(2):A(r,n.createSegmentIndex(),2)):r.return();if(t.ta!=i||t.stream!=n)return r.return();var a=e.g.Sc(),o=Fo(e.g.R,t.type),s=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),l=null==s?null:t.stream.segmentIndex.get(s);s=l&&l.ka?l.ka-l.Ba:null,l&&!s&&(s=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),s?((l=l.h)&&(s+=(l.ka?l.ka-l.Ba:null)||0),a=8*s/(l=e.g.getBandwidthEstimate())<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ta.h.g>s):a=!1,a&&t.ta.abort(),b(r)}))}(e,o).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,i,r,a;L((function(o){switch(o.g){case 1:return n=et,E(o,2),A(o,Ho(e.g.R,n.X),4);case 4:k(o,3);break;case 2:i=T(o),e.g&&e.g.onError(i);case 3:r=Ht(t.mimeType,t.codecs),Mo(e.g.R,r,e.m.sequenceMode),(e.g.R.m.isTextVisible()||e.i.alwaysStreamText)&&(a=Ks(t),e.j.set(n.X,a),$s(e,a,0)),b(o)}}))}(e,t)}function js(e,t){t.ac||t.bb||(t.ra?(t.bb=!0,t.Nc=0):null==Bo(e.g.R,t.type)?null==t.Ka&&$s(e,t,0):(Xs(t),qs(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Ks(e){return{stream:e,type:e.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}function Gs(t,n){var i,r,a,o,s;return L((function(u){switch(u.g){case 1:if(Oi(t.h),n.ra||null==n.Ka||n.ac)return u.return();if(n.Ka=null,!n.bb){u.A(2);break}return A(u,qs(t,n,n.hd,n.Nc),3);case 3:return u.return();case 2:if(n.stream.segmentIndex){u.A(4);break}return i=n.stream,A(u,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.ra||n.Ka||$s(t,n,0),u.return();case 4:E(u,6),r=function(t,n){if(Ys(n))return function(e,t){var n=Fo(e,"video")||0;qt(e.g,t,n)}(t.g.R,n.stream.originalId||""),null;n.type==Ze&&function(e){e.g&&qt(e.g,"",0)}(t.g.R);var i=t.g.Sc(),r=n.pa?n.pa.endTime:i,a=function(e,t,n){return t==Ze?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):bo(e=Uo(e,t),n)}(t.g.R,n.type,i),o=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.u,s=t.m.presentationTimeline.getDuration()-r,u=Fo(t.g.R,n.type);if(1e-6>s&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.j.get(Ze))&&Ys(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=o)return t.i.updateIntervalSeconds/2;if(a=function(e,t,n,i){if(t.aa)return t.aa.current();if(t.pa||i)return n=t.pa?t.pa.endTime:i,t.Rd=!0,t.aa=t.stream.segmentIndex.Cb(n),t.aa&&t.aa.next().value;e=e.i.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.aa=t.stream.segmentIndex.Cb(i),r=t.aa&&t.aa.next().value),r||(t.aa=t.stream.segmentIndex.Cb(n),r=t.aa&&t.aa.next().value),r}(t,n,i,u),!a)return t.i.updateIntervalSeconds;for(o=1/0,s=l(s=Array.from(t.j.values())),u=s.next();!u.done;u=s.next())Ys(u=u.value)||u.aa&&!u.aa.current()||(o=Math.min(o,u.pa?u.pa.endTime:i));return r>=o+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(function(t,n,i,r){var a,o,s,l,u,c,d,h,f,p,g,v,m,y;return L((function(b){switch(b.g){case 1:if(a=et,o=n.stream,s=n.aa,n.ra=!0,E(b,2),2==r.Eb())throw new De(1,1,1011);return A(b,function(e,t,n){var i,r,a,o,s,l,u,c;return L((function(d){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Kd&&r==t.Jd&&a==t.Id||(s=function(){var n;return L((function(i){if(1==i.g)return E(i,2),t.Jd=r,t.Id=a,t.Kd=o,A(i,function(e,t,n,i,r,a){return L((function(o){return t==et.X?(a||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,i,r),o.return()):A(o,Promise.all([zo(e,t,(function(){return Go(e,t)})),a?Promise.resolve():zo(e,t,(function(){return Wo(e,t,n)})),zo(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,Yo(e,t)}))]),0)}))}(e.g.R,t.type,o,r,a,e.m.sequenceMode),4);if(2!=i.g)return k(i,0);throw n=T(i),t.Jd=null,t.Id=null,t.Kd=null,n}))},i.push(s())),!function(e,t){return e&&t?e.lc()==t.lc()&&e.hc()==t.hc()&&ne(e.ya(),t.ya()):e==t}(n.h,t.Zc)&&(t.Zc=n.h)&&(l=zs(e,t,n.h),u=function(){var i,r,a;return L((function(o){switch(o.g){case 1:return E(o,2),A(o,l,4);case 4:return i=o.h,Oi(e.h),(new Gi).box("moov",Wi).box("trak",Wi).box("mdia",Wi).P("mdhd",(function(e){e=io(e.reader||0,e.version||0),n.h.timescale=e.timescale})).parse(i),r=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,A(o,e.g.xe(t.type,i),5);case 5:return A(o,Vo(e.g.R,t.type,i,null,r),6);case 6:k(o,0);break;case 2:throw a=T(o),t.Zc=null,a}}))},e.g.fg(n.startTime,n.h),i.push(u())),e.m.sequenceMode&&(c=t.pa?t.pa.m:null,n.m!=c||t.Rd)&&(t.Rd=!1,i.push(function(e,t,n){return L((function(i){return t==et.X?i.return():(zo(e,t,(function(){return Go(e,t)})),A(i,zo(e,t,(function(){return Wo(e,t,n)})),0))}))}(e.g.R,t.type,n.startTime))),A(d,Promise.all(i),0)}))}(t,n,r),4);case 4:return Oi(t.h),t.s?b.return():(l="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,u=e.ReadableStream,t.i.lowLatencyMode&&u&&l&&!r.l?(d=new Uint8Array(0),f=h=!1,p=function(e){var a,s,l;return L((function(u){return h?u.return():(f=!0,Oi(t.h),t.s?u.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),a=!1,s=0,(new Gi).box("mdat",(function(e){s=e.size+e.start,a=!0})).parse(d,!1,!0),a?(l=d.subarray(0,s),d=d.subarray(s),A(u,Ws(t,n,i,o,r,l),0)):u.A(0)))}))},A(b,zs(t,n,r,p),11)):A(b,zs(t,n,r),7));case 7:if(c=b.h,Oi(t.h),t.s)return b.return();if(!r.l){b.A(8);break}return A(b,function(t,n,i){var r,a,o,s;return L((function(l){if(1==l.g)return(r=n.l).cryptoKey?l.A(2):A(l,r.fetchKey(),3);if(!(a=r.iv))for(a=Ce(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i.g,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return l.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))}))}(c,r,s),9);case 9:c=b.h;case 8:return Oi(t.h),n.bb?(n.ra=!1,$s(t,n,0),b.return()):A(b,Ws(t,n,i,o,r,c),6);case 11:if(g=b.h,f){b.A(6);break}return h=!0,Oi(t.h),t.s?b.return():n.bb?(n.ra=!1,$s(t,n,0),b.return()):A(b,Ws(t,n,i,o,r,g),6);case 6:if(Oi(t.h),t.s)return b.return();n.pa=r,s.next(),n.ra=!1,n.be=!1,v=t.g.R.Na(),m=v[n.type],JSON.stringify(m),n.bb||t.g.Wd(r.startTime,r.endTime,n.type),$s(t,n,0),k(b,0);break;case 2:if(y=T(b),Oi(t.h,y),t.s)return b.return();if(n.ra=!1,7001==y.code)n.ra=!1,Xs(n),$s(t,n,0),b.A(0);else if(n.type==a.X&&t.i.ignoreTextStreamFailures)t.j.delete(a.X),b.A(0);else{if(3017!=y.code)return n.nc=!0,y.severity=2,A(b,Js(t,y),0);(function(e,t,n){if(!Array.from(e.j.values()).some((function(e){return e!=t&&e.be}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.nc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.be=!0}$s(e,t,4)})(t,n,y),b.A(0)}}}))}(t,n,i,a).catch((function(){})),null)}(t,n),null!=r&&($s(t,n,r),n.nc=!1),k(u,7);break;case 6:return a=T(u),A(u,Js(t,a),8);case 8:return u.return();case 7:if(o=Array.from(t.j.values()),!t.B||!o.every((function(e){return e.endOfStream}))){u.A(0);break}return A(u,t.g.R.endOfStream(),10);case 10:Oi(t.h),0!=(s=t.g.R.getDuration())&&s<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Aa(s),b(u)}}))}function Ws(e,t,n,i,r,a){var o,s,l,u,c,d;return L((function(h){switch(h.g){case 1:return o=i.closedCaptions&&0<i.closedCaptions.size,l=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,u=e.i.parsePrftBox&&!e.D,(l||u)&&(s=new Gi),l&&s.P("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.sc(),o=t.reader.sc(),s=t.reader.K(),l=t.reader.K(),u=t.reader.K(),c=t.reader.K(),d=r.startTime+l/s;else s=t.reader.K(),l=(d=t.reader.$a()/s+r.timestampOffset)-r.startTime,u=t.reader.K(),c=t.reader.K(),a=t.reader.sc(),o=t.reader.sc();t=t.reader.Za(t.reader.S.byteLength-t.reader.Z()),(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.g.gg():"https://aomedia.org/emsg/ID3"==a?(n=So(t)).length&&r&&e.g.hg([{cueTime:r.startTime,data:t,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime):(n=new gi("emsg",n=(new Map).set("detail",{startTime:d,endTime:d+u/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t})),e.g.onEvent(n)))})),u&&s.P("prft",(function(t){e:{if(!e.D&&r.h.timescale){t.reader.K();var n=t.reader.K();if(n=1e3*n+t.reader.K()/Math.pow(2,32)*1e3,0===t.version)var i=t.reader.K();else try{i=t.reader.$a()}catch(t){e.D=!0,i=void 0;break e}t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+n).getTime(),i=new gi("prft",i=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-i/r.h.timescale*1e3)})),e.g.onEvent(i),e.D=!0}i=void 0}return i})),(l||u)&&s.parse(a),A(h,function(e,t,n){var i,r,a;return L((function(o){if(1==o.g)return i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(r=Bo(e.g.R,t.type))||.01>=(a=n-r-i)?o.return():A(o,e.g.R.remove(t.type,r,r+a),2);Oi(e.h),b(o)}))}(e,t,n),2);case 2:return Oi(e.h),c=t.vc,t.vc=!1,d=t.ve,t.ve=!1,A(h,e.g.xe(t.type,a),3);case 3:return A(h,Vo(e.g.R,t.type,a,r,o,c,d),4);case 4:Oi(e.h),b(h)}}))}function Ys(e){return e&&e.type==Ze&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function zs(e,t,n,i){var r,a,o,s,l;return L((function(u){return 1==u.g?(r=Ri,a=Ns(n.ya(),n.Ba,n.ka,e.i.retryParameters,i),o=t.stream,e.g.modifySegmentRequest(a,{type:o.type,init:n instanceof fo,duration:n.endTime-n.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),s=e.g.kb.request(r,a),t.ta=s,A(u,s.promise,2)):(l=u.h,t.ta=null,u.return(l.data))}))}function qs(e,t,n,i){var r,a;return L((function(o){return 1==o.g?(t.bb=!1,t.hd=!1,t.Nc=0,t.ac=!0,t.pa=null,t.Zc=null,t.aa=null,i?(r=e.g.Sc(),a=e.g.R.getDuration(),A(o,e.g.R.remove(t.type,r+i,a),3)):A(o,Ho(e.g.R,t.type),4)):3!=o.g?(Oi(e.h),n?A(o,e.g.R.flush(t.type),3):o.A(3)):(Oi(e.h),t.ac=!1,t.endOfStream=!1,t.ra||t.Ka||$s(e,t,0),void b(o))}))}function $s(e,t,n){var i=t.type;(i!=Ze||e.j.has(i))&&(t.Ka=new rt((function(){var n;return L((function(i){return 1==i.g?(E(i,2),A(i,Gs(e,t),4)):2!=i.g?k(i,0):(n=T(i),e.g&&e.g.onError(n),void b(i))}))})).N(n))}function Xs(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Qs(e){return L((function(t){return e.ta?A(t,e.ta.abort(),0):t.A(0)}))}function Js(e,t){return L((function(n){if(1==n.g)return A(n,li(e.F),2);Oi(e.h),e.g.onError(t),t.handled||e.i.failureCallback(t),b(n)}))}function Zs(e,t){var n=Vu(),i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return function(e){return L((function(t){if(e.s.g)t=t.A(0);else{if(0==e.m.length||e.g&&!e.g.hb)var n=!1;else{e.g&&(e.g.Ia.mb(),e.g=null);var i=(n=e.m.shift()).create(e.l);i?(n.Ia.Jb(),e.g={node:i.node,payload:i.payload,hb:i.hb,Ia:n.Ia}):n.Ia.dd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return L((function(i){switch(i.g){case 1:return e.i=e.j.Mf(e.i,e.l,e.g.node,e.g.payload),E(i,2),e.h=e.j.yf(e.i,e.l,e.g.payload),A(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ia.bd(),e.g=null),k(i,0);break;case 2:return 7001==(t=T(i)).code?e.g.Ia.mb():e.g.Ia.onError(t),e.g=null,e.h=null,n=e,A(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,b(i)}}))}(e):(e.j.eg(e.i),e.o=new nt,n=e.o),t=A(t,n,1)}return t}))}(i)})),this.s=new Pi((function(){return function(e){var t,n;return L((function(i){if(1==i.g)return e.h&&e.h.abort(),tl(e),A(i,e.u,2);for(e.g&&e.g.Ia.mb(),t=l(e.m),n=t.next();!n.done;n=t.next())n.value.Ia.mb();e.g=null,e.m=[],e.j=null,b(i)}))}(i)}))}function el(e,t){var n={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return e.m.push({create:t,Ia:n}),e.h&&e.h.abort(),tl(e),n}function tl(e){e.o&&(e.o.resolve(),e.o=null)}function nl(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(nl).join(""):n+e.payload+t}function il(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)il(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[],i.payload=nl(n),t.push(i)}return t}function rl(e){this.g=null;for(var t=l(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function al(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ol(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=l(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function sl(){}function ll(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ul(t,n){var i=this;this.j=!1,this.i=[],this.B=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new at((function(){hl(i)})).Ca(.25),this.h=new Map,this.s=new xi,this.s.C(document,"fullscreenchange",(function(){hl(i,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){hl(i,!0)})),this.l.observe(this.g)),this.o=new Map}function cl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function dl(e,t,n,i,r){for(var a=!1,o=[],s=[],u=(t=l(t)).next();!u.done;u=t.next()){u=u.value,r.push(u);var c=e.h.get(u),d=u.startTime<=i&&u.endTime>i,h=c?c.ef:null;c&&(o.push(c.Bd),c.tc&&o.push(c.tc),d||(a=!0,e.h.delete(u),c=null)),d&&(s.push(u),c?cl(e,h)||(a=!0):(fl(e,u,r),h=(c=e.h.get(u)).ef,a=!0)),0<u.nestedCues.length&&h&&dl(e,u.nestedCues,h,i,r),r.pop()}if(a){for(r=(i=l(o)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),u=(s=l(s)).next();!u.done;u=s.next())(i=e.h.get(u.value)).tc?(n.appendChild(i.tc),i.tc.appendChild(i.Bd)):n.appendChild(i.Bd)}}function hl(e,t){if(e.g){var n=e.B.currentTime;if(!e.j||void 0!==t&&t){for(var i=(t=l(e.o.values())).next();!i.done;i=t.next())ll(i.value);ll(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map;for(var r=(i=l(e.h.keys())).next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));dl(e,e.i,e.g,n,[])}}}function fl(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),i=!i&&0<t.nestedCues.length;var a=document.createElement(r);if("br"!=r&&function(e,t,n,i,r){var a=t.style,o=0==n.nestedCues.length,s=1<i.length;a.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=pl(n.linePadding,n,e.m),a.paddingRight=pl(n.linePadding,n,e.m),a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,(function(e){return e.backgroundColor})))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.textContent=l)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=pl(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(a.position="absolute",n.writingMode==de?(a.width="100%",n.lineAlign==fe?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==fe?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==fe?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))),a.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==de?a.paddingLeft=n.position:a.paddingTop=n.position),"line-left"==n.positionAlign?a.cssFloat="left":"line-right"==n.positionAlign&&(a.cssFloat="right"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==de?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,i),n=null,t.region&&t.region.id)if(r=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==Ee?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Ee?"%":"px"),e.o.has(r))n=e.o.get(r);else{var o=document.createElement("span"),s=n.heightUnits==Ee?"%":"px",l=n.widthUnits==Ee?"%":"px",u=n.viewportAnchorUnits==Ee?"%":"px";o.id="shaka-text-region---"+r,o.classList.add("shaka-text-region"),o.style.height=n.height+s,o.style.width=n.width+l,o.style.position="absolute",o.style.top=n.viewportAnchorY+u,o.style.left=n.viewportAnchorX+u,o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(r,o),n=o}r=a,i&&((r=document.createElement("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,a.appendChild(r)),e.h.set(t,{Bd:a,ef:r,tc:n})}function pl(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function gl(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function vl(e,t,n){try{if(e.g.enabled){var i={d:1e3*n.duration,st:e.h.U()?Rl:Il};i.ot=function(e){var t=e.type;if(e.init)return Sl;if("video"==t)return e.codecs.includes(",")?Tl:kl;if("audio"==t)return _l;if("text"==t)return"application/mp4"===e.mimeType?Cl:wl}(n);var r=i.ot===kl||i.ot===_l||i.ot===Tl||i.ot===Cl;r&&(i.bl=function(e,t){if(t=e.h.Na()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,n.type)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==Cl&&(i.tb=function(e,t){var n=e.h.Xa();if(!n.length)return NaN;e=n[0];for(var i=(n=l(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case kl:return e.videoBandwidth||NaN;case _l:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),yl(e,t,i)}}catch(e){Y("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}}function ml(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function yl(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,ml(e)),n.pr=e.h.Rc();var r=n.ot===kl||n.ot===Tl;if(e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),i)e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=l(t)).next();!o.done;o=t.next())o=o.value,r[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=Al(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=Al(n);a&&(t.uris=t.uris.map((function(e){return bl(e,a)})))}}}function Al(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),s=(o=l(o)).next();!s.done;s=o.next()){var u=e[s=s.value];if(i(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var c=a[s];c&&(u=c(u));var d;d="string"===(c=typeof u)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===c?s:"symbol"===c?s+"="+u.description:s+"="+u,r.push(d)}}return r.join(",")}function bl(e,t){return!t||e.includes("offline:")?e:((e=new Pe(e)).g.set("CMCD",t),e.toString())}(n=Bs.prototype).destroy=function(){return this.h.destroy()},n.configure=function(e){this.i=e,this.F=new si({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},n.start=function(){var e=this;return L((function(t){if(1==t.g)return A(t,function(e){var t,n,i,r,a,o,s,u,c,d;return L((function(h){if(1==h.g){if(t=et,!e.l)throw new De(2,5,5006);return n=new Map,i=new Set,e.l.audio&&(n.set(t.Hc,e.l.audio),i.add(e.l.audio)),e.l.video&&(n.set(t.va,e.l.video),i.add(e.l.video)),e.o&&(n.set(t.X,e.o),i.add(e.o)),r=e.g.R,a=e.i.forceTransmux,A(h,r.init(n,a,e.m.sequenceMode),2)}for(Oi(e.h),e.updateDuration(),o=l(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,c=n.get(u),e.j.has(u)||(d=Ks(c),e.j.set(u,d),$s(e,d,0));b(h)}))}(e),2);Oi(e.h),e.B=!0,b(t)}))},n.vc=function(){if(this.g)for(var e=this.g.Sc(),t=l(this.j.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;(n=this.j.get(i)).aa=null;var r=this.g.R;if(i==Ze?r=null!=(r=r.g).g&&null!=r.h&&(e>=r.g&&e<r.h):r=Ao(r=Uo(r,i),e),!r){if((null!=Fo(this.g.R,i)||n.ra)&&js(this,n),n.ta&&(n.ta.abort(),n.ta=null),i===Ze&&(i=this.g.R).s)for((i=i.s.g).l=0,i.h=[],i.g=[],(r=i.i).i=[],r.h=[],r.g=0,Xa(i),r=(i=l(i.j.values())).next();!r.done;r=i.next())Wa(r.value);n.vc=!0}}},n.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))},Zs.prototype.destroy=function(){return this.s.destroy()},(n=rl.prototype).remove=function(e,t){return!!this.g&&(ol(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},n.append=function(e){var t=il(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},r=(t=l(t)).next();!r.done;i={sb:i.sb},r=t.next())i.sb=r.value,e.some(function(e){return function(t){return t.startTime==e.sb.startTime&&t.endTime==e.sb.endTime&&t.text==e.sb.payload}}(i))||(r=al(i.sb))&&n.push(r);for(i=(e=l(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!i.done;i=e.next())this.g.addCue(i.value)},n.destroy=function(){return this.g&&(ol(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},n.isTextVisible=function(){return"showing"==this.g.mode},n.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},U("shaka.text.SimpleTextDisplayer",rl),rl.prototype.setTextVisibility=rl.prototype.setTextVisibility,rl.prototype.isTextVisible=rl.prototype.isTextVisible,rl.prototype.destroy=rl.prototype.destroy,rl.prototype.append=rl.prototype.append,rl.prototype.remove=rl.prototype.remove,U("shaka.util.Dom",sl),sl.removeAllChildren=ll,(n=ul.prototype).append=function(e){for(var t=[].concat(u(this.i)),n={},i=(e=l(e)).next();!i.done;n={Cc:n.Cc},i=e.next())n.Cc=i.value,t.some(function(e){return function(t){return re(t,e.Cc)}}(n))||this.i.push(n.Cc);hl(this)},n.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},n.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),hl(this,n>this.i.length),!0},n.isTextVisible=function(){return this.j},n.setTextVisibility=function(e){this.j=e},U("shaka.text.UITextDisplayer",ul),ul.prototype.setTextVisibility=ul.prototype.setTextVisibility,ul.prototype.isTextVisible=ul.prototype.isTextVisible,ul.prototype.remove=ul.prototype.remove,ul.prototype.destroy=ul.prototype.destroy,ul.prototype.append=ul.prototype.append,U("shaka.text.WebVttGenerator",(function(){}));var El="m",_l="a",kl="v",Tl="av",Sl="i",wl="c",Cl="tt",Il="v",Rl="l";function Dl(){}function Ll(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=Ai(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ai(u)),l=Ll(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(G("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&W("Unexpected number of arguments for "+l),e[a]=t[a]):(G("Invalid config, unrecognized key "+l),s=!1)}return s}function Pl(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Ol(e,t){return e&&t}function xl(){}function Ml(e){return new Pe(e=Et(e)).Ha}function Nl(e,t,n){function i(e){Ie(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Ce(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new De(2,6,6015);var r;r="string"==typeof t?kt(t,!0):t,e=kt(e=Et(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Bl(){}function Fl(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return"com.apple.fps.1_0"==n.keySystem&&"skd"==t&&(t=n.serverCertificate,e=Nl(e,n=Ml(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:lt()},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return Ol([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Ol([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(pt("Web0S")||ut()||pt("CrKey"))&&(i.stallSkip=0);var r={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?A(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return Ol([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:t,manifest:n,streaming:i,mediaSource:{sourceBufferExtraFeatures:""},offline:r,abrFactory:function(){return new jn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return r.trackSelectionCallback=function(e){return L((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=sn(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return nn(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));for(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),t=[],i.length&&(n=Math.floor(i.length/2),i.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(i[n])),e=l(e),i=e.next();!i.done;i=e.next())(i=i.value).type!=Ze&&"image"!=i.type||t.push(i);return t}(e,a.preferredAudioLanguage))}))},a}function Ul(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Ll(e,t,n||Fl(),i,"")}function Vl(){this.g=null,this.h=[]}function Hl(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function jl(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=(e=l(e.h)).next();!i.done;i=e.next())n+=(i=i.value).state==t?i.duration:0;return n}function Kl(){this.i=this.h=null,this.g=[]}function Gl(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Wl(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new Vl,this.h=new Kl}function Yl(t,n){yi.call(this);var i=this;this.l=Ku,this.Uc=this.g=null,this.ia=!1,this.Xc=new xi,this.Xb=new xi,this.s=new xi,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.u=null,this.Yd=1e9,this.h=uu(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new ni(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,n&&n(this),this.D=function(e){return new ki((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent(ql("downloadheadersreceived",t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent(ql("downloadfailed",t))}))}(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,$u&&(this.F=$u()),this.Xc.C(e,"online",(function(){i.ce()})),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var r=new Map;r.set(this.W,(function(e,t){return fi(function(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.Xb.C(t.mediaElement,"error",(function(){var t=Ru(e);t&&Cu(e,t)}))),e.g=t.mediaElement,Promise.resolve()}(i,e,t))})),r.set(this.O,(function(e){return e.mediaElement&&(i.Xb.nb(),e.mediaElement=null),i.F&&i.F.release(),i.g=null,fi(e=Promise.resolve())})),r.set(this.da,(function(e){return fi($l(i,e))})),r.set(this.wb,(function(e){return e=function(e,t){var n,i,r,a,o;return L((function(s){if(1==s.g)return n=e.h.textDisplayFactory,i=n(),e.Ud=n,r=function(e,t,n,i){return new xo(e,t,n,i)}(t.mediaElement,i,(function(t,n,i){Xl(e,t,n,i)}),e.L),r.configure(e.h.mediaSource),a=e.h.manifest,o=a.segmentRelativeVttTiming,r.H=o,A(s,r.J,2);e.G=r,b(s)}))}(i,e),fi(e)})),r.set(this.Zd,(function(e,t){return e=function(e,t,n){var i,r,a,o;return L((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.D,e.Nb=i,a=e,A(s,Yr(i,r,e.h.manifest.retryParameters,t.mimeType),2);a.Yc=s.h,e.J=e.Yc(),o=Ai(e.h.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0),e.J.configure(o),b(s)}))}(i,e,t),fi(e)})),r.set(this.Xd,(function(e){return function(e,t){var n=t.uri;t=e.D,e.Fa=new Ds((function(){return e.uc()})),e.Fa.addEventListener("regionadd",(function(t){t=t.region,Iu(e,"timelineregionadded",t),e.F&&e.F.onDashTimedMetadata(t)})),e.ua=null,e.h.streaming.observeQualityChanges&&(e.ua=new Rs((function(){return e.Na()})),e.ua.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(ql("mediaqualitychanged",n))})));var i={networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.V;try{i.g.enabled&&(i.o=n.format,yl(i,t,{ot:El,su:!i.i}))}catch(e){Y("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(t,n){vl(e.V,t,n)},filter:function(t){return cu(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=l(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(i=l(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=l(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Ts;s={id:e.Yd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:Ze,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Fa;e:{for(var i=l(n.g),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new gi("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Cu(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.u&&hu(e,n.keySystem,t)}},r=Date.now()/1e3;return new ui(function(){var t,a,o,s;return L((function(l){if(1==l.g)return t=e,A(l,e.J.start(n,i),2);if(t.i=l.h,a=ql("manifestparsed"),e.dispatchEvent(a),0==e.i.variants.length)throw new De(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),o=Date.now()/1e3,s=o-r,e.o.F=s,b(l)}))}(),(function(){return e.J.stop()}))}(i,e)})),r.set(this.Qd,(function(e){return e=function(e,t){var n,i;return L((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=Zl(e,{kb:e.D,onError:function(t){Cu(e,t)},cd:function(t){Du(e,t)},onExpirationUpdated:function(t,n){Lu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.o.j=Date.now()/1e3-n,e.L&&((t=e.L).g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),A(r,kr(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?A(r,e.m.Yb(t.mediaElement),3):A(r,cu(e,e.i),0)}))}(i,e),fi(e)})),r.set(this.ba,(function(e,t){return fi(function(e,t,n){var i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,E;return L((function(_){switch(_.g){case 1:for(t.startTime=n.startTime,null!=e.fc&&(t.startTime=e.fc,e.fc=null),i=t.mediaElement,r=t.uri,e.Nb=r,e.H=new Ss({Tc:function(){return i.playbackRate},Pc:function(){return i.defaultPlaybackRate},le:function(e){i.playbackRate=e},Me:function(e){i.currentTime+=e}}),a=function(){return gu(e)},o=function(){return pu(e)},e.s.C(i,"playing",a),e.s.C(i,"pause",a),e.s.C(i,"ended",a),e.s.C(i,"ratechange",o),function(e,t){if(t.lcevc.enabled){var n=e.Xa();n&&n[0]&&n[0].videoMimeType==Xu.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(t.streaming.forceTransmux||W("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),zl(e),null==e.L&&(e.L=new Ro(e.g,e.cf,t.lcevc),e.G&&(e.G.D=e.L))}else zl(e)}(e,e.h),s=e.h.abrFactory,e.u&&e.Nd==s||(e.Nd=s,e.u=s(),"function"!=typeof e.u.setMediaElement&&(zn("AbrManager","Please use an AbrManager with setMediaElement function."),e.u.setMediaElement=function(){}),e.u.configure(e.h.abr)),e.ub=new ni(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.vb=e.h.preferredTextLanguage,e.cc=e.h.preferredTextRole,e.$b=e.h.preferForcedSubs,Pu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,i){e.j&&t!=e.j.l&&Au(e,t,!0,void 0!==n&&n,void 0===i?0:i)})),e.u.setMediaElement(i),cn(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new Bs(e.i,{Sc:function(){return e.B?e.B.Ic():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){vl(e.V,t,n)},R:e.G,kb:e.D,onError:function(t){return Cu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gg:function(){e.J&&e.J.update&&e.J.update()},Wd:function(t,n,i){e.B&&e.B.Ne(),tu(e),t=(new Map).set("start",t).set("end",n).set("contentType",i),e.dispatchEvent(ql("segmentappended",t))},fg:function(t,n){(n=n.Od)&&e.ua&&function(e,t,n){var i=function(e,t){var n=e.g.get(t);return n||(n={rc:[],Ae:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.rc;t.rc=r.filter((function(e,t){return!(e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i)}))}else t.rc=[]}(e,i),e={Od:t,position:n},t=(i=i.rc).findIndex((function(e){return e.position>=n})),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.ua,n,t)},xe:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&["audio","video"].includes(t)){var r=0,a=l((n=new er(Ce(n))).data);for(t=a.next();!t.done;t=a.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{for(r=new Uint8Array(r),a=0,t=(n=l(n.data)).next();!t.done;t=n.next())t=t.value,r.set(t,a),a+=t.length;Ir(i,"cenc",r),i=i.o}}else i=Promise.resolve();return i},hg:function(t,n,i){Xl(e,t,n,i)}})}(e),e.j.configure(e.h.streaming),e.l=Gu,i.textTracks&&e.s.C(i.textTracks,"addtrack",(function(t){if(t.track&&"chapters"===(t=t.track).kind)Jl(e,t)})),e.dispatchEvent(ql("streaming")),u=null,(c=e.j.l)||(u=mu(e)),d=[],f=l([(h=c||u).video,h.audio]),p=f.next();!p.done;p=f.next())(g=p.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){_.A(2);break}return A(_,Promise.all(d),2);case 2:if(e.B=function(e,t){return new vs(e.g,e.i,e.h.streaming,t,(function(){e.xb&&Is(e.xb,!0),e.j&&e.j.vc(),e.M&&tu(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.xb=function(e){var t=new Ls(e.Fa);t.addEventListener("enter",(function(t){Iu(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){Iu(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Iu(e,"timelineregionenter",n),Iu(e,"timelineregionexit",n))}));var n=new Cs(e.g);return n.g.add(t),e.ua&&n.g.add(e.ua),n}(e),v=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),eu(e,v),c){_.A(4);break}if(Au(e,u,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){_.A(5);break}return m=e.B.Ic(),A(_,function(e,t){var n,i,r,a,o;return L((function(s){return 1==s.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return L((function(a){return 1==a.g?e?A(a,e.createSegmentIndex(),2):a.return(null):(i=(n=e.segmentIndex.Cb(t))?n.next().value:null)?(r=i.startTime,a.return(r)):a.return(null)}))},A(s,r(n,t),2)):3!=s.g?(a=s.h,A(s,r(i,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(u,m),6);case 6:y=_.h,e.B.zd(y);case 5:Eu(e,null,kn(u));case 4:return e.B.yd(),e.Fb().find((function(e){return e.active}))||((E=Pn(e.i.textStreams,e.vb,e.cc,e.$b)[0]||null)&&Gl(e.o.h,E,!0),u&&(E?(u.audio&&function(e,t,n){if(0==e.h.autoShowText)return!1;if(1==e.h.autoShowText)return!0;var i=nn(e.h.preferredTextLanguage);return n=nn(n.language),2==e.h.autoShowText?Zt(n,i):3==e.h.autoShowText?(e=nn(t.language),Zt(n,i)&&!Zt(e,n)):(W("Invalid autoShowText setting!"),!1)}(e,u.audio,E)&&(e.ia=!0),e.ia&&e.G.m.setTextVisibility(!0),Su(e)):e.ia=!1),E&&(e.h.streaming.alwaysStreamText||e.Hd())&&Vs(e.j,E)),A(_,e.j.start(),7);case 7:e.h.abr.enabled&&(e.u.enable(),wu(e)),En(e.j?e.j.l:null,e.i),xu(e.i),_u(e),vu(e),e.i.variants.some((function(e){return e.primary})),e.dc=!0,e.s.ma(i,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),b(_)}}))}(i,e,t))})),r.set(this.de,(function(e,t){return e=function(e,t,n){var i,r,a,o,s,l,u;return L((function(c){return 1==c.g?(i=et,r=Date.now()/1e3,a=!0,e.m=Zl(e,{kb:e.D,onError:function(t){Cu(e,t)},cd:function(t){Du(e,t)},onExpirationUpdated:function(t,n){Lu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&a&&(a=!1,e.o.j=Date.now()/1e3-r)}}),e.m.configure(e.h.drm),o=n.uri||"",s=qr(o),"application/x-mpegurl"==(l=Xu[s])&&dt()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:l,codecs:n.mimeType?Gt(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,A(c,kr(e.m,[u],[]),2)):A(c,e.m.Yb(t.mediaElement),0)}))}(i,e,t),fi(e)})),r.set(this.yb,(function(e,t){return function(e,t,n){function i(){return gu(e)}t.uri=n.uri,t.startTime=n.startTime,e.Nb=t.uri;var r=t.mediaElement;e.B=new gs(r);var a=!1;e.Zb.push((function(){a=!0})),null!=t.startTime&&e.B.zd(t.startTime),e.H=new Ss({Tc:function(){return r.playbackRate},Pc:function(){return r.defaultPlaybackRate},le:function(e){r.playbackRate=e},Me:function(e){r.currentTime+=e}}),eu(e,e.h.streaming.rebufferingGoal),e.s.C(r,"playing",i),e.s.C(r,"pause",i),e.s.C(r,"ended",i),e.s.C(r,"ratechange",(function(){return pu(e)})),"none"!=r.preload&&e.s.ma(r,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),r.audioTracks&&(e.s.C(r.audioTracks,"addtrack",(function(){return _u(e)})),e.s.C(r.audioTracks,"removetrack",(function(){return _u(e)})),e.s.C(r.audioTracks,"change",(function(){return _u(e)}))),r.textTracks&&(e.s.C(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.s.C(t,"cuechange",(function(){if(t.activeCues)for(var n=l(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,Ql(e,i.startTime,i.endTime,i.type,i.value),e.F&&e.F.onCueMetadataChange(i.value)}));var n=new at((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=l(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}(e,t);break;case"chapters":Jl(e,t);break;default:_u(e)}})),e.s.C(r.textTracks,"removetrack",(function(){return _u(e)})),e.s.C(r.textTracks,"change",(function(){return _u(e)})));var o=qr(t.uri);r.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=ml(e);e:{switch(n){case"video/webm":case"video/mp4":var r=Tl;break e;case"application/x-mpegurl":r=El;break e}r=void 0}return i.ot=r,i.su=!0,bl(t,Al(i))}catch(e){return Y("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.V,t.uri,Xu[o]),(ut()||pt("Web0S"))&&r.load(),e.l=Wu,e.dispatchEvent(ql("streaming"));var s=new nt;return os(r,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.B.yd(),s.resolve()})),os(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){return L((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.ge(t);var n=e.h.preferredVariantRole;""!=n&&e.ge(t,n)}}(e),iu(e).find((function(e){return"disabled"!=e.mode}))?t.A(2):A(t,new Promise((function(t){e.s.ma(r.textTracks,"change",t),new at(t).N(1)})),2)):a?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.he(t,"",n);var i=e.h.preferredTextRole;""!=i&&e.he(t,i,n)}}(e),void b(t))}))})),r.error?s.reject(Ru(e)):"none"==r.preload&&(W('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.s.ma(r,"error",(function(){s.reject(Ru(e))})),new ui(s,(function(){return s.reject(new De(2,7,7001)),Promise.resolve()})).Y((function(){e.dc=!0}))}(i,e,t)})),this.Ga=new Zs(this.O,{Mf:function(e,t,n,r){var a=null;return e==i.O&&(a=n==i.O?i.O:i.W),e==i.W&&(a=n==i.O||t.mediaElement!=r.mediaElement?i.O:n==i.W?i.W:n==i.wb||n==i.ba?i.wb:n==i.yb?i.de:null),e==i.wb&&(a=n==i.ba&&t.mediaElement==r.mediaElement?i.Zd:i.da),e==i.Zd&&(a=Uu(i.ba,i.Xd,i.da,n,t,r)),e==i.Xd&&(a=Uu(i.ba,i.Qd,i.da,n,t,r)),e==i.Qd&&(a=Uu(i.ba,i.ba,i.da,n,t,r)),e==i.de&&(a=n==i.yb&&t.mediaElement==r.mediaElement?i.yb:i.da),e!=i.ba&&e!=i.yb||(a=i.da),e==i.da&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.W:i.O),a},yf:function(e,t,n){return i.dispatchEvent(ql("onstatechange",(new Map).set("state",e.name))),r.get(e)(t,n)},handleError:function(e){return L((function(t){return 1==t.g?A(t,$l(i,e),2):t.return(e.mediaElement?i.W:i.O)}))},eg:function(e){i.dispatchEvent(ql("onstateidle",(new Map).set("state",e.name)))}}),this.af=new at((function(){pn(i.i.variants,i.h.restrictions,i.ec)&&mu(i)})),t&&this.Yb(t,!0)}function zl(e){null!=e.L&&(e.L.release(),e.L=null)}function ql(e,t){return new gi(e,t)}function $l(e,t){var n,i,r,a,o,s,u,c,d;return L((function(h){switch(h.g){case 1:return e.l!=ju&&(e.l=Ku),n=e.Zb.map((function(e){return e()})),e.Zb=[],A(h,Promise.all(n),2);case 2:if(e.dispatchEvent(ql("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.Fa&&(e.Fa.release(),e.Fa=null),t.mediaElement&&e.s.nb(),e.af.stop(),e.xb&&(e.xb.release(),e.xb=null),e.Vc&&(e.Vc.stop(),e.Vc=null),!e.J){h.A(3);break}return A(h,e.J.stop(),4);case 4:e.J=null,e.Yc=null;case 3:if(!e.u){h.A(5);break}return A(h,e.u.stop(),5);case 5:if(!e.j){h.A(7);break}return A(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.B&&(e.B.release(),e.B=null),!e.G){h.A(9);break}return A(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.F&&e.F.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.A(11);break}return A(h,new Promise((function(e){return new at(e).N(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.A(13);break}return A(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Nb=null,e.M=null,e.i){for(i=l(e.i.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=l([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();for(c=l(e.i.textStreams),s=c.next();!s.done;s=c.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.o=new Wl,e.Ud=null,fu(e),b(h)}}))}function Xl(e,t,n,i){for(var r=(t=l(t)).next();!r.done;r=t.next())if((r=r.value).data&&r.cueTime&&r.frames){var a=r.cueTime+n,o=i;o&&a>o&&(o=a);for(var s=l(r.frames),u=s.next();!u.done;u=s.next())Ql(e,a,o,"org.id3",u.value);e.F&&e.F.onHlsTimedMetadata(r,a)}}function Ql(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(ql("metadata",t))}function Jl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new at((function(){t.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}function Zl(e,t){return new _r(t,e.h.drm.updateExpirationTime)}function eu(e,t){e.M=new ii,e.M.g=ai,ri(e.M,t,Math.min(.5,t/2)),fu(e),e.Vc=new at((function(){tu(e)})).Ca(.25)}function tu(e){switch(e.l){case Wu:if(e.g.ended)var t=!0;else{var n=yo(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case Gu:e:if(e.g.ended||No(e.G))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.gb();var i=yo(e.g.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=bo(e.g.buffered,e.g.currentTime);var r=t,a=(n=e.M).h.get(n.g);t=n.g,i=r||i>=a?oi:ai,n.g=i,t!=i&&fu(e)}function nu(e){if(e.J){var t=Ai(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.J.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{du(e,e.i)}catch(t){Cu(e,t)}e.u&&vu(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||yu(e)}if(e.D&&e.D.je(e.h.streaming.forceHTTPS),e.G&&(e.G.configure(e.h.mediaSource),e.G.H=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Ud!=t)){var n=t(),i=e.G,r=i.m;i.m=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.Ud=t,e.j&&((n=(t=e.j).j.get(Ze))&&Hs(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),wu(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),ri(e.M,t,Math.min(.5,t/2))),e.i&&Pu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function iu(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function ru(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function au(e,t){var n,i;return L((function(r){switch(r.g){case 1:return n=qr(t),(i=Qu[n])?r.return(i):(E(r,2),A(r,zr(t,e.D,e.h.streaming.retryParameters),4));case 4:i=r.h,k(r,3);break;case 2:T(r);case 3:if(i)return r.return(i);throw new De(1,2,2011,n)}}))}function ou(e,t,n,i,r,a,o){var s,l,u,c;return L((function(d){if(1==d.g)return"text/vtt"!=r||o.length?A(d,su(e,t,e.D,e.h.streaming.retryParameters),3):d.A(2);2!=d.g&&(s=d.h,l=lu(e,s,r,o),u=new Blob([l],{type:"text/vtt"}),t=Qo(u),r="text/vtt"),c=document.createElement("track");var h=e.V,f=t;try{if(h.g.enabled){var p=ml(h);p.ot=wl,p.su=!0;var g=bl(f,Al(p))}else g=f}catch(e){Y("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=f}return c.src=g,c.label=a,c.kind=i,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),d.return(c)}))}function su(e,t,n,i){var r,a,o;return L((function(s){if(1==s.g){r=Ri,(a=Si([t],i)).method="GET";var l=e.V;try{l.g.enabled&&yl(l,a,{ot:wl,su:!0})}catch(e){Y("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return A(s,n.request(r,a).promise,2)}return o=s.h,s.return(o.data)}))}function lu(e,t,n,i){var r=Qt[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Ce(t),function(e,t){function n(e){for(var n=e,i=l(t),r=i.next();!r.done;r=i.next())(r=r.value).end&&r.start<e&&(n+=r.end-r.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(i=Math.floor(n/60%60))?"0":"")+i+":"+(10>(r=Math.floor(n%60))?"0":"")+r+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var i=il(e,[]);e="WEBVTT\n\n";for(var r=(i=l(i)).next();!r.done;r=i.next())e+=n((r=r.value).startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case oe:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}(t=n.parseMedia(t,e),i);throw new De(2,2,2014,n)}function uu(e){var t=Fl();return t.streaming.failureCallback=function(t){if(e.U()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.ce(n))}},t.textDisplayFactory=function(){return e.Uc?new ul(e.g,e.Uc):new rl(e.g)},t}function cu(e,t){return L((function(n){if(1==n.g)return A(n,function(e,t){return L((function(n){if(1==n.g)return A(n,gn(e.j?e.j.l:null,t),2);xu(t),b(n)}))}(e,t),2);du(e,t),b(n)}))}function du(e,t){if(e.l!=ju){pn(t.variants,e.h.restrictions,e.ec)&&e.j&&_u(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var i=l(t.variants),r=i.next();!r.done;r=i.next())r=r.value,hu(e,n.keySystem,r.video),hu(e,n.keySystem,r.audio);Ou(e,t)}}function hu(e,t,n){if(n)for(var i=(n=l(n.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t)for(var r=(i=l(i.initData||[])).next();!r.done;r=i.next())r=r.value,Ir(e.m,r.initDataType,r.initData)}function fu(e){var t=e.Fd();if(e.o&&e.M&&e.B){var n=e.H;n.j=t,ws(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),gu(e)}t=(new Map).set("buffering",t),e.dispatchEvent(ql("buffering",t))}function pu(e){var t=e.g.playbackRate;0!=t&&(e.H&&e.H.set(t),t=ql("ratechange"),e.dispatchEvent(t))}function gu(e){if(e.o&&e.M){var t=e.o.g;e.M.g==ai?Hl(t,"buffering"):e.g.paused?Hl(t,"paused"):e.g.ended?Hl(t,"ended"):Hl(t,"playing")}}function vu(e){try{Ou(e,e.i)}catch(t){return Cu(e,t),!1}var t=e.i.variants.filter((function(e){return Dn(e)}));return t=e.ub.create(t),e.u.setVariants(Array.from(t.values())),!0}function mu(e){return vu(e)?e.u.chooseVariant():null}function yu(e){var t=mu(e);t&&Au(e,t,!0,!0,0)}function Au(e,t,n,i,r){var a=e.j.l;if(t==a)i&&Us(e.j,t,i,r,!0);else{var o=e.o.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Us(e.j,t,i,r,void 0,n),i=null,a&&(i=kn(a)),t=kn(t),n?Eu(e,i,t):ku(e,i,t)}}function bu(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),ku(e,n=In(n),t=In(t))}function Eu(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&Do(e.L,n),Mu(e,n=ql("adaptation",t))}function _u(e){Mu(e,ql("trackschanged"))}function ku(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&Do(e.L,n),Mu(e,n=ql("variantchanged",t))}function Tu(e){Mu(e,ql("textchanged"))}function Su(e){Mu(e,ql("texttrackvisibility"))}function wu(e){Mu(e,ql("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function Cu(e,t){if(e.l!=ju)if(function(e,t){if(1002!=t.code&&1011!=t.code||1!=t.category||!navigator.onLine)return!1;var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return!1;n=1}t=e.Xa().find((function(e){return e.active}));for(var i=e.i,r=l(i.variants),a=r.next();!a.done;a=r.next())(a=a.value).id===t.id&&(a.disabledUntilTime=Date.now()/1e3+n);return pn(i.variants,e.h.restrictions,e.ec),!!(t=mu(e))&&(i=e.Na().video.reduce((function(e,t){return e+t.end-t.start}),0),Au(e,t,!1,!0,i),e.af.N(n),!0)}(e,t))t.handled=!0;else{var n=ql("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Iu(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(ql(t,n))}function Ru(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new De(2,3,3016,t,n,e.g.error.message)}function Du(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=l(e.i.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=l(o)).next();!s.done;s=o.next()){var u=s.value;if(s=a.allowedByKeySystem,u.keyIds.size){a.allowedByKeySystem=!0;for(var c=(u=l(u.keyIds)).next();!c.done;c=u.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!zu.includes(c)}s!=a.allowedByKeySystem&&(r=!0)}}r&&!vu(e)||((t=e.j.l)&&!t.allowedByKeySystem&&yu(e),r&&_u(e))}}function Lu(e,t,n){e.J&&e.J.onExpirationUpdated&&e.J.onExpirationUpdated(t,n),t=ql("expirationupdated"),e.dispatchEvent(t)}function Pu(e,t,n){0<t&&(e.U()||e.Ze(t)),n<(t=e.getDuration())&&(e.U()||e.Aa(n))}function Ou(e,t){e=e.m?e.m.Qc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var i=!1,r=!1,a=new Set,o=new Set,s=(t=l(t.variants)).next();!s.done;s=t.next()){var u=[];(s=s.value).audio&&u.push(s.audio),s.video&&u.push(s.video);for(var c=(u=l(u)).next();!c.done;c=u.next())if((c=c.value).keyIds.size)for(var d=(c=l(c.keyIds)).next();!d.done;d=c.next()){d=d.value;var h=e[n?"00":d];h?zu.includes(h)&&o.add(h):a.add(d)}s.allowedByApplication?s.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw new De(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}function xu(e){if(!e.variants.some(Dn))throw new De(2,4,4032)}function Mu(e,t){L((function(n){if(1==n.g)return A(n,Promise.resolve(),2);e.l!=ju&&e.dispatchEvent(t),b(n)}))}function Nu(e){for(var t=new Set,n=(e=l(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(nn(n.language)):t.add("und");return t}function Bu(e){for(var t=new Map,n=new Map,i=(e=l(e)).next();!i.done;i=e.next()){var r="und",a=[];(i=i.value).language&&(r=nn(i.language)),(a="variant"==i.type?i.audioRoles:i.roles)&&a.length||(a=[""]),t.has(r)||t.set(r,new Set);for(var o=(a=l(a)).next();!o.done;o=a.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var s=[];return t.forEach((function(e,t){for(var i=(e=l(e)).next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i)),s.push({language:t,role:i,label:r})}})),s}function Fu(){return new De(2,7,7e3)}function Uu(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Vu(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function Hu(e){return new Promise((function(t,n){e.mb=function(){return n(Fu())},e.bd=function(){return t()},e.onError=function(e){return n(e)},e.dd=function(){return n(Fu())}}))}U("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"}),U("shaka.util.ConfigUtils",Dl),Dl.convertToConfigObject=Pl,Dl.mergeConfigObjects=Ll,U("shaka.util.FairPlayUtils",xl),xl.commonFairPlayResponse=function(e,t){if(2===e){try{var n=At(t.data)}catch(e){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=we(It(n)))}},xl.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},xl.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},xl.verimatrixFairPlayRequest=function(e,t){2===e&&(e=Ct(e=Ce(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=_t("spc="+e))},xl.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=Et(t).split("skd://").pop().split("?").shift(),i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=new Uint16Array(r);for(var a=0,o=i.length;a<o;a++)r[a]=i.charCodeAt(a);return Nl(t,r,n)},xl.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Nl(e,n=Et(e).split(";").pop(),t))},xl.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Nl(e,n=Et(e).split("skd://").pop(),t))},xl.initDataTransform=Nl,xl.defaultGetContentId=Ml,xl.isFairPlaySupported=function(){var e;return L((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},E(t,2),A(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(T(t),t.return(!1))}))},U("shaka.util.PlayerConfiguration",Bl),Bl.mergeConfigObjects=Ul,Bl.createDefault=Fl,g(Yl,yi),(n=Yl.prototype).destroy=function(){var e,t=this;return L((function(n){switch(n.g){case 1:return t.l==ju?n.return():(zl(t),t.l=ju,e=el(t.Ga,(function(){return{node:t.O,payload:Vu(),hb:!1}})),A(n,new Promise((function(t){e.Jb=function(){},e.bd=function(){t()},e.mb=function(){t()},e.onError=function(){t()},e.dd=function(){t()}})),2));case 2:return A(n,t.Ga.destroy(),3);case 3:if(t.Xc&&(t.Xc.release(),t.Xc=null),t.Xb&&(t.Xb.release(),t.Xb=null),t.s&&(t.s.release(),t.s=null),t.Nd=null,t.u=null,t.h=null,t.o=null,t.Uc=null,t.V=null,!t.D){n.A(4);break}return A(n,t.D.destroy(),5);case 5:t.D=null;case 4:yi.prototype.release.call(t),b(n)}}))},n.Yb=function(e,t){if(t=void 0===t||t,this.l==ju)return Promise.reject(Fu());var n=Vu();n.mediaElement=e,ot()||(t=!1);var i=t?this.wb:this.W;return(e=el(this.Ga,(function(){return{node:i,payload:n,hb:!1}}))).Jb=function(){},Hu(e)},n.lf=function(e){this.cf=e},n.detach=function(){var e=this;if(this.l==ju)return Promise.reject(Fu());var t=el(this.Ga,(function(){return{node:e.O,payload:Vu(),hb:!1}}));return t.Jb=function(){},Hu(t)},n.re=function(e){var t=this;if(e=void 0===e||e,this.l==ju)return Promise.reject(Fu());this.dc=!1,ot()||(e=!1),zl(this);var n=Vu(),i=el(this.Ga,(function(i){var r=i.mediaElement&&e?t.wb:i.mediaElement?t.W:t.O;return n.mediaElement=i.mediaElement,{node:r,payload:n,hb:!1}}));return i.Jb=function(){},Hu(i)},n.Fg=function(e){this.fc=e},n.load=function(e,t,n){var i=this;if(this.fc=null,this.dc=!1,this.l==ju)return Promise.reject(Fu());this.dispatchEvent(ql("loading"));var r=Vu();r.uri=e,r.ne=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!ot())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=qr(i),n=Xu[n]),n){if(""==(t.mediaElement||gt()).canPlayType(n))return!1;if(!ot()||!(n in $r)&&!(qr(i)in Xr)||e.h.streaming.preferNativeHls)return!0;if(dt())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,r)?this.yb:this.ba,o=el(this.Ga,(function(e){return null==e.mediaElement?null:(r.mediaElement=e.mediaElement,{node:a,payload:r,hb:!0})}));return this.o=new Wl,this.V=function(e){return new gl({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Na:function(){return e.Na()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Xa:function(){return e.Xa()},Rc:function(){return e.Rc()},U:function(){return e.U()}},e.h.cmcd)}(this),o.Jb=function(){},new Promise((function(e,t){o.dd=function(){return t(new De(2,7,7002))},o.bd=function(){e(),i.dispatchEvent(ql("loaded"))},o.mb=function(){return t(Fu())},o.onError=function(e){return t(e)}}))},n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Pl(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(zn("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Ul(this.h,e,uu(this));return nu(this),n},n.getConfiguration=function(){var e=uu(this);return Ul(e,this.h,uu(this)),e},n.Bf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.uc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},n.rg=function(){for(var e in this.h)delete this.h[e];Ul(this.h,uu(this),uu(this)),nu(this)},n.Hf=function(){return this.l},n.Lf=function(){return this.g},n.jc=function(){return this.D},n.Dd=function(){return this.Nb},n.Ge=function(){return this.F?this.F:null},n.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.g||!this.g.src)&&1/0==this.g.duration},n.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},n.Zf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},n.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Oa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},n.Xf=function(){this.U()&&(this.g.currentTime=this.uc().end)},n.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},n.drmInfo=function(){return this.m?this.m.g:null},n.ic=function(){return this.m?this.m.ic():1/0},n.Qc=function(){return this.m?this.m.Qc():{}},n.Fd=function(){return!!this.M&&this.M.g==ai},n.Rc=function(){return this.g?this.H?this.H.i:1:0},n.Ag=function(e){0==e?W("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(e),this.l==Gu&&(this.u.playbackRateChanged(e),Fs(this.j,1<Math.abs(e))))},n.pf=function(){var e=this.H.Pc();this.l==Wu&&this.H.set(e),this.l==Gu&&(this.H.set(e),this.u.playbackRateChanged(e),Fs(this.j,!1))},n.Xa=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,i=l(this.i.variants),r=i.next();!r.done;r=i.next())if(Dn(r=r.value)){var a=kn(r);a.active=r==e,a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return In(e)})):[]},n.Fb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=l(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=Tn(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?iu(this).map((function(e){return Cn(e)})):[]},n.Ff=function(){return this.i?this.i.imageStreams.map((function(e){return Sn(e)})):[]},n.Tf=function(e,t){var n,i,r,a,o,s,l,u,c,d,h,f,p,g,v,m,y,b,E,_,k=this;return L((function(T){return 1==T.g?k.i?(n=k.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?T.A(3):A(T,n.createSegmentIndex(),3):T.return(null):T.A(2):2!=T.g?null==(i=n.segmentIndex.find(t))?T.return(null):(r=n.segmentIndex.get(i),a=r.tilesLayout||n.tilesLayout,(o=/(\d+)x(\d+)/.exec(a))?(s=n.width||0,l=n.height||0,u=parseInt(o[1],10),c=parseInt(o[2],10),d=s/u,h=l/c,f=u*c,p=r.j-r.startTime,g=r.s||p/f,v=r.startTime,y=m=0,1<f&&(b=Math.floor((t-r.startTime)/g),v=r.startTime+b*g,m=b%u*d,y=Math.floor(b/u)*h),E=!1,(_=r.o)&&(E=!0,h=_.height,m=_.positionX,y=_.positionY,d=_.width),T.return({imageHeight:l,imageWidth:s,height:h,positionX:m,positionY:y,startTime:v,duration:g,uris:r.ya(),width:d,sprite:E})):T.return(null)):T.return(null)}))},n.Se=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(Gl(this.o.h,t,!1),Vs(this.j,t),Tu(this),this.vb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=l(t=iu(this))).next();!n.done;n=t.next())wn(n=n.value)==e.id?n.mode=this.ia?"showing":"hidden":n.mode="disabled";Tu(this)}},n.Te=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&Dn(i)&&(Au(this,i,!1,t,n),this.ub=new ti(i),vu(this))}else if(this.g&&this.g.audioTracks)for(n=(t=l(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(wn(n=n.value)==e.id){bu(this,n);break}},n.Af=function(){return Bu(this.Xa())},n.Rf=function(){return Bu(this.Fb())},n.zf=function(){return Array.from(Nu(this.Xa()))},n.Qf=function(){return Array.from(Nu(this.Fb()))},n.ge=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.B){this.ub=new ni(e,t||"",n,""),t=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},e=this.j.l;var i=this.ub.create(this.i.variants);n=null;for(var r=(i=l(i.values())).next();!r.done;r=i.next())r=r.value,(!n||t(n,e)>t(r,e))&&(n=r);n?(t=kn(n),this.Te(t,!0)):yu(this)}else if(this.g&&this.g.audioTracks){r=Array.from(this.g.audioTracks),e=nn(e),i=n=null;for(var a=(r=l(r)).next();!a.done;a=r.next()){var o=In(a=a.value);nn(o.language)==e&&(n=a,t?o.roles.includes(t)&&(i=a):0==o.roles.length&&(i=a))}i?bu(this,i):n&&bu(this,n)}},n.he=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.B)this.vb=e,this.cc=t||"",this.$b=n,(e=Pn(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&e!=this.j.o&&(Gl(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(Vs(this.j,e),Tu(this));else{var i=nn(e);(e=this.Fb().find((function(e){return nn(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Se(e)}},n.tg=function(e){if(this.i&&this.B){for(var t=null,n=l(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.ub=new ni(t.language,"",0,e),yu(this))}},n.Hd=function(){var e=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?iu(this).some((function(e){return"showing"==e.mode})):e},n.He=function(){return this.g&&this.g.src&&this.g.textTracks?ru(this).map((function(e){return Cn(e)})):[]},n.Cf=function(e){var t=nn(e),n=ru(this).filter((function(e){return nn(e.language)==t}));if(!n||!n.length)return[];e=[];for(var i=new Set,r=(n=l(n)).next();!r.done;r=n.next())if((r=r.value)&&r.cues)for(var a=(r=l(r.cues)).next();!a.done;a=r.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text),o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime},i.has(a)||(e.push(o),i.add(a))}return e},n.yg=function(e){if(e=!!e,this.ia!=e){if(this.ia=e,this.l==Gu)this.G.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Pn(this.i.textStreams,this.vb,this.cc,this.$b)).length&&(Vs(this.j,e[0]),Tu(this)):function(e){var t=e.j.get(Ze);t&&(Xs(t),Qs(t).catch((function(){})),e.j.delete(Ze)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=iu(this),n=(t=l(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Su(this)}},n.Of=function(){if(!this.U())return null;var e=this.Ga.l,t=0;if(this.B)t=this.B.Ic();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},n.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},n.Na=function(){if(this.l==Gu)return this.G.Na();var e={total:[],audio:[],video:[],text:[]};return this.l==Wu&&(e.total=Eo(this.g.buffered)),e},n.getStats=function(){if(this.l!=Gu&&this.l!=Wu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};gu(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.o;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.B&&(this.o.M=this.B.te(),this.o.O=this.B.ue()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.o;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.J=i,this.o.H=Number(n.corruptedVideoFrames)}this.m?n=(n=this.m).H?n.H:NaN:n=NaN,this.o.s=n,this.l==Gu&&((n=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*n.bandwidth),n&&n.video&&(t=this.o,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.U()&&(n=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.o.u=n),this.l==Wu&&(n=this.o,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.o;e=r.o,n=r.l,t=r.B,i=r.J;for(var a=r.L,o=r.H,s=r.O,u=r.M,c=r.u,d=r.i,h=r.m,f=r.F,p=r.j,g=jl(r.g,"playing"),v=jl(r.g,"paused"),m=jl(r.g,"buffering"),y=r.s,A=r.D,b=r.G,E=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=l(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(r.g),_=[],k=(r=l(r.h.g)).next();!k.done;k=r.next())k=k.value,_.push({timestamp:k.timestamp,id:k.id,type:k.type,fromAdaptation:k.fromAdaptation,bandwidth:k.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:v,bufferingTime:m,licenseTime:y,liveLatency:A,maxSegmentDuration:b,stateHistory:E,switchHistory:_}},n.hf=function(e,t,n,i,r,a,o){o=void 0!==o&&o;var s,l,u,c,d,h,f,p,g,v,m=this;return L((function(y){switch(y.g){case 1:if(m.l!=Gu&&m.l!=Wu)throw new De(1,7,7004);if(i){y.A(2);break}return A(y,au(m,e),3);case 3:i=y.h;case 2:if(s=[],m.F)try{s=m.F.getServerSideCuePoints()}catch(e){}if(m.l!=Wu){y.A(4);break}return o&&(n="forced"),A(y,ou(m,e,t,n,i,a||"",s),5);case 5:if(l=m.Fb(),u=l.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return _u(m),y.return(u);throw new De(1,2,2012);case 4:if(c=et,1/0==(d=m.i.presentationTimeline.getDuration()))throw new De(1,4,4033);if(!s.length){y.A(6);break}return A(y,su(m,e,m.D,m.h.streaming.retryParameters),7);case 7:h=y.h,f=lu(m,h,i,s),p=new Blob([f],{type:"text/vtt"}),e=Qo(p),i="text/vtt";case 6:if(g={id:m.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:_s(0,d,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},v=Ht(g.mimeType,g.codecs),!zt(v))throw new De(2,2,2014,i);return m.i.textStreams.push(g),_u(m),y.return(Tn(g))}}))},n.jf=function(e,t){var n,i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,b=this;return L((function(E){switch(E.g){case 1:if(b.l!=Gu&&b.l!=Wu)throw new De(1,7,7004);if(b.l==Wu)throw new De(1,2,2016);if(t){E.A(2);break}return A(E,au(b,e),3);case 3:t=E.h;case 2:if("text/vtt"!=t)throw new De(1,2,2017,e);if(n=et,1/0==(i=b.i.presentationTimeline.getDuration()))throw new De(1,4,4045);return A(E,su(b,e,b.D,b.h.streaming.retryParameters),4);case 4:if(r=E.h,!(a=Qt[t]))throw new De(2,2,2014,t);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},u=Ce(r),c=o.parseMedia(u,s),d=[],h={},f=l(c),p=f.next();!p.done;h={Rb:h.Rb},p=f.next())g=p.value,h.Rb=$e([e],[g.payload])[0],v=new po(g.startTime,g.endTime,function(e){return function(){return[e.Rb]}}(h),0,null,null,0,0,1/0),h.Rb.includes("#xywh")&&(4===(m=h.Rb.split("#xywh=")[1].split(",")).length&&v.Ye({height:parseInt(m[3],10),positionX:parseInt(m[0],10),positionY:parseInt(m[1],10),width:parseInt(m[2],10)})),d.push(v);return y={id:b.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new bs(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},b.i.imageStreams.push(y),_u(b),E.return(Sn(y))}}))},n.gf=function(e,t,n){var i,r,a,o,s=this;return L((function(l){switch(l.g){case 1:if(s.l!=Gu&&s.l!=Wu)throw new De(1,7,7004);if(n){l.A(2);break}return A(l,au(s,e),3);case 3:n=l.h;case 2:if(i=[],s.F)try{i=s.F.getServerSideCuePoints()}catch(e){}return A(l,ou(s,e,t,"chapters",n,"",i),4);case 4:if(r=l.h,a=s.He(),!(o=a.find((function(e){return e.language==t})))){l.A(5);break}return A(l,new Promise((function(e,t){s.s.ma(r,"load",e),s.s.ma(r,"error",(function(){t(new De(1,2,2015))}))})),6);case 6:return l.return(o);case 5:throw new De(1,2,2012)}}))},n.ke=function(e,t){this.ec.width=e,this.ec.height=t},n.ce=function(e){if(this.l==Gu){var t=this.j;if(e=void 0===e?.1:e,t.h.g)t=!1;else if(t.s)t=!1;else{for(var n=l(t.j.values()),i=n.next();!i.done;i=n.next())!(i=i.value).nc||i.ra||i.Ka||(i.nc=!1,$s(t,i,e));t=!0}}else t=!1;return t},n.If=function(){return W("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},n.Jf=function(){return this.Yc},n.$e=function(e){this.Uc=e},U("shaka.Player",Yl),Yl.prototype.setVideoContainer=Yl.prototype.$e,Yl.prototype.getManifestParserFactory=Yl.prototype.Jf,Yl.prototype.getManifest=Yl.prototype.If,Yl.prototype.retryStreaming=Yl.prototype.ce,Yl.prototype.setMaxHardwareResolution=Yl.prototype.ke,Yl.prototype.addChaptersTrack=Yl.prototype.gf,Yl.prototype.addThumbnailsTrack=Yl.prototype.jf,Yl.prototype.addTextTrackAsync=Yl.prototype.hf,Yl.prototype.getStats=Yl.prototype.getStats,Yl.prototype.getBufferedInfo=Yl.prototype.Na,Yl.prototype.getPresentationStartTimeAsDate=Yl.prototype.Ie,Yl.prototype.getPlayheadTimeAsDate=Yl.prototype.Of,Yl.prototype.setTextTrackVisibility=Yl.prototype.yg,Yl.prototype.getChapters=Yl.prototype.Cf,Yl.prototype.getChaptersTracks=Yl.prototype.He,Yl.prototype.isTextTrackVisible=Yl.prototype.Hd,Yl.prototype.selectVariantsByLabel=Yl.prototype.tg,Yl.prototype.selectTextLanguage=Yl.prototype.he,Yl.prototype.selectAudioLanguage=Yl.prototype.ge,Yl.prototype.getTextLanguages=Yl.prototype.Qf,Yl.prototype.getAudioLanguages=Yl.prototype.zf,Yl.prototype.getTextLanguagesAndRoles=Yl.prototype.Rf,Yl.prototype.getAudioLanguagesAndRoles=Yl.prototype.Af,Yl.prototype.selectVariantTrack=Yl.prototype.Te,Yl.prototype.selectTextTrack=Yl.prototype.Se,Yl.prototype.getThumbnails=Yl.prototype.Tf,Yl.prototype.getImageTracks=Yl.prototype.Ff,Yl.prototype.getTextTracks=Yl.prototype.Fb,Yl.prototype.getVariantTracks=Yl.prototype.Xa,Yl.prototype.cancelTrickPlay=Yl.prototype.pf,Yl.prototype.trickPlay=Yl.prototype.Ag,Yl.prototype.getPlaybackRate=Yl.prototype.Rc,Yl.prototype.isBuffering=Yl.prototype.Fd,Yl.prototype.getKeyStatuses=Yl.prototype.Qc,Yl.prototype.getExpiration=Yl.prototype.ic,Yl.prototype.drmInfo=Yl.prototype.drmInfo,Yl.prototype.keySystem=Yl.prototype.keySystem,Yl.prototype.goToLive=Yl.prototype.Xf,Yl.prototype.seekRange=Yl.prototype.uc,Yl.prototype.isAudioOnly=Yl.prototype.Zf,Yl.prototype.isInProgress=Yl.prototype.jb,Yl.prototype.isLive=Yl.prototype.U,Yl.prototype.getAdManager=Yl.prototype.Ge,Yl.prototype.getAssetUri=Yl.prototype.Dd,Yl.prototype.getNetworkingEngine=Yl.prototype.jc,Yl.prototype.getMediaElement=Yl.prototype.Lf,Yl.prototype.getLoadMode=Yl.prototype.Hf,Yl.prototype.resetConfiguration=Yl.prototype.rg,Yl.prototype.getBufferFullness=Yl.prototype.Bf,Yl.prototype.getConfiguration=Yl.prototype.getConfiguration,Yl.prototype.configure=Yl.prototype.configure,Yl.prototype.load=Yl.prototype.load,Yl.prototype.updateStartTime=Yl.prototype.Fg,Yl.prototype.unload=Yl.prototype.re,Yl.prototype.detach=Yl.prototype.detach,Yl.prototype.attachCanvas=Yl.prototype.lf,Yl.prototype.attach=Yl.prototype.Yb,Yl.probeSupport=function(e){var t,n,i,r,a;return e=void 0===e||e,L((function(o){if(1==o.g)return t={},e?A(o,function(){var e,t,n,i,r,a;return L((function(o){return 1==o.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return L((function(o){switch(o.g){case 1:if(E(o,2),"org.w3.clearkey"===e&&ft())throw Error("Unsupported keySystem");return A(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.h,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),pt("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),A(o,t.createMediaKeys(),5);case 5:k(o,0);break;case 2:T(o),i.set(e,null),b(o)}}))},a=e.map((function(e){return r(e)})),A(o,Promise.all(a),2)):o.return(Ui(i))}))}(),3):o.A(2);2!=o.g&&(t=o.h);var s={};if(ot()){for(var c in $r)s[c]=!0;for(var d in Xr)s[d]=!0}c={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(d=l(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=d.next())s[h=h.value]=ot()?!!$r[h]:st(h);for(var f in c)s[f]=ot()?!!Xr[f]:st(c[f]);for(n=s,s={},c=(f=l(f='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(u(Zo)))).next();!c.done;c=f.next())s[c=c.value]=ot()?!!zt(c)||(Q(c)||Nt(c)):st(c),s[d=c.split(";")[0]]=s[d]||s[c];for(a in i={manifest:n,media:s,drm:t},r=qu)i[a]=r[a]();return o.return(i)}))},Yl.isBrowserSupported=function(){if(e.Promise||W("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||pt("Trident/"))return!1;var t=ft();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!ot()||st("application/x-mpegurl"))},Yl.setAdManagerFactory=function(e){$u=e},Yl.registerSupportPlugin=function(e,t){qu[e]=t},Yl.prototype.destroy=Yl.prototype.destroy;var ju=0,Ku=1,Gu=2,Wu=3;Yl.LoadMode={DESTROYED:ju,NOT_LOADED:Ku,MEDIA_SOURCE:Gu,SRC_EQUALS:Wu},Yl.version="v4.3.4";var Yu=["4","3"];Xn=new function(e){this.g=e,this.i=qn,this.h=$n}(new Yn(Number(Yu[0]),Number(Yu[1])));var zu=["output-restricted","internal-error"],qu={},$u=null,Xu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Qu={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Ju(){this.h=[],this.j=this.i=this.g=0}function Zu(e,t,n){var i=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new xi,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0})),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}function ec(t,n,i,r){var a=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new xi,google.ima.settings.setLocale(i),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new gi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=n.getAdsManager(t.i),t.l(new gi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var r=(i=l(i)).next();!r.done;r=i.next())n.push({start:r.value,end:null});t.l(new gi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new gi(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){tc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){ic(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){ic(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,nc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,nc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,nc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,nc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.i.addEventListener("play",(function(){t.g.start()}),{once:!0})}catch(e){rc(t,null)}}(a,t)})),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){tc(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function tc(e,t){t.getError(),rc(e,null),e.l(new gi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function nc(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function ic(e,t){var n=t.getAd();n?(e.j=new Zu(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new gi("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())):W("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function rc(e,t){e.l(new gi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function ac(e,t){this.i=e,this.h=null,this.g=t}function oc(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new xi,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new gi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new gi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(r,e)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.m=new ac(e,r.l),r.u&&(r.m.h=r.u),r.i(new gi("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new gi("ad-first-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new gi("ad-midpoint"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new gi("ad-third-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new gi("ad-complete")),r.i(new gi("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new gi("ad-skipped")),r.i(new gi("ad-stopped"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=l(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new gi("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function sc(){yi.call(this),this.g=this.i=null,this.h=new Ju,this.j=navigator.language}function lc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof gi){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(e=l(Object.getOwnPropertyNames(t))).next();!n.done;n=e.next())i.add(n.value);for(e={},n=(i=l(i)).next();!n.done;n=i.next())e[n=n.value]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=l(Eo(t))).next();!n.done;n=t.next())e=(n=n.value).end,i.start.push(n.start),i.end.push(e);t=i}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function uc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(n=Zu.prototype).getDuration=function(){return this.h.getDuration()},n.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},n.getRemainingTime=function(){return this.g.getRemainingTime()},n.isPaused=function(){return this.i},n.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},n.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},n.canSkipNow=function(){return this.g.getAdSkippableState()},n.skip=function(){return this.g.skip()},n.pause=function(){return this.g.pause()},n.play=function(){return this.g.resume()},n.getVolume=function(){return this.g.getVolume()},n.setVolume=function(e){return this.g.setVolume(e)},n.isMuted=function(){return 0==this.g.getVolume()},n.isLinear=function(){return this.h.isLinear()},n.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},n.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},n.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},n.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},n.getTitle=function(){return this.h.getTitle()},n.getDescription=function(){return this.h.getDescription()},n.release=function(){this.g=this.h=null},U("shaka.ads.ClientSideAd",Zu),Zu.prototype.release=Zu.prototype.release,Zu.prototype.getDescription=Zu.prototype.getDescription,Zu.prototype.getTitle=Zu.prototype.getTitle,Zu.prototype.getPositionInSequence=Zu.prototype.getPositionInSequence,Zu.prototype.getSequenceLength=Zu.prototype.getSequenceLength,Zu.prototype.setMuted=Zu.prototype.setMuted,Zu.prototype.resize=Zu.prototype.resize,Zu.prototype.isLinear=Zu.prototype.isLinear,Zu.prototype.isMuted=Zu.prototype.isMuted,Zu.prototype.setVolume=Zu.prototype.setVolume,Zu.prototype.getVolume=Zu.prototype.getVolume,Zu.prototype.play=Zu.prototype.play,Zu.prototype.pause=Zu.prototype.pause,Zu.prototype.skip=Zu.prototype.skip,Zu.prototype.canSkipNow=Zu.prototype.canSkipNow,Zu.prototype.getTimeUntilSkippable=Zu.prototype.getTimeUntilSkippable,Zu.prototype.isSkippable=Zu.prototype.isSkippable,Zu.prototype.isPaused=Zu.prototype.isPaused,Zu.prototype.getRemainingTime=Zu.prototype.getRemainingTime,Zu.prototype.getMinSuggestedDuration=Zu.prototype.getMinSuggestedDuration,Zu.prototype.getDuration=Zu.prototype.getDuration,ec.prototype.stop=function(){this.g&&this.g.stop(),this.o&&ll(this.o)},ec.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(n=ac.prototype).getDuration=function(){return this.h?this.h.duration:-1},n.getMinSuggestedDuration=function(){return this.getDuration()},n.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},n.isPaused=function(){return this.g.paused},n.isSkippable=function(){return this.i.isSkippable()},n.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},n.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},n.skip=function(){this.g.currentTime+=this.getRemainingTime()},n.pause=function(){return this.g.pause()},n.play=function(){return this.g.play()},n.getVolume=function(){return this.g.volume},n.setVolume=function(e){this.g.volume=e},n.isMuted=function(){return this.g.muted},n.isLinear=function(){return!0},n.resize=function(){},n.setMuted=function(e){this.g.muted=e},n.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},n.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},n.getTitle=function(){return this.i.getTitle()},n.getDescription=function(){return this.i.getDescription()},n.release=function(){this.g=this.h=this.i=null},U("shaka.ads.ServerSideAd",ac),ac.prototype.release=ac.prototype.release,ac.prototype.getDescription=ac.prototype.getDescription,ac.prototype.getTitle=ac.prototype.getTitle,ac.prototype.getPositionInSequence=ac.prototype.getPositionInSequence,ac.prototype.getSequenceLength=ac.prototype.getSequenceLength,ac.prototype.setMuted=ac.prototype.setMuted,ac.prototype.resize=ac.prototype.resize,ac.prototype.isLinear=ac.prototype.isLinear,ac.prototype.isMuted=ac.prototype.isMuted,ac.prototype.setVolume=ac.prototype.setVolume,ac.prototype.getVolume=ac.prototype.getVolume,ac.prototype.play=ac.prototype.play,ac.prototype.pause=ac.prototype.pause,ac.prototype.skip=ac.prototype.skip,ac.prototype.canSkipNow=ac.prototype.canSkipNow,ac.prototype.getTimeUntilSkippable=ac.prototype.getTimeUntilSkippable,ac.prototype.isSkippable=ac.prototype.isSkippable,ac.prototype.isPaused=ac.prototype.isPaused,ac.prototype.getRemainingTime=ac.prototype.getRemainingTime,ac.prototype.getMinSuggestedDuration=ac.prototype.getMinSuggestedDuration,ac.prototype.getDuration=ac.prototype.getDuration,oc.prototype.stop=function(){this.B="",this.o=null,this.D=[]},oc.prototype.release=function(){this.stop(),this.h&&this.h.release()},oc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g(sc,yi),(n=sc.prototype).setLocale=function(e){this.j=e},n.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new De(2,10,1e4);this.i&&this.i.release(),this.i=new ec(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},n.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),yi.prototype.release.call(this)},n.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new gi("ad-stopped")),this.h=new Ju},n.requestClientSideAds=function(e){if(!this.i)throw new De(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},n.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new De(2,10,10002);this.g&&this.g.release(),this.g=new oc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},n.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new De(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",(n=this.g).j?e=Promise.reject(new De(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new nt,n.g.requestStream(e),n.B=t||"",n.G=Date.now()/1e3,e=n.j),e},n.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new De(1,10,10003);(e.mpt||e.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},n.getServerSideCuePoints=function(){if(!this.g)throw new De(1,10,10003);return this.g.D},n.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},n.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},n.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},n.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},U("shaka.ads.AdManager",sc),sc.prototype.onCueMetadataChange=sc.prototype.onCueMetadataChange,sc.prototype.onHlsTimedMetadata=sc.prototype.onHlsTimedMetadata,sc.prototype.onDashTimedMetadata=sc.prototype.onDashTimedMetadata,sc.prototype.getStats=sc.prototype.getStats,sc.prototype.getServerSideCuePoints=sc.prototype.getServerSideCuePoints,sc.prototype.replaceServerSideAdTagParameters=sc.prototype.replaceServerSideAdTagParameters,sc.prototype.requestServerSideStream=sc.prototype.requestServerSideStream,sc.prototype.initServerSide=sc.prototype.initServerSide,sc.prototype.requestClientSideAds=sc.prototype.requestClientSideAds,sc.prototype.onAssetUnload=sc.prototype.onAssetUnload,sc.prototype.release=sc.prototype.release,sc.prototype.initClientSide=sc.prototype.initClientSide,sc.prototype.setLocale=sc.prototype.setLocale,sc.ADS_LOADED="ads-loaded",sc.AD_STARTED="ad-started",sc.AD_FIRST_QUARTILE="ad-first-quartile",sc.AD_MIDPOINT="ad-midpoint",sc.AD_THIRD_QUARTILE="ad-third-quartile",sc.AD_COMPLETE="ad-complete",sc.AD_STOPPED="ad-stopped",sc.AD_SKIPPED="ad-skipped",sc.AD_VOLUME_CHANGED="ad-volume-changed",sc.AD_MUTED="ad-muted",sc.AD_PAUSED="ad-paused",sc.AD_RESUMED="ad-resumed",sc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",sc.CUEPOINTS_CHANGED="ad-cue-points-changed",sc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",sc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",sc.AD_CLICKED="ad-clicked",sc.AD_PROGRESS="ad-progress",sc.AD_BUFFERING="ad-buffering",sc.AD_IMPRESSION="ad-impression",sc.AD_DURATION_CHANGED="ad-duration-changed",sc.AD_CLOSED="ad-closed",sc.AD_LOADED="ad-loaded",sc.ALL_ADS_COMPLETED="all-ads-completed",sc.AD_LINEAR_CHANGED="ad-linear-changed",sc.AD_METADATA="ad-metadata",sc.AD_RECOVERABLE_ERROR="ad-recoverable-error",sc.AD_BREAK_READY="ad-break-ready",sc.AD_INTERACTION="ad-interaction",$u=function(){return new sc};var cc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),dc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),hc=["loop","playbackRate"],fc=["pause","play"],pc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},gc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},vc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},mc=[["getConfiguration","configure"]],yc=[["isTextTrackVisible","setTextTrackVisibility"]],Ac="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),bc=["attach","attachCanvas","detach","load","unload"];function Ec(e,t,n,i,r,a,o){var s=this;this.G=e,this.M=o,this.j=new at(t),this.O=n,this.u=!1,this.s=i,this.F=r,this.J=a,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return wc(s)},this.D=function(e,t){switch((e=uc(t)).type){case"event":var n=e.targetName,i=vi(e.event);s.s(n,i);break;case"update":for(i in n=e.update)for(var r in e=s.g[i]||{},n[i])e[r]=n[i][r];s.u&&(s.O(),s.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,e=s.i[i],delete s.i[i],e)if(r){for(n in i=new De(r.severity,r.category,r.code),r)i[n]=r[n];e.reject(i)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Oc.add(this)}function _c(e,t,n){Lc=n,n.addUpdateListener(e.B),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),wc(e),Ic(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function kc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new De(2,8,n,t))}function Tc(e,t){var n=e.J();e.l=new nt,e.u=!0,_c(e,n,t)}function Sc(e){var t=Lc;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function wc(e){var t=!!Lc&&"connected"==Lc.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Cc(e)}e.h=t,e.L=t?Lc.receiver.friendlyName:"",e.j.Mb()}function Cc(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new De(1,7,7e3))}}function Ic(e,t){t=lc(t);var n=Lc;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),z)}catch(i){throw t=new De(2,8,8005,i),n=new gi("error",(new Map).set("detail",t)),e.s("player",n),e.Ab(),t}}(n=Ec.prototype).destroy=function(){return Oc.delete(this),Cc(this),Lc&&Sc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},n.sa=function(){return this.h},n.ae=function(){return this.L},n.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=l(Oc),n=t.next();!n.done;n=t.next())Tc(n.value,e)}),(function(e){for(var t=l(Oc),n=t.next();!n.done;n=t.next())n=n.value,Dc="available"==e,n.j.Mb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Dc&&this.j.N(Rc),(t=Lc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Tc(this,t):Lc=null}else e.__onGCastApiAvailable!==xc&&(Pc=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=xc)},n.ie=function(e){this.o=e,this.h&&Ic(this,{type:"appData",appData:this.o})},n.cast=function(e){var t=this;return L((function(n){if(!t.m)throw new De(1,8,8e3);if(!Dc)throw new De(1,8,8001);if(t.h)throw new De(1,8,8002);return t.l=new nt,chrome.cast.requestSession((function(n){return _c(t,e,n)}),(function(e){return kc(t,e)})),A(n,t.l,0)}))},n.Ab=function(){if(this.h){if(Cc(this),Lc){Sc(this);try{Lc.stop((function(){}),(function(){}))}catch(e){}Lc=null}wc(this)}},n.get=function(e,t){var n=this;if("video"==e){if(fc.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(u(P.apply(0,arguments))))}}else if("player"==e){if(vc[t]&&!this.get("player","isLive")())return function(){};if(Ac.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(u(P.apply(0,arguments))))};if(bc.includes(t))return function(){return n.og.apply(n,[e,t].concat(u(P.apply(0,arguments))))};if(pc[t]||gc[t])return function(){return n.g[e][t]}}return this.g[e][t]},n.set=function(e,t,n){this.g[e][t]=n,Ic(this,{type:"set",targetName:e,property:t,value:n})},n.Qe=function(e,t){Ic(this,{type:"call",targetName:e,methodName:t,args:P.apply(2,arguments)})},n.og=function(e,t){var n=P.apply(2,arguments),i=new nt,r=this.H.toString();this.H++,this.i[r]=i;try{Ic(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var Rc=.02,Dc=!1,Lc=null,Pc=null,Oc=new Set;function xc(t){if(Pc?e.__onGCastApiAvailable=Pc:delete e.__onGCastApiAvailable,Pc=null,t)for(var n=l(Oc),i=n.next();!i.done;i=n.next())i.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Mc(e,t,n,i){i=void 0!==i&&i,yi.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.B=i,this.u=new Map,this.g=new Ec(n,(function(){return Fc(r)}),(function(){return Uc(r)}),(function(e,t){return jc(r,e,t)}),(function(){return Vc(r)}),(function(){return Bc(r)}),i),function(e){e.g.init(),e.m=new xi;for(var t=l(cc),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,(function(t){e.g.sa()||(t=vi(t),e.j.dispatchEvent(t))}));for(var i in mi)e.m.C(e.h,mi[i],(function(t){e.g.sa()||e.o.dispatchEvent(t)}));for(var r in e.l={},t={},e.i)t.Sb=r,Object.defineProperty(e.l,t.Sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return Hc(e,t.Sb)}}(t),set:function(t){return function(n){var i=t.Sb;e.g.sa()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={Sb:t.Sb};e.s={},Nc(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,i){return e.o.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.o.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.jc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Ge()};if("setVideoContainer"==t)return function(t){return e.h.$e(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(pc[t]||gc[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Nc(e,(function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.u.set(n,i):e.u.set(i,n)):t.set(i,n)}))}(e),e.j=new yi,e.j.Wc=e.l,e.o=new yi,e.o.Wc=e.s}(this)}function Nc(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!a.has(e)}var i,r=e.h,a=new Set;for(i in r)n(i)&&(a.add(i),t(i,r[i]));for(e=Object.getPrototypeOf(r),i=Object.getPrototypeOf({});e&&e!=i;){for(var o=l(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,r[s]));e=Object.getPrototypeOf(e)}}function Bc(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dd(),startTime:null};e.i.pause();for(var n=l(hc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=l(mc)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=l(yc)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Fc(e){var t=new gi("caststatuschanged");e.dispatchEvent(t)}function Uc(e){var t=new gi(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Vc(e){for(var t=l(mc),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i));var o={};for(i=(n=l(hc)).next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=l(hc),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];for(n=(t=l(yc)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}e.i.autoplay=a,r&&e.i.play()}}),(function(t){t=new gi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function Hc(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function jc(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Kc(e,t,n,i){yi.call(this);var r=this;this.g=e,this.h=t,this.j=new xi,this.H={video:e,player:t},this.D=n||function(){},this.J=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new at((function(){zc(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Gc(e)},t.onSenderDisconnected=function(){return Gc(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Qc(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Qc(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=uc(t.data);switch(n.type){case"PLAY":e.g.play(),Jc(e);break;case"PAUSE":e.g.pause(),Jc(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.g.play(),Jc(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),Jc(e));break;case"STOP":e.h.re().then((function(){e.h&&Jc(e)}));break;case"GET_STATUS":$c(e,Number(n.requestId));break;case"VOLUME":t=(i=n.volume).level,i=i.muted;var r=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=i&&(e.g.muted=i),r==e.g.volume&&a==e.g.muted||Jc(e);break;case"LOAD":e.m=0,e.B=!1,e.u=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),a=n.autoplay||!0,e.D(t.customData),a&&(e.g.autoplay=!0),e.h.load(r,i).then((function(){e.h&&$c(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Qc(e,{requestId:Number(n.requestId),type:i},e.s)}));break;default:Qc(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=uc(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.u=!0,function(e,t,n){var i,r,a,o,s,l,u,c,d,h;L((function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.D(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,E(f,5),A(f,e.h.load(t.manifest,t.startTime),7)):A(f,Promise.resolve(),3);case 7:k(f,3);break;case 5:return o=T(f),s=(new Map).set("detail",o),l=new gi("error",s),e.h&&e.h.dispatchEvent(l),f.return();case 3:if(!e.h)return f.return();for(u in t.video)c=t.video[u],e.g[u]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),Jc(e)),b(f)}}))}(e,n.initState,n.appData),zc(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":(i=e.H[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.B=!1);var a=n.id,o=t.senderId;n=(t=e.H[i])[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.u=!0}))),n.then((function(){return Xc(e,o,a,null)}),(function(t){return Xc(e,o,a,t)}))}}(e,t)},t.start();for(var n=(t=l(cc)).next();!n.done;n=t.next())e.j.C(e.g,n.value,(function(t){return Yc(e,"video",t)}));for(var i in mi)e.j.C(e.h,mi[i],(function(t){return Yc(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.ke(3840,2160):e.h.ke(1920,1080),e.j.C(e.g,"loadeddata",(function(){e.B=!0})),e.j.C(e.h,"loading",(function(){e.o=!1,Wc(e)})),e.j.C(e.g,"playing",(function(){e.o=!1,Wc(e)})),e.j.C(e.g,"pause",(function(){Wc(e)})),e.j.C(e.h,"unloading",(function(){e.o=!0,Wc(e)})),e.j.C(e.g,"ended",(function(){new at((function(){e.g&&e.g.ended&&(e.o=!0,Wc(e))})).N(ed)}))}(this)}function Gc(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Wc(e)}function Wc(e){var t;L((function(n){return 1==n.g?A(n,Promise.resolve(),2):e.h?(t=new gi("caststatuschanged"),e.dispatchEvent(t),qc(e)||Jc(e),void b(n)):n.return()}))}function Yc(e,t,n){e.h&&(zc(e),Qc(e,{type:"event",targetName:t,event:n},e.l))}function zc(e){e.G.N(Zc);for(var t={video:{},player:{}},n=l(dc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.U())for(var r in vc)0==e.m%vc[r]&&(t.player[r]=e.h[r]());for(var a in pc)0==e.m%pc[a]&&(t.player[a]=e.h[a]());for(var o in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Qc(e,{type:"update",update:t},e.l),gc)0==e.m%gc[o]&&((t={player:{}}).player[o]=e.h[o](),Qc(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),qc(e)}function qc(e){return!(!e.u||!e.g.duration&&!e.h.U())&&($c(e),e.u=!1,!0)}function $c(e,t){var n={contentId:e.h.Dd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Jc(e,void 0===t?0:t,n)}function Xc(e,t,n,i){e.h&&Qc(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Qc(e,t,n,i){e.F&&(e=lc(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Jc(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?td:e.h.Fd()?id:e.g.paused?rd:nd,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Qc(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}g(Mc,yi),(n=Mc.prototype).destroy=function(e){return e&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,yi.prototype.release.call(this),Promise.all(e)},n.Wf=function(){return this.l},n.Nf=function(){return this.s},n.nf=function(){return this.g.m&&Dc},n.sa=function(){return this.g.sa()},n.ae=function(){return this.g.ae()},n.cast=function(){var e,t=this;return L((function(n){return 1==n.g?(e=Bc(t),A(n,t.g.cast(e),2)):t.h?A(n,t.h.re(),0):n.return()}))},n.ie=function(e){this.g.ie(e)},n.zg=function(){!function(e){if(e.h){var t=e.J();chrome.cast.requestSession((function(n){return _c(e,t,n)}),(function(t){return kc(e,t)}))}}(this.g)},n.Ab=function(){this.g.Ab()},n.qf=function(e,t){t=void 0!==t&&t;var n=this;return L((function(i){if(1==i.g)return e==n.D&&t==n.B?i.return():(n.D=e,n.B=t,n.g.Ab(),A(i,n.g.destroy(),2));n.g=null,n.g=new Ec(e,(function(){return Fc(n)}),(function(){return Uc(n)}),(function(e,t){return jc(n,e,t)}),(function(){return Vc(n)}),(function(){return Bc(n)}),t),n.g.init(),b(i)}))},U("shaka.cast.CastProxy",Mc),Mc.prototype.changeReceiverId=Mc.prototype.qf,Mc.prototype.forceDisconnect=Mc.prototype.Ab,Mc.prototype.suggestDisconnect=Mc.prototype.zg,Mc.prototype.setAppData=Mc.prototype.ie,Mc.prototype.cast=Mc.prototype.cast,Mc.prototype.receiverName=Mc.prototype.ae,Mc.prototype.isCasting=Mc.prototype.sa,Mc.prototype.canCast=Mc.prototype.nf,Mc.prototype.getPlayer=Mc.prototype.Nf,Mc.prototype.getVideo=Mc.prototype.Wf,Mc.prototype.destroy=Mc.prototype.destroy,g(Kc,yi),(n=Kc.prototype).isConnected=function(){return this.F},n.$f=function(){return this.o},n.wg=function(e){this.i=e},n.uf=function(){this.i=null},n.xg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},n.vg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},n.ug=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},n.destroy=function(){var e,t=this;return L((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.H=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,yi.prototype.release.call(t),A(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),b(n)}))},U("shaka.cast.CastReceiver",Kc),Kc.prototype.destroy=Kc.prototype.destroy,Kc.prototype.setContentArtist=Kc.prototype.ug,Kc.prototype.setContentImage=Kc.prototype.vg,Kc.prototype.setContentTitle=Kc.prototype.xg,Kc.prototype.clearContentMetadata=Kc.prototype.uf,Kc.prototype.setContentMetadata=Kc.prototype.wg,Kc.prototype.isIdle=Kc.prototype.$f,Kc.prototype.isConnected=Kc.prototype.isConnected;var Zc=.5,ed=5,td="IDLE",nd="PLAYING",id="BUFFERING",rd="PAUSED";function ad(e,t,n){var i=function(e){for(var t=[],n=(e=l(e)).next();!n.done;n=e.next())(n=sd(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new De(2,4,4010);if(t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.fe||(r=e.init||r,!1)}))).length&&(e=function(e,t,n,i){for(var r=[],a=(t=l(t)).next();!a.done;a=t.next()){var o=n[(a=a.value).fe];if(o){var s;if(s=ir(a.node,"urn:microsoft:playready","pro")){s=It(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:tr(s,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.fe)if(0==(u=i).size)u=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:tr(new Uint8Array([]),c,u,1),initDataType:"cenc",keyId:a.keyId}]}s=Xe(o,a.init||e||s||u),(o=ud.get(o))&&(s.licenseServerUri=o(a)),r.push(s)}}return r}(r,a,n,o),0==e.length&&(e=[Xe("",r)])),i.length&&(t||!a.length))for(e=[],n=(t=l(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Xe(n,r));if(o=Array.from(o)[0]||null)for(n=(t=l(e)).next();!n.done;n=t.next())for(i=(n=l(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Be:o,uh:r,drmInfos:e,Fe:!0}}function od(e){return(e=ir(e.node,"urn:microsoft:playready","pro"))?(e=function(e){var t=0,n=Ie(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=Ce(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=It(e.textContent)).filter((function(e){return e.type===ld}))[0],e&&(e=Ar(e=bt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=l(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=l(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}function sd(e){var t=e.getAttribute("schemeIdUri"),n=or(e,"urn:mpeg:cenc:2013","default_KID"),i=ar(e,"urn:mpeg:cenc:2013","pssh").map(lr);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new De(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:It(e),keyId:null}}))}catch(e){throw new De(2,4,4007)}return{node:e,fe:t,keyId:n,init:0<r.length?r:null}}var ld=1,ud=(new Map).set("com.widevine.alpha",(function(e){return(e=ir(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",od).set("com.microsoft.playready.recommendation",od).set("com.microsoft.playready.software",od).set("com.microsoft.playready.hardware",od).set("org.w3.clearkey",(function(e){return(e=ir(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function cd(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function dd(e,t){var n=hd(e,t,"timescale"),i=1;n&&(i=gr(n)||1);var r=hd(e,t,"duration");n=gr(r||""),"image"==e.I.contentType&&(n=mr(r||"")),n&&(n/=i);var a=hd(e,t,"startNumber");r=Number(hd(e,t,"presentationTimeOffset"))||0;var o=vr(a||"");if(null!=a&&null!=o||(o=1),a=fd(e,t,"SegmentTimeline"),t=null,a){t=i,e=e.T.duration||1/0,a=rr(a,"S");for(var s=[],l=-r,u=0;u<a.length;++u){var c=a[u],d=a[u+1],h=cr(c,"t",vr),f=cr(c,"d",vr);if(c=cr(c,"r",pr),null!=h&&(h-=r),!f)break;if(h=null!=h?h:l,0>(c=c||0))if(d){if(null==(d=cr(d,"t",vr)))break;if(h>=d)break;c=Math.ceil((d-h)/f)-1}else{if(1/0==e)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/f)-1}for(0<s.length&&h!=l&&(s[s.length-1].end=h/t),d=0;d<=c;++d)l=h+f,s.push({start:h/t,end:l/t,Dg:h}),h=l}t=s}return{timescale:i,ha:n,Lb:o,Sa:r/i||0,se:r,timeline:t}}function hd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter(qe).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function fd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter(qe).map((function(e){return nr(e,n)})).reduce((function(e,t){return e||t}))}function pd(e,t,n,i,r,a){if(a=void 0===a?0:a,or(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=or(e,"http://www.w3.org/1999/xlink","href"),s=or(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=l(Array.from(e.attributes)),c=u.next();!c.done;c=u.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return ci(new De(2,4,4028));if("onLoad"!=s)return ci(new De(2,4,4027));var d=$e([i],[o]);return r.request(0,Si(d,t)).Y((function(i){if(!(i=br(i.data,e.tagName)))return ci(new De(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=(i=l(Array.from(i.attributes))).next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return pd(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.Y(void 0,(function(){return pd(e,t,n,i,r,a)}))),o}o=[];for(var s=l(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())(u=u.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==or(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(pd(u,t,n,i,r,a)));return pi(o).Y((function(){return e}))}function gd(e,t,n,i,r,a,o){var s,l=(new Gi).P("sidx",(function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var l=o.reader.K();if(0==l)throw new De(2,3,3005);if(0==o.version)var u=o.reader.K(),c=o.reader.K();else u=o.reader.$a(),c=o.reader.$a();o.reader.skip(2);var d=o.reader.$d();for(e=e+o.size+c,c=0;c<d;c++){var h=o.reader.K(),f=(2147483648&h)>>>31;h&=2147483647;var p=o.reader.K();if(o.reader.skip(4),1==f)throw new De(2,3,3006);s.push(new po(u/l+n,(u+p)/l+n,(function(){return a}),e,e+h-1,t,n,i,r)),u+=p,e+=h}return o.parser.stop(),s}(t,i,r,a,o,n,e)}));if(e&&l.parse(e),s)return s;throw new De(2,3,3004)}function vd(e){this.h=Ie(e),this.g=new Hi(this.h,0)}function md(e){var t=yd(e);if(7<t.length)throw new De(2,3,3002);for(var n=0,i=(t=l(t)).next();!i.done;i=t.next())n=256*n+i.value;t=yd(e);e:{for(var r=(i=l(Ad)).next();!r.done;r=i.next())if(Te(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Z();else{if(8==t.length&&224&t[1])throw new De(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.Z()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Z(),i=Ie(e.h,e.g.Z(),t),e.g.skip(t),new bd(n,i)}function yd(e){var t=e.g.Z(),n=e.g.Ra();if(0==n)throw new De(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ce(e.h,t,n)}vd.prototype.ga=function(){return this.g.ga()};var Ad=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function bd(e,t){this.id=e,this.g=t}function Ed(e){if(8<e.g.byteLength)throw new De(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new De(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function _d(e){var t=new vd(e.g);if(179!=(e=md(t)).id)throw new De(2,3,3013);if(e=Ed(e),183!=(t=md(t)).id)throw new De(2,3,3012);t=new vd(t.g);for(var n=0;t.ga();){var i=md(t);if(241==i.id){n=Ed(i);break}}return{Eg:e,ng:n}}function kd(e,t){if(!(t=fd(e,t,"Initialization")))return null;var n=e.I.wa,i=t.getAttribute("sourceURL");i&&(n=$e(e.I.wa,[i])),i=0;var r=null;return(t=cr(t,"range",fr))&&(i=t.start,r=t.end),new fo((function(){return n}),i,r,Rd(e))}function Td(e,t){var n=Number(hd(e,wd,"presentationTimeOffset"))||0,i=hd(e,wd,"timescale"),r=1;i&&(r=gr(i)||1);var a=n/r||0,o=kd(e,wd);!function(e,t){if(Id(e,t),!Cd(e))throw new De(2,4,4002)}(e,o);var s=bi(e);return{Bb:function(){var e=fd(s,wd,"RepresentationIndex"),n=s.I.wa;return e&&(e=e.getAttribute("sourceURL"))&&(n=$e(s.I.wa,[e])),e=Cd(s),Sd(s,t,o,n,e.start,e.end,a)}}}function Sd(e,t,n,i,r,a,o){var s,l,u,c,d,h,f,p,g,v,m,y,b,E,_;return L((function(k){if(1==k.g)return s=e.presentationTimeline,l=!e.Ma||!e.T.Gd,u=e.T.start,c=e.T.duration,d=e.I.mimeType.split("/")[1],f=null,p=[(h=t)(i,r,a),"webm"==d?h(n.ya(),n.Ba,n.ka):null],h=null,A(k,Promise.all(p),2);if(g=k.h,v=g[0],m=g[1]||null,null,b=u-o,E=u,_=c?u+c:1/0,"mp4"==d)var T=gd(v,r,i,n,b,E,_);else{if(440786851!=md(T=new vd(m)).id)throw new De(2,3,3008);var S=md(T);if(408125543!=S.id)throw new De(2,3,3009);T=S.g.byteOffset,S=new vd(S.g);for(var w=null;S.ga();){var C=md(S);if(357149030==C.id){w=C;break}}if(!w)throw new De(2,3,3010);for(w=new vd(w.g),C=1e6,S=null;w.ga();){var I=md(w);if(2807729==I.id)C=Ed(I);else if(17545==I.id)if(4==I.g.byteLength)S=I.g.getFloat32(0);else{if(8!=I.g.byteLength)throw new De(2,3,3003);S=I.g.getFloat64(0)}}if(null==S)throw new De(2,3,3011);if(S*=w=C/1e9,475249515!=(C=md(new vd(v))).id)throw new De(2,3,3007);T=function(e,t,n,i,r,a,o,s,l){function u(){return r}var c=[];e=new vd(e.g);for(var d=null,h=null;e.ga();){var f=md(e);if(187==f.id){var p=_d(f);p&&(f=n*p.Eg,p=t+p.ng,null!=d&&c.push(new po(d+o,f+o,u,h,p-1,a,o,s,l)),d=f,h=p)}}return null!=d&&c.push(new po(d+o,i+o,u,h,null,a,o,s,l)),c}(C,T,w,S,i,n,b,E,_)}return y=T,s.Ib(y),f=new bs(y),l&&f.Wa(E,_,!0),k.return(f)}))}function wd(e){return e.wc}function Cd(e){var t=fd(e,wd,"RepresentationIndex");return e=fr((e=hd(e,wd,"indexRange"))||""),t&&(e=cr(t,"range",fr,e)),e}function Id(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=Ze&&"mp4"!=n&&"webm"!=n)throw new De(2,4,4006);if("webm"==n&&!t)throw new De(2,4,4005)}function Rd(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ad,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Dd(e,t){var n=kd(e,Ld),i=function(e){var t=function(e){return[e.I.ab,e.ea.ab,e.$.ab].filter(qe).map((function(e){return rr(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Ke&&(e.Ke=!0),{dg:t.getAttribute("media"),start:(t=cr(t,"mediaRange",fr,{start:0,end:null})).start,end:t.end}}))}(e);e=dd(e,Ld);var n=e.Lb;0==n&&(n=1);var i=0;return e.ha?i=e.ha*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{ha:e.ha,startTime:i,Lb:n,Sa:e.Sa,timeline:e.timeline,Gb:t}}(e);if(!i.ha&&!i.timeline&&1<i.Gb.length)throw new De(2,4,4002);if(!i.ha&&!e.T.duration&&!i.timeline&&1==i.Gb.length)throw new De(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new De(2,4,4002);var r=null,a=null;e.$.id&&e.I.id&&(a=t[e.$.id+","+e.I.id])&&(r=a.segmentIndex);var o=function(e,t,n,i,r){var a=i.Gb.length;i.timeline&&i.timeline.length!=i.Gb.length&&(a=Math.min(i.timeline.length,i.Gb.length));for(var o=e-i.Sa,s=t?e+t:1/0,l=[],u=i.startTime,c={},d=0;d<a;c={od:c.od},d++){var h=i.Gb[d];c.od=$e(n,[h.dg]);var f=void 0;f=null!=i.ha?u+i.ha:i.timeline?i.timeline[d].end:u+t,l.push(new po(e+u,e+f,function(e){return function(){return e.od}}(c),h.start,h.end,r,o,e,s)),u=f}return l}(e.T.start,e.T.duration,e.I.wa,i,n);return t=!r,r?r.Hb(o,e.presentationTimeline.Pa()):r=new bs(o),e.presentationTimeline.Ib(o),e.Ma&&e.T.Gd||r.Wa(e.T.start,e.T.duration?e.T.start+e.T.duration:1/0,t),a&&(a.segmentIndex=r),{Bb:function(){return r&&0!=r.g.length||r.pc(o),Promise.resolve(r)}}}function Ld(e){return e.ab}function Pd(e,t,n,i,r,a){var o=function(e){var t=hd(e,Od,"initialization");if(!t)return null;var n=e.I.id,i=e.bandwidth||null,r=e.I.wa;return new fo((function(){var e=cd(t,n,null,i,null);return $e(r,[e])}),0,null,Rd(e))}(e),s=function(e){var t=dd(e,Od),n=hd(e,Od,"media");return e=hd(e,Od,"index"),{ha:t.ha,timescale:t.timescale,Lb:t.Lb,Sa:t.Sa,se:t.se,timeline:t.timeline,Pd:n,oc:e}}(e);!function(e){var t=e.oc?1:0;if(t+=e.timeline?1:0,t+=e.ha?1:0,0==t)throw new De(2,4,4002);if(1!=t&&(e.oc&&(e.timeline=null),e.ha=null),!e.oc&&!e.Pd)throw new De(2,4,4002)}(s);var u=bi(e);if(s.oc)return Id(e,o),{Bb:function(){var e=cd(s.oc,u.I.id,null,u.bandwidth||null,null);return e=$e(u.I.wa,[e]),Sd(u,t,o,e,0,null,s.Sa)}};if(s.ha)return i||"image"===e.ea.contentType||(e.presentationTimeline.Sd(s.ha),e.presentationTimeline.Td(e.T.start)),{Bb:function(){return function(e,t,n,i,r){function a(e){var n=(e-p)*f,r=n+t.Sa,a=n+c;return n=a+f,(a=new po(a,Math.min(n,s()),(function(){var t=cd(v,y,e,m,r*g);return $e(A,[t])}),0,null,i,b,c,s())).j=n,a}function o(){var e=[Math.max(u.Pa(),c),Math.min(u.gb(),s())].map((function(e){return e-c}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=d&&r[d]||h;return e?c+e:1/0}var u=e.presentationTimeline,c=e.T.start,d=e.$.id,h=e.T.duration,f=t.ha,p=t.Lb,g=t.timescale,v=t.Pd,m=e.bandwidth||null,y=e.I.id,A=e.I.wa,b=c-t.Sa,E=o();e=e.Ma?Math.max(E[0],E[1]-n+1):E[0],E=E[1],n=[];for(var _=e;_<=E;++_){var k=a(_);n.push(k)}var T=new bs(n);if(n=u.gb()<s(),_=u.U(),n||_){var S=Math.max(e,E+1);T.fd(f,(function(){var e=u.Pa();T.eb(e);var t=l(o());t.next(),t=t.next().value;for(var n=[];S<=t;){var i=a(S);n.push(i),S++}return e>s()&&!n.length?null:n}))}return Promise.resolve(T)}(u,s,r,o,a)}};var c=null;i=i=null,e.$.id&&e.I.id&&(i=n[i=e.$.id+","+e.I.id])&&(c=i.segmentIndex);var d=function(e,t,n){var i=e.T.start,r=e.T.duration,a=i-t.Sa;r=r?i+r:1/0;for(var o=[],s={},l=0;l<t.timeline.length;s={nd:s.nd,rd:s.rd,ud:s.ud,kd:s.kd,wd:s.wd,ld:s.ld},l++){var u=t.timeline[l],c=u.start,d=u.Dg;u=u.end,s.ud=l+t.Lb,s.wd=d+t.se,s.rd=e.I.id,s.kd=e.bandwidth||null,s.nd=t.Pd,s.ld=e.I.wa,o.push(new po(i+c,i+u,function(e){return function(){var t=cd(e.nd,e.rd,e.ud,e.kd||null,e.wd);return $e(e.ld,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}(u,s,o);n=e.T.start;var h=e.T.duration?e.T.start+e.T.duration:1/0,f=!(e.Ma&&e.T.Gd);return c?(f&&new bs(d).Wa(n,h,!0),c.Hb(d,e.presentationTimeline.Pa())):c=new bs(d),e.presentationTimeline.Ib(d),f&&c.Wa(n,h),i&&e.Ma&&(i.segmentIndex=c),{Bb:function(){return c&&0!=c.g.length||c.pc(d),Promise.resolve(c)}}}function Od(e){return e.xc}function xd(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function Md(e,t,n){var i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,E,_,k,T,S,w,C,I,R,D,P,O,x;return L((function(L){switch(L.g){case 1:if(i=et,function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){for(var n=[],i=l((t=t.value).Kc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=l(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&te(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.Kc=n}}(t),function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){for(var n=[],i=l((t=t.value).gd),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=l(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&te(r.roles,s.roles)&&Vi(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.gd=n}}(t),function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){for(var n=[],i=l((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=l(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.bandwidth==s.bandwidth&&te(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){for(var n=[],i=l((t=t.value).imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=l(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}(t),!n&&1==t.length){r=t[0],e.g=r.Kc,e.h=r.gd,e.j=r.textStreams,e.i=r.imageStreams,L.A(2);break}for(a=-1,o=0;o<t.length;o++)s=t[o],e.m.has(s.id)||(e.m.add(s.id),-1==a&&(a=o));if(-1==a)return L.return();for(u=t.map((function(e){return e.Kc})),c=t.map((function(e){return e.gd})),d=t.map((function(e){return e.textStreams})),h=t.map((function(e){return e.imageStreams})),f=l(d),p=f.next();!p.done;p=f.next())p.value.push(eh(i.X));for(g=l(h),v=g.next();!v.done;v=g.next())v.value.push(eh(i.Wb));return A(L,Bd(e.g,u,a,Hd,Kd),3);case 3:return A(L,Bd(e.h,c,a,Hd,Kd),4);case 4:return A(L,Bd(e.j,d,a,Hd,Kd),5);case 5:return A(L,Bd(e.i,h,a,Hd,Kd),2);case 2:if(m=0,y=[],e.h.length&&e.g.length)for(w=l(e.g),C=w.next();!C.done;C=w.next())for(I=C.value,R=l(e.h),D=R.next();!D.done;D=R.next())P=D.value,O=Nr(I.drmInfos,P.drmInfos),I.drmInfos.length&&P.drmInfos.length&&!O.length||(x=m++,y.push({id:x,language:I.language,primary:I.primary,audio:I,video:P,bandwidth:(I.bandwidth||0)+(P.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(E=e.h.concat(e.g),_=l(E),k=_.next();!k.done;k=_.next())T=k.value,S=m++,y.push({id:S,language:T.language,primary:T.primary,audio:T.type==i.Hc?T:null,video:T.type==i.va?T:null,bandwidth:T.bandwidth||0,drmInfos:T.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,b(L)}}))}function Nd(e){var t,n,i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,b,E,_,k,T,S,w;return L((function(C){switch(C.g){case 1:if(t=et,1==e.length)return C.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.Hc}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.va}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.X}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.Wb}))})),o=l(r),s=o.next();!s.done;s=o.next())s.value.push(Zd(t.X));for(u=l(a),c=u.next();!c.done;c=u.next())c.value.push(Zd(t.Wb));return A(C,Bd([],n,0,jd,Gd),2);case 2:return d=C.h,A(C,Bd([],i,0,jd,Gd),3);case 3:return h=C.h,A(C,Bd([],r,0,jd,Gd),4);case 4:return f=C.h,A(C,Bd([],a,0,jd,Gd),5);case 5:if(p=C.h,g=0,h.length&&d.length)for(b=l(d),E=b.next();!E.done;E=b.next())for(_=E.value,k=l(h),T=k.next();!T.done;T=k.next())S=T.value,w=g++,S.variantIds.push(w),_.variantIds.push(w);else for(v=h.concat(d),m=l(v),y=m.next();!y.done;y=m.next())y.value.variantIds=[g++];return C.return(h.concat(d).concat(f).concat(p))}}))}function Bd(e,t,n,i,r){var a,o,s,u,c,d,h,f,p,g,v,m,y,b,E,_,k,T;return L((function(S){switch(S.g){case 1:for(a=et,o=[],s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);u=l(e),c=u.next();case 2:if(c.done){S.A(4);break}return A(S,function(e,t,n,i,r){return L((function(a){return 1==a.g?(Wd(t,e),e.matchedStreams?e.segmentIndex?A(a,Fd(e,n),2):a.A(2):a.return(!1)):(Vd(e,n,i,r),a.return(!0))}))}(c.value,t,n,r,o),5);case 5:if(!S.h)throw new De(2,4,4037);c=u.next(),S.A(2);break;case 4:for(d=l(o),h=d.next();!h.done;h=d.next())for(f=h.value,p=l(f),g=p.next();!g.done;g=p.next())v=g.value,(m=Ud(v,t,i,r,o))&&e.push(m);for(y=l(o),h=y.next();!h.done;h=y.next())for(b=h.value,E={},_=l(b),g=_.next();!g.done;E={Va:E.Va},g=_.next())if(E.Va=g.value,k=E.Va.type==a.X&&!E.Va.language,T=E.Va.type==a.Wb&&!E.Va.tilesLayout,!k&&!T&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Kt(t.codecs)==Kt(e.Va.codecs)}}(E)))throw new De(2,4,4037);return S.return(e)}}))}function Fd(e,t){var n,i,r,a,o,s,u;return L((function(c){if(1==c.g){for(n=[],i=e.matchedStreams,r=l(i),a=r.next();!a.done;a=r.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return A(c,Promise.all(n),2)}if(e.segmentIndex instanceof Ts)for(s=0;s<i.length;s++)(u=i[s]).segmentIndex&&s>=t&&e.segmentIndex.l.push(u.segmentIndex);b(c)}))}function Ud(e,t,n,i,r){var a=n(e);return Wd(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return L((function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new Ts,A(e,Fd(a,0),0))}))}),a.matchedStreams?(Vd(a,0,i,r),a):null}function Vd(e,t,n,i){for(var r=e.matchedStreams,a=0;a<r.length;a++)if(a>=t){var o=r[a];n(e,o);var s=!0;"audio"==e.type&&0==rn(e.language,o.language)&&(s=!1),s&&i[a].delete(o)}}function Hd(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=l(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function jd(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Kd(e,t){var n,i;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(u(n),u(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=Nr(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new De(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(r=l(t.closedCaptions)).next();!a.done;a=r.next()){var o=l(a.value);a=o.next().value,o=o.next().value,e.closedCaptions.set(a,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Hd(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Kd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Kd(e.trickModeVideo,t)}function Gd(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(u(e.keyIds),u(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,u(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=l(t.closedCaptions)).next();!n.done;n=t.next()){var i=l(n.value);n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}}function Wd(e,t){for(var n=[],i=(e=l(e)).next();!i.done;i=e.next()){for(var r=t,a={audio:Yd,video:Yd,text:zd,image:qd}[r.type],o={audio:$d,video:Xd,text:Qd,image:Jd}[r.type],s=null,u=(i=l(i.value)).next();!u.done;u=i.next())!a(r,u=u.value)||s&&!o(r,s,u)||(s=u);if(!(r=s))return;n.push(r)}t.matchedStreams=n}function Yd(e,t){var n;return!(n=t.mimeType!=e.mimeType||Kt(t.codecs)!=Kt(e.codecs))&&(n=e.drmInfos)&&(e=e.drmInfos,t=t.drmInfos,n=!(!e.length||!t.length||0<Nr(e,t).length)),!n}function zd(e,t){return!!e.language&&(!t.language||0!=rn(e.language,t.language)&&t.kind==e.kind)}function qd(e){return!!e.tilesLayout}function $d(e,t,n){if(e.id==n.id)return!0;var i=rn(e.language,t.language),r=rn(e.language,n.language);return r>i||!(r<i)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((i=th(e.channelsCount,t.channelsCount,n.channelsCount))==ih||i!=ah&&((i=th(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==ih||i!=ah&&!(!e.bandwidth||nh(e.bandwidth,t.bandwidth,n.bandwidth)!=ih)))))}function Xd(e,t,n){if(e.id==n.id)return!0;var i=th(e.width*e.height,t.width*t.height,n.width*n.height);if(i==ih)return!0;if(i==ah)return!1;if(e.frameRate){if((i=th(e.frameRate,t.frameRate,n.frameRate))==ih)return!0;if(i==ah)return!1}return!(!e.bandwidth||nh(e.bandwidth,t.bandwidth,n.bandwidth)!=ih)}function Qd(e,t,n){if(e.id==n.id)return!0;var i=rn(e.language,t.language),r=rn(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Jd(e,t,n){return e.id==n.id||th(e.width*e.height,t.width*t.height,n.width*n.height)==ih}function Zd(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function eh(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new bs([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function th(e,t,n){if(t==e&&e!=n)return ah;if(n==e&&e!=t)return ih;if(t>e){if(n<=e||n-e<t-e)return ih;if(n-e>t-e)return ah}else{if(n>e)return ah;if(e-n<e-t)return ih;if(e-n>e-t)return ah}return rh}function nh(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?ih:t<e?ah:rh}xd.prototype.release=function(){for(var e=l(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var ih=1,rh=0,ah=-1;function oh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new xd,this.F=0,this.H=new V(5),this.D=new at((function(){!function(e){var t,n;L((function(i){switch(i.g){case 1:return t=0,E(i,2),A(i,sh(e),4);case 4:t=i.h,k(i,3);break;case 2:n=T(i),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return i.return();dh(e,t),b(i)}}))}(e)})),this.o=new Ei,this.s=null,this.J=[],this.u=1/0,this.B=!1}function sh(e){var t,n,i,r,a,o,s;return L((function(l){return 1==l.g?(t=Si(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),i=Date.now(),r=n.request(0,t),_i(e.o,r),A(l,r.promise,2)):3!=l.g?(a=l.h,e.h?(a.uri&&!e.m.includes(a.uri)&&e.m.unshift(a.uri),A(l,function(e,t,n){var i,r,a,o;return L((function(s){if(1==s.g){if(!(i=br(t,"MPD")))throw new De(2,4,4001,n);return e.g.dash.disableXlinkProcessing?s.return(lh(e,i,n)):(r=e.g.dash.xlinkFailGracefully,a=pd(i,e.g.retryParameters,r,n,e.h.networkingEngine),_i(e.o,a),A(s,a.promise,2))}return o=s.h,s.return(lh(e,o,n))}))}(e,a.data,a.uri),3)):l.return(0)):(o=Date.now(),s=(o-i)/1e3,e.H.sample(1,s),l.return(s))}))}function lh(e,t,n){var i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,_,S,w,C,I,R,D,P,O,x,M,N,B,F;return L((function(U){switch(U.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),r=[n],0<(a=rr(t,"Location").map(lr).filter(qe)).length&&(o=$e(r,a),r=e.m=o),s=rr(t,"BaseURL"),u=s.map(lr),c=$e(r,u),d=0,s&&s.length&&(d=cr(s[0],"availabilityTimeOffset",mr)||0),h=e.g.dash.ignoreMinBufferTime,f=0,h||(f=cr(t,"minBufferTime",hr)||0),e.F=cr(t,"minimumUpdatePeriod",hr,-1),p=cr(t,"availabilityStartTime",dr),g=cr(t,"timeShiftBufferDepth",hr),v=e.g.dash.ignoreSuggestedPresentationDelay,m=null,v||(m=cr(t,"suggestedPresentationDelay",hr)),y=e.g.dash.ignoreMaxSegmentDuration,_=null,y||(_=cr(t,"maxSegmentDuration",hr)),S=t.getAttribute("type")||"static",e.i)for(w=e.i.presentationTimeline,C=l(Object.values(e.l)),I=C.next();!I.done;I=C.next())(R=I.value).segmentIndex&&R.segmentIndex.eb(w.Pa());else D=e.g.defaultPresentationDelay||1.5*f,w=new es(p,null!=m?m:D,e.g.dash.autoCorrectDrift);return w.yc("static"==S),w.U()&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),w.me(g),P=t.getAttribute("profiles")||"",O={Ma:"static"!=S,presentationTimeline:w,$:null,T:null,ea:null,I:null,bandwidth:0,Ke:!1,zb:d,profiles:P.split(",")},x=function(e,t,n,i){var r=cr(i,"mediaPresentationDuration",hr),a=[],o=0;i=rr(i,"Period");for(var s=0;s<i.length;s++){var l=i[s],u=i[s+1],c=cr(l,"start",hr,o),d=l.id,h=cr(l,"duration",hr),f=null;if(u){var p=cr(u,"start",hr);null!=p&&(f=p-c)}else null!=r&&(f=r-c);if(null==f&&(f=h),!(null!==e.s&&null!==d&&null!==c&&c<e.s)||e.J.includes(d)||s+1==i.length){if(null!==c&&(null===e.s||c>e.s)&&(e.s=c),o=uh(e,t,n,{start:c,duration:f,node:l,Gd:null==f||!u}),a.push(o),t.$.id&&f&&(e.L[t.$.id]=f),null==f){o=null;break}o=c+f}}return e.J=a.map((function(e){return e.id})),null!=r?{periods:a,duration:r,De:!1}:{periods:a,duration:o,De:!0}}(e,O,c,t),M=x.duration,N=x.periods,"static"!=S&&x.De||w.Aa(M||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?w.Ue(e.u):e.u&&W("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),w.Sd(_||1),A(U,Md(e.j,N,O.Ma),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),U.A(3);break}if(e.i={presentationTimeline:w,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:f||0,sequenceMode:e.g.dash.sequenceMode},!w.df()){U.A(4);break}return B=rr(t,"UTCTiming"),A(U,function(e,t,n){var i,r,a,o,s,u,c,d;return L((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=l(i),o=a.next();case 2:if(o.done){h.A(4);break}switch(s=o.value,E(h,5),u=s.scheme,c=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":W("NTP UTCTiming scheme is not supported");break;default:W("Unrecognized scheme in UTCTiming element",u)}h.A(9);break;case 7:return A(h,fh(e,t,c,"HEAD"),10);case 10:return h.return(h.h);case 8:return A(h,fh(e,t,c,"GET"),11);case 11:return h.return(h.h);case 9:k(h,3);break;case 5:T(h);case 3:o=a.next(),h.A(2);break;case 4:return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,c,B),5);case 5:if(F=U.h,!e.h)return U.return();w.Ve(F);case 4:w.Md();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),b(U)}}))}function uh(e,t,n,i){t.$=hh(i.node,null,n),t.T=i,t.$.zb=t.zb,t.$.id||(t.$.id="__shaka_period_"+i.start);var r=rr(i.node,"EventStream");n=t.presentationTimeline.Pa();for(var a=(r=l(r)).next();!a.done;a=r.next())ph(e,i.start,i.duration,a.value,n);if(n=rr(i.node,"AdaptationSet").map((function(n){return function(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ea=hh(n,t.$,null);var r,a=!1,o=rr(n,"Role"),s=o.map((function(e){return e.getAttribute("value")})).filter(qe),c=void 0,d=t.ea.contentType==Ze;d&&(c="subtitle");for(var h=(o=l(o)).next();!h.done;h=o.next()){var f=(h=h.value).getAttribute("schemeIdUri");if(null==f||"urn:mpeg:dash:role:2011"==f)switch(h=h.getAttribute("value"),h){case"main":a=!0;break;case"caption":case"subtitle":c=h}}f=rr(n,"EssentialProperty"),o=null,h=!1;for(var p=(f=l(f)).next();!p.done;p=f.next()){var g=(p=p.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?r=i(parseInt(p.getAttribute("value"),10)):h=!0}for(f=l(f=rr(n,"SupplementalProperty")),p=f.next();!p.done;p=f.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(p=p.value).getAttribute("schemeIdUri")&&(r=i(parseInt(p.getAttribute("value"),10)));f=rr(n,"Accessibility");var v=new Map;for(f=l(f),p=f.next();!p.done;p=f.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g)for(var m=l(g=g.split(";")),y=m.next();!y.done;y=m.next()){var E=y.value,_=y=void 0;E.includes("=")?(y=(E=E.split("="))[0].startsWith("CC")?E[0]:"CC"+E[0],_=E[1]||"und"):(y="CC"+p,2==g.length?p+=2:p++,_=E),v.set(y,nn(_))}else v.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(g=l(g.split(";")),y=g.next();!y.done;y=g.next())y=y.value,E=m=void 0,y.includes("=")?(y=y.split("="),m="svc"+y[0],E=y[1].split(",")[0].split(":").pop()):(m="svc"+p,p++,E=y),v.set(m,nn(E));else v.set("svc1","und");else"urn:mpeg:dash:role:2011"==p&&null!=g&&(s.push(g),"captions"==g&&(c="caption"));if(h)return null;h=rr(n,"ContentProtection");var k=ad(h,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),T=nn(n.getAttribute("lang")||"und"),S=n.getAttribute("label");if((h=rr(n,"Label"))&&h.length&&(h=h[0],h.textContent&&(S=h.textContent)),h=rr(n,"Representation"),n=h.map((function(n){return(n=function(e,t,n,i,r,a,o,s,l,u){if(t.I=hh(u,t.ea,null),e.u=Math.min(e.u,t.I.zb),!function(e){var t=e.wc?1:0;return t+=e.ab?1:0,t+=e.xc?1:0,0==t?e.contentType==Ze||"application"==e.contentType:(1!=t&&(e.wc&&(e.ab=null),e.xc=null),!0)}(t.I))return null;var c=t.T.start;t.bandwidth=cr(u,"bandwidth",gr)||0;var d=t.I.contentType,h=d==Ze||"application"==d;d="image"==d;try{var f=function(t,n,i){return function(e,t,n,i){var r,a,o,s,l;return L((function(u){return 1==u.g?(r=Ri,a=Ns(t,n,i,e.g.retryParameters),o=e.h.networkingEngine,s=o.request(r,a),_i(e.o,s),A(u,s.promise,2)):(l=u.h,u.return(l.data))}))}(e,t,n,i)};if(t.I.wc)var p=Td(t,f);else if(t.I.ab)p=Dd(t,e.l);else if(t.I.xc)p=Pd(t,f,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.I.wa,v=t.T.duration||0;p={Bb:function(){return Promise.resolve(_s(c,v,g))}}}}catch(e){if((h||d)&&4002==e.code)return null;throw e}f=rr(u,"ContentProtection"),f=function(e,t,n,i){var r=ad(e,n,i);if(t.Fe)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Fe=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new De(2,4,4008);return r.Be||t.Be}(f,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]);var m=!1;rr(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(m=!0);var y,E,_=!1;if(h&&(_=s.includes("forced_subtitle")||s.includes("forced-subtitle")),d&&((u=rr(u,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=u.getAttribute("value")),!y))return null;u=t.I.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(u.includes("hvc1.2.4.L153.B0")||u.includes("hev1.2.4.L153.B0"))&&(E="PQ");var k=t.I.id?t.$.id+","+t.I.id:"",T={id:e.G++,originalId:t.I.id,createSegmentIndex:function(){var n,i;return L((function(r){if(1==r.g)return(n=k&&t.Ma&&e.l[k]?e.l[k]:T).segmentIndex?r.A(0):(i=n,A(r,p.Bb(),3));i.segmentIndex=r.h,b(r)}))},closeSegmentIndex:function(){T.segmentIndex&&(T.segmentIndex.release(),T.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:r,label:a,type:t.ea.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:s,forced:_,channelsCount:t.I.ad,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:m,closedCaptions:l,hdr:E,tilesLayout:y,matchedStreams:[]};return k&&t.Ma&&!e.l[k]&&(e.l[k]=T),T}(e,t,k,c,T,S,a,s,v,n))&&(n.hdr=n.hdr||r),n})).filter((function(e){return!!e})),0==n.length){if(o="image"==t.ea.contentType,e.g.dash.ignoreEmptyAdaptationSet||d||o)return null;throw new De(2,4,4003)}if(!t.ea.contentType||"application"==t.ea.contentType)for(t.ea.contentType=gh(n[0].mimeType,n[0].codecs),d=l(n),f=d.next();!f.done;f=d.next())f.value.type=t.ea.contentType;for(d=l(n),f=d.next();!f.done;f=d.next())for(f=f.value,p=l(k.drmInfos),g=p.next();!g.done;g=p.next())(g=g.value).keyIds=g.keyIds&&f.keyIds?new Set([].concat(u(g.keyIds),u(f.keyIds))):g.keyIds||f.keyIds;return d=h.map((function(e){return e.getAttribute("id")})).filter(qe),{id:t.ea.id||"__fake__"+e.G++,contentType:t.ea.contentType,language:T,vh:a,streams:n,drmInfos:k.drmInfos,qe:o,qg:d}}(e,t,n)})).filter(qe),t.Ma){for(i=[],a=(r=l(n)).next();!a.done;a=r.next())for(var o=(a=l(a.value.qg)).next();!o.done;o=a.next())i.push(o.value);if(i.length!=new Set(i).size)throw new De(2,4,4018)}for(i=n.filter((function(e){return!e.qe})),r=(n=l(n=n.filter((function(e){return e.qe})))).next();!r.done;r=n.next()){a=(r=r.value).qe.split(" ");for(var s=(o=l(i)).next();!s.done;s=o.next()){var c=s.value;if(a.includes(c.id)){s={};for(var d=(c=l(c.streams)).next();!d.done;s={Gc:s.Gc},d=c.next())s.Gc=d.value,s.Gc.trickModeVideo=r.streams.find(function(e){return function(t){return Kt(e.Gc.codecs)==Kt(t.codecs)}}(s))}}}if(r=e.g.disableAudio?[]:ch(i,"audio"),o=e.g.disableVideo?[]:ch(i,"video"),a=e.g.disableText?[]:ch(i,Ze),n=e.g.disableThumbnails?[]:ch(i,"image"),!o.length&&!r.length)throw new De(2,4,4004);for(i=[],s=(r=l(r)).next();!s.done;s=r.next())i.push.apply(i,u(s.value.streams));for(r=[],s=(o=l(o)).next();!s.done;s=o.next())r.push.apply(r,u(s.value.streams));for(o=[],s=(a=l(a)).next();!s.done;s=a.next())o.push.apply(o,u(s.value.streams));for(a=[],s=(n=l(n)).next();!s.done;s=n.next())a.push.apply(a,u(s.value.streams));return{id:t.$.id,Kc:i,gd:r,textStreams:o,imageStreams:a}}function ch(e,t){return e.filter((function(e){return e.contentType==t}))}function dh(e,t){0>e.F||e.D.N(Math.max(3,e.F-t,H(e.H)))}function hh(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},n=n||t.wa;for(var i=rr(e,"BaseURL"),r=i.map(lr),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=cr(e,"frameRate",yr)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,d=rr(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),f=(d=l(d)).next();!f.done;f=d.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);d=function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=rr(e,"AudioChannelConfiguration"))||t.ad,f=cr(e,"audioSamplingRate",vr)||t.audioSamplingRate,a||(a=gh(o,s));var p=nr(e,"SegmentBase"),g=nr(e,"SegmentTemplate"),v=p&&cr(p,"availabilityTimeOffset",mr)||0,m=g&&cr(g,"availabilityTimeOffset",mr)||0;return i=i&&i.length&&cr(i[0],"availabilityTimeOffset",mr)||0,i=t.zb+i+v+m,{wa:$e(n,r),wc:p||t.wc,ab:nr(e,"SegmentList")||t.ab,xc:g||t.xc,width:cr(e,"width",vr)||t.width,height:cr(e,"height",vr)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:c,emsgSchemeIdUris:h,id:e.getAttribute("id"),ad:d,audioSamplingRate:f,zb:i}}function fh(e,t,n,i){var r,a,o,s,l,u;return L((function(c){if(1==c.g)return r=$e(t,[n]),(a=Si(r,e.g.retryParameters)).method=i,o=e.h.networkingEngine.request(4,a),_i(e.o,o),A(c,o.promise,2);if(s=c.h,"HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);l=s.headers.date}else l=At(s.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function ph(e,t,n,i,r){for(var a=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",s=cr(i,"timescale",vr)||1,u=(i=l(rr(i,"Event"))).next();!u.done;u=i.next()){var c=cr(u=u.value,"presentationTime",vr)||0,d=cr(u,"duration",vr)||0;d=(c=c/s+t)+d/s,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(u={schemeIdUri:a,value:o,startTime:c,endTime:d,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}function gh(e,t){return zt(Ht(e,t))?Ze:e.split("/")[0]}function vh(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function mh(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function yh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Ah(e,t){if(!(e=e.getAttribute(t)))throw new De(2,4,4023,t);return e.value}function bh(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function Eh(e,t){this.name=e,this.value=t}function _h(e,t){return e.filter((function(e){return e.name==t}))}function kh(e,t){return e.filter((function(e){return Ah(e,"TYPE")==t}))}function Th(e,t){return(e=_h(e,t)).length?e[0]:null}function Sh(e,t){var n=0;return n=void 0===n?0:n,(e=Th(e,t))?Number(e.value):n}function wh(e,t){return $e([e],[t])[0]}function Ch(e){this.h=e,this.g=0}function Ih(e){Rh(e,/[ \t]+/gm)}function Rh(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Dh(e){return e.g==e.h.length?null:(e=Rh(e,/[^ \t\n]*/gm))?e[0]:null}function Lh(){this.g=0}function Ph(e,t,n){var i=(t=(t=At(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new De(2,4,4015);t=0;for(var r=!0,a=l(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Oh(e,o),--e.g,xh.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(a=[],r=!0,o=0;o<i.length;o++){var s=i[o],u=i[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=Oh(e,s),Mh.includes(s.name)){if(1!=t)throw new De(2,4,4017);var c=i.splice(o,i.length-o);i=n,r=[],o=[],u=[],s=null;for(var d=(c=l(c)).next();!d.done;d=c.next())d=d.value,/^(#EXT)/.test(d)?(d=Oh(e,d),xh.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==yh(d,"TYPE")?u.push(d):"MAP"==yh(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=wh(i,d.trim()),s&&o.push(s),r.push(new bh(d,o,u)),o=[],u=[]);return u.length&&(s&&o.push(s),r.push(new bh("",o,u))),new vh(n,t,a,r)}a.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Eh("URI",u)),r=!0)}}return new vh(n,t,a)}function Oh(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new De(2,4,4016,t);t=n[1];var i,r=n[2];if(n=[],r){var a;(a=Rh(r=new Ch(r),/^([^,=]+)(?:,|$)/g))&&(i=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Rh(r,o);)n.push(new Eh(a[1],a[2]||a[3])),Ih(r)}return new mh(e,t,n,i)}(n=oh.prototype).configure=function(e){this.g=e},n.start=function(e,t){var n,i=this;return L((function(r){if(1==r.g)return i.B=t.isLowLatencyMode(),i.m=[e],i.h=t,A(r,sh(i),2);if(n=r.h,i.h&&dh(i,n),!i.h)throw new De(2,7,7001);return r.return(i.i)}))},n.stop=function(){for(var e=l(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},n.update=function(){var e,t=this;return L((function(n){return 1==n.g?(E(n,2),A(n,sh(t),4)):2!=n.g?k(n,0):(e=T(n),t.h&&e?(t.h.onError(e),void b(n)):n.return())}))},n.onExpirationUpdated=function(){},U("shaka.dash.DashParser",oh),Xr.mpd=function(){return new oh},$r["application/dash+xml"]=function(){return new oh},$r["video/vnd.mpeg.dash.mpd"]=function(){return new oh},mh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},mh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var xh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Mh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Nh(){}function Bh(e){try{var t=Fh(e);return hi({uri:e,Oe:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ci(e)}}function Fh(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new De(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new De(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?It(t):_t(t),contentType:i}}function Uh(){var e=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(Ze,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new Lh,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new at((function(){!function(e){var t,n;L((function(i){return 1==i.g?e.i?(E(i,2),A(i,e.update(),4)):i.return():2!=i.g?(ff(e)&&(t=e.O,e.m.N(t)),k(i,0)):(n=T(i),e.i?(n.severity=1,e.i.onError(n),e.m.N(.1),void b(i)):i.return())}))}(e)})),this.ia=Ef,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new Ei,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}function Vh(e,t){return ff(e)?e.F.get(t.type):t.$c}function Hh(e,t){var n,i,r,a,o,s,l,c,d,h,f,p,g,v,m,y;return L((function(E){if(1==E.g)return n=t.Jc,i=new Pe(n),e.l&&t.Mc&&Me(i,new Ge("_HLS_skip=YES")),A(E,hf(e,i.toString()),2);if(r=E.h,!t.stream.segmentIndex)return E.return();if(1!=(a=Ph(e.W,r.data,r.uri)).type)throw new De(2,4,4017);o=_h(a.g,"EXT-X-DEFINE"),s=Gh(e,o),l=t.stream,c=Vh(e,t),d=ef(a,l.mimeType),h=d.keyIds,f=d.drmInfos,p=function(e,t){return e.size===t.size&&[].concat(u(e)).every((function(e){return t.has(e)}))},p(l.keyIds,h)||(l.keyIds=h,l.drmInfos=f,e.i.newDrmInfo(l)),g=lf(e,a,l.type,c,s),l.segmentIndex.Hb(g,e.j.Pa()),g.length&&(v=Sh(a.g,"EXT-X-MEDIA-SEQUENCE"),m=c.get(v),l.segmentIndex.eb(m)),y=g[g.length-1],Th(a.g,"EXT-X-ENDLIST")&&(t.mc=!0,t.Ya=y.endTime),b(E)}))}function jh(e,t,n){t.Ya+=n;for(var i=(t=l(e=Vh(e,t))).next();!i.done;i=t.next()){var r=l(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}}function Kh(e){if(ff(e)){if(e.O=e.J,e.ia==kf){var t=$h(e);e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.me(t)}}else e.j.Aa($h(e));e.j.Md()}function Gh(e,t){for(var n=new Map,i=(t=l(t)).next();!i.done;i=t.next()){var r=i.value;i=yh(r,"NAME");var a=yh(r,"VALUE");r=yh(r,"IMPORT"),i&&a&&n.set(i,a),r&&(i=e.o.get(r))&&n.set(r,i)}return n}function Wh(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=yh(t,"CODECS",n.join(",")).split(/\s*,\s*/),e=new Set,t=[];for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=Wt(i=i.value)[0];e.has(r)||(t.push(i),e.add(r))}return t}function Yh(e){return nn(e=yh(e,"LANGUAGE")||"und")}function zh(e,t){var n=Ah(t,"GROUP-ID"),i="",r=Ah(t,"TYPE").toLowerCase();"subtitles"==r&&(r=Ze);var a=r;if(a!=Ze&&n&&e.s.has(n)&&(i=e.s.get(n)),r=uf(Ah(t,"URI"),e.o),e.h.has(r))return e.h.get(r);var o=Yh(t),s=yh(t,"NAME"),l="YES"==yh(t,"DEFAULT"),u="audio"==a&&(u=yh(t,"CHANNELS"))?parseInt(u.split("/")[0],10):null,c="audio"==a&&(!!(c=yh(t,"CHANNELS"))&&c.includes("/JOC"));return i=qh(e,r,i,a,o,l,s,u,null,yh(t,"CHARACTERISTICS"),t="YES"==yh(t,"FORCED"),c),e.u.has(n)?e.u.get(n).push(i):e.u.set(n,[i]),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i)}function qh(e,t,n,i,r,a,o,s,u,c,d,h){function f(f){var p,m,y,E,_,k,T,S,w,C,I,R,D;return L((function(L){if(1==L.g)return A(L,hf(e,v.Jc),2);if(3!=L.g)return p=L.h,f.aborted?L.return():(m=p.uri,y=Ph(e.W,p.data,m),E=ff(e),A(L,Jh(e,y,t,m,n,i,r,a,o,s,u,c,d,h),3));if(_=L.h,f.aborted)return L.return();if(k=_.stream,ff(e)&&!E&&rf(e),v.Jc=m,v.Ya=_.Ya,v.Mc=_.Mc,v.mc=_.mc,v.$c=_.$c,v.Ld=!0,g.segmentIndex=k.segmentIndex,g.encrypted=k.encrypted,g.drmInfos=k.drmInfos,g.keyIds=k.keyIds,g.mimeType=k.mimeType,Zo.includes(g.mimeType)&&(g.codecs=""),g.drmInfos.length&&e.i.newDrmInfo(g),i==(T=et).va||i==T.Hc)for(S=l(e.h.values()),w=S.next();!w.done;w=S.next())(C=w.value).Ld||C.type!=i||(C.stream.mimeType=k.mimeType,Zo.includes(C.stream.mimeType)&&(C.stream.codecs=""));(function(e){if(!e.D)return!1;for(var t=[],n=[],i=(e=l(e.D.variants)).next();!i.done;i=e.next())(i=i.value).video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex})))})(e)&&(e.Ga?Qh(e,[v]):(e.Ga=!0,I=Array.from(e.h.values()),R=I.filter((function(e){return e.stream.segmentIndex})),Qh(e,R),Kh(e),0<(D=e.O)&&e.m.N(D))),b(L)}))}var p=wh(e.M,t),g=Zh(e,n,i,r,a,o,s,u,c,d,h);Zo.includes(g.mimeType)&&(g.codecs="");var v={stream:g,type:i,Ac:t,Jc:p,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},m=null,y=new AbortController;return g.createSegmentIndex=function(){return m||(y=new AbortController,m=new Promise((function(e){e(f(y.signal))})))},g.closeSegmentIndex=function(){m&&!g.segmentIndex&&y.abort(),g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),m=null},v}function $h(e){for(var t=1/0,n=(e=l(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Ya));return t}function Xh(e,t){for(var n=[],i=(t=l(t)).next();!i.done;i=t.next())(i=i.value).segmentIndex&&Es(i.segmentIndex,(function(e){n.push(e)}));e.j.Ib(n)}function Qh(e,t){if(!ff(e))for(var n=$h(e),i=l(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Wa(0,n);for(r=(n=l(t)).next();!r.done;r=n.next())r=r.value.stream,Zo.includes(r.mimeType)&&(r.codecs="");Xh(e,t.map((function(e){return e.stream}))),e.g.hls.ignoreManifestProgramDateTime?function(e,t){for(var n=-1==e.B,i=l(t),r=i.next();!r.done;r=i.next()){var a=(r=r.value).stream.segmentIndex,o=Vh(e,r);if(a=a.g[0]||null)for(var s=(o=l(o)).next();!s.done;s=o.next()){var u=(s=l(s.value)).next().value;if(s.next().value==a.startTime){n&&(e.B=Math.max(e.B,u)),r.Cd=u;break}}}if(!(0>e.B))for(r=(t=l(t)).next();!r.done;r=t.next())(i=(n=r.value).stream.segmentIndex)&&(i.g.splice(0,e.B-n.Cd),(i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),jh(e,n,i)))}(e,t):function(e,t){if(1/0==e.H)for(var n=(t=l(t)).next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.H=Math.min(e.H,i.g))}if(1/0!=(t=e.H))for(n=(i=l(e.h.values())).next();!n.done;n=i.next()){var r=(n=n.value).stream.segmentIndex;if(null!=r){var a=r.g[0]||null;if(null==a.g)G("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Ac,"Expect AV sync issues!");else for(jh(e,n,a.g-t-a.startTime),r=(n=l(r)).next();!r.done;r=n.next())r.value.oe(t)}}}(e,t)}function Jh(e,t,n,i,r,a,o,s,l,u,c,d,h,f,p){var g,v,m,y,b,E,_,k,T,S,w,C,I,R,D;return L((function(P){if(1==P.g){if(1!=t.type)throw new De(2,4,4017);return g=_h(t.g,"EXT-X-DEFINE"),v=Gh(e,g),nf(e,t),p?P.A(2):A(P,function(e,t,n,i,r){var a,o,s,l,u,c,d,h,f,p;return L((function(g){return 1==g.g?(a=Ri,o=Math.trunc((i.segments.length-1)/2),s=uf(i.segments[o].i,r),l=new Pe(s),u=l.qa.split(".").pop(),c=Af[t],(d=c[u])||(d=vf[u])||(d=cf(t,n))?g.return(d):((h=Si([s],e.g.retryParameters)).method="HEAD",A(g,gf(e,h,a),2))):(f=g.h,(p=f.headers["content-type"])?g.return(p.split(";")[0]):g.return(df(t)))}))}(e,a,r,t,v),3)}if(2!=P.g&&(p=P.h),m=ef(t,p),y=m.drmInfos,b=m.keyIds,E=m.encrypted,_=m.kf,E&&!y.length&&!_)throw new De(2,4,4026);return k=ff(e)?e.F.get(a):new Map,T=e.l,S=lf(e,t,a,k,v),T!=e.l&&nf(e,t),w=S[S.length-1].endTime,C=new bs(S),R=!!(I=Th(t.g,"EXT-X-SERVER-CONTROL"))&&null!=I.getAttribute("CAN-SKIP-UNTIL"),(D=Zh(e,r,a,o,s,l,u,c,d,h,f)).segmentIndex=C,D.encrypted=E,D.drmInfos=y,D.keyIds=b,D.mimeType=p,P.return({stream:D,type:a,Ac:n,Jc:i,Ya:w,Mc:R,mc:!1,Cd:-1,$c:k,Ld:!1})}))}function Zh(e,t,n,i,r,a,o,s,l,u,c){var d=cf(n,t)||df(n);return{id:e.Fa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==Ze?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,label:a,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:l?l.split(","):[],forced:u,channelsCount:o,audioSamplingRate:null,spatialAudio:c,closedCaptions:s,hdr:void 0,tilesLayout:void 0}}function ef(e,t){var n=[];if(e.segments)for(var i=(e=l(e.segments)).next();!i.done;i=e.next())i=_h(i.value.g,"EXT-X-KEY"),n.push.apply(n,u(i));i=e=!1;for(var r=[],a=new Set,o=(n=l(n)).next();!o.done;o=n.next()){var s=Ah(o=o.value,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)i=!0;else if(s=yh(o,"KEYFORMAT")||"identity",o=(s=bf[s])?s(o,t):null){if(o.keyIds)for(var c=(s=l(o.keyIds)).next();!c.done;c=s.next())a.add(c.value);r.push(o)}}return{drmInfos:r,keyIds:a,encrypted:e,kf:i}}function tf(t,n,i){if(!e.crypto||!e.crypto.subtle)throw W("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new De(2,4,4042);var r=0,a=yh(n,"IV","");if(a){var o=Rt(a.substr(2));if(16!=o.byteLength)throw new De(2,4,4043)}else r=Sh(i.g,"EXT-X-MEDIA-SEQUENCE");var s=Si([n=wh(i.h,Ah(n,"URI"))],t.g.retryParameters),l={method:"AES-128",iv:o,firstMediaSequenceNumber:r,fetchKey:function(){var n,i,r;return L((function(a){if(1==a.g)return A(a,gf(t,s,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new De(2,4,4044);return i={name:"AES-CBC"},r=l,A(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h,l.fetchKey=void 0,b(a)}))}};return l}function nf(e,t){var n=Th(t.g,"EXT-X-PLAYLIST-TYPE"),i=Th(t.g,"EXT-X-ENDLIST");if(i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i)pf(e,Ef);else{if(pf(e,n?kf:_f),!(i=Th(t.g,"EXT-X-TARGETDURATION")))throw new De(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),n=Th(t.g,"EXT-X-PART-INF"),e.l&&n?(e.da=Number(Ah(n,"PART-TARGET")),e.J=Math.min(e.da,e.J),t=Th(t.g,"EXT-X-SERVER-CONTROL"),e.V=t?Number(Ah(t,"PART-HOLD-BACK")):0):e.J=Math.min(i,e.J),e.ca=Math.max(i,e.ca)}}function rf(e){var t=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ca*e.g.hls.liveSegmentsDelay;e.j.Xe(0),e.j.We(t),e.j.yc(!1)}function af(e,t,n,i){return(n=Th(n,"EXT-X-MAP"))?(t=[i=uf(wh(t,Ah(n,"URI")),i),yh(n,"BYTERANGE","")].join("-"),e.ba.has(t)||(n=function(e,t){var n=0,i=null;(t=yh(t,"BYTERANGE"))&&(n=t.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1);return new fo((function(){return[e]}),n,i)}(i,n),e.ba.set(t,n)),e.ba.get(t)):null}function of(e,t,n,i,r,a,o,s,u){var c=i.g,d=uf(i.i,a),h=Th(c,"EXTINF"),f=a=0,p=null;i.h.length&&!e.l&&W("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var g=null;if(!e.g.hls.ignoreManifestProgramDateTime){var v=Th(c,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(g=dr(v.value))}if(v=go,Th(c,"EXT-X-GAP")&&(v=2),!h){if(0==i.h.length)throw new De(2,4,4024,"EXTINF");if(!e.l)return null}var m=[];if(e.l)for(var y={},A=0;A<i.h.length;y={pd:y.pd},A++){var b=i.h[A],E=0==A?n:m[m.length-1],_=0==A?r:E.endTime,k=Number(yh(b,"DURATION"))||e.da;if(k){k=_+k;var T=0,S=null;"EXT-X-PRELOAD-HINT"==b.name?T=(T=yh(b,"BYTERANGE-START"))?Number(T):0:(T=(S=l(sf(E,T=yh(b,"BYTERANGE")))).next().value,S=S.next().value),(E=yh(b,"URI"))&&(y.pd=wh(o,E),E=go,"YES"==yh(b,"GAP")&&(E=2),m.push(new po(_,k,function(e){return function(){return[e.pd]}}(y),T,S,t,0,0,1/0,[],"",null,null,E)))}}return a=h?r+Number(h.value.split(",")[0]):m[m.length-1].endTime,(e=Th(c,"EXT-X-BYTERANGE"))?(f=(p=l(sf(n,e.value))).next().value,p=p.next().value):m.length&&(f=m[0].Ba,p=m[m.length-1].ka),n="",e=null,"image"==s&&(n="1x1",s=Th(c,"EXT-X-TILES"))&&(n=Ah(s,"LAYOUT"),(s=yh(s,"DURATION"))&&(e=Number(s))),new po(r,a,(function(){return d.length?[d]:[]}),f,p,t,0,0,1/0,m,n,e,g,v,u)}function sf(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),i=(n=n[1]?Number(n[1]):e.ka+1)+t-1),[n,i]}function lf(e,t,n,i,r){var a=t.segments,o=void 0,s=Sh(t.g,"EXT-X-DISCONTINUITY-SEQUENCE"),u=Sh(t.g,"EXT-X-MEDIA-SEQUENCE"),c=Th(t.g,"EXT-X-SKIP"),d=u+(c=c?Number(yh(c,"SKIPPED-SEGMENTS")):0),h=0;ff(e)&&i.has(d)&&(h=i.get(d));for(var f=[],p=null,g=0;g<a.length;g++){var v=a[g],m=0==g?h:p.endTime;d=u+c+g,Th(v.g,"EXT-X-DISCONTINUITY")&&s++;for(var y=l(v.g),A=y.next();!A.done;A=y.next())"EXT-X-KEY"==(A=A.value).name&&(o="AES-128"==Ah(A,"METHOD")?tf(e,A,t):void 0);i.set(d,m),y=af(e,t.h,v.g,r),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(p=v=of(e,y,p,v,m,r,t.h,n,o))&&(v.m=s,e.g.hls.ignoreManifestProgramDateTime&&null!=e.B&&d<e.B||f.push(v))}if(t=f.some((function(e){return null!=e.g})))for(n={},i=0;i<f.length;n={Qb:n.Qb,Pb:n.Pb,Bc:n.Bc,Ta:n.Ta,Ob:n.Ob},i++)if(n.Ta=f[i],null==n.Ta.g)for(n.Pb=0,n.Qb=i,r=function(e){return function(){var t=f[e.Qb];if(t){if(null!=t.g)return t.g+e.Pb;e.Pb-=t.endTime-t.startTime,e.Qb+=1}return null}}(n),n.Ob=0,n.Bc=i,a=function(e){return function(){var t=f[e.Bc];if(t){if(t!=e.Ta&&(e.Ob+=t.endTime-t.startTime),null!=t.g)return t.g+e.Ob;--e.Bc}return null}}(n);null==n.Ta.g;)n.Ta.g=a(),null==n.Ta.g&&(n.Ta.g=r());if(t)for(i=(n=l(f)).next();!i.done;i=n.next())for(i=(r=i.value).g,a=(r=l(r.i)).next();!a.done;a=r.next())(a=a.value).g=i,i+=a.endTime-a.startTime;if(e=e.H,t&&1/0!=e)for(i=(t=l(f)).next();!i.done;i=t.next())i.value.oe(e);return f}function uf(e,t){var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=(i=i.value).slice(2,i.length-1),a=t.get(r);if(!a)throw new De(2,4,4039,r);e=e.replace(i,a)}return e}function cf(e,t){if(e==Ze){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function df(e){return e==Ze?"text/vtt":Af[e].mp4}function hf(e,t){return t=Si([t],e.g.retryParameters),e.i.modifyManifestRequest(t,{format:"h"}),gf(e,t,0)}function ff(e){return e.ia!=Ef}function pf(e,t){e.ia=t,e.j&&e.j.yc(!ff(e)),ff(e)||e.m.stop()}function gf(e,t,n){if(!e.G)throw new De(2,7,7001);return t=e.i.networkingEngine.request(n,t),_i(e.G,t),t.promise}U("shaka.net.DataUriPlugin",Nh),Nh.parse=Bh,Ti("data",Bh),(n=Uh.prototype).configure=function(e){this.g=e},n.start=function(e,t){var n,i=this;return L((function(r){return 1==r.g?(i.i=t,i.l=t.isLowLatencyMode(),A(r,hf(i,e),2)):3!=r.g?(n=r.h,i.M=n.uri,A(r,function(e,t,n){var i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,_,k,S,w,C,I,R,D,P,O,x,M,N,B,F,U;return L((function(V){switch(V.g){case 1:i=Ph(e.W,t,e.M);for(var H=l(_h(i.g,"EXT-X-DEFINE")),j=H.next();!j.done;j=H.next()){var K=j.value;j=yh(K,"NAME"),K=yh(K,"VALUE"),j&&K&&(e.o.has(j)||e.o.set(j,K))}if(r=[],a=[],o=[],1==i.type)return w=e.g.hls.mediaPlaylistFullMimeType,i.segments.length&&(C=new Pe(i.segments[0].i),I=C.qa.split(".").pop(),(R=vf[I])?w=R:"ts"!==I&&"mp4"!==I&&(mf[I]?(R=mf[I],D=e.g.hls.defaultAudioCodec,w=R+'; codecs="'+D+'"'):yf[I]&&(R=yf[I],P=e.g.hls.defaultVideoCodec,w=R+'; codecs="'+P+'"'))),O=w.split(";")[0],x=O.split("/")[0],M=Gt(w),N=new Map,A(V,Jh(e,i,n,n,M,x,"",!0,"Media Playlist",null,N,null,!1,!1,O),5);for(s=_h(i.g,"EXT-X-MEDIA"),u=_h(i.g,"EXT-X-STREAM-INF"),c=_h(i.g,"EXT-X-IMAGE-STREAM-INF"),d=_h(i.g,"EXT-X-SESSION-KEY"),j=(H=l(u)).next();!j.done;j=H.next()){var G=j.value;K=yh(G,"AUDIO"),j=yh(G,"VIDEO");var W=yh(G,"SUBTITLES");if(G=Wh(e,G),W){var Y=Je(Ze,G);e.s.set(W,Y),ee(G,Y)}K&&((W=Je("audio",G))||(W=e.g.hls.defaultAudioCodec),e.s.set(K,W)),j&&((K=Je("video",G))||(K=e.g.hls.defaultVideoCodec),e.s.set(j,K))}for(h=_h(i.g,"EXT-X-SESSION-DATA"),f=l(h),p=f.next();!p.done;p=f.next())g=p.value,v=yh(g,"DATA-ID"),m=yh(g,"URI"),y=yh(g,"LANGUAGE"),_=yh(g,"VALUE"),k=(new Map).set("id",v),m&&k.set("uri",wh(e.M,m)),y&&k.set("language",y),_&&k.set("value",_),S=new gi("sessiondata",k),e.i&&e.i.onEvent(S);for(function(e,t){t=t.filter((function(e){var t=yh(e,"URI")||"";return"SUBTITLES"!=yh(e,"TYPE")&&""!=t}));for(var n=(t=l(t)).next();!n.done;n=t.next())zh(e,n.value)}(e,s),j=(H=l(H=kh(s,"CLOSED-CAPTIONS"))).next();!j.done;j=H.next())j=Yh(W=j.value),K=Ah(W,"GROUP-ID"),W=Ah(W,"INSTREAM-ID"),e.L.get(K)||e.L.set(K,new Map),e.L.get(K).set(W,j);return r=function(e,t,n){var i=[],r=new Set;if(0<n.length)for(var a=(n=l(n)).next();!a.done;a=n.next()){var o=Ah(a=a.value,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=yh(a,"KEYFORMAT")||"identity",a=(o=bf[o])?o(a,""):null)){if(a.keyIds)for(var s=(o=l(a.keyIds)).next();!s.done;s=o.next())r.add(s.value);i.push(a)}}return t=t.map((function(t){var n=yh(t,"FRAME-RATE"),a=Number(yh(t,"AVERAGE-BANDWIDTH"))||Number(Ah(t,"BANDWIDTH")),o=yh(t,"RESOLUTION"),s=(o=l(o?o.split("x"):[null,null])).next().value,u=o.next().value,c=yh(t,"VIDEO-RANGE");t=function(e,t){var n=Wh(e,t),i=yh(t,"AUDIO"),r=yh(t,"VIDEO"),a=i||r;a=a&&e.u.has(a)?e.u.get(a):[],i={audio:i?a:[],video:r?a:[]},r=!1;var o=Ah(t,"URI"),s=i.audio.find((function(e){return e&&e.Ac==o})),l=Je("video",n),u=Je("audio",n);return u&&!l?a="audio":!a.length&&u&&l?(a="video",n=[[l,u].join()]):i.audio.length&&s?(a="audio",r=!0):a=i.video.length&&!i.audio.length?"audio":"video",r||(e=function(e,t,n,i){var r=uf(Ah(t,"URI"),e.o);return e.h.has(r)?e.h.get(r):(t=yh(t,"CLOSED-CAPTIONS"),t="video"==i&&t&&"NONE"!=t?e.L.get(t):null,n=Qe(i,n),i=qh(e,r,n,i,"und",!1,null,null,t,null,!1,!1),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i))}(e,t,n,a),i[e.stream.type]=[e]),i}(e,t),o=t.audio;for(var d=l(t=t.video),h=d.next();!h.done;h=d.next())(h=h.value.stream)&&(h.width=Number(s)||void 0,h.height=Number(u)||void 0,h.frameRate=Number(n)||void 0,h.hdr=c||void 0);for(n=e.g.disableAudio,o.length&&!n||(o=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],s=(o=l(o)).next();!s.done;s=o.next())for(s=s.value,c=(u=l(t)).next();!c.done;c=u.next()){var f=c.value;(c=s?s.stream:null)&&(c.drmInfos=i,c.keyIds=r),(d=f?f.stream:null)&&(d.drmInfos=i,d.keyIds=r),h=s?s.stream.drmInfos:null;var p=f?f.stream.drmInfos:null;f=(f?f.Ac:"")+" - "+(s?s.Ac:""),c&&d&&h.length&&p.length&&!(0<Nr(h,p).length)||e.ua.has(f)||(c={id:e.Fa++,language:c?c.language:"und",primary:!!c&&c.primary||!!d&&d.primary,audio:c,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(c),e.ua.add(f))}return n})).reduce(Ye,[]),t=t.filter((function(e){return null!=e}))}(e,u,d),a=function(e,t){var n=kh(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return zh(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=Ah(i.value,"GROUP-ID");if((i=e.s.get(r))&&(r=e.u.get(r)))for(var a=(r=l(r)).next();!a.done;a=r.next())(a=a.value).stream.codecs=i,a.stream.mimeType=cf(Ze,i)||df(Ze)}return t.filter((function(e){return e}))}(e,s),A(V,function(e,t){var n,i;return L((function(r){return 1==r.g?(n=t.map((function(t){var n,i;return L((function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(E(r,2),A(r,function(e,t){var n,i,r,a,o,s,l,u,c,d;return L((function(h){return 1==h.g?(n=uf(Ah(t,"URI"),e.o),i=yh(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(r=Yh(t),a=yh(t,"NAME"),o=yh(t,"CHARACTERISTICS"),s=qh(e,n,i,"image",r,!1,a,null,null,o,!1,!1),e.h.has(n)?h.return(e.h.get(n)):(l=yh(t,"RESOLUTION"))?A(h,s.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(u=s.stream.segmentIndex.get(0),c=u.tilesLayout)&&(s.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(d=yh(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.h.set(n,s),h.return(s))}))}(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=T(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i}))})),A(r,Promise.all(n),2)):(i=r.h,r.return(i.filter((function(e){return e}))))}))}(e,c),4);case 4:o=V.h,V.A(3);break;case 5:B=V.h,e.h.set(n,B),r.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==x?B.stream:null,video:"video"==x?B.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new De(2,7,7001);e.j=new es(null,0),e.j.yc(!0),1==i.type&&(ff(e)&&(rf(e),F=e.O,e.m.N(F)),U=Array.from(e.h.values()),Qh(e,U),Kh(e)),e.D={presentationTimeline:e.j,variants:r,textStreams:a,imageStreams:o,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.D),b(V)}}))}(i,n.data,e),3)):r.return(i.D)}))},n.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},n.update=function(){var e,t,n,i,r,a,o,s,c=this;return L((function(d){if(1==d.g){if(!ff(c))return d.return();for(e=[],t=Array.from(c.h.values()),n=t.filter((function(e){return e.stream.segmentIndex})),i=l(n),r=i.next();!r.done;r=i.next())a=r.value,e.push(Hh(c,a));return A(d,Promise.all(e),2)}Xh(c,n.map((function(e){return e.stream}))),o=n.some((function(e){return 0==e.mc})),n.length&&!o&&(pf(c,Tf.ff),s=t.map((function(e){return e.Ya})),c.j.Aa(Math.min.apply(Math,u(s))),c.i.updateDuration()),b(d)}))},n.onExpirationUpdated=function(){},U("shaka.hls.HlsParser",Uh);var vf={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},mf={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},yf={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},Af={audio:mf,video:yf,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},bf={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new De(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new De(2,4,4041);return Xe("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ah(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Xe("com.widevine.alpha",[{initDataType:"cenc",initData:t=Ce((t=Fh(t=Ah(e,"URI"))).data)}]),(e=yh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Ah(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Xe("com.microsoft.playready",[{initDataType:"cenc",initData:e=tr(e=Ce((e=Fh(e=Ah(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=Ah(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Xe("org.w3.clearkey",null):null}},Ef="VOD",_f="EVENT",kf="LIVE",Tf={ff:Ef,Pg:_f,Ug:kf};function Sf(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Oe:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Et(t)}catch(e){}throw new De(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function wf(){}function Cf(e,t,n,i,r){var a=new Of;Fi(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new Lf,s={ye:!1,bf:!1};if(e=function(e,t,n,i,r,a,o){var s,l,u,c,d,h,f,p,g,v,m,y,_;return L((function(S){switch(S.g){case 1:return s=Df,l=Pf,h=d=0,f=Date.now(),E(S,2),A(S,s(e,n),4);case 4:return u=S.h,a(If(u.headers)),p=u.clone().body.getReader(),v=(g=u.headers.get("Content-Length"))?parseInt(g,10):0,m=function(e){function t(){var n,i;return L((function(a){switch(a.g){case 1:return E(a,2),A(a,p.read(),4);case 4:n=a.h,k(a,3);break;case 2:return T(a),a.return();case 3:if(n.done){a.A(5);break}if(d+=n.value.byteLength,!o){a.A(5);break}return A(a,o(n.value),5);case 5:(100<(i=Date.now())-f||n.done)&&(r(i-f,d-h,v-d),h=d,f=i),n.done?e.close():(e.enqueue(n.value),t()),b(a)}}))}t()},new l({start:m}),A(S,u.arrayBuffer(),5);case 5:c=S.h,k(S,3);break;case 2:if(y=T(S),i.ye)throw new De(1,1,7001,e,t);if(i.bf)throw new De(1,1,1003,e,t);throw new De(1,1,1002,e,y,t);case 3:return _=If(u.headers),S.return(Sf(_,c,u.status,e,u.url,t))}}))}(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i,r,t.streamDataCallback),e=new ui(e,(function(){return s.ye=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var l=new at((function(){s.bf=!0,o.abort()}));l.N(t/1e3),e.finally((function(){l.stop()}))}return e}function If(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Rf(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}pt("Tizen 3")||pt("Tizen 2")||ct()||(Xr.m3u8=function(){return new Uh},$r["application/x-mpegurl"]=function(){return new Uh},$r["application/vnd.apple.mpegurl"]=function(){return new Uh}),U("shaka.net.HttpFetchPlugin",wf),wf.isSupported=Rf,wf.parse=Cf;var Df=e.fetch,Lf=e.AbortController,Pf=e.ReadableStream,Of=e.Headers;function xf(){}function Mf(e,t,n,i,r){var a=new Bf,o=Date.now(),s=0,l=new Promise((function(l,u){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials,a.onabort=function(){u(new De(1,1,7001,e,n))};var c=!1;for(var d in a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Nf(a);r(e),c=!0}},a.onload=function(){var t=Nf(a),i=a.response;try{var r=Sf(t,i,a.status,e,a.responseURL,n);l(r)}catch(e){u(e)}},a.onerror=function(t){u(new De(1,1,1002,e,t,n))},a.ontimeout=function(){u(new De(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(i(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t)},t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)}));return new ui(l,(function(){return a.abort(),Promise.resolve()}))}function Nf(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=l(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Rf()&&(Ti("http",Cf,2,!0),Ti("https",Cf,2,!0),Ti("blob",Cf,2,!0)),U("shaka.net.HttpXHRPlugin",xf),xf.parse=Mf;var Bf=e.XMLHttpRequest;function Ff(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function Uf(e){return e.ya().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ka}function Vf(e,t){return Ns(e.g.ya(),e.g.Ba,e.g.ka,t.streaming.retryParameters)}function Hf(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function jf(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Kf(e){var t=this;this.o=e,this.j=new Map,this.i=new Pi((function(){return Gf(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new Hf}function Gf(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function Wf(e,t,n,i,r,a){Oi(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,l,u,c,d;return L((function(h){if(1==h.g)return A(h,function(e,t){var n,i,r,a;return L((function(o){return 1==o.g?(n=Ri,i=e.o.request(n,t),r=function(){return i.abort()},e.h.push(r),A(o,i.promise,2)):(a=o.h,ee(e.h,r),o.return(a.data))}))}(e,n),2);if(t=h.h,e.i.g)throw new De(2,9,7001);if(r)for(l in o=Ce(t),(s=new er(o)).data)u=Number(l),c=s.data[u],d=s.g[u],e.l(c,d);e.g.close(i,t.byteLength);var f=e.g;return e.m(0==f.i?0:f.j/f.i,e.g.h),h.return(a(t))}))}));e.j.set(t,o)}function Yf(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new nt,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function zf(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return L((function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,A(i,t(e.key,e.value,e),2));e.continue(),b(i)}))}}))}function qf(e){this.h=e,this.g=[]}function $f(e,t){return Xf(e,t,"readwrite")}function Xf(e,t,n){var i=new Yf(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then((function(){ee(e.g,i)}),(function(){ee(e.g,i)})),i}function Qf(e,t,n){this.h=new qf(e),this.i=t,this.g=n}function Jf(e){return Promise.reject(new De(2,9,9011,"Cannot add new value to "+e))}function Zf(e,t,n,i){t=(e=$f(e.h,t)).store();for(var r={},a=(n=l(n)).next();!a.done;r={Ec:r.Ec},a=n.next())r.Ec=a.value,t.delete(r.Ec).onsuccess=function(e){return function(){return i(e.Ec)}}(r);return e.promise()}function ep(e,t,n){var i,r,a,o,s,u,c;return L((function(d){if(1==d.g){for(i=Xf(e.h,t,"readonly"),r=i.store(),a={},o=[],s={},u=l(n),c=u.next();!c.done;s={Vb:s.Vb,Tb:s.Tb},c=u.next())s.Tb=c.value,s.Vb=r.get(s.Tb),s.Vb.onsuccess=function(e){return function(){null==e.Vb.result&&o.push(e.Tb),a[e.Tb]=e.Vb.result}}(s);return A(d,i.promise(),2)}if(o.length)throw new De(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function tp(e){this.g=new qf(e)}function np(){this.g=new Map}function ip(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{za:n,ja:i},ja:e})}))})),t)return t;throw new De(2,9,9013,"Could not find a cell that supports add-operations")}function rp(e,t,n){if(!(e=e.g.get(t)))throw new De(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new De(2,9,9013,"Could not find cell with name "+n);return t}function ap(e,t){op.set(e,t)}Ti("http",Mf,1,!0),Ti("https",Mf,1,!0),Ti("blob",Mf,1,!0),Hf.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Kf.prototype.destroy=function(){return this.i.destroy()},Yf.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return E(t,2),A(t,e.g,4)}if(2!=t.g)return k(t,0);T(t),b(t)}))},Yf.prototype.store=function(){return this.h},Yf.prototype.promise=function(){return this.g},qf.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(n=Qf.prototype).destroy=function(){return this.h.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return Jf(this.i)},n.removeSegments=function(e,t){return Zf(this,this.i,e,t)},n.getSegments=function(e){var t,n=this;return L((function(i){return 1==i.g?A(i,ep(n,n.i,e),2):(t=i.h,i.return(t.map((function(e){return n.ze(e)}))))}))},n.addManifests=function(){return Jf(this.g)},n.updateManifest=function(){return Promise.reject(new De(2,9,9016,"Cannot modify values in "+this.g))},n.updateManifestExpiration=function(e,t){var n=$f(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},n.removeManifests=function(e,t){return Zf(this,this.g,e,t)},n.getManifests=function(e){var t,n=this;return L((function(i){return 1==i.g?A(i,ep(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map((function(e){return n.bc(e)})))))}))},n.getAllManifests=function(){var e,t,n=this;return L((function(i){return 1==i.g?(e=Xf(n.h,n.g,"readonly"),t=new Map,A(i,zf(e,(function(e,i){var r;return L((function(a){if(1==a.g)return A(a,n.bc(i),2);r=a.h,t.set(e,r),b(a)}))})),2)):3!=i.g?A(i,e.promise(),3):i.return(t)}))},n.ze=function(e){return e},n.bc=function(e){return Promise.resolve(e)},n.add=function(e,t){var n,i,r,a,o,s,u,c=this;return L((function(d){if(1==d.g){for(n=$f(c.h,e),i=n.store(),r=[],a={},o=l(t),s=o.next();!s.done;a={Fc:a.Fc},s=o.next())u=s.value,a.Fc=i.add(u),a.Fc.onsuccess=function(e){return function(){r.push(e.Fc.result)}}(a);return A(d,n.promise(),2)}return d.return(r)}))},tp.prototype.destroy=function(){return this.g.destroy()},tp.prototype.getAll=function(){var e,t,n=this;return L((function(i){return 1==i.g?(e=Xf(n.g,"session-ids","readonly"),t=[],A(i,zf(e,(function(e,n){t.push(n)})),2)):3!=i.g?A(i,e.promise(),3):i.return(t)}))},tp.prototype.add=function(e){for(var t=$f(this.g,"session-ids"),n=t.store(),i=(e=l(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},tp.prototype.remove=function(e){var t,n=this;return L((function(i){return 1==i.g?A(i,zf(t=$f(n.g,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):A(i,t.promise(),0)}))},np.prototype.destroy=function(){for(var e=[],t=l(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},np.prototype.init=function(){var e=this;op.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=l(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},U("shaka.offline.StorageMuxer",np),np.unregister=function(e){op.delete(e)},np.register=ap,np.prototype.destroy=np.prototype.destroy;var op=new Map;function sp(){Qf.apply(this,arguments)}function lp(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=l(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=l(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=l(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=l(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=l(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=l(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=l(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?up(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=up(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function up(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new De(2,9,9004,"Could not parse uri "+e)}function cp(){Qf.apply(this,arguments)}function dp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function hp(){Qf.apply(this,arguments)}function fp(){this.m=this.j=this.i=this.h=this.g=this.l=null}function pp(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function gp(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new pp(t,n,i,Number(e[4])):null}function vp(e,t){this.h=e,this.g=t}function mp(e,t){var n=new es(null,0);n.Aa(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=l(t),o=a.next();!o.done;o=a.next()){var s=l(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=l(n),o=a.next();!o.done;o=a.next())for(s=l(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=l(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=l(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=yp(e,r,i),s=l(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=l(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=yp(e,r,i),o=l(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return e.type==Ze})).map((function(t){return yp(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return yp(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=l(i.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function yp(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new pp("segment",e.h,e.g,t.dataKey);return new po(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new pp("segment",e.h,e.g,t);return new fo((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.Ib(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new bs(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Ap(){this.g=null}function bp(){}function Ep(e){var t=gp(e);return t&&"manifest"==t.g?e=hi(e={uri:e,Oe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.g?function(e,t){var n=new np;return hi(void 0).Y((function(){return n.init()})).Y((function(){return rp(n,t.za(),t.ja())})).Y((function(e){return e.getSegments([t.key()])})).Y((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):ci(new De(2,1,9004,e)),e}function _p(e,t,n){var i,r,a,o,s,u;return L((function(c){switch(c.g){case 1:i=[];for(var d=[],h=l(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=l(d),v=g.next();!v.done;v=g.next())if(kp((v=v.value).info,f)){v.sessionIds.push(f.sessionId),p=!0;break}p||d.push({info:f,sessionIds:[f.sessionId]})}r=l(d),a=r.next();case 2:if(a.done){c.A(4);break}return o=a.value,s=function(e,t,n){var i,r;return L((function(a){switch(a.g){case 1:return i=new _r({kb:t,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),E(a,2),i.configure(e),A(a,function(e,t,n,i,r,a){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,r),Lr(e,o,[])}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:k(a,3);break;case 2:return T(a),A(a,i.destroy(),5);case 5:case 9:return a.return([]);case 3:return E(a,6),A(a,wr(i),8);case 8:k(a,7);break;case 6:return T(a),A(a,i.destroy(),9);case 7:return r=[],A(a,Promise.all(n.sessionIds.map((function(e){return L((function(t){return 1==t.g?(E(t,2),A(t,function(e,t){var n,i,r;return L((function(a){return 1==a.g?A(a,Pr(e,t),2):3!=a.g?(n=a.h)?(i=[],(r=e.i.get(n))&&(r.Ja=new nt,i.push(r.Ja)),i.push(n.remove()),A(a,Promise.all(i),3)):a.return():(e.i.delete(n),void b(a))}))}(i,e),4)):2!=t.g?(r.push(e),k(t,0)):(T(t),void b(t))}))}))),10);case 10:return A(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,o),A(c,s,5);case 5:u=c.h,i=i.concat(u),a=r.next(),c.A(2);break;case 4:return c.return(i)}}))}function kp(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&te(e.audioCapabilities,t.audioCapabilities,n)&&te(e.videoCapabilities,t.videoCapabilities,n)}function Tp(e,t){var n=mp(new vp(e.za(),e.ja()),t),i=t.appMetadata||{};return n=Sp(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Sp(e){for(var t=[],n=function(e){return e.filter((function(e){return Dn(e)}))}(e.variants),i=(n=l(n)).next();!i.done;i=n.next())t.push(kn(i.value));for(n=(e=l(e.textStreams)).next();!n.done;n=e.next())t.push(Tn(n.value));return t}function wp(){this.g={}}function Cp(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth),e.g[n.id]=r,e.g[i.id]=a}}function Ip(e,t){e.g[t.id]=t.bandwidth||2048}function Rp(e,t){return null==(e=e.g[t])&&(e=0),e}function Dp(e){var t=this;if(e&&e.constructor!=Yl)throw new De(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.jc()):(this.h=Fl(),this.g=new ki),this.i=[],this.j=[];var n=!e;this.l=new Pi((function(){var e,i,r,a,o;return L((function(s){switch(s.g){case 1:return A(s,Promise.all(t.j.map((function(e){return Gf(e)}))),2);case 2:for(e=function(){},i=[],r=l(t.i),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return A(s,Promise.all(i),3);case 3:if(!n){s.A(4);break}return A(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,b(s)}}))}))}function Lp(){if(ot())e:{for(var e=l(op.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Pp(e){var t,n,i;return L((function(r){switch(r.g){case 1:return A(r,(t=new np).init(),2);case 2:return A(r,ip(t),3);case 3:return n=r.h,i=new pp("manifest",n.path.za,n.path.ja,e),A(r,t.destroy(),4);case 4:return A(r,(new Dp).remove(i.toString()),0)}}))}function Op(e,t,n,i,r,a){var o,s,u,c,d,h,f,p,g,v,m;return L((function(y){switch(y.g){case 1:for(o=!1,E(y,2),s=!0,u=l(n.streams),c=u.next();!c.done;c=u.next())for(d=c.value,h=l(d.segments),f=h.next();!f.done;f=h.next())p=f.value,null!=(g=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null)&&(p.dataKey=g,p.pendingSegmentRefId=void 0),null!=(g=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=r,s&&(n.isIncomplete=!1),A(y,e.updateManifest(t,n),4);case 4:o=!0,a(),k(y,0);break;case 2:return v=T(y),A(y,Pp(t),5);case 5:if(o){y.A(6);break}return m=Object.values(i),A(y,e.removeSegments(m,(function(){})),6);case 6:throw v}}))}function xp(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Mp(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Np(e,t){for(var n=[],i=l(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Ht(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Ht(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Bp(e,t,n){return L((function(i){return A(i,function(e,t,n,i){var r,a,o;return L((function(s){return 1==s.g?i.drmInfo?(r=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new De(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Np(i,!1),videoCapabilities:Np(i,!0)}})),A(s,_p(t,e,a),2)):s.return():3!=s.g?(o=s.h,A(s,r.remove(o),3)):A(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Fp(e,t,n){function i(){}var r=function(e){for(var t=new Set,n=(e=l(e.streams)).next();!n.done;n=e.next())for(var i=(n=l(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return Tp(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function Up(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout},s=r.offline.numberOfParallelDownloads,l=0;return function(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Pa(),(function(n){var r=Uf(n),u=void 0;if(!a.has(r)){var c=n.endTime-n.startTime;c=Rp(t,i.id)*c,c=jf(e.g,c),a.set(r,new Ff(n,c,l,!1))}n.h&&(u=Uf(n.h),a.has(u)||(c=.5*Rp(t,i.id),c=jf(e.g,c),a.set(u,new Ff(n.h,c,l,!0)))),o.segments.push({pendingInitSegmentRefId:u,initSegmentKey:u?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:r,dataKey:0}),l=(l+1)%s})),o}function Vp(e){if(e.l.g)throw new De(2,9,7001)}function Hp(){if(!Lp())throw new De(2,9,9e3)}function jp(e,t){return L((function(n){return 1==n.g?(e.i.push(t),_(n),A(n,t,4)):2!=n.g?n.return(n.h):(S(n),ee(e.i,t),w(n,0))}))}function Kp(e){for(var t=new Set,n=l(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=l(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=l(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}g(sp,Qf),sp.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return L((function(o){return n=$f(a.h,a.g),i=n.store(),r=new nt,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new De(2,9,9012,"Could not find values for "+e))},A(o,Promise.all([n.promise(),r]),0)}))},sp.prototype.bc=function(e){var t,n,i,r,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=lp(e.periods[n],r),t.push(a);return A(s,Nd(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},sp.prototype.ze=function(e){return{data:e.data}},g(cp,Qf),cp.prototype.bc=function(e){var t,n,i,r,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var u=e.periods[n],c=[],d=l(u.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(dp(h,u.startTime,u.startTime+r));a=c,t.push(a)}return A(s,Nd(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))},g(hp,Qf),(n=hp.prototype).hasFixedKeySpace=function(){return!1},n.addSegments=function(e){return this.add(this.i,e)},n.addManifests=function(e){return this.add(this.g,e)},n.updateManifest=function(e,t){return function(e,t,n){var i=(e=$f(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},n.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(n=fp.prototype).init=function(){var t=this,n=new nt,i=!1,r=new at((function(){i=!0,n.reject(new De(2,9,9017))}));r.N(2);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!i){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new sp(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new cp(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new cp(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new hp(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new tp(e):null,t.m=e,r.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=l(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){i||(n.reject(new De(2,9,9001,a.error)),r.stop(),e.preventDefault())},n},n.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return A(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return A(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),b(t)}}))},n.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},n.getEmeSessionCell=function(){return this.m},n.erase=function(){var t=this;return L((function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return A(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return A(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return A(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return A(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),A(n,function(){var t=new nt,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new De(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,A(n,t.init(),0)}}))},ap("idb",(function(){return pt("CrKey")||lt()||!e.indexedDB?null:new fp})),pp.prototype.za=function(){return this.i},pp.prototype.ja=function(){return this.h},pp.prototype.key=function(){return this.l},pp.prototype.toString=function(){return this.j},(n=Ap.prototype).configure=function(){},n.start=function(e,t){var n,i,r,a,o,s,l=this;return L((function(u){switch(u.g){case 1:if(n=gp(e),l.g=n,null==n||"manifest"!=n.g)throw new De(2,1,9004,e);return i=new np,_(u),A(u,i.init(),4);case 4:return A(u,rp(i,n.za(),n.ja()),5);case 5:return A(u,u.h.getManifests([n.key()]),6);case 6:return r=u.h,a=r[0],o=new vp(n.za(),n.ja()),s=mp(o,a),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return S(u),A(u,i.destroy(),7);case 7:w(u,0)}}))},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,l,u=this;return L((function(c){switch(c.g){case 1:return n=u.g,i=new np,E(c,2,3),A(c,i.init(),5);case 5:return A(c,rp(i,n.za(),n.ja()),6);case 6:return A(c,(r=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!s||!l){c.A(3);break}return A(c,r.updateManifestExpiration(n.key(),t),3);case 3:return S(c),A(c,i.destroy(),10);case 10:w(c,0);break;case 2:T(c),c.A(3)}}))},$r["application/x-offline-manifest"]=function(){return new Ap},U("shaka.offline.OfflineScheme",bp),bp.plugin=Ep,Ti("offline",Ep),(n=Dp.prototype).destroy=function(){return this.l.destroy()},n.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Pl(e,t)),Ul(this.h,e)},n.getConfiguration=function(){var e=Fl();return Ul(e,this.h,Fl()),e},n.jc=function(){return this.g},n.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Kf(this.g);return this.j.push(a),t=function(e,t,n,i,r,a){var o,s,u,c,d,h,f,p,g,v,m,y,_;return L((function(C){switch(C.g){case 1:return Hp(),s=o=null,u=new np,h=d=c=null,E(C,2,3),A(C,i(),5);case 5:return o=C.h,A(C,function(e,t,n,i){var r,a,o,s,l;return L((function(u){if(1==u.g)return r=null,a=e.g,o={networkingEngine:a,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(i.manifest),Vp(e),A(u,n.start(t,o),2);if(3!=u.g)return s=u.h,Vp(e),l=Kp(s),A(u,Promise.all(Bi(l,(function(e){return e.createSegmentIndex()}))),3);if(Vp(e),r)throw r;return u.return(s)}))}(e,t,o,r),6);case 6:if(f=C.h,Vp(e),!(!f.presentationTimeline.U()&&!f.presentationTimeline.jb()))throw new De(2,9,9005,t);return A(C,function(e,t,n,i){var r;return L((function(a){switch(a.g){case 1:return(r=new _r({kb:e.g,onError:n,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),A(a,function(e,t,n){return e.da=!0,e.B=[],e.L=n,Tr(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return A(a,wr(r),3);case 3:return A(a,Cr(r),4);case 4:return a.return(r)}}))}(e,f,(function(e){h=h||e}),r),7);case 7:if(s=C.h,Vp(e),h)throw h;return A(C,function(e,t){var n,i,r,a,o,s,u,c,d,h,f,p,g,v,m,y,_,S,w,C,I,R,D,P,O,x,M,N;return L((function(L){switch(L.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return fn(e,t,n)}))}(e,t.restrictions,n),A(L,vn(e,t.offline.usePersistentLicense),2);case 2:for(i=[],r=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,s=t.preferredAudioCodecs,cn(e,o,s,r,a),u=l(e.variants),c=u.next();!c.done;c=u.next())d=c.value,i.push(kn(d));for(h=l(e.textStreams),f=h.next();!f.done;f=h.next())p=f.value,i.push(Tn(p));for(g=l(e.imageStreams),v=g.next();!v.done;v=g.next())m=v.value,i.push(Sn(m));return A(L,t.offline.trackSelectionCallback(i),3);case 3:for(y=L.h,_=e.presentationTimeline.getDuration(),S=0,w=l(y),C=w.next();!C.done;C=w.next())I=C.value,R=I.bandwidth*_/8,S+=R;return E(L,4),A(L,t.offline.downloadSizeCallback(S),6);case 6:if(!L.h)throw new De(2,9,9014);k(L,5);break;case 4:if((D=T(L))instanceof De)throw D;throw new De(2,9,9015);case 5:for(P=new Set,O=new Set,x=new Set,M=l(y),C=M.next();!C.done;C=M.next())"variant"==(N=C.value).type&&P.add(N.id),"text"==N.type&&O.add(N.id),"image"==N.type&&x.add(N.id);e.variants=e.variants.filter((function(e){return P.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return O.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return x.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=l(t),i=n.next();!i.done;i=n.next())for(var r=(i=l(t)).next();!r.done;r=i.next());for(t=l(e),n=t.next();!n.done;n=t.next())for(n=l(e),i=n.next();!i.done;i=n.next());}(e),b(L)}}))}(f,r),8);case 8:return A(C,u.init(),9);case 9:return Vp(e),A(C,ip(u),10);case 10:return c=C.h,Vp(e),p=function(e,t,n,i,r,a){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=Sp(t),appMetadata:n,isIncomplete:!1}}(n,t,i),s=r.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(a,(function(e,t){o.size=t,s(o,e)}),(function(t,n){u&&r.offline.usePersistentLicense&&c==n&&Ir(e,"cenc",t)}));var u=xp(t)&&!Mp(t),c=null;u&&(c=Gp.get(e.g.keySystem));for(var d=new wp,h=l(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;for(h=l(t.imageStreams),f=h.next();!f.done;f=h.next())Ip(d,f.value);for(f=l(t.variants),h=f.next();!h.done;h=f.next())Cp(d,h.value);return d=function(e,t,n,i){for(var r=new Map,a=Kp(n),o=new Map,s=(a=l(a)).next();!s.done;s=a.next()){var u=Up(e,t,n,s=s.value,i,r);o.set(s.id,u)}for(e=l(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),pe:Array.from(r.values())}}(a,d,t,r),a=d.streams,d=d.pe,f=e.g,h=r.offline.usePersistentLicense,f&&h&&(f.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ic(),streams:a,sessionIds:h?Dr(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode},pe:d}}(s,f,t,n,r,a),g=p.ag,v=p.pe,A(C,c.ja.addManifests([g]),11);case 11:if(m=C.h,Vp(e),d=m[0],Vp(e),h)throw h;return A(C,function(e,t,n,i,r,a,o,s,u){var c,d,h,f,p,g,v,m,y,_;return L((function(S){switch(S.g){case 1:if(c={},d=0,h=function(t,h){var f,p,g,v,m,y,E;return L((function(_){if(1==_.g){for(f={},p=l(t),g=p.next();!g.done;f={cb:f.cb},g=p.next())f.cb=g.value,v=Vf(f.cb,a),m=f.cb.i,y=f.cb.h,E=function(t){return function(n){var i,r,a;return L((function(s){if(1==s.g)return A(s,o.addSegments([{data:n}]),2);i=s.h,Vp(e),r=t.cb.g,a=Uf(r),c[a]=i[0],d+=n.byteLength,b(s)}))}}(f),Wf(r,f.cb.groupId,v,m,y,E);return A(_,function(e){return L((function(t){return 1==t.g?A(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(r),2)}return h?(Vp(e),function(e,t,n,i){if(t.expiration=n.ic(),n=Dr(n),t.sessionIds=i.offline.usePersistentLicense?n:[],xp(e)&&i.offline.usePersistentLicense&&!n.length)throw new De(2,9,9007)}(s,i,u,a),A(_,o.updateManifest(n,i),0)):_.A(0)}))},f=!1,E(S,2),!xp(s)||!f||Mp(s)){S.A(4);break}return A(S,h(t.filter((function(e){return e.h})),!0),5);case 5:return Vp(e),t=t.filter((function(e){return!e.h})),p=c,g=d,c={},d=0,A(S,Op(o,n,i,p,g,(function(){return Vp(e)})),6);case 6:Vp(e);case 4:if(f){S.A(7);break}return A(S,h(t,!1),8);case 8:return Vp(e),v=c,m=d,c={},d=0,A(S,Op(o,n,i,v,m,(function(){return Vp(e)})),9);case 9:Vp(e);case 7:k(S,0);break;case 2:return y=T(S),_=Object.values(c),A(S,o.removeSegments(_,(function(){})),10);case 10:throw y}}))}(e,v,d,g,a,r,c.ja,f,s),12);case 12:return Vp(e),y=new pp("manifest",c.path.za,c.path.ja,d),C.return(Tp(y,g));case 3:return S(C),A(C,u.destroy(),13);case 13:if(!o){C.A(14);break}return A(C,o.stop(),14);case 14:if(!s){C.A(16);break}return A(C,s.destroy(),16);case 16:w(C,0);break;case 2:if(_=T(C),null==d){C.A(18);break}return A(C,Pp(d),18);case 18:throw h||_}}))}(this,e,t||{},(function(){var t;return L((function(a){return 1==a.g?A(a,Yr(e,i.g,r.manifest.retryParameters,n||null),2):(t=a.h,a.return(t()))}))}),r,a),(t=new ui(t,(function(){return Gf(a)}))).finally((function(){ee(i.j,a)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){ee(e.i,n)}))}(this,t)},n.remove=function(e){return jp(this,function(e,t){var n,i,r,a,o,s;return L((function(l){switch(l.g){case 1:if(Hp(),null==(n=gp(t))||"manifest"!=n.g)throw new De(2,9,9004,t);return i=n,r=new np,_(l),A(l,r.init(),4);case 4:return A(l,rp(r,i.za(),i.ja()),5);case 5:return A(l,(a=l.h).getManifests([i.key()]),6);case 6:return o=l.h,s=o[0],A(l,Promise.all([Bp(e,s,r),Fp(a,i,s)]),2);case 2:return S(l),A(l,r.destroy(),8);case 8:w(l,0)}}))}(this,e))},n.pg=function(){return jp(this,function(e){var t,n,i,r,a,o,s,u,c,d;return L((function(h){switch(h.g){case 1:return Hp(),t=e.g,n=e.h.drm,i=new np,r=!1,_(h),A(h,i.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),o=l(a),s=o.next();case 5:if(s.done){h.A(2);break}return A(h,(u=s.value).getAll(),8);case 8:return c=h.h,A(h,_p(n,t,c),9);case 9:return d=h.h,A(h,u.remove(d),10);case 10:d.length!=c.length&&(r=!0),s=o.next(),h.A(5);break;case 2:return S(h),A(h,i.destroy(),11);case 11:w(h,3);break;case 3:return h.return(!r)}}))}(this))},n.list=function(){return jp(this,L((function(i){switch(i.g){case 1:return Hp(),e=[],t=new np,_(i),A(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({za:n,ja:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return L((function(n){if(1==n.g)return A(n,i.getAllManifests(),2);n.h.forEach((function(n,i){n=Tp(new pp("manifest",t.za,t.ja,i),n),e.push(n)})),b(n)}))}))})),A(i,n,2);case 2:return S(i),A(i,t.destroy(),6);case 6:w(i,3);break;case 3:return i.return(e)}})));var e,t,n},U("shaka.offline.Storage",Dp),Dp.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new np,_(t),A(t,function(e){var t,n;return L((function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||op.forEach((function(e){(e=e())&&t.push(e)})),A(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.A(0):A(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(S(t),A(t,e.destroy(),5)):w(t,0)}))},Dp.prototype.list=Dp.prototype.list,Dp.prototype.removeEmeSessions=Dp.prototype.pg,Dp.prototype.remove=Dp.prototype.remove,Dp.prototype.store=Dp.prototype.store,Dp.prototype.getNetworkingEngine=Dp.prototype.jc,Dp.prototype.getConfiguration=Dp.prototype.getConfiguration,Dp.prototype.configure=Dp.prototype.configure,Dp.prototype.destroy=Dp.prototype.destroy,Dp.support=Lp;var Gp=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Wp(){}function Yp(e,t){for(e={priority:t||0,mf:e},t=0;t<zp.length;t++)if(zp[t].priority<e.priority)return void zp.splice(t,0,e);zp.push(e)}qu.offline=Lp,U("shaka.polyfill",Wp),Wp.register=Yp,Wp.installAll=function(){for(var e=l(zp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.mf()}catch(e){W("Error installing polyfill!",e)}}};var zp=[];function qp(){this.g=new Xp}function $p(){e.AbortController||(e.AbortController=qp,e.AbortSignal=Xp)}function Xp(){yi.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Qp(){}function Jp(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=l(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Zp(t.value)}function Zp(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function eg(){}function tg(){Vm()}function ng(){}function ig(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",rg),document.addEventListener("webkitfullscreenerror",rg),document.addEventListener("mozfullscreenchange",rg),document.addEventListener("mozfullscreenerror",rg),document.addEventListener("MSFullscreenChange",rg),document.addEventListener("MSFullscreenError",rg)}}function rg(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function ag(){}function og(){var e=!0;(dt()||pt("PlayStation 5")||ht()||pt("Web0S")||ut()||pt("CrKey")||pt("PC=EOS")||pt("Hisense")||pt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),pg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=sg)}function sg(t){var n,i,r,a,o,s,l,u,c,d,h,f,p;return L((function(g){switch(g.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return g.return(n);if(i=t.video,r=t.audio,"media-source"==t.type){if(!ot())return g.return(n);if(i){if(pt("CrKey")){if(!e.cast)throw new De(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var v=i.contentType;i.width&&i.height&&(v+="; width="+i.width+"; height="+i.height),i.framerate&&(v+="; framerate="+i.framerate),"pq"===i.transferFunction&&(v+="; eotf=smpte2084"),v=cast.__platform__.canDisplayType(v)}else v=Q(i.contentType)}else v=Q(i.contentType);if(!v)return g.return(n)}if(r&&(a=r.contentType,!Q(a)))return g.return(n)}else{if("file"!=t.type)return g.return(n);if(i&&(o=i.contentType,!st(o))||r&&(s=r.contentType,!st(s)))return g.return(n)}return t.keySystemConfiguration?(l=t.keySystemConfiguration,u=[],c=[],l.audio&&(d={robustness:l.audio.robustness||"",contentType:t.audio.contentType},u.push(d)),l.video&&(h={robustness:l.video.robustness||"",contentType:t.video.contentType},c.push(h)),f={initDataTypes:[l.initDataType],distinctiveIdentifier:l.distinctiveIdentifier,persistentState:l.persistentState,sessionTypes:l.sessionTypes},u.length&&(f.audioCapabilities=u),c.length&&(f.videoCapabilities=c),E(g,3),A(g,navigator.requestMediaKeySystemAccess(l.keySystem,[f]),5)):(n.supported=!0,g.return(Promise.resolve(n)));case 5:p=g.h,k(g,4);break;case 3:T(g);case 4:p&&(n.supported=!0,n.keySystemAccess=p);case 2:return g.return(n)}}))}qp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new gi("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},a.Object.defineProperties(qp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Wp.AbortController=qp,qp.install=$p,g(Xp,yi),a.Object.defineProperties(Xp.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yp($p),Wp.Aria=Qp,Qp.install=Jp,Yp(Jp),Wp.EncryptionScheme=eg,eg.install=tg,Yp(tg,-2),Wp.Fullscreen=ng,ng.install=ig,Yp(ig),Wp.MediaCapabilities=ag,ag.install=og;var lg,ug,cg,dg,hg,fg,pg=null;function gg(){}function vg(){var t=ft();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?12>=t?(mg(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):mg():(pt("Tizen 2")||pt("Tizen 3")||pt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Wt(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;pt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function mg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,P.apply(0,arguments));return t.abort=function(){},t}}function yg(){}function Ag(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new bg;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new gi("change");n.dispatchEvent(e)}))}()}function bg(){yi.call(this),this.type="",this.angle=0}function Eg(){}function _g(e,t){try{var n=new Sg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function kg(e){var t=this.mediaKeys;return t&&t!=e&&Cg(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Cg(e,this):Promise.resolve()}function Tg(e){if(Ie(e=Ce(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=_t(e=bt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=we(e),this.dispatchEvent(t)}function Sg(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=l(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=l(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(o=(n=l(n.videoCapabilities)).next();!o.done;o=n.next())(a=o.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function wg(e){this.h=new WebKitMediaKeys(e),this.g=new xi}function Cg(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",Tg);try{return os(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Ig(e){yi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new xi,this.sessionId="",this.expiration=NaN,this.closed=new nt,this.keyStatuses=new Dg}function Rg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new gi("keystatuseschange"),e.dispatchEvent(t)}function Dg(){this.size=0,this.g=void 0}function Lg(){}function Pg(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Og,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xg,e.MediaKeys=Mg,e.MediaKeySystemAccess=Ng,e.shakaMediaKeysPolyfill=!0)}function Og(){return Promise.reject(Error("The key system specified is not supported."))}function xg(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Mg(){throw new TypeError("Illegal constructor.")}function Ng(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Bg(){}function Fg(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Qg="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Vg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Hg,e.MediaKeys=Kg,e.MediaKeySystemAccess=jg,e.shakaMediaKeysPolyfill=!0}}function Ug(e){return Qg?Qg+e.charAt(0).toUpperCase()+e.slice(1):e}function Vg(e,t){try{var n=new jg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Hg(e){var t=this.mediaKeys;return t&&t!=e&&Gg(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Gg(e,this),Promise.resolve()}function jg(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=(t=l(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=l(a.audioCapabilities),c=u.next();!c.done;c=u.next())(c=c.value).contentType&&(s=!0,r.canPlayType(c.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(c),i=!0));if(a.videoCapabilities)for(c=(u=l(a.videoCapabilities)).next();!c.done;c=u.next())(c=c.value).contentType&&(s=!0,r.canPlayType(c.contentType,this.g)&&(o.videoCapabilities.push(c),i=!0));if(s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Kg(e){this.l=e,this.h=null,this.g=new xi,this.i=[],this.j=new Map}function Gg(e,t){e.h=t,e.g.nb();var n=Qg;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=we(t.initData),e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=Wg(e,t.sessionId);n&&(t=new gi("message",t=(new Map).set("messageType",null==n.keyStatuses.Eb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){(t=Wg(e,t.sessionId))&&($g(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.C(t,n+"keyerror",(function(t){var n=Wg(e,t.sessionId);n&&n.handleError(t)})))}function Wg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Yg(e,t,n){yi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new nt,this.keyStatuses=new Xg}function zg(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=Ce(_t("LOAD_SESSION|"+n));else{var r=_t("PERSISTENT|");i=Lt(r,t)}else i=Ce(t)}catch(e){return Promise.reject(e)}e.h=new nt;var a=Ug("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new at((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).N(.01)}return e.h}function qg(e,t,n){if(e.g)e.g.then((function(){return qg(e,t,n)})).catch((function(){return qg(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=At(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=It(r.keys[0].k),r=It(r.keys[0].kid)}else i=Ce(n),r=null;var a=Ug("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function $g(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new gi("keystatuseschange"),e.dispatchEvent(t)}function Xg(){this.size=0,this.g=void 0}ag.originalMcap=pg,Yp(og,-1),Wp.MediaSource=gg,gg.install=vg,Yp(vg),Wp.Orientation=yg,yg.install=Ag,g(bg,yi),bg.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},bg.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yp(Ag),Wp.PatchedMediaKeysApple=Eg,Eg.uninstall=function(){lg&&(lg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",ug),HTMLMediaElement.prototype.setMediaKeys=cg,e.MediaKeys=dg,e.MediaKeySystemAccess=hg,navigator.requestMediaKeySystemAccess=fg,ug=fg=cg=hg=dg=null,e.shakaMediaKeysPolyfill=!1)},Eg.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(lg=!0,ug=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),cg=HTMLMediaElement.prototype.setMediaKeys,dg=e.MediaKeys,hg=e.MediaKeySystemAccess,fg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kg,e.MediaKeys=wg,e.MediaKeySystemAccess=Sg,navigator.requestMediaKeySystemAccess=_g,e.shakaMediaKeysPolyfill=!0)},Sg.prototype.createMediaKeys=function(){var e=new wg(this.keySystem);return Promise.resolve(e)},Sg.prototype.getConfiguration=function(){return this.g},wg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Ig(this.h)},wg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Ig,yi),(n=Ig.prototype).generateRequest=function(e,t){var n=this;this.h=new nt;try{var i=this.l.createSession("video/mp4",Ce(t));this.i=i,this.sessionId=i.sessionId||"",this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new gi("message",e=(new Map).set("messageType",null==n.keyStatuses.Eb()?"license-request":"license-renewal").set("message",we(e.message))),n.dispatchEvent(e)})),this.j.C(i,"webkitkeyadded",(function(){n.g&&(Rg(n,"usable"),n.g.resolve(),n.g=null)})),this.j.C(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rg(n,"output-not-allowed");break;default:Rg(n,"internal-error")}})),Rg(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.g=new nt;try{this.i.update(Ce(e))}catch(e){this.g.reject(e)}return this.g},n.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(n=Dg.prototype).Eb=function(){return this.g},n.forEach=function(e){this.g&&e(this.g,Gr.value())},n.get=function(e){if(this.has(e))return this.g},n.has=function(e){var t=Gr.value();return!(!this.g||!Te(e,t))},n.entries=function(){},n.keys=function(){},n.values=function(){},Wp.PatchedMediaKeysNop=Lg,Lg.install=Pg,Mg.prototype.createSession=function(){},Mg.prototype.setServerCertificate=function(){},Ng.prototype.getConfiguration=function(){},Ng.prototype.createMediaKeys=function(){},Yp(Pg,-10),Wp.PatchedMediaKeysWebkit=Bg,Bg.install=Fg,jg.prototype.createMediaKeys=function(){var e=new Kg(this.g);return Promise.resolve(e)},jg.prototype.getConfiguration=function(){return this.h},Kg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Yg(t,this.l,e),this.i.push(e),e},Kg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Yg,yi),(n=Yg.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?$g(this,"output-restricted"):$g(this,1==t?"expired":"internal-error"))},n.generateRequest=function(e,t){return zg(this,t,null)},n.load=function(e){return"persistent-license"==this.l?zg(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new nt;return qg(this,t,e),t},n.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ug("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Xg.prototype).Eb=function(){return this.g},n.forEach=function(e){this.g&&e(this.g,Gr.value())},n.get=function(e){if(this.has(e))return this.g},n.has=function(e){var t=Gr.value();return!(!this.g||!Te(e,t))},n.entries=function(){},n.keys=function(){},n.values=function(){};var Qg="";function Jg(){}function Zg(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=tv,Object.defineProperty(t,"disablePictureInPicture",{get:iv,set:rv,enumerable:!0,configurable:!0}),document.exitPictureInPicture=nv,document.addEventListener("webkitpresentationmodechanged",ev,!0))}}function ev(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function tv(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function nv(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function iv(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function rv(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function av(){}function ov(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=sv))}function sv(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function lv(){}function uv(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=cv)}function cv(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function dv(){}function hv(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:fv})}function fv(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function pv(){}function gv(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function vv(){}function mv(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||ct())&&(t.getVideoPlaybackQuality=yv)}}function yv(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Av(){}function bv(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Ev;else if(6==n)t=_v;else{try{var i=!!Ev(1,2,"")}catch(e){i=!1}i&&(t=Ev)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function Ev(t,n,i){return new e.TextTrackCue(t,n,i)}function _v(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function kv(){}Yp(Fg),Wp.PiPWebkit=Jg,Jg.install=Zg,Yp(Zg),Wp.RandomUUID=av,av.install=ov,Yp(ov),Wp.StorageEstimate=lv,lv.install=uv,Yp(uv),Wp.Symbol=dv,dv.install=hv,Yp(hv),Wp.VideoPlayPromise=pv,pv.install=gv,Yp(gv),Wp.VideoPlaybackQuality=vv,vv.install=mv,Yp(mv),Wp.VTTCue=Av,Av.install=bv,Yp(bv),kv.prototype.parseInit=function(){},kv.prototype.setSequenceMode=function(){},kv.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=(e=l(e=At(e).split(/\r?\n/))).next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=Tv.exec(r))){var a=Sv.exec(r[1]);r=new ie(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,r[2]),n&&(n.endTime=a,i.push(n)),n=r}return n&&i.push(n),i},U("shaka.text.LrcTextParser",kv),kv.prototype.parseMedia=kv.prototype.parseMedia,kv.prototype.setSequenceMode=kv.prototype.setSequenceMode,kv.prototype.parseInit=kv.prototype.parseInit;var Tv=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Sv=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function wv(){}function Cv(e,t,n,i,r,a,o,s,u,c,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var f=document.createElement("span");f.textContent=e.textContent}else f=e;for(var p=null,g=l(Zv),v=g.next();!v.done&&!(p=Ov(f,"backgroundImage",i,"#",v.value)[0]);v=g.next());if(g=d,("p"==e.nodeName||p)&&(d=!0),s="default"==(f.getAttribute("xml:space")||(s?"default":"preserve")),e=[],!(v=Array.from(f.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var m=l(f.childNodes),y=m.next();!y.done;y=m.next())(y=Cv(y.value,t,n,i,r,a,o,s,u,f,d))&&e.push(y);i=null!=c,m=/\S/.test(f.textContent);var A=f.hasAttribute("begin")||f.hasAttribute("end")||f.hasAttribute("dur");if(!(A||m||"br"==f.tagName||0!=e.length||i&&!s))return null;for(m=(y=Mv(f,n)).start,y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)m=(y=xv(h,n,m,y)).start,y=y.end,h=h.parentNode;if(null==m&&(m=0),m+=t.periodStart,y=null==y?1/0:y+t.periodStart,m=Math.max(m,t.segmentStart),y=Math.min(y,t.segmentEnd),!A&&0<e.length)for(m=1/0,y=0,n=(t=l(e)).next();!n.done;n=t.next())n=n.value,m=Math.min(m,n.startTime),y=Math.max(y,n.endTime);if("br"==f.tagName)return(r=new ie(m,y,"")).lineBreak=!0,r;if(t="",v&&(t=f.textContent,s&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new ie(m,y,t)).nestedCues=e,d||(t.isContainer=!0),u&&(t.cellResolution=u),u=Ov(f,"region",a,"")[0],f.hasAttribute("region")&&u&&u.getAttribute("xml:id")){var b=u.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==b}))[0]}return o=u,c&&i&&!f.getAttribute("region")&&!f.getAttribute("style")&&(o=Ov(c,"region",a,"")[0]),function(e,t,n,i,r,a,o){a=a||o,"rtl"==Rv(t,n,r,"direction",a)&&(e.direction="rtl"),o=Rv(t,n,r,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=ce),(o=Rv(t,n,r,"textAlign",!0))?(e.positionAlign=Xv[o],e.lineAlign=$v[o],e.textAlign=se[o.toUpperCase()]):e.textAlign=oe,(o=Rv(t,n,r,"displayAlign",!0))&&(e.displayAlign=ue[o.toUpperCase()]);(o=Rv(t,n,r,"color",a))&&(e.color=o);(o=Rv(t,n,r,"backgroundColor",a))&&(e.backgroundColor=o);(o=Rv(t,n,r,"border",a))&&(e.border=o);if(o=Rv(t,n,r,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=Rv(t,n,r,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700),o=Rv(t,n,r,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=Rv(t,n,r,"lineHeight",a))&&o.match(Hv)&&(e.lineHeight=o),(o=Rv(t,n,r,"fontSize",a))&&(o.match(Hv)||o.match(Vv))&&(e.fontSize=o),(o=Rv(t,n,r,"fontStyle",a))&&(e.fontStyle=Ae[o.toUpperCase()]);if(i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var s=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==o&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=Rv(t,n,r,"textOutline",a))&&(i=i.split(" "),i[0].match(Hv)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(Hv)?e.textStrokeWidth=i[0]:e.textStrokeColor="");(i=Rv(t,n,r,"letterSpacing",a))&&i.match(Hv)&&(e.letterSpacing=i),(i=Rv(t,n,r,"linePadding",a))&&i.match(Hv)&&(e.linePadding=i),(a=Rv(t,n,r,"opacity",a))&&(e.opacity=parseFloat(a));(n=Dv(n,r,"textDecoration"))&&Iv(e,n),(t=Lv(t,r,"textDecoration"))&&Iv(e,t)}(t,f,o,p,r,g,0==e.length),t}function Iv(e,t){for(var n=(t=l(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&ee(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&ee(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&ee(e.textDecoration,"overline")}}function Rv(e,t,n,i,r){return r=void 0===r||r,(e=Lv(e,n,i))?e:r?Dv(t,n,i):null}function Dv(e,t,n){if(!e)return null;var i=sr(e,Jv,n);return i||Pv(e,t,n)}function Lv(e,t,n){var i=sr(e,Jv,n);return i||Pv(e,t,n)}function Pv(e,t,n){e=Ov(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=or(e[r],"urn:ebu:tt:style",n);a||(a=sr(e[r],Jv,n)),a||(a=Lv(e[r],t,n)),a&&(i=a)}return i}function Ov(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?or(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=l(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=l(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}return a}function xv(e,t,n,i){return e=Mv(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function Mv(e,t){var n=Nv(e.getAttribute("begin"),t),i=Nv(e.getAttribute("end"),t);return e=Nv(e.getAttribute("dur"),t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function Nv(e,t){var n=null;if(Kv.test(e)){e=Kv.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);n=(r+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*i+3600*n}else if(Gv.test(e))n=Bv(Gv,e);else if(Wv.test(e))n=Bv(Wv,e);else if(Yv.test(e))e=Yv.exec(e),n=Number(e[1])/t.frameRate;else if(zv.test(e))e=zv.exec(e),n=Number(e[1])/t.g;else if(qv.test(e))n=Bv(qv,e);else if(e)throw new De(2,2,2001,"Could not parse cue time range in TTML");return n}function Bv(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Fv(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Qt["application/x-subtitle-lrc"]=function(){return new kv},wv.prototype.parseInit=function(){},wv.prototype.setSequenceMode=function(){},wv.prototype.parseMedia=function(e,t){var n=At(e);if(e=[],""==n)return e;var i=Ar(n,"tt");if(!i)throw new De(2,2,2005,"Failed to parse TTML.");if(!(n=i.getElementsByTagName("body")[0]))return[];var r=sr(i,Qv,"frameRate"),a=sr(i,Qv,"subFrameRate"),o=sr(i,Qv,"frameRateMultiplier"),s=sr(i,Qv,"tickRate"),u=sr(i,Qv,"cellResolution"),c=i.getAttribute("xml:space")||"default",d=sr(i,Jv,"extent");if("default"!=c&&"preserve"!=c)throw new De(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,r=new Fv(r,a,o,s),u=u&&(u=/^(\d+) (\d+)$/.exec(u))?{columns:parseInt(u[1],10),rows:parseInt(u[2],10)}:null,a=(a=i.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(a):[],o=Array.from(i.getElementsByTagName("style")),s=[];for(var h=l(i=Array.from(i.getElementsByTagName("region"))),f=h.next();!f.done;f=h.next()){var p=f.value;f=new be;var g=p.getAttribute("xml:id");if(g){f.id=g;var v,m,y=null;d&&(y=Uv.exec(d)||jv.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(v=Dv(p,o,"extent"))&&(null!=(v=(m=Uv.exec(v))||jv.exec(v))&&(f.width=Number(v[1]),f.height=Number(v[2]),m||(null!=g&&(f.width=100*f.width/g),null!=y&&(f.height=100*f.height/y)),f.widthUnits=m||null!=g?Ee:0,f.heightUnits=m||null!=y?Ee:0)),(p=Dv(p,o,"origin"))&&(null!=(v=(m=Uv.exec(p))||jv.exec(p))&&(f.viewportAnchorX=Number(v[1]),f.viewportAnchorY=Number(v[2]),m||(null!=y&&(f.viewportAnchorY=100*f.viewportAnchorY/y),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=m||null!=g?Ee:0))}else f=null;f&&s.push(f)}if(rr(n,"p").length)throw new De(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=l(rr(n,"div"))).next();!h.done;h=d.next())if(rr(h.value,"span").length)throw new De(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Cv(n,t,r,a,o,i,s,c,u,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},U("shaka.text.TtmlTextParser",wv),wv.prototype.parseMedia=wv.prototype.parseMedia,wv.prototype.setSequenceMode=wv.prototype.setSequenceMode,wv.prototype.parseInit=wv.prototype.parseInit;var Uv=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Vv=/^(\d{1,2}(?:\.\d+)?|100)%$/,Hv=/^(\d+px|\d+em|\d*\.?\d+c)$/,jv=/^(\d+)px (\d+)px$/,Kv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Gv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Wv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Yv=/^(\d*(?:\.\d*)?)f$/,zv=/^(\d*(?:\.\d*)?)t$/,qv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),$v={left:fe,center:"center",right:"end",start:fe,end:"end"},Xv={left:"line-left",center:"center",right:"line-right"},Qv=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Jv=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Zv=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function em(){this.g=new wv}function tm(){this.g=!1}function nm(e){for(var t=l(Object.entries(ge)),n=t.next();!n.done;n=t.next()){var i=l(n.value);n=i.next().value,i=i.next().value;var r=new ie(0,0,"");r.color=i,e.set("."+n,r)}for(n=(t=l(Object.entries(ve))).next();!n.done;n=t.next())n=(i=l(n.value)).next().value,i=i.next().value,(r=new ie(0,0,"")).backgroundColor=i,e.set("."+n,r)}function im(e,t,n){0===n.size&&nm(n);e:{var i=e;e=[];for(var r=-1,a="",o=0;o<i.length;o++)if("/"===i[o]&&0<o&&"<"===i[o-1]){var s=i.indexOf(">",o);if(s<=o){e=i;break e}if((s=i.substring(o+1,s))&&"c"===s){var u=e.pop();u?u===s?(a+="/"+s+">",o+=s.length+1):u.startsWith("c.")?(o+=s.length+1,a+="/"+u+">"):a+=i[o]:a+=i[o]}else a+=i[o]}else"<"===i[o]?"c"!=i[r=o+1]&&(r=-1):">"===i[o]&&0<r&&(e.push(i.substr(r,o-r)),r=-1),a+=i[o];e=a}for(i=[],a=-1,r=0;r<e.length;r++)"<"===e[r]?a=r+1:">"===e[r]&&0<a&&((a=e.substr(a,r-a)).match(um)&&i.push(a),a=-1);for(r=(i=l(i)).next();!r.done;r=i.next())r=r.value,e=e.replace("<"+r+">",'<div time="'+r+'">'),e+="</div>";e:{for(r=e,a=[],o=-1,i="",e=!1,s=0;s<r.length;s++)if("/"===r[s]){if(-1===(u=r.indexOf(">",s))){e=r;break e}if((u=r.substring(s+1,u))&&"v"==u){e=!0;var c=null;if(a.length&&(c=a[a.length-1]),c){if(c===u)i+="/"+u+">";else{if(!c.startsWith("v")){i+=r[s];continue}i+="/"+c+">"}s+=u.length+1}else i+=r[s]}else i+=r[s]}else"<"===r[s]?"v"!=r[o=s+1]&&(o=-1):">"===r[s]&&0<o&&(a.push(r.substr(o,s-o)),o=-1),i+=r[s];for(a=(r=l(a)).next();!a.done;a=r.next())o=(a=a.value).replace(" ",".voice-"),i=(i=i.replace("<"+a+">","<"+o+">")).replace("</"+a+">","</"+o+">"),e||(i+="</"+o+">");e=i}if(r=Ar("<span>"+e+"</span>","span")){if(i=[],1==(r=r.childNodes).length&&((a=r[0]).nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=e);for(r=(e=l(r)).next();!r.done;r=e.next())am(r.value,t,i,n);t.nestedCues=i}else t.payload=e}function rm(e,t){return e&&0<e.length?e:t}function am(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=l(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',i.has(s)||(s="v[voice="+u+"]")}switch(i.has(s)&&(s=i.get(s))&&(r.backgroundColor=rm(s.backgroundColor,r.backgroundColor),r.color=rm(s.color,r.color),r.fontFamily=rm(s.fontFamily,r.fontFamily),r.fontSize=rm(s.fontSize,r.fontSize),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.wrapLine=s.wrapLine),o){case"br":(o=t.clone()).lineBreak=!0,n.push(o);break;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"div":(o=e.getAttribute("time"))&&(o=sm(new Ch(o)))&&(r.startTime=o)}}if(ur(e))for(a=!0,i=l(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||((a=t.clone()).lineBreak=!0,n.push(a)),0<e.length&&((a=r.clone()).payload=e,n.push(a)),a=!1;else for(e=(t=l(e.childNodes)).next();!e.done;e=t.next())am(e.value,r,n,i)}function om(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?oe:se[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter((function(e){return e.id==t})),e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=he,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()]))}function sm(e){if(null==(e=Rh(e,um)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function lm(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}Qt["application/ttml+xml"]=function(){return new wv},em.prototype.parseInit=function(e){var t=!1;if((new Gi).box("moov",Wi).box("trak",Wi).box("mdia",Wi).box("minf",Wi).box("stbl",Wi).P("stsd",Yi).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new De(2,2,2007)},em.prototype.setSequenceMode=function(){},em.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Gi).box("mdat",qi((function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!i)throw new De(2,2,2007);return r},U("shaka.text.Mp4TtmlParser",em),em.prototype.parseMedia=em.prototype.parseMedia,em.prototype.setSequenceMode=em.prototype.setSequenceMode,em.prototype.parseInit=em.prototype.parseInit,Qt['application/mp4; codecs="stpp"']=function(){return new em},Qt['application/mp4; codecs="stpp.ttml"']=function(){return new em},Qt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new em},Qt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new em},tm.prototype.parseInit=function(){},tm.prototype.setSequenceMode=function(e){this.g=e},tm.prototype.parseMedia=function(e,t){var n=(e=(e=At(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new De(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){if(null==(e=sm(new Ch(i[1]))))throw new De(2,2,2e3);for(r=Number(r[1]),i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}for(t=[],i=(r=l(n[0].split("\n"))).next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Ch(i);var a=new be;Dh(i),Ih(i);for(var o=Dh(i);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),Ih(i),o=Dh(i)}t.push(a)}for(nm(r=new Map),i=[],a=(n=l(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(o=(s=l(s)).next();!o.done;o=s.next()){var c=o.value;o="global",(u=c[0].match(/\((.*)\)/))&&(o=u.pop()),u=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(u=c[1].split(";")),(c=r.get(o))||(c=new ie(0,0,""));for(var d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0,c.backgroundColor=p;break;case"color":d=!0,c.color=p;break;case"font-family":d=!0,c.fontFamily=p;break;case"font-size":d=!0,c.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(d=!0,c.fontWeight=700);break;case"font-style":switch(p){case"normal":d=!0,c.fontStyle=ye;break;case"italic":d=!0,c.fontStyle="italic";break;case"oblique":d=!0,c.fontStyle="oblique"}break;case"opacity":d=!0,c.opacity=parseFloat(p);break;case"text-shadow":d=!0,c.textShadow=p;break;case"white-space":d=!0,c.wrapLine="noWrap"!=p}}}d&&r.set(o,c)}}if(d=e,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else{if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),u=sm(o=new Ch(a[0])),h=Rh(o,/[ \t]+--\x3e[ \t]+/g),c=sm(o),null==u||null==h||null==c)throw new De(2,2,2001,"Could not parse cue time range in WebVTT");for(u+=d,c+=d,d=lm(a.slice(1).join("\n").trim()),r.has("global")?((a=r.get("global").clone()).startTime=u,a.endTime=c,a.payload=""):a=new ie(u,c,""),im(d,a,r),Ih(o),u=Dh(o);u;)om(a,u,t),Ih(o),u=Dh(o);null!=s&&(a.id=s)}a&&i.push(a)}return i},U("shaka.text.VttTextParser",tm),tm.prototype.parseMedia=tm.prototype.parseMedia,tm.prototype.setSequenceMode=tm.prototype.setSequenceMode,tm.prototype.parseInit=tm.prototype.parseInit;var um=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function cm(){this.g=null}function dm(e,t,n){var i,r,a;return(new Gi).box("payl",qi((function(e){i=At(e)}))).box("iden",qi((function(e){r=At(e)}))).box("sttg",qi((function(e){a=At(e)}))).parse(e),i?function(e,t,n,i,r){if(i=new ie(i,r,""),im(e,i,new Map),t&&(i.id=t),n)for(e=new Ch(n),t=Dh(e);t;)om(i,t,[]),Ih(e),t=Dh(e);return i}(i,r,a,t,n):null}function hm(){}function fm(e){if(null==(e=Rh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function pm(){this.g=new tm}function gm(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=l((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function vm(){}function mm(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ym(n))&&(e.color=n),(n=t.BackColour)&&(n=ym(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=le,e.textAlign="start";break;case 2:e.displayAlign=le,e.textAlign=oe;break;case 3:e.displayAlign=le,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=oe;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=oe;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ym(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Am(e){return 3600*((e=Sm.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Qt["text/vtt"]=function(){return new tm},Qt['text/vtt; codecs="vtt"']=function(){return new tm},Qt['text/vtt; codecs="wvtt"']=function(){return new tm},cm.prototype.parseInit=function(e){var t=this,n=!1;if((new Gi).box("moov",Wi).box("trak",Wi).box("mdia",Wi).P("mdhd",(function(e){e=io(e.reader,e.version),t.g=e.timescale})).box("minf",Wi).box("stbl",Wi).P("stsd",Yi).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new De(2,2,2008);if(!n)throw new De(2,2,2008)},cm.prototype.setSequenceMode=function(){},cm.prototype.parseMedia=function(e,t){if(!this.g)throw new De(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,u=!1,c=null;if((new Gi).box("moof",Wi).box("traf",Wi).P("tfdt",(function(e){o=!0,i=no(e.reader,e.version).we})).P("tfhd",(function(e){c=to(e.reader,e.flags).Ce})).P("trun",(function(e){s=!0,r=ro(e.reader,e.version,e.flags).Re})).box("mdat",qi((function(e){u=!0,n=e}))).parse(e,!1),!u&&!o&&!s)throw new De(2,2,2008);e=i;for(var d=new Hi(n,0),h=l(r),f=h.next();!f.done;f=h.next()){var p=(f=f.value).ee||c,g=f.ed?i+f.ed:e;e=g+(p||0);var v=0;do{var m=d.K();v+=m;var y=null;"vttc"==Xi(d.K())?8<m&&(y=d.Za(m-8)):d.skip(m-8),p&&y&&(m=dm(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(m))}while(f.sampleSize&&v<f.sampleSize)}return a.filter(qe)},U("shaka.text.Mp4VttParser",cm),cm.prototype.parseMedia=cm.prototype.parseMedia,cm.prototype.setSequenceMode=cm.prototype.setSequenceMode,cm.prototype.parseInit=cm.prototype.parseInit,Qt['application/mp4; codecs="wvtt"']=function(){return new cm},hm.prototype.parseInit=function(){},hm.prototype.setSequenceMode=function(){},hm.prototype.parseMedia=function(e){var t=At(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=l(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new Ch((n=n.value.split("\n"))[0]),r=fm(i),a=Rh(i,/,/g);if(i=fm(i),null==r||null==a||null==i)throw new De(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ie(r,i,n.slice(1).join("\n").trim()))}return e},U("shaka.text.SbvTextParser",hm),hm.prototype.parseMedia=hm.prototype.parseMedia,hm.prototype.setSequenceMode=hm.prototype.setSequenceMode,hm.prototype.parseInit=hm.prototype.parseInit,Qt["text/x-subviewer"]=function(){return new hm},pm.prototype.parseInit=function(){},pm.prototype.setSequenceMode=function(){},pm.prototype.parseMedia=function(e,t){return e=Ce(_t(e=gm(e=At(e)))),this.g.parseMedia(e,t)},U("shaka.text.SrtTextParser",pm),pm.srt2webvtt=gm,pm.prototype.parseMedia=pm.prototype.parseMedia,pm.prototype.setSequenceMode=pm.prototype.setSequenceMode,pm.prototype.parseInit=pm.prototype.parseInit,Qt["text/srt"]=function(){return new pm},vm.prototype.parseInit=function(){},vm.prototype.setSequenceMode=function(){},vm.prototype.parseMedia=function(e){for(var t="",n="",i=(e=l(e=At(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=_m.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null;for(var a=(t=l(t.split(/\r?\n/))).next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=km.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(Tm);else if("Style"==r){r=a.split(Tm),a={};for(var o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}for(i=[],t=null,r={},a=(n=l(n.split(/\r?\n/))).next();!a.done;r={vd:r.vd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=km.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Tm);else if("Dialogue"==a){o=o.split(Tm),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new ie(s=Am(a.Start),Am(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.vd=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.vd}}(r)))&&mm(o,a),i.push(o)}return i},U("shaka.text.SsaTextParser",vm),vm.prototype.parseMedia=vm.prototype.parseMedia,vm.prototype.setSequenceMode=vm.prototype.setSequenceMode,vm.prototype.parseInit=vm.prototype.parseInit;var bm,Em,_m=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,km=/^\s*([^:]+):\s*(.*)/,Tm=/\s*,\s*/,Sm=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function wm(){}function Cm(){bm?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(bm=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Im):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Im(e,t){var n,i=this;return L((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),A(r,bm.call(i,e,t),2)):Fm(n=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=bm,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Rm,r.return(Rm.call(i,e,t)))}))}function Rm(e,t){var n,i,r,a,o,s,u,c,d,h,f=this;return L((function(p){if(1==p.g){for(console.assert(f==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Bm(e),i=[],r=l(t),a=r.next();!a.done;a=r.next())o=a.value,s=Dm(o.videoCapabilities,n),u=Dm(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=u,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return A(p,bm.call(f,e,i),2)}return h=p.h,p.return(new Nm(h,n))}))}function Dm(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Lm(){}function Pm(){Em?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Em=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Om):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Om(e){var t,n,i,r=this;return L((function(a){switch(a.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),A(a,Em.call(r,e),2);case 2:if(t=a.h,!e.keySystemConfiguration)return a.return(t);if((n=t.keySystemAccess)&&Fm(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Em,a.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=xm,n){a.A(3);break}return i=t,A(a,Mm(e),4);case 4:return i.keySystemAccess=a.h,a.return(t);case 3:return a.return(xm.call(r,e))}}))}function xm(e){var t,n,i,r,a,o,s,l,u=this;return L((function(c){switch(c.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=Bm(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?c.return(o):A(c,Em.call(u,e),2);case 2:if((s=c.h).keySystemAccess){s.keySystemAccess=new Nm(s.keySystemAccess,t),c.A(3);break}if(!e.keySystemConfiguration){c.A(3);break}return l=s,A(c,Mm(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(s)}}))}function Mm(e){var t,n;return L((function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],o=[];return r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(r.audioCapabilities=a),o.length&&(r.videoCapabilities=o),t=r,A(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)}))}function Nm(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Bm(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Fm(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Um(){}function Vm(){Cm(),Pm()}Qt["text/x-ssa"]=function(){return new vm},U("EmeEncryptionSchemePolyfill",wm),wm.install=Cm,U("McEncryptionSchemePolyfill",Lm),Lm.install=Pm,Nm.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=l(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=l(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Nm.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},U("EncryptionSchemePolyfills",Um),Um.install=Vm,void 0!==module&&module.exports&&(module.exports=Um)}.call(n,t,t,void 0),n.shaka)e[i]=n.shaka[i]}()})),ng=yo((function(module,e){var t;window,t=function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var module=t[i]={i:i,l:!1,exports:{}};return e[i].call(module.exports,module,module.exports,n),module.l=!0,module.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return n.d(e,"a",e),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s="./src/clappr-dash-shaka-playback.js")}({"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
    !*** ./src/clappr-dash-shaka-playback.js ***!
    \*******************************************/
/*! no static exports found */function(module,e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=t(/*! clappr */"clappr"),a=(i=t(/*! shaka-player */"shaka-player"))&&i.__esModule?i:{default:i};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function u(e,t,i){return t=f(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,i||[],f(e).constructor):t.apply(e,i))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=h(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},d.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var g=r.Utils.now,v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=u(this,t,[].concat(i)))._levels=[],e._pendingAdaptationEvent=!1,e._isShakaReadyState=!1,e._lastTimeUpdate={current:0,total:0,firstFragDateTime:0},e._timeUpdateThrottleDelay=200,e._timeUpdateFiringRate=.2,e._durationChangeMinOffset=.5,e._lastTimeUpdateFiredTime=0,e._minDvrSize=void 0===e.options.shakaMinimumDvrSize?60:e.options.shakaMinimumDvrSize,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,i=[{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return a.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.seekRange():{start:0,end:0}}},{key:"currentLevel",get:function(){return this._currentLevelId||-1},set:function(e){var t=this;this._currentLevelId=e;var n=-1===this._currentLevelId;this.trigger(r.Events.PLAYBACK_LEVEL_SWITCH_START),n?(this._player.configure({abr:{enabled:!0}}),this.trigger(r.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"latency",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().liveLatency:0}},{key:"currentProgramDateTime",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getPlayheadTimeAsDate():null}},{key:"getDuration",value:function(){return this._duration}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"getCurrentTime",value:function(){if(!this.shakaPlayerInstance)return 0;var e=this.shakaPlayerInstance.getMediaElement();return e?e.currentTime-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationStartTimeAsDate",get:function(){return this.shakaPlayerInstance&&this.shakaPlayerInstance.getPresentationStartTimeAsDate()?new Date(this.shakaPlayerInstance.getPresentationStartTimeAsDate().getTime()+1e3*this.seekRange.start):0}},{key:"bandwidthEstimate",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().estimatedBandwidth:null}},{key:"sourceMedia",get:function(){return this._options.src}},{key:"_now",get:function(){return g()}},{key:"getProgramDateTime",value:function(){return this.presentationStartTimeAsDate}},{key:"seek",value:function(e){e<0&&(r.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),e+=this._startTime,this.el.currentTime=e}},{key:"pause",value:function(){this.el.pause()}},{key:"play",value:function(){this._player||this.load(),this.isReady?(d(f(t.prototype),"play",this).call(this),this._startTimeUpdateTimer(),this._stopped=!1,this._src=this.el.src):this.once(t.Events.SHAKA_READY,this.play)}},{key:"load",value:function(e){e&&(this._options.src=e),this._setup()}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return d(f(t.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,d(f(t.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,d(f(t.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(t.Events.SHAKA_READY),this.trigger(r.Events.PLAYBACK_READY,this.name)}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"error",value:function(e){r.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),this._stopToSendStats(),this._stopped=!0,this._player?(this._sendStats(),this._lastTimeUpdate={current:0,total:0,firstFragDateTime:0},this._player.unload().then((function(){d(f(t.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){r.Log.error("shaka could not be unloaded")}))):d(f(t.prototype),"stop",this).call(this)}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.textTracks||[]).filter((function(e){return"subtitle"===e.kind})).map((function(t){return{id:e++,name:t.label||t.language,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return d(f(t.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return void r.Log.warn('Track id "'.concat(e,'" not found'));if(this._shakaTTVisible&&!0===t.track.active)return void r.Log.info('Track id "'.concat(e,'" already showing'))}t?(this._player.selectTextTrack(t.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(r.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(r.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),this._stopToSendStats(),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),r.Log.error("shaka could not be destroyed")})):this._destroy(),d(f(t.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1,this._stopToSendStats();var t=function(){e._player=e._createPlayer(),e._setInitialConfig(),e._loadSource()};this._player?this._player.destroy().then((function(){return t()})):t()}},{key:"_createPlayer",value:function(){var e=new a.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e.addEventListener("segmentappended",this._onFragmentBuffered.bind(this)),e}},{key:"_setInitialConfig",value:function(){this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player)}},{key:"_loadSource",value:function(){var e=this;this._player.load(this._options.src).then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._shouldThrottleTimeUpdate(e)||(this._lastTimeUpdate=e,this._lastTimeUpdateFiredTime=this._now,this.trigger(r.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_shouldThrottleTimeUpdate",value:function(e){var t=Math.abs(e.current-this._lastTimeUpdate.current)<this._timeUpdateFiringRate,n=Math.abs(e.total-this._lastTimeUpdate.total)<this._durationChangeMinOffset,i=e.firstFragDateTime===this._lastTimeUpdate.firstFragDateTime,r=t&&n&&i,a=this._now-this._lastTimeUpdateFiredTime<this._timeUpdateThrottleDelay;return r&&a}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(r.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(r.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_onFragmentBuffered",value:function(){this.trigger(r.Events.PLAYBACK_FRAGMENT_BUFFERED)}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:"".concat(e.height,"p")}})).reverse(),this.trigger(r.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this;this._stopToSendStats();var t=this._options.shakaSendStatsInterval||3e4;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_stopToSendStats",value:function(){this.sendStatsId&&clearInterval(this.sendStatsId),this.sendStatsId=null}},{key:"_sendStats",value:function(){this.trigger(r.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var n={shakaError:e,videoError:this.el.error},i=n.shakaError.detail||n.shakaError,o=i.category,s=i.code,l=i.severity,u=i.data;if(n.videoError||!s&&!o)return d(f(t.prototype),"_onError",this).call(this);var c="";try{c=JSON.stringify(u)}catch(n){r.Log.warn("Fail to parse shaka error data",n)}var h=l===a.default.util.Error.Severity.CRITICAL,p={code:"".concat(o,"_").concat(s),description:"Category: ".concat(o,", code: ").concat(s,", severity: ").concat(l,", data: ").concat(c),level:h?r.PlayerError.Levels.FATAL:r.PlayerError.Levels.WARN,raw:e},g=this.createError(p);r.Log.error("Shaka error event:",g),this.trigger(r.Events.PLAYBACK_ERROR,g)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(r.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),r.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(r.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(r.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(r.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,r.Log.debug("shaka was destroyed")}}],l=[{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return a.default}},{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.default.polyfill.installAll();var n=a.default.Player.isBrowserSupported(),i=e.split("?")[0].match(/.*\.(.*)$/)||[];return n&&("mpd"===i[1]||t.indexOf("application/dash+xml")>-1)}}],i&&s(n.prototype,i),l&&s(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,l}(r.HTML5Video);e.default=v,module.exports=e.default},clappr:
/*!******************************************************************************************!*\
    !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
    \******************************************************************************************/
/*! no static exports found */function(module,t){module.exports=e},"shaka-player":
/*!************************!*\
    !*** external "shaka" ***!
    \************************/
/*! no static exports found */function(module,e){module.exports=t}})},module.exports=t(Pl,tg)})),ig=mo(ng),rg='@font-face {\n  font-family: "Opensans";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: 400;\n}\n@font-face {\n  font-family: "Opensans";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: 700;\n}\n@font-face {\n  font-family: "proximanova-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "proximanova-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "proximanova-xbold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "clearsans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "clearsans-bolditalic";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bolditalic.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "globotipo-tx-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "Inter";\n  src: url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/regular.woff") format("woff"), url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n}\n@font-face {\n  font-family: "Inter";\n  src: url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/medium.woff") format("woff"), url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/medium.ttf") format("truetype");\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n}\n@font-face {\n  font-family: "Inter";\n  src: url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/bold.woff") format("woff"), url("//s3.glbimg.com/v1/AUTH_05f06ca986b54d6e9c5df94927ccf7fc/fonts/inter/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n}\n.clappr-player#wp3-player-0 {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Inter", sans-serif;\n  text-shadow: none;\n  box-sizing: border-box;\n  display: block;\n  max-width: none;\n  box-sizing: inherit;\n  float: none;\n  -webkit-tap-highlight-color: transparent;\n  /*\n  * Utility class to hide content visually while keeping it screen reader-accessible.\n  * Source: https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html\n  */\n}\n.clappr-player#wp3-player-0:focus {\n  outline: 0;\n}\n.clappr-player#wp3-player-0.fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n}\n.clappr-player#wp3-player-0.nocursor {\n  cursor: none;\n}\n.clappr-player#wp3-player-0 .visually-hidden:not(:focus):not(:active) {\n  clip: rect(0 0 0 0);\n  -webkit-clip-path: inset(100%);\n          clip-path: inset(100%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}',ag=i(i(i(i({DFP:Jr,DAI:_a,GloboMediaControl:to},{PlayButton:no,TimeIndicator:so,LiveIndicator:ds,LiveButton:Wo,Volume:qo,Seekbar:Qo,PipButton:ao,Settings:Ws,FullscreenButton:oo,BackButton:ro,VideoInfo:$s,Share:ss,SkipRecap:fo,SkipIntro:po,SkipAdCast:go,StartOver:jo,QuickSeek:ts,QuickSeekHint:ns,ChromecastSenderIndicator:sl,MediaControlPlaceHolder:Ll}),{},{TapToUnmute:cs,ErrorScreen:ml,Chromecast:ol,ThumbPreview:Ys,SeekTime:Xa},$p),{},{Subtitle:Dc,Poster:Kl,Spinner:Gl,LatencyInfo:zl,StreamSense:eu,Comscore:Xl,WebmediaAPIHit:ru,Horizon:jc,WaitingRoom:pd,PlayerStats:xl,GloboYoubora:Rf,GoogleAnalytics4:fd,LockClient:tp,Cuepoints:Ml,EPG:Hl,ClickToPause:Ma},Xp),{},{SimulcastPing:up,WatchSession:cp}),og=[ig,eg,Zp],sg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["play_button","time_indicator","live_indicator","live_button","volume","seekbar","seekbar_info","fullscreen_button","settings","back_button","video_info","share","skip_recap","skip_intro","start_over","quick_seek","quick_seek_hint","chromecast_sender_indicator","media_control_placeholder","pip_button"],n=e.filter((function(e){return e&&-1===t.indexOf(e)}));return t.concat(n)},lg=2/3,ug=function(){function e(){l(this,e),this.reset()}var t,n,i;return c(e,[{key:"useTransition",get:function(){return Bn.isTransitionStyleSupported&&"Tizen"!==this._container.playback.innerPlaybackName}},{key:"containerWidth",get:function(){var e,t,n,i;return Bn.isNativeTV?(null===(e=this._container.playback)||void 0===e||null===(t=e.playback)||void 0===t||null===(n=t.bounds)||void 0===n?void 0:n.w)||1280:(null===(i=this._container.currentSize)||void 0===i?void 0:i.width)||1280}},{key:"containerHeight",get:function(){var e,t,n,i;return Bn.isNativeTV?(null===(e=this._container.playback)||void 0===e||null===(t=e.playback)||void 0===t||null===(n=t.bounds)||void 0===n?void 0:n.h)||720:(null===(i=this._container.currentSize)||void 0===i?void 0:i.height)||720}},{key:"resizeProportion",get:function(){return{width:this._isResized?this.containerWidth/lg:this.containerWidth*lg,height:this._isResized?this.containerHeight/lg:this.containerHeight*lg}}},{key:"isResized",get:function(){return this._isResized}},{key:"container",set:function(e){this._container=e}},{key:"show",value:(i=s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isResized){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.toggleBlackBars({preventBlackBars:!0}),!this.useTransition){e.next=9;break}return e.next=7,this.resizeWithTransition(lg);case 7:e.next=10;break;case 9:this._container.resize(this.resizeProportion);case 10:this._isResized=!0,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),Error("Error resizing container");case 16:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(){return i.apply(this,arguments)})},{key:"hide",value:(n=s(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isResized){e.next=2;break}return e.abrupt("return");case 2:if(n=(null===(t=this._container.options)||void 0===t?void 0:t.preventBlackBars)||!1,e.prev=3,this.toggleBlackBars({preventBlackBars:n}),!this.useTransition){e.next=10;break}return e.next=8,this.resizeWithTransition(1);case 8:e.next=11;break;case 10:this._container.resize(this.resizeProportion);case 11:this._isResized=!1,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(3),Error("Error resizing container");case 17:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(){return n.apply(this,arguments)})},{key:"resizeWithTransition",value:(t=s(r().mark((function e(t){var n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n._container.$el.one("transitionend",e),n._container.setStyle({transition:"transform ".concat("0.3s"," ease"),transform:"scale(".concat(t,")"),transformOrigin:"top left"})})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"toggleBlackBars",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventBlackBars,n=void 0!==t&&t;"web"===Bn.kind&&this._container.playback.toggleBlackBars({preventBlackBars:n})}},{key:"reset",value:function(){this._isResized=!1}}]),e}(),cg=function(){function e(t){l(this,e);var n=t.frameAds,i=n.adDisplayDuration,r=n.adFrequencySettings,a=t.poolingFrequency,o=t.version;this._poolingFrequency=a,this._recurringAdInterval=r.recurringAdInterval,this._adDisplayTimeSlots=r.adDisplayTimeSlots,this._adDisplayDuration=i,this._version=o}return c(e,[{key:"version",get:function(){return this._version}},{key:"poolingFrequency",get:function(){return this._poolingFrequency}},{key:"recurringAdInterval",get:function(){return this._recurringAdInterval}},{key:"adDisplayTimeSlots",get:function(){return this._adDisplayTimeSlots}},{key:"adDisplayDuration",get:function(){return this._adDisplayDuration}}]),e}(),dg=function(){function e(t){l(this,e),this.slotDateTime=new Date(t)}return c(e,[{key:"setUTCTime",value:function(e){var t=b(e.split(":").map(Number),3),n=t[0],i=t[1],r=t[2];return this.slotDateTime.setUTCHours(n),this.slotDateTime.setUTCMinutes(i),this.slotDateTime.setUTCSeconds(r),this}},{key:"setUTCDate",value:function(e){if(!e)return this;var t=b(e.split("/").map(Number),3),n=t[0],i=t[1],r=t[2];return this.slotDateTime.setUTCDate(n),this.slotDateTime.setUTCMonth(i-1),this.slotDateTime.setUTCFullYear(r),this}},{key:"toDateTime",value:function(){return this.slotDateTime.getTime()}}]),e}();xe.register("FRAME_AD_SCHEDULE_SHOW"),xe.register("FRAME_AD_SCHEDULE_HIDE"),xe.register("FRAME_AD_SCHEDULE_LOADED"),xe.register("FRAME_AD_SCHEDULE_RELOADED"),xe.register("FRAME_AD_SCHEDULE_RECURRENCY_REACHED");var hg=1e3,fg=function(e){h(n,e);var t=m(n);function n(e,i,r){var a;return l(this,n),(a=t.call(this)).videoId=e,a.playback=i,a.frameAdScheduleConfigUrl=r.frameAdScheduleConfigUrl,a.config=null,a.scheduleAdsInterval=null,a.reloadInterval=null,a.hideAdsTimeout=null,a}return c(n,[{key:"currentDateTime",get:function(){return jn.currentServerDateTime()}},{key:"currentTimeSlot",get:function(){var e,t=this;return null===(e=this.config)||void 0===e?void 0:e.adDisplayTimeSlots.find((function(e){return t._isWithinTimeSlot(e)}))}},{key:"provider",get:function(){var e;return null===(e=this.currentTimeSlot)||void 0===e?void 0:e.provider}},{key:"startSchedule",value:function(){var e=this;this._loadConfig().then((function(t){if(!e.currentDateTime)return Re.warn("FrameAd","Server date time not available, disabling FrameAd");e.config=new cg(t),e._startScheduleInterval(),e._startReloadConfigInterval(),e.trigger(xe.Custom.FRAME_AD_SCHEDULE_LOADED,{config:e.config})}),(function(e){404===e.status?Re.info("FrameAd","No config found for this video"):Re.warn("FrameAd","Error loading config:",e)}))}},{key:"_startScheduleInterval",value:function(){var e=this;this.scheduleInterval=setInterval((function(){var t=e.config.adDisplayTimeSlots.some((function(t){return e._isWithinTimeSlot(t)}));t&&!e.hideAdsTimeout&&e._displayAd(),e.trigger(xe.Custom.FRAME_AD_SCHEDULE_RECURRENCY_REACHED,{isAdWithinTimeSlot:t})}),this.config.recurringAdInterval*hg)}},{key:"_displayAd",value:function(){this.trigger(xe.Custom.FRAME_AD_SCHEDULE_SHOW)}},{key:"onAdDisplayed",value:function(){var e=this;this.hideAdsTimeout=setTimeout((function(){e.hideAdsTimeout=null,e.trigger(xe.Custom.FRAME_AD_SCHEDULE_HIDE)}),this.config.adDisplayDuration*hg)}},{key:"_startReloadConfigInterval",value:function(){var e=this;this.reloadConfigInterval=setInterval((function(){e._reloadConfig()}),this.config.poolingFrequency*hg)}},{key:"_loadConfig",value:function(){return $.ajax({url:"".concat(this.frameAdScheduleConfigUrl,"/").concat(this.videoId,".json"),type:"GET"})}},{key:"_reloadConfig",value:function(){var e=this;this._loadConfig().then((function(t){var n=new cg(t),i=e._shouldRestartSchedule(n);if(e.config=n,e.trigger(xe.Custom.FRAME_AD_SCHEDULE_RELOADED,{config:e.config,shouldRestartSchedule:i}),i){if(!e.hideAdsTimeout)return e.updateSchedule();e.listenToOnce(e,xe.Custom.FRAME_AD_SCHEDULE_HIDE,e.updateSchedule)}}),(function(t){e.disableScheduler(),Re.warn("FrameAd","Fail to restart schedule, error loading config:",t)}))}},{key:"updateSchedule",value:function(){this.stopSchedule(),this._startScheduleInterval(),this._startReloadConfigInterval()}},{key:"disableScheduler",value:function(){if(!this.hideAdsTimeout)return this.stopSchedule();this.listenToOnce(this,xe.Custom.FRAME_AD_SCHEDULE_HIDE,this.stopSchedule)}},{key:"_shouldRestartSchedule",value:function(e){return this.config.poolingFrequency!==e.poolingFrequency||this.config.recurringAdInterval!==e.recurringAdInterval}},{key:"_isWithinTimeSlot",value:function(e){var t=this.currentDateTime.getTime(),n=this._convertTimeSlotToDate(e.start,e.date),i=this._convertTimeSlotToDate(e.end,e.date);return t>=n&&t<=i}},{key:"_convertTimeSlotToDate",value:function(e,t){return new dg(this.currentDateTime).setUTCTime(e).setUTCDate(t).toDateTime()}},{key:"stopSchedule",value:function(){this.reloadConfigInterval&&clearInterval(this.reloadConfigInterval),this.hideAdsTimeout&&clearTimeout(this.hideAdsTimeout),this.scheduleInterval&&clearInterval(this.scheduleInterval),this.reloadConfigInterval=null,this.hideAdsTimeout=null,this.scheduleInterval=null,this.stopListening(this,xe.Custom.FRAME_AD_SCHEDULE_HIDE,this.stopSchedule)}}]),n}(xe),pg=function(){function e(t){var n=t.renderer,i=t.core;l(this,e),this.isPluginLoaded=!1,this._div=n.el,this._rendered=!1,this.core=i,this.loadExternalPlugin()}var t,n;return c(e,[{key:"name",get:function(){return"campaign_manager_web"}},{key:"loadExternalPlugin",value:function(){try{var e,t,n=(null===(e=(t=window).FrameAdsPlugin)||void 0===e?void 0:e.call(t))||{},i=n.getFrameAd,r=n.removeFrameAd,a=n.getPlugin,o=n.plugin||(null==a?void 0:a()),s=i&&r&&o;if(this.isPluginLoaded||!s)return;var l=new o(this.core);this.core.addPlugin(l),this._getFrameAd=i,this._removeFrameAd=r,this.isPluginLoaded=!0,Re.info(this.name,"Frame Ads","External plugin loaded.")}catch(e){Re.warn(this.name,"Frame Ads",e)}}},{key:"load",value:(n=s(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loadExternalPlugin(),e.next=4,null===(n=this._getFrameAd)||void 0===n?void 0:n.call(this,t);case 4:if((i=e.sent).rendered){e.next=7;break}throw new Error("Frame Ads: Ad not rendered");case 7:return e.abrupt("return",this.onLoaded(i));case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return n.apply(this,arguments)})},{key:"onLoaded",value:function(e){return this._rendered=e.rendered,this._div=e.div,{rendered:this._rendered,div:this._div}}},{key:"clear",value:(t=s(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this._removeFrameAd)||void 0===t?void 0:t.call(this);case 3:return n=e.sent,this.reset(),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return t.apply(this,arguments)})},{key:"reset",value:function(){this._div=null,this._rendered=!1}}]),e}(),gg=jn.applySizeClass,vg="ad-image__hidden",mg=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).core=e.core,i.options=e.options,i}return c(n,[{key:"tagName",get:function(){return"div"}},{key:"attributes",get:function(){return{class:"frame-ad"}}},{key:"loadImage",value:function(e){var t=this;return e?new Promise((function(n){t.adImageEl=document.createElement("img"),t.adImageEl.className="".concat("ad-image"),t.hideImage(),t.adImageEl.onload=function(){return n(!0)},t.adImageEl.onerror=function(){t.destroyImage(),n(!1)},t.adImageEl.src=e,t.el.appendChild(t.adImageEl)})):Promise.resolve(!1)}},{key:"displayImage",value:function(){this.adImageEl.classList.remove(vg)}},{key:"hideImage",value:function(){this.adImageEl.classList.add(vg)}},{key:"destroyImage",value:function(){this.adImageEl&&(this.el.removeChild(this.adImageEl),this.adImageEl=null)}},{key:"showQRCode",value:function(e){var t=this;return new Promise((function(n,i){t.qrCodeEl=document.createElement("img"),t.qrCodeEl.className="framead-qrcode",t.qrCodeEl.onload=function(){return n()},t.qrCodeEl.onerror=function(){t.hideQRCode(),i()},t.qrCodeEl.src=e,t.el.appendChild(t.qrCodeEl)}))}},{key:"hideQRCode",value:function(){this.qrCodeEl&&(this.el.removeChild(this.qrCodeEl),this.qrCodeEl=null)}},{key:"updateResponsiveStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;gg(this.$el,t,n)}},{key:"render",value:function(){var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .frame-ad {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.clappr-player#wp3-player-0 .frame-ad img {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .frame-ad .ad-image__hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .frame-ad .framead-qrcode {\n  position: absolute;\n  margin: 30px;\n  width: 210px;\n  height: 210px;\n  bottom: 45px;\n  left: 97px;\n}\n.clappr-player#wp3-player-0 .frame-ad.h720 .framead-qrcode {\n  margin: 20px;\n  width: 140px;\n  height: 140px;\n  bottom: 30px;\n  left: 65px;\n}",{playerId:this.options.playerId});return this.$el.append(e[0]),(this.options.frameAdParentEl||this.core.el).appendChild(this.el),this}}]),n}(El),yg=function(e){h(u,e);var t,n,a,o=m(u);function u(e){var t;return l(this,u),(t=o.call(this,e)).componentRender=new mg(g(t)),t.componentRender.render(),t.resizeAPI=new ug,t.campaignManager=new pg({renderer:t.componentRender,env:t.options._env,sendEvent:t.sendEvent.bind(g(t)),core:t.core}),t}return c(u,[{key:"name",get:function(){return"frame_ad"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"playerNameMap",get:function(){return{"tv-web":"tv_web",web:"web",mirakulo:"tv_nativa",chromecast:"chromecast"}}},{key:"playerName",get:function(){return this.playerNameMap[Bn.kind]}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,xe.CORE_RESIZE,this._playerResize)}},{key:"_playerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;this.componentRender.updateResponsiveStyle({width:t,height:n})}},{key:"onContainerChanged",value:function(){this.resizeAPI.hide(),this.resizeAPI.reset(),this.campaignManager.clear(),this.stopListening(this.core,xe.CORE_OPTIONS_CHANGE,this.setupFrameAds),this.playback&&this.stopListening(this.playback),this.video=null,this.container=this.core.activeContainer,this.playback=this.container.playback,this.resizeAPI.container=this.container,this.frameAdScheduleService&&(this.frameAdScheduleService.stopSchedule(),this.stopListening(this.frameAdScheduleService)),this.frameAdScheduleService=null,this.listenToOnce(this.playback,Gn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.setupFrameAds)}},{key:"onMetadataLoaded",value:function(e){if("web"===Bn.kind&&ne.isMobile)return this.stopListening(this.core,xe.CORE_OPTIONS_CHANGE,this.setupFrameAds);this.video=e,this.setupFrameAds()}},{key:"setupFrameAds",value:function(){this.options.enableFrameAds&&this.video&&(this.stopListening(this.core,xe.CORE_OPTIONS_CHANGE,this.setupFrameAds),this.setupScheduleService(this.video),this.playback.isPlaying()?this.onPlaybackPlaying():this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.onPlaybackPlaying))}},{key:"onPlaybackPlaying",value:function(){this.frameAdScheduleService.startSchedule()}},{key:"setupScheduleService",value:function(e){var t=this;this.frameAdScheduleService=new fg(e.id,this.playback,this.options._env),this.listenTo(this.frameAdScheduleService,xe.Custom.FRAME_AD_SCHEDULE_LOADED,this.onScheduleLoaded),this.listenTo(this.frameAdScheduleService,xe.Custom.FRAME_AD_SCHEDULE_SHOW,(function(){return t.loadCampaign(e)})),this.listenTo(this.frameAdScheduleService,xe.Custom.FRAME_AD_SCHEDULE_HIDE,this.hideAd),this.listenTo(this.frameAdScheduleService,xe.Custom.FRAME_AD_SCHEDULE_RECURRENCY_REACHED,this.onScheduleRecurrencyReached),this.listenTo(this.frameAdScheduleService,xe.Custom.FRAME_AD_SCHEDULE_RELOADED,this.onScheduleReloaded)}},{key:"onScheduleLoaded",value:function(e){var t=e.config;this.core.trigger(Gn.FRAME_AD_INFO,i({version:t.version,player:{"tv-web":"Web_TV",web:"Web",mirakulo:"Native_TV",chromecast:"Web_Chromecast"}[Bn.kind]},t))}},{key:"onScheduleReloaded",value:function(e){this.core.trigger(xe.Custom.FRAME_AD_SCHEDULE_RELOADED,e)}},{key:"onScheduleRecurrencyReached",value:function(e){this.core.trigger(xe.Custom.FRAME_AD_SCHEDULE_RECURRENCY_REACHED,e)}},{key:"loadCampaign",value:(a=s(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.options.skipFrameAds){e.next=2;break}return e.abrupt("return",this.skipAd());case 2:return this.core.trigger(Gn.WILL_FRAME_AD),e.prev=3,n=this.buildAdParams(t),e.next=7,this.campaignManager.load(n);case 7:i=e.sent,this.onAdLoaded(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.onAdError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return a.apply(this,arguments)})},{key:"sendEvent",value:function(e,t){this.core.trigger(e,t)}},{key:"onAdLoaded",value:function(e){e.rendered&&this.showAd()}},{key:"onAdError",value:function(e){Re.warn(this.name,"AdManager loader",e),this.hideAd(),this.core.trigger(Gn.ERROR_FRAME_AD,{code:"ErrorFrameAd"})}},{key:"showAd",value:(n=s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.core.trigger(Gn.WILL_DISPLAY_FRAME_AD),e.prev=1,e.next=4,this.resizeAPI.show();case 4:this.core.trigger(Gn.DID_DISPLAY_FRAME_AD),this.core.trigger(Gn.DID_FRAME_AD),this.frameAdScheduleService.onAdDisplayed(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.core.trigger(Gn.DISPLAY_FRAME_AD_ERROR,{code:"DisplayAdErrorFrameAd"});case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"hideAd",value:(t=s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.core.trigger(Gn.WILL_HIDE_FRAME_AD),e.prev=1,e.next=4,this.resizeAPI.hide();case 4:this.core.trigger(Gn.DID_HIDE_FRAME_AD),this.campaignManager.clear(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.core.trigger(Gn.HIDE_FRAME_AD_ERROR,{code:"HideAdErrorFrameAd"});case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"skipAd",value:function(){this.core.trigger(Gn.SKIP_FRAME_AD)}},{key:"buildAdParams",value:function(e){var t=this.options.adAccountId||e.adAccountId,n=this.options.adUnit||e.adUnit,i=ar(this.options,e,{tvg_pos:"FRAMEAD",player_name:this.playerName}),r=this.frameAdScheduleService.provider,a=r?"/".concat(t,"/").concat(n,"/").concat(r):"/".concat(t,"/").concat(n);return{url:this.options._env.googleDisplayAdApiUrl,iu:a,sz:"1x1",t:i,ppid:this.options.adPublisherProvidedID,provider:r}}},{key:"getRender",value:function(){return this.componentRender}},{key:"destroy",value:function(){var e;null===(e=this.frameAdScheduleService)||void 0===e||e.stopSchedule(),A(f(u.prototype),"destroy",this).call(this)}}]),u}(dt),Ag=Bn.Keys,bg=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).core=e.core,i.options=e.options,i.plugin=e,i.bindEvents(),i}return c(n,[{key:"tagName",get:function(){return"div"}},{key:"template",get:function(){return Ge('<div class="frame-ads-info__server-time"></div>\n<div class="frame-ads-info__ad-interval">Próxima recorrência de Ad em: <span></span></div>\n<div class="frame-ads-info__ad-duration">Ad Fecha em: <span></span></div>\n')}},{key:"attributes",get:function(){return{class:"frame-ads-info ".concat(ne.isSmartTvEnvironment?"frame-ads-info--tv":"")}}},{key:"onSequenceCheckerComplete",value:function(){this.plugin._toggleEasterEgg()}},{key:"bindEvents",value:function(){this.handleKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){this.plugin.sequenceChecker({keyCode:e.keyCode})}},{key:"setServerTime",value:function(e){this.$el.find(".".concat(this.plugin.name,"__server-time")).text(e)}},{key:"setAdDuration",value:function(e){this.$el.find(".".concat(this.plugin.name,"__ad-duration span")).text("".concat(e))}},{key:"setAdInterval",value:function(e){this.$el.find(".".concat(this.plugin.name,"__ad-interval span")).text("".concat(e))}},{key:"showAdIntervalCountdown",value:function(){this.$el.find(".".concat(this.plugin.name,"__ad-interval")).show()}},{key:"hideAdIntervalCountdown",value:function(){this.$el.find(".".concat(this.plugin.name,"__ad-interval")).hide()}},{key:"showAdDuration",value:function(){this.$el.find(".".concat(this.plugin.name,"__ad-duration")).show()}},{key:"hideAdDuration",value:function(){this.$el.find(".".concat(this.plugin.name,"__ad-duration")).hide()}},{key:"hideFrameAdsInfo",value:function(){this.$el.empty()}},{key:"render",value:function(){var e=Kn.getStyleFrom(".clappr-player#wp3-player-0 .frame-ads-info {\n  background: rgba(0, 0, 0, 0.6);\n  position: absolute;\n  z-index: 3;\n  left: 20px;\n  top: 30px;\n  box-sizing: border-box;\n  padding: 10px;\n  font-size: 16px;\n  text-align: left;\n  color: white;\n}\n.clappr-player#wp3-player-0 .frame-ads-info--tv {\n  font-size: 24px;\n}",{playerId:this.options.playerId});this.el.appendChild(e[0]),this.el.insertAdjacentHTML("beforeend",this.template()),this.core.el.appendChild(this.el)}},{key:"unbindKeyEvents",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}}],[{key:"sequence",get:function(){return[Ag.VK_UP,Ag.VK_DOWN,Ag.VK_RIGHT,Ag.VK_RIGHT,Ag.VK_LEFT,Ag.VK_LEFT,Ag.VK_UP,Ag.VK_DOWN]}}]),n}(El),Eg=jn.secondsToHHMMSS,_g=1e3,kg=function(e){h(n,e);var t=m(n);function n(e){var i,r;return l(this,n),(r=t.call(this,e)).sequenceChecker=(i=new Wl).sequence.apply(i,E(r.konamiSequence)),r.componentRender=new bg(g(r)),r.isActive=!1,r.isDisplayingAd=!1,r}return c(n,[{key:"name",get:function(){return"frame-ads-info"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"konamiSequence",get:function(){return[].concat(E(bg.sequence),[this.onSequenceCheckerComplete.bind(this)])}},{key:"currentServerDateTime",get:function(){return jn.currentServerDateTime()}},{key:"bindEvents",value:function(){this.listenTo(this.core,Gn.FRAME_AD_INFO,this.onScheduleLoaded),this.listenTo(this.core,Gn.DID_DISPLAY_FRAME_AD,this.onDidDisplayFrameAd),this.listenTo(this.core,Gn.DID_HIDE_FRAME_AD,this.onDidHideFrameAd),this.listenTo(this.core,Gn.ERROR_FRAME_AD,this.onFrameAdError),this.listenTo(this.core,Gn.SKIP_FRAME_AD,this.onFrameAdSkipped),this.listenTo(this.core,xe.Custom.FRAME_AD_SCHEDULE_RECURRENCY_REACHED,this.onScheduleRecurrencyReached),this.listenTo(this.core,xe.Custom.FRAME_AD_SCHEDULE_RELOADED,this.onScheduleReloaded),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Gn.FRAME_ADS_INFO_TOGGLE_REQUEST,this._toggleEasterEgg),this.listenTo(this.core,Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST,this._toggleKeyEvents)}},{key:"onContainerChanged",value:function(){this.resetAdDurationInterval(),this.resetRecurringInterval(),this.resetServerDateInterval(),this._hide(),this.isDisplayingAd=!1}},{key:"onSequenceCheckerComplete",value:function(){this.componentRender.onSequenceCheckerComplete()}},{key:"onFrameAdError",value:function(){this.config&&(this.adInterval=this.config._recurringAdInterval)}},{key:"onFrameAdSkipped",value:function(){this.config&&(this.adInterval=this.config._recurringAdInterval)}},{key:"onScheduleRecurrencyReached",value:function(e){e.isAdWithinTimeSlot||(this.adInterval=this.config._recurringAdInterval)}},{key:"_show",value:function(){this.isActive=!0,this.componentRender.render(),this.options.enableFrameAds?this._displayInitialInfos():this._disableInfos()}},{key:"_toggleKeyEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shouldDisableKeyEvents;t?this.componentRender.unbindKeyEvents():this.componentRender.bindEvents()}},{key:"_toggleEasterEgg",value:function(){this.isActive?this._hide():this._show()}},{key:"_disableInfos",value:function(){this.componentRender.setServerTime("FrameAds desabilitado"),this.componentRender.hideAdDuration(),this.componentRender.hideAdIntervalCountdown()}},{key:"_displayInitialInfos",value:function(){this.isDisplayingAd?(this.componentRender.showAdDuration(),this.componentRender.hideAdIntervalCountdown()):(this.componentRender.showAdIntervalCountdown(),this.componentRender.hideAdDuration())}},{key:"_hide",value:function(){this.isActive=!1,this.componentRender.hideFrameAdsInfo()}},{key:"onScheduleLoaded",value:function(e){this.componentRender.hideAdDuration(),this.config=e,this.adDuration=this.config._adDisplayDuration,this.adInterval=this.config._recurringAdInterval,this._startAdIntervalCountdown(),this._startServerDateInterval()}},{key:"onScheduleReloaded",value:function(e){var t=e.config,n=e.shouldRestartSchedule;this.config=t,n&&(this.adDuration=this.config._adDisplayDuration,this.adInterval=this.config._recurringAdInterval)}},{key:"_startServerDateInterval",value:function(){var e=this;this.resetServerDateInterval(),this.serverDateInterval=setInterval((function(){e.componentRender.setServerTime("".concat(e.currentServerDateTime.toLocaleString("pt-br",{timeZone:"UTC"})," UTC"))}),_g)}},{key:"_startAdIntervalCountdown",value:function(){var e=this;this.componentRender.setAdInterval(Eg(this.adInterval)),this.resetRecurringInterval(),this.recurringAdInterval=setInterval((function(){e.adInterval-=1,e.componentRender.setAdInterval(Eg(e.adInterval))}),_g)}},{key:"onDidDisplayFrameAd",value:function(){var e=this;this.isDisplayingAd=!0,this.hideAdRecurringInterval(),this._startAdIntervalCountdown(),this.componentRender.setAdDuration(Eg(this.adDuration)),this.resetAdDurationInterval(),this.adDurationInterval=setInterval((function(){e.adDuration-=1,e.componentRender.setAdDuration(Eg(e.adDuration))}),_g)}},{key:"onDidHideFrameAd",value:function(){this.isDisplayingAd=!1,this.componentRender.showAdIntervalCountdown(),this.componentRender.hideAdDuration(),this.resetAdDurationInterval(),this.adDuration=this.config._adDisplayDuration}},{key:"hideAdRecurringInterval",value:function(){this.componentRender.showAdDuration(),this.componentRender.hideAdIntervalCountdown(),this.resetRecurringInterval(),this.adInterval=this.config._recurringAdInterval}},{key:"resetAdDurationInterval",value:function(){this.adDurationInterval&&clearInterval(this.adDurationInterval),this.adDurationInterval=null}},{key:"resetRecurringInterval",value:function(){this.recurringAdInterval&&clearInterval(this.recurringAdInterval),this.recurringAdInterval=null}},{key:"resetServerDateInterval",value:function(){this.serverDateInterval&&clearInterval(this.serverDateInterval),this.serverDateInterval=null}},{key:"getRender",value:function(){return this.componentRender}},{key:"destroy",value:function(){A(f(n.prototype),"destroy",this).call(this),this.resetAdDurationInterval(),this.resetRecurringInterval(),this.resetServerDateInterval(),this.componentRender.unbindKeyEvents()}}]),n}(dt),Tg=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).liveStopTime=i.options.liveStopTime,i}return c(n,[{key:"name",get:function(){return"streaming_timer"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"currentServerTimeEpoch",get:function(){var e=jn.currentServerDateTime();return jn.getUnixTimestamp(e)}},{key:"stopTimeEpoch",get:function(){return Number.isInteger(this.liveStopTime)?this.liveStopTime:null}},{key:"isPluginEnabled",get:function(){return!!this.stopTimeEpoch&&this.playback.isLive}},{key:"timeoutLimitInMS",get:function(){var e=jn.secondsToMillis(this.stopTimeEpoch-this.currentServerTimeEpoch);return e>0?e:0}},{key:"bindEvents",value:function(){this.playback=this.container.playback,this.listenToOnce(this.playback,xe.PLAYBACK_PLAY,this.setTimeLimit),this.listenTo(this.container,xe.CONTAINER_OPTIONS_CHANGE,this.setTimeLimit)}},{key:"setTimeLimit",value:function(){var e=this;if(this.liveStopTime!==this.options.liveStopTime||!this.timeout){if(this.liveStopTime=this.options.liveStopTime,!this.isPluginEnabled)return this.clearTimeout();this.clearTimeout(),this.timeout=setTimeout((function(){return e.onReachLiveStopTime()}),this.timeoutLimitInMS)}}},{key:"onReachLiveStopTime",value:function(){this.container.trigger(Gn.DID_REACH_LIVE_STOP_TIME),this.container.stop()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timeout&&clearTimeout(this.timeout),this.timeout=null}))},{key:"destroy",value:function(){this.clearTimeout(),A(f(n.prototype),"destroy",this).call(this)}}]),n}(ct),Sg="#menu-button",wg="#easter-eggs-menu",Cg="#report-stats",Ig=".easter-eggs-menu__btn-item",Rg="menu-item--focus",Dg="easter-eggs-menu__btn-option",Lg="--hidden",Pg="close-button",Og=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this)).plugin=e,i.options=e.options,i.isMenuOpen=!1,i}return c(n,[{key:"tagName",get:function(){return"nav"}},{key:"template",get:function(){return Ge('<div class="easter-eggs-menu">\n  <button class="easter-eggs-menu__btn easter-eggs-menu__btn-menu --hidden" id="menu-button">Menu</button>\n  <nav class="easter-eggs-menu__nav" id="easter-eggs-menu">\n    <ul>\n      <li class="easter-eggs-menu__item">\n        <button class="easter-eggs-menu__btn-item easter-eggs-menu__btn-option" id="report-stats">Nerd Stats</button>\n      </li>\n      <li class="easter-eggs-menu__item">\n        <button class="easter-eggs-menu__btn-item easter-eggs-menu__btn-option" id="change-video">Trocar vídeo</button>\n      </li>\n      <li class="easter-eggs-menu__item">\n        <button class="easter-eggs-menu__btn-item easter-eggs-menu__btn-option" id="latency-info">Latência</button>\n      </li>\n      <li class="easter-eggs-menu__item">\n        <button class="easter-eggs-menu__btn-item easter-eggs-menu__btn-option" id="frame-ads-info">Frame Ads Info</button>\n      </li>\n      <li class="easter-eggs-menu__item">\n        <button class="easter-eggs-menu__btn-item easter-eggs-menu__btn-close" id="close-button" aria-label="Fechar Menu de Easter Eggs">\n          Fechar\n        </button>\n      </li>\n    </ul>\n  </nav>\n</div>\n')}},{key:"attributes",get:function(){return{class:"easter-eggs-menu ".concat(ne.isSmartTvEnvironment?"easter-eggs-menu--tv":"")}}},{key:"events",get:function(){return{"click #close-button":"closeMenuByButton","click #menu-button":"handleMenuAction","click .easter-eggs-menu__btn-option":"handleMenuAction"}}},{key:"closeMenuByButton",value:function(){this.isMenuOpen=!1,this.plugin.toggleEasterEggsMenuDisplay(this.isMenuOpen)}},{key:"hideEasterEggsMenu",value:function(){this.$el.empty()}},{key:"handleMenuAction",value:function(e){this.toggleMenuVisibility(),this.handleEasterEggSelection(e)}},{key:"toggleMenuVisibility",value:function(){var e,t;this.isMenuOpen=!this.isMenuOpen,ne.isSmartTvEnvironment||null===(e=this.minimizedMenuButton)||void 0===e||e.classList.toggle(Lg),null===(t=this.menu)||void 0===t||t.classList.toggle(Lg),this.plugin.handleChromelessState(this.isMenuOpen)}},{key:"handleEasterEggSelection",value:function(e){var t=(null==e?void 0:e.target.classList.contains(Dg))?e.target.id:null;this.plugin.manageEasterEgg(t)}},{key:"render",value:function(){var e=this.template({playerId:this.options.playerId}),t=Kn.getStyleFrom(".clappr-player#wp3-player-0 .easter-eggs-menu {\n  color: #eee;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__nav {\n  position: fixed;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  padding-top: 20px;\n  height: 100%;\n  width: 20%;\n  background-color: inherit;\n  z-index: 1000;\n  box-sizing: border-box;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu ul {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__item {\n  display: flex;\n  text-align: left;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__btn-item {\n  display: flex;\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  background: none;\n  border: none;\n  color: inherit;\n  width: 100%;\n  height: 100%;\n  font-size: 12px;\n  font-weight: 200;\n  font-family: inherit;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__btn {\n  height: 24px;\n  width: 24px;\n  color: #eee;\n  cursor: pointer;\n  border: 0;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__btn-close {\n  font-weight: 100;\n  margin-top: 15%;\n  display: flex;\n  justify-content: center;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__btn-menu {\n  width: 36px;\n  top: 16px;\n  right: 16px;\n  position: fixed;\n  font-family: inherit;\n  background: #111111;\n  font-weight: bold;\n  font-size: 12px;\n  text-align: center;\n  border-radius: 2px;\n  z-index: 10000;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu__btn:hover, .clappr-player#wp3-player-0 .easter-eggs-menu__btn-item:hover,\n.clappr-player#wp3-player-0 .easter-eggs-menu .menu-item--focus {\n  background-color: #eee;\n  color: #111111;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu--tv .easter-eggs-menu__nav {\n  padding: 16px;\n  padding-top: 48px;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu--tv .easter-eggs-menu__btn-item {\n  border-radius: 8px;\n  font-size: 36px;\n  font-weight: 500;\n  padding: 8px 16px;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu--tv .easter-eggs-menu__btn-close {\n  font-weight: 300;\n  margin-top: 15%;\n}\n.clappr-player#wp3-player-0 .easter-eggs-menu--tv .easter-eggs-menu__btn-menu {\n  top: 24px;\n  right: 24px;\n  width: 48px;\n  font-size: 16px;\n  border-radius: 4px;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .--hidden {\n  display: none;\n}",{playerId:this.options.playerId});this.el.appendChild(t[0]),this.el.insertAdjacentHTML("beforeend",e),this.plugin.core.el.appendChild(this.el),this.minimizedMenuButton=this.el.querySelector(Sg),this.menu=this.el.querySelector(wg),this.plugin.setupStrategy(),this.isMenuOpen=!0}}]),n}(El);var xg=function(){function e(t){l(this,e),this.core=t.core,this.navigation=null}return c(e,[{key:"navigationHandler",value:function(e){this.isNavigationSetup||(this.setupNavigation(e),this.isNavigationSetup=!0)}},{key:"setupNavigation",value:function(e){var t=this,n=e.options.playerId;this.navigation=function(e,t){var n=t.selector,i=t.events,r=void 0===i?{}:i,a=t.startFocused,o=void 0!==a&&a,s=t.restrict,l=void 0===s?"":s,u=t.leaveFor,c=void 0===u?{}:u,d=t.defaultElement,h=void 0===d?null:d,f=t.enterTo,p=void 0===f?"":f,g=e.options,v=e.name,m=e.el,y=g.playerId,A="".concat(v,"-").concat(y),b=Tl.getNavigator(y);return m.dataset.navSection=A,b.addFocusable({id:A,selector:n,restrict:l,leaveFor:c,defaultElement:h,enterTo:p}),Object.keys(r).forEach((function(e){var t=Sl[e];t&&b.addEventListener(m,t,r[e])})),o&&b.setCurrentFocusedPath(A),{remove:function(){return b.remove(A)},enable:function(){return b.enable(A)},disable:function(){return b.disable(A)},stealFocus:function(){return b.setCurrentFocusedPath(A)}}}({options:e.options,name:e.name,el:e.componentRender.el},{selector:Ig,defaultElement:Cg,enterTo:"last-focused",events:{EnterDown:function(n){return t.onClick(n,e.componentRender)},Unfocused:function(e){e.target.classList.remove(Rg)},Focused:function(e){e.target.classList.add(Rg)}},restrict:"self-only",leaveFor:{up:"@back_button-".concat(n),left:"@back_button-".concat(n)}})}},{key:"onClick",value:function(e,t){e.target.id===Pg?t.closeMenuByButton():t.handleMenuAction(e)}},{key:"enableNavigation",value:function(){var e;null===(e=this.navigation)||void 0===e||e.enable()}},{key:"disableNavigation",value:function(){var e;null===(e=this.navigation)||void 0===e||e.disable()}},{key:"destroy",value:function(){var e;null===(e=this.navigation)||void 0===e||e.remove(),this.navigation=null,this.isNavigationSetup=!1}}]),e}(),Mg=Bn.Keys,Ng=function(e){h(n,e);var t=m(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).setupSequenceChecker(),i.bindDocumentKeyEvents(),i.componentRender=new Og(g(i)),i.strategy=ne.isSmartTvEnvironment?new xg(g(i)):void 0,i.easterEggActiveName=null,i.isActive=!1,i}return c(n,[{key:"name",get:function(){return"easter-eggs-menu"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"isActive",get:function(){return this.componentRender.isActive},set:function(e){this.componentRender.isActive=e}},{key:"setupSequenceChecker",value:function(){var e=this;this.sequenceChecker=(new Wl).sequence(Mg.VK_RIGHT,Mg.VK_LEFT,Mg.VK_RIGHT,Mg.VK_LEFT,Mg.VK_DOWN,Mg.VK_DOWN,Mg.VK_UP,Mg.VK_UP,(function(){return e.handleEasterEggsMenuDisplay()}))}},{key:"bindDocumentKeyEvents",value:function(){document.addEventListener("keydown",this.onDocumentKeyDown.bind(this))}},{key:"unbindDocumentKeyEvents",value:function(){document.removeEventListener("keydown",this.onDocumentKeyDown.bind(this))}},{key:"onDocumentKeyDown",value:function(e){this.sequenceChecker({keyCode:e.keyCode})}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container=this.core.activeContainer,this._hide()}},{key:"handleKeyDown",value:function(e){this.sequenceChecker({keyCode:e.keyCode})}},{key:"_show",value:function(){this.componentRender.render(),this.setupStrategy()}},{key:"handleEasterEggsMenuDisplay",value:function(){this.isActive&&this.easterEggActiveName?this.componentRender.handleMenuAction():this.toggleEasterEggsMenuDisplay()}},{key:"toggleEasterEggsMenuDisplay",value:function(e){this.isActive=null!=e?e:!this.isActive,this.handleChromelessState(this.isActive),this.toggleEasterEggsKeyEvents(),this.isActive?this._show():this._hide()}},{key:"handleChromelessState",value:function(e){var t=null!=e?e:!!this.options.chromeless;this.core.configure({chromeless:t})}},{key:"toggleEasterEggsKeyEvents",value:function(){this.container=this.core.activeContainer,this.container.trigger(Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST,{shouldDisableKeyEvents:this.isActive}),this.core.trigger(Gn.EASTER_EGGS_KEY_EVENTS_TOGGLE_REQUEST,{shouldDisableKeyEvents:this.isActive})}},{key:"_hide",value:function(){var e;this.componentRender.hideEasterEggsMenu(),null===(e=this.strategy)||void 0===e||e.disableNavigation()}},{key:"manageEasterEgg",value:function(e){var t=this;if(this.easterEggActiveName=null!=e?e:this.easterEggActiveName,void 0!==this.easterEggActiveName){this.container=this.core.activeContainer;var n={"report-stats":function(){return t.container.trigger(Gn.REPORT_STATS_TOGGLE_REQUEST)},"change-video":function(){return t.core.trigger(Gn.CHANGE_VIDEO_TOGGLE_REQUEST,{isChromelessForced:!0})},"latency-info":function(){return t.container.trigger(Gn.LATENCY_INFO_TOGGLE_REQUEST)},"frame-ads-info":function(){return t.core.trigger(Gn.FRAME_ADS_INFO_TOGGLE_REQUEST)}};n[this.easterEggActiveName]&&n[this.easterEggActiveName](),this.easterEggActiveName=e}}},{key:"getRender",value:function(){return this.componentRender}},{key:"setupStrategy",value:function(){var e,t;null===(e=this.strategy)||void 0===e||e.navigationHandler(this),null===(t=this.strategy)||void 0===t||t.enableNavigation()}},{key:"destroy",value:function(){var e;A(f(n.prototype),"destroy",this).call(this),null===(e=this.strategy)||void 0===e||e.destroy(),this.strategy=null,this.unbindDocumentKeyEvents()}}]),n}(dt),Bg={html5_video:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls_fairplay_playback:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls:function(e){if(e.raw.type===xs.ErrorTypes.NETWORK_ERROR)switch(e.raw.details){case xs.ErrorDetails.MANIFEST_LOAD_ERROR:case xs.ErrorDetails.LEVEL_LOAD_ERROR:case xs.ErrorDetails.FRAG_LOAD_ERROR:case xs.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:var t=e.raw.response;return!(t.code>=400&&t.code<500);case xs.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case xs.ErrorDetails.LEVEL_LOAD_TIMEOUT:case xs.ErrorDetails.FRAG_LOAD_TIMEOUT:case xs.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:return!0;default:return!1}return!1},dash_shaka_playback:function(e){var t=e.raw.code||e.raw.detail&&e.raw.detail.code,n=e.raw.data||e.raw.detail&&e.raw.detail.data;switch(t){case tg.util.Error.Code.BAD_HTTP_STATUS:var i=b(n,2)[1];return!(i>=400&&i<500);case tg.util.Error.Code.HTTP_ERROR:case tg.util.Error.Code.TIMEOUT:return!0;default:return!1}}},Fg=yo((function(module,e){!function(e){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function n(e){if(Array.isArray(e))return e}function i(e){if(Array.isArray(e))return t(e)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return t=h(t),E(e,p()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,I(i.key),i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=T(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},d.apply(null,arguments)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function k(e,t){return n(e)||v(e,t)||D(e,t)||m()}function T(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function S(e,t,n,i){var r=d(h(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}function w(e){return i(e)||g(e)||D(e)||y()}function C(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function I(e){var t=C(e,"string");return"symbol"==typeof t?t:t+""}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function D(e,n){if(e){if("string"==typeof e)return t(e,n);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}function L(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P=function(){var e,t,n,i,r,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,y=/([A-Z])/g,A=["val","css","html","text","data","width","height","offset"],b=["after","prepend","before","append"],E=c.createElement("table"),_=c.createElement("tr"),k={tr:c.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:_,th:_,"*":c.createElement("div")},T=/complete|loaded|interactive/,S=/^[\w-]*$/,w={},C=w.toString,I={},R=c.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},L=Array.isArray||function(e){return e instanceof Array};function P(e){return null==e?String(e):w[C.call(e)]||"object"}function O(e){return"function"==P(e)}function x(e){return null!=e&&e==e.window}function M(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function N(e){return"object"==P(e)}function B(e){return N(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function F(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!x(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return l.call(e,(function(e){return null!=e}))}function V(e){return e.length>0?n.fn.concat.apply([],e):e}function H(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function j(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function K(e,t){return"number"!=typeof t||f[H(e)]?t:t+"px"}function G(e){var t,n;return d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]}function W(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function Y(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function z(n,i,r){for(t in i)r&&(B(i[t])||L(i[t]))?(B(i[t])&&!B(n[t])&&(n[t]={}),L(i[t])&&!L(n[t])&&(n[t]=[]),z(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function q(e,t){return null==t?n(e):n(e).filter(t)}function $(e,t,n,i){return O(t)?t.call(e,n,i):t}function X(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Q(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function Z(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)Z(e.childNodes[n],t)}return I.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=R).appendChild(e),i=~I.qsa(r,t).indexOf(e),a&&R.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},I.fragment=function(t,i,r){var a,o,s;return g.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(v,"<$1></$2>")),i===e&&(i=p.test(t)&&RegExp.$1),i in k||(i="*"),(s=k[i]).innerHTML=""+t,a=n.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),B(r)&&(o=n(a),n.each(r,(function(e,t){A.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},I.Z=function(e,t){return new Y(e,t)},I.isZ=function(e){return e instanceof I.Z},I.init=function(t,i){var r;if(!t)return I.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&p.test(t))r=I.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=I.qsa(c,t)}else{if(O(t))return n(c).ready(t);if(I.isZ(t))return t;if(L(t))r=U(t);else if(N(t))r=[t],t=null;else if(p.test(t))r=I.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=I.qsa(c,t)}}return I.Z(r,t)},(n=function(e,t){return I.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){z(e,n,t)})),e},I.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,o=S.test(a);return e.getElementById&&o&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=P,n.isFunction=O,n.isWindow=x,n.isArray=L,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var n,i,r,a=[];if(F(e))for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&a.push(n);else for(r in e)null!=(n=t(e[r],r))&&a.push(n);return V(a)},n.each=function(e,t){var n,i;if(F(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:I.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=I.isZ(t)?t.toArray():t;return s.apply(I.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return T.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return O(e)?this.not(this.not(e)):n(l.call(this,(function(t){return I.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&I.matches(this[0],e)},not:function(t){var i=[];if(O(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):F(t)&&O(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return N(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!N(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!N(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return o.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(I.qsa(this[0],e)):this.map((function(){return I.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:I.matches(a,e));)a=a!==t&&!M(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!M(e)&&t.indexOf(e)<0)return t.push(e),e}));return q(t,e)},parent:function(e){return q(a(this.pluck("parentNode")),e)},children:function(e){return q(this.map((function(){return W(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return q(this.map((function(e,t){return l.call(W(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=G(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=O(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=O(e);return this.each((function(i){var r=n(this),a=r.contents(),o=t?e.call(this,i):e;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append($(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=$(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(N(n))for(t in n)X(this,t,n[t]);else X(this,n,$(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){X(this,e)}),this)}))},prop:function(e,t){return e=D[e]||e,1 in arguments?this.each((function(n){this[e]=$(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=D[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(y,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?J(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=$(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=$(this,e,t,i.offset()),a=i.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(L(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return n.each(e,(function(e,t){o[t]=a.style[r(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==P(e))i||0===i?l=H(e)+":"+K(e,i):this.each((function(){this.style.removeProperty(H(e))}));else for(t in e)e[t]||0===e[t]?l+=H(t)+":"+K(t,e[t])+";":this.each((function(){this.style.removeProperty(H(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Q(e))}),j(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=Q(this);$(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&Q(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return Q(this,"");i=Q(this),$(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(j(e)," ")})),Q(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);$(this,t,r,Q(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=m.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!m.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,o=this[0];return r===e?x(o)?o["inner"+i]:M(o)?o.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(o=n(this)).css(t,$(this,r,e,o[t]()))}))}})),b.forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,o=n.map(arguments,(function(i){var r=[];return"array"==(t=P(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(I.fragment(t)))})),r):"object"==t||null==i?i:I.fragment(i)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&Z(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),I.Z.prototype=Y.prototype=n.fn,I.uniq=a,I.deserializeValue=J,n.zepto=I,n}();window.Zepto=P,void 0===window.$&&(window.$=P),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function f(e,t,n,i){if(e.global)return h(t||r,n,i)}function p(t){t.global&&0==e.active++&&f(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&f(t,null,"ajaxStop")}function v(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===f(t,n,"ajaxBeforeSend",[e,t]))return!1;f(t,n,"ajaxSend",[e,t])}function m(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),f(n,r,"ajaxSuccess",[t,n,e]),A(a,t,n)}function y(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),f(i,a,"ajaxError",[n,i,e||t]),A(t,n,i)}function A(e,t,n){var i=n.context;n.complete.call(i,t,e),f(n,i,"ajaxComplete",[t,n]),g(n)}function b(e,t,n){if(n.dataFilter==E)return e;var i=n.context;return n.dataFilter.call(i,e,t)}function E(){}function _(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}function k(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function T(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=k(t.url,t.data),t.data=void 0)}function S(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&a?m(a[0],h,t,n):y(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===v(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:E,success:E,error:E,complete:E,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:E},e.ajax=function(i){var a,o,s=e.extend({},i||{}),l=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===s[t]&&(s[t]=e.ajaxSettings[t]);p(s),s.crossDomain||((a=r.createElement("a")).href=s.url,a.href=a.href,s.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),s.url||(s.url=window.location.toString()),(o=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,o)),T(s);var u=s.dataType,h=/\?.+=\?/.test(s.url);if(h&&(u="jsonp"),!1!==s.cache&&(i&&!0===i.cache||"script"!=u&&"jsonp"!=u)||(s.url=k(s.url,"_="+Date.now())),"jsonp"==u)return h||(s.url=k(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),e.ajaxJSONP(s,l);var f,g=s.accepts[u],A={},S=function(e,t){A[e.toLowerCase()]=[e,t]},w=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:window.location.protocol,C=s.xhr(),I=C.setRequestHeader;if(l&&l.promise(C),s.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",g||"*/*"),(g=s.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(g)),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&S("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(n in s.headers)S(n,s.headers[n]);if(C.setRequestHeader=S,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=E,clearTimeout(f);var t,n=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==w){if(u=u||_(s.mimeType||C.getResponseHeader("content-type")),"arraybuffer"==C.responseType||"blob"==C.responseType)t=C.response;else{t=C.responseText;try{t=b(t,u,s),"script"==u?(0,eval)(t):"xml"==u?t=C.responseXML:"json"==u&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return y(n,"parsererror",C,s,l)}m(t,C,s,l)}else y(C.statusText||null,C.status?"error":"abort",C,s,l)}},!1===v(C,s))return C.abort(),y(null,"abort",C,s,l),C;var R=!("async"in s)||s.async;if(C.open(s.type,s.url,R,s.username,s.password),s.xhrFields)for(n in s.xhrFields)C[n]=s.xhrFields[n];for(n in A)I.apply(C,A[n]);return s.timeout>0&&(f=setTimeout((function(){C.onreadystatechange=E,C.abort(),y(null,"timeout",C,s,l)}),s.timeout)),C.send(s.data?s.data:null),C},e.get=function(){return e.ajax(S.apply(null,arguments))},e.post=function(){var t=S.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=S.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),l=S(t,n,i),u=l.success;return s.length>1&&(l.url=s[0],r=s[1]),l.success=function(t){o.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(l),this};var w=encodeURIComponent;function C(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?C(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(w(t)+"="+w(n))},C(i,t,n),i.join("&").replace(/%20/g,"+")}}(P),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,r,a,o,s,l=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,i=!0,s=a||0,a=0,o=l.length,r=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:d.disable())},d={add:function(){if(l){var i=l.length,s=function(n){e.each(n,(function(e,n){"function"==typeof n?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),r?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&e.each(arguments,(function(t,n){for(var i;(i=e.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=o&&--o,i<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d}}(P),function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var s=e.isFunction(t[i])&&t[i];o[r[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,o=s?[t]:arguments;n[r[0]+"With"](i,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(i,(function(e,t){var n=t[2],s=t[3];a[t[1]]=n.add,s&&n.add((function(){r=s}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=n.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(i){var r,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=n}(P),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=f(t)).ns)var r=p(t.ns);return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function g(e,t){return e.del&&!l&&e.e in u||!!t}function v(e){return c[e]||l&&u[e]||e}function m(n,i,r,a,s,l,u){var h=d(n),p=o[h]||(o[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var o=f(i);o.fn=r,o.sel=s,o.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=l;var d=l||r;o.proxy=function(e){if(!(e=k(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},o.i=p.length,p.push(o),"addEventListener"in n&&n.addEventListener(v(o.e),o.proxy,g(o,u))}))}function y(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(v(t.e),t.proxy,g(t,r))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:m,remove:y},e.proxy=function(t,n){var o=2 in arguments&&i.call(arguments,2);if(r(t)){var s=function(){return t.apply(n,o?o.concat(i.call(arguments)):arguments)};return s._zid=d(t),s}if(a(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var A=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,_={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function k(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(_,(function(e,t){var r=i[e];n[e]=function(){return this[t]=A,r&&r.apply(i,arguments)},n[t]=b})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=A)),n}function T(e){var n,i={originalEvent:e};for(n in e)E.test(n)||e[n]===t||(i[n]=e[n]);return k(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,o,s,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||r(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=b),h.each((function(t,r){u&&(c=function(e){return y(r,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var n,a=e(t.target).closest(o,r).get(0);if(a&&a!==r)return n=e.extend(T(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),m(r,n,l,s,o,d||c)})))},e.fn.off=function(n,i,o){var s=this;return n&&!a(n)?(e.each(n,(function(e,t){s.off(e,i,t)})),s):(a(i)||r(o)||!1===o||(o=i,i=t),!1===o&&(o=b),s.each((function(){y(this,n,o,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):k(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(o,s){(i=T(a(t)?e.Event(t):t))._args=n,i.target=s,e.each(h(s,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),k(n)}}(P),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=o.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var s=Number(i);i=isNaN(s)?i.replace(/^["']|["']$/g,""):s}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(P);var O=P,x=L(O);Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var M="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",N={mp4:M},B=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],F=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],U={},V=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}},H=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},j=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}},K=function(){var e,t={},n=U.userAgent.toLowerCase(),i=u(B);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&G(o[1],t)}else G(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t},G=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},W=function(){var e,t={},n=U.userAgent.toLowerCase(),i=u(F);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)Y(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])Y(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&Y(o[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t},Y=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},z=function(){var e={};return e.width=x(window).width(),e.height=x(window).height(),e},q=function(){switch(window.orientation){case-90:case 90:U.viewport.orientation="landscape";break;default:U.viewport.orientation="portrait"}},$=function(e){var t=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(e);return t&&(t[1]||t[2])||""},X=j(navigator.userAgent);U.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),U.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!U.isEdge,U.isSafari=/Safari/i.test(navigator.userAgent)&&!U.isChrome&&!U.isEdge,U.isFirefox=/Firefox/i.test(navigator.userAgent),U.isLegacyIE=!!window.ActiveXObject,U.isIE=U.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),U.isIE11=/trident.*rv:11/i.test(navigator.userAgent),U.isChromecast=U.isChrome&&/CrKey/i.test(navigator.userAgent),U.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),U.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),U.isAndroid=/Android/i.test(navigator.userAgent),U.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),U.isWin8App=/MSAppHost/i.test(navigator.userAgent),U.isWiiU=/WiiU/i.test(navigator.userAgent),U.isPS4=/PlayStation 4/i.test(navigator.userAgent),U.hasLocalstorage=V(),U.hasFlash=H(),U.name=X.name,U.version=X.version,U.userAgent=navigator.userAgent,U.data=K(),U.os=W(),U.isWindows=/^Windows$/i.test(U.os.group),U.isMacOS=/^Mac OS$/i.test(U.os.group),U.isLinux=/^Linux$/i.test(U.os.group),U.viewport=z(),U.device=$(U.userAgent),void 0!==window.orientation&&q();var Q={},J=[],Z=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),ee=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function te(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function ne(e,t){var n=function(e){function n(){var e;o(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=a(this,n,[].concat(r)),t.initialize&&t.initialize.apply(e,r),e}return f(n,e),l(n)}(e);return te(n.prototype,t),n}function ie(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",r<1&&(o+="00:")),(r&&r>0||t)&&(o+=("0"+r).slice(-2)+":"),o+=("0"+i).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()}var re={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},ae=function(){function e(){o(this,e)}return l(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return U.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(U.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}])}(),oe=function(){function e(){o(this,e)}return l(e,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}])}();function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=oe.params[e]||oe.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}function le(e){return Q[e]||(Q[e]=0),e+ ++Q[e]}function ue(e){return e-parseFloat(e)+1>=0}function ce(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function de(){return window.navigator&&window.navigator.language}function he(){return window.performance&&window.performance.now?performance.now():Date.now()}function fe(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function pe(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))}function ge(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:N.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var ve=function(){function e(){o(this,e)}return l(e,null,[{key:"configure",value:function(e){this.options=x.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&J.length>0?J.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(x(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),J.push(e))}}])}();ve.options={recycleVideo:!1};var me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;o(this,e),this.delay=t,this.lastTime=0}return l(e,[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}])}(),ye={Config:ae,Fullscreen:re,QueryString:oe,DomRecycler:ve,assign:te,extend:ne,formatTime:ie,seekStringToSeconds:se,uniqueId:le,currentScriptUrl:ce,isNumber:ue,requestAnimationFrame:Z,cancelAnimationFrame:ee,getBrowserLanguage:de,now:he,removeArrayItem:fe,listContainsIgnoreCase:pe,canAutoPlayMedia:ge,Media:N,DoubleEventHandler:me},Ae="font-weight: bold; font-size: 13px;",be="color: #006600;"+Ae,Ee="color: #0000ff;"+Ae,_e="color: #ff8000;"+Ae,ke="color: #ff0000;"+Ae,Te=0,Se=1,we=2,Ce=3,Ie=Ce,Re=[Ee,be,_e,ke,ke],De=["debug","info","warn","error","disabled"],Le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie;o(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress","core:mousemove"],this.level=t,this.previousLevel=this.level,this.offLevel=n}return l(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,Te,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,Se,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,we,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,Ce,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+De[this.level],_e)}},{key:"log",value:function(e,t,n){if(!(t<this.level||this.EXCLUDE_LIST.indexOf(n[0])>=0)){n||(n=e,e=null);var i=Re[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+De[t]+"]"+r,i].concat(n))}}}])}();Le.LEVEL_DEBUG=Te,Le.LEVEL_INFO=Se,Le.LEVEL_WARN=we,Le.LEVEL_ERROR=Ce,Le.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},Le.setLevel=function(e){this.getInstance().level=e},Le.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},Le.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},Le.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},Le.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Pe=Array.prototype.slice,Oe=/\s+/,xe=function(e,t,n,i){if(!n)return!0;if("object"===R(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(Oe.test(n)){for(var a=n.split(Oe),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},Me=function(e,t,n,i){var r,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];function c(){try{switch(t.length){case 0:for(;++a<o;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s);return;case 2:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l);return;case 3:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l,u);return;default:for(;++a<o;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){Le.error.apply(Le,[n,"error on event",i,"trigger","-",e]),c()}}c()},Ne=function(){function e(){o(this,e)}return l(e,[{key:"on",value:function(e,t,n){return xe(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!xe(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},i._callback=t,this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,o,s,l,u,c;if(!this._events||!xe(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=0,l=(o=e?[e]:Object.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(Le.debug.apply(Le,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=Pe.call(arguments,1);if(!xe(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&Me(i,n,t,e),r&&Me(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==R(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):Le.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}])}();Ne.prototype.listenTo=function(e,t,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=le("l"))]=e,n||"object"!==R(t)||(n=this),e.on(t,n,this),this},Ne.prototype.listenToOnce=function(e,t,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=le("l"))]=e,n||"object"!==R(t)||(n=this),e.once(t,n,this),this},Ne.PLAYER_READY="ready",Ne.PLAYER_RESIZE="resize",Ne.PLAYER_FULLSCREEN="fullscreen",Ne.PLAYER_PLAY="play",Ne.PLAYER_PAUSE="pause",Ne.PLAYER_STOP="stop",Ne.PLAYER_ENDED="ended",Ne.PLAYER_SEEK="seek",Ne.PLAYER_ERROR="playererror",Ne.ERROR="error",Ne.PLAYER_TIMEUPDATE="timeupdate",Ne.PLAYER_VOLUMEUPDATE="volumeupdate",Ne.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",Ne.PLAYBACK_PIP_ENTER="playback:picture-in-picture:enter",Ne.PLAYBACK_PIP_EXIT="playback:picture-in-picture:exit",Ne.PLAYBACK_PROGRESS="playback:progress",Ne.PLAYBACK_TIMEUPDATE="playback:timeupdate",Ne.PLAYBACK_READY="playback:ready",Ne.PLAYBACK_BUFFERING="playback:buffering",Ne.PLAYBACK_BUFFERFULL="playback:bufferfull",Ne.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",Ne.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",Ne.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",Ne.PLAYBACK_BITRATE="playback:bitrate",Ne.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",Ne.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",Ne.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",Ne.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",Ne.PLAYBACK_DVR="playback:dvr",Ne.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",Ne.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",Ne.PLAYBACK_ENDED="playback:ended",Ne.PLAYBACK_PLAY_INTENT="playback:play:intent",Ne.PLAYBACK_PLAY="playback:play",Ne.PLAYBACK_PAUSE="playback:pause",Ne.PLAYBACK_SEEK="playback:seek",Ne.PLAYBACK_SEEKED="playback:seeked",Ne.PLAYBACK_STOP="playback:stop",Ne.PLAYBACK_ERROR="playback:error",Ne.PLAYBACK_STATS_ADD="playback:stats:add",Ne.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",Ne.PLAYBACK_FRAGMENT_BUFFERED="playback:fragment:buffered",Ne.PLAYBACK_LEVEL_SWITCH="playback:level:switch",Ne.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",Ne.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",Ne.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",Ne.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",Ne.PLAYBACK_RESIZE="playback:resize",Ne.CORE_CONTAINERS_CREATED="core:containers:created",Ne.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",Ne.CORE_OPTIONS_CHANGE="core:options:change",Ne.CORE_READY="core:ready",Ne.CORE_FULLSCREEN="core:fullscreen",Ne.CORE_RESIZE="core:resize",Ne.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",Ne.CORE_MOUSE_MOVE="core:mousemove",Ne.CORE_MOUSE_LEAVE="core:mouseleave",Ne.CONTAINER_PLAYBACKSTATE="container:playbackstate",Ne.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",Ne.CONTAINER_BITRATE="container:bitrate",Ne.CONTAINER_STATS_REPORT="container:stats:report",Ne.CONTAINER_DESTROYED="container:destroyed",Ne.CONTAINER_READY="container:ready",Ne.CONTAINER_RESIZE="container:resize",Ne.CONTAINER_ERROR="container:error",Ne.CONTAINER_LOADEDMETADATA="container:loadedmetadata",Ne.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",Ne.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",Ne.CONTAINER_AUDIO_AVAILABLE="container:audio:available",Ne.CONTAINER_AUDIO_CHANGED="container:audio:changed",Ne.CONTAINER_TIMEUPDATE="container:timeupdate",Ne.CONTAINER_PROGRESS="container:progress",Ne.CONTAINER_PLAY="container:play",Ne.CONTAINER_STOP="container:stop",Ne.CONTAINER_PAUSE="container:pause",Ne.CONTAINER_ENDED="container:ended",Ne.CONTAINER_CLICK="container:click",Ne.CONTAINER_DBLCLICK="container:dblclick",Ne.CONTAINER_CONTEXTMENU="container:contextmenu",Ne.CONTAINER_MOUSE_ENTER="container:mouseenter",Ne.CONTAINER_MOUSE_LEAVE="container:mouseleave",Ne.CONTAINER_MOUSE_UP="container:mouseup",Ne.CONTAINER_MOUSE_DOWN="container:mousedown",Ne.CONTAINER_PIP_ENTER="container:picture-in-picture:enter",Ne.CONTAINER_PIP_EXIT="container:picture-in-picture:exit",Ne.CONTAINER_SEEK="container:seek",Ne.CONTAINER_SEEKED="container:seeked",Ne.CONTAINER_VOLUME="container:volume",Ne.CONTAINER_FULLSCREEN="container:fullscreen",Ne.CONTAINER_STATE_BUFFERING="container:state:buffering",Ne.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",Ne.CONTAINER_SETTINGSUPDATE="container:settingsupdate",Ne.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",Ne.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",Ne.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",Ne.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",Ne.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",Ne.CONTAINER_STATS_ADD="container:stats:add",Ne.CONTAINER_OPTIONS_CHANGE="container:options:change",Ne.MEDIACONTROL_RENDERED="mediacontrol:rendered",Ne.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",Ne.MEDIACONTROL_SHOW="mediacontrol:show",Ne.MEDIACONTROL_HIDE="mediacontrol:hide",Ne.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",Ne.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",Ne.MEDIACONTROL_PLAYING="mediacontrol:playing",Ne.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",Ne.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",Ne.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Be=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),(e=a(this,t,[n]))._options=n,e.uniqueId=le("o"),e}return f(t,e),l(t,[{key:"options",get:function(){return this._options}}])}(Ne),Fe={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ue=/(.)^/,Ve={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},He=/\\|'|\r|\n|\t|\u2028|\u2029/g,je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ke=new RegExp("[&<>\"']","g"),Ge=function(e){return null===e?"":(""+e).replace(Ke,(function(e){return je[e]}))},We=0,Ye=function(e,t){var n,i=new RegExp([(Fe.escape||Ue).source,(Fe.interpolate||Ue).source,(Fe.evaluate||Ue).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(He,(function(e){return"\\"+Ve[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t})),a+="';\n",Fe.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+We+++"]";try{n=new Function(Fe.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,Ge);var o=function(e){return n.call(this,e,Ge)};return o.source="function("+(Fe.variable||"obj")+"){\n"+a+"}",o};Ye.settings=Fe;var ze={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return x('<style class="clappr-style"></style>').html(Ye(e.toString())(t))}},qe=/^(\S+)\s*(.*)$/,$e=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e])).cid=le("c"),n._ensureElement(),n.delegateEvents(),n}return f(t,e),l(t,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=x.zepto.isZ(e)?e:x(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(qe),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=x.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=x(ve.create(this.tagName)).attr(e);this.setElement(t,!1)}}},{key:"onResize",value:function(){return this}},{key:"resize",value:function(e){var t=ue(e.width)?"".concat(e.width,"px"):"".concat(e.width),n=ue(e.height)?"".concat(e.height,"px"):"".concat(e.height);return this.el.style.width=t,this.el.style.height=n,this.onResize(e),this}}])}(Be),Xe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return o(this,t),(e=a(this,t,[n])).core=i,e}return f(t,e),l(t,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(Ne.ERROR,e):Le.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}])}(Be),Qe={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),o={description:"",level:Xe.Levels.FATAL,origin:i,scope:n,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(r&&s.level==Xe.Levels.FATAL&&!s.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):Le.warn(i,"PlayerError is not defined. Error: ",s),s}},Je=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e.options])).core=e,n.enabled=!0,n.bindEvents(),n.render(),n}return f(t,e),l(t,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}])}($e);Object.assign(Je.prototype,Qe),Je.extend=function(e){return ne(Je,e)},Je.type="core";var Ze=".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n",et=function(e){function t(e,n,i){var r;return o(this,t),(r=a(this,t,[e]))._i18n=n,r.currentTime=0,r.volume=100,r.playback=e.playback,r.playerError=i,r.settings=x.extend(!0,{},r.playback.settings),r.isReady=!1,r.mediaControlDisabled=!1,r.plugins=[r.playback],r.dblTapHandler=new me(500),r.clickTimer=null,r.clickDelay=200,r.actionsMetadata={},r.bindEvents(),r}return f(t,e),l(t,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"isPiPActive",get:function(){return this.playback.isPiPActive}},{key:"bindEvents",value:function(){this.listenTo(this.playback,Ne.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,Ne.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,Ne.PLAYBACK_READY,this.ready),this.listenTo(this.playback,Ne.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,Ne.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,Ne.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,Ne.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,Ne.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,Ne.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,Ne.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,Ne.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,Ne.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,Ne.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,Ne.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,Ne.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,Ne.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,Ne.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,Ne.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,Ne.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,Ne.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,Ne.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,Ne.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,Ne.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,Ne.PLAYBACK_AUDIO_CHANGED,this.audioChanged),this.listenTo(this.playback,Ne.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,Ne.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"subtitleAvailable",value:function(){this.trigger(Ne.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(Ne.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(Ne.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(Ne.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(Ne.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(Ne.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(Ne.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(Ne.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(Ne.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),this.undelegateEvents()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"ready",value:function(){this.isReady=!0,this.trigger(Ne.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(Ne.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(Ne.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(Ne.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[Ne.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(Ne.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(Ne.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(Ne.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(Ne.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(Ne.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(Ne.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(Ne.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Ne.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(Ne.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(Ne.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(Ne.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(Ne.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(Ne.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(Ne.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"onEnterPiP",value:function(){this.trigger(Ne.CONTAINER_PIP_ENTER,this.name)}},{key:"onExitPiP",value:function(){this.trigger(Ne.CONTAINER_PIP_EXIT,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Ne.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Ne.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Ne.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Ne.CONTAINER_MOUSE_DOWN)}},{key:"enterPiP",value:function(){this.playback.enterPiP()}},{key:"exitPiP",value:function(){this.playback.exitPiP()}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(Ne.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(Ne.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(Ne.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(Ne.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(Ne.CONTAINER_RESIZE,e))}},{key:"onResize",value:function(e){return this.playback.resize(e),this}},{key:"configure",value:function(e){this._options=x.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(Ne.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=ze.getStyleFor(Ze.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}])}($e);Object.assign(et.prototype,Qe);var tt=function(e){function t(e,n,i){var r;return o(this,t),(r=a(this,t,[e])).settings={},r._i18n=n,r.playerError=i,r._consented=!1,r}return f(t,e),l(t,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"latency",get:function(){return null}},{key:"currentProgramDateTime",get:function(){return null}},{key:"isPiPActive",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"enterPiP",value:function(){}},{key:"exitPiP",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return t.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=x.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"onResize",value:function(e){return this.trigger(Ne.PLAYBACK_RESIZE,e),this}}])}($e);Object.assign(tt.prototype,Qe),tt.extend=function(e){return ne(tt,e)},tt.canPlay=function(e,t){return!1},tt.VOD="vod",tt.AOD="aod",tt.LIVE="live",tt.NO_OP="no_op",tt.type="playback";var nt=function(e){function t(e,n,i,r){var s;return o(this,t),(s=a(this,t,[e]))._i18n=i,s.loader=n,s.playerError=r,s}return f(t,e),l(t,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var e=this;return x.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===R(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=b(b({},this.options),{},{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new tt;i=b(b({},i),{},{playback:a});var o=new et(i,this._i18n,this.playerError),s=x.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,Ne.CONTAINER_READY,(function(){return s.resolve(o)})),o}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}])}(Be),it='[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n',rt='[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n',at=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e])).playerError=new Xe(e,n),n.configureDomRecycler(),n.firstResize=!0,n.styleRendered=!1,n.plugins=[],n.containers=[],n._boundFullscreenHandler=function(){return n.handleFullscreenChange()},n._boundHandleWindowResize=function(e){return n.handleWindowResize(e)},x(document).bind("fullscreenchange",n._boundFullscreenHandler),x(document).bind("MSFullscreenChange",n._boundFullscreenHandler),x(document).bind("mozfullscreenchange",n._boundFullscreenHandler),U.isMobile&&x(window).bind("resize",n._boundHandleWindowResize),n}return f(t,e),l(t,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Je(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(Ne.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el&&this.activePlayback.$el.find("video")[0]||this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;ve.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=x.Deferred(),this.defer.promise(this),this.containerFactory=new nt(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){U.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:x(window).width(),height:x(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:x(window).width(),height:x(window).height()},this.resize(this.currentSize)}},{key:"onResize",value:function(e){return this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize),this}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();var t=function(){var t,n,i=null!==(t=e.el.clientWidth)&&void 0!==t?t:e.options.width,r=null!==(n=e.el.clientHeight)&&void 0!==n?n:e.options.height;e.triggerResize({width:i,height:r})};this.resizeObserverInterval=setInterval(t,500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(Ne.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;x.when.apply(x,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(Ne.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=x.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),x(document).unbind("fullscreenchange",this._boundFullscreenHandler),x(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),x(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),U.isMobile&&x(window).unbind("resize",this._boundHandleWindowResize),this.stopListening(),this.undelegateEvents()}},{key:"handleFullscreenChange",value:function(){this.trigger(Ne.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t,n,i=window.innerWidth>window.innerHeight?"landscape":"portrait";if(this._screenOrientation!==i){this._screenOrientation=i;var r=null!==(t=this.el.clientWidth)&&void 0!==t?t:this.options.width,a=null!==(n=this.el.clientHeight)&&void 0!==n?n:this.options.height;this.triggerResize({width:r,height:a}),this.trigger(Ne.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation})}}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containerFactory.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,Ne.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(Ne.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=re.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen()){var t=U.isiOS?this.activePlaybackEl:document;re.cancelFullscreen(t),!U.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var n=U.isiOS?this.activePlaybackEl:this.el;if(!n)return;U.isSafari||U.isiOS?re.requestFullscreen(n):re.requestFullscreen(n).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!U.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(Ne.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(Ne.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=x.extend(!0,this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(Ne.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){(!this.$el.parent()||!this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"appendStyles",value:function(){if(!this.styleRendered){var e=ze.getStyleFor(it.toString(),{baseUrl:this.options.baseUrl});if(this.$el.append(e[0]),this.options.includeResetStyle){var t=ze.getStyleFor(rt.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0])}this.styleRendered=!0}}},{key:"render",value:function(){this.appendStyles(),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}])}($e);Object.assign(at.prototype,Qe);var ot=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e.options])).player=e,n}return f(t,e),l(t,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new at(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}])}(Be),st=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,lt=function(){function e(t,n,i){o(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return l(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var t=k((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(st)||[],4),n=t[1],i=t[2],r=t[3];return void 0===n?null:new e(n,i,r)}}])}(),ut=function(e,t){return e&&t?Object.entries(e).filter((function(e){return k(e,2)[1].type===t})).reduce((function(e,t){var n=k(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},ct=function(){var e={plugins:{},playbacks:[]},t="0.11.5";return function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,n),this.playerId=i,this.playbackPlugins=w(e.playbacks);var r=n.registeredPlugins,a=r.core,s=r.container;this.containerPlugins=Object.values(s),this.corePlugins=Object.values(a),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return l(n,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(e){var t="boolean"!=typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,i="boolean"!=typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if((e=this.groupPluginsByType(e)).playback){var r=e.playback.filter((function(e){return n.checkVersionSupport(e),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(e.container){var a=e.container.filter((function(e){return n.checkVersionSupport(e),!0}));this.containerPlugins=t?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(e.core){var o=e.core.filter((function(e){return n.checkVersionSupport(e),!0}));this.corePlugins=t?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}],[{key:"registeredPlaybacks",get:function(){return w(e.playbacks)}},{key:"registeredPlugins",get:function(){var t=e.plugins;return{core:ut(t,"core"),container:ut(t,"container")}}},{key:"checkVersionSupport",value:function(e){var n=e.prototype,i=n.supportedVersion,r=n.name;if(!i||!i.min)return Le.warn("Loader","missing version information for ".concat(r)),!1;var a=i.max?lt.parse(i.max):lt.parse(i.min).inc("minor"),o=lt.parse(i.min);return!!lt.parse(t).satisfies(o,a)||(Le.warn("Loader","unsupported plugin ".concat(r,": Clappr version ").concat(t," does not match required range [").concat(o,",").concat(a,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return Le.warn("Loader","missing information to register plugin: ".concat(t)),!1;n.checkVersionSupport(t);var i=e.plugins;if(!i)return!1;var r=i[t.prototype.name];return r&&Le.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(r)),i[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;n.checkVersionSupport(t);var i=e.playbacks,r=i.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(r>=0){var a=i[r];i.splice(r,1),Le.warn("Loader","overriding playback entry: ".concat(a.name," - ").concat(a))}return e.playbacks=[t].concat(w(i)),!0}},{key:"unregisterPlugin",value:function(t){if(!t)return!1;var n=e.plugins;return!!n[t]&&(delete n[t],!0)}},{key:"unregisterPlayback",value:function(t){if(!t)return!1;var n=e.playbacks,i=n.findIndex((function(e){return e.prototype.name===t}));return!(i<0||(n.splice(i,1),e.playbacks=n,0))}},{key:"clearPlugins",value:function(){e.plugins={}}},{key:"clearPlaybacks",value:function(){e.playbacks=[]}}])}()}(),dt=ce().replace(/\/[^/]+$/,""),ht=function(e){function t(e){var n;o(this,t),n=a(this,t,[e]);var i={recycleVideo:!0},r={playerId:le(""),persistConfig:!0,width:640,height:360,baseUrl:dt,allowUserInteraction:U.isMobile,includeResetStyle:!0,playback:i};n._options=x.extend(!0,r,e),n.options.sources=n._normalizeSources(e),n.options.chromeless||(n.options.allowUserInteraction=!0),n.options.allowUserInteraction||(n.options.disableKeyboardShortcuts=!0),n._registerOptionEventListeners(n.options.events),n._coreFactory=new ot(n);var s=n._getParentElement(n.options);return s&&n.attachTo(s),n}return f(t,e),l(t,[{key:"loader",get:function(){return this._loader||(this._loader=new ct(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:Ne.PLAYER_READY,onResize:Ne.PLAYER_RESIZE,onPlay:Ne.PLAYER_PLAY,onPause:Ne.PLAYER_PAUSE,onStop:Ne.PLAYER_STOP,onEnded:Ne.PLAYER_ENDED,onSeek:Ne.PLAYER_SEEK,onError:Ne.PLAYER_ERROR,onTimeUpdate:Ne.PLAYER_TIMEUPDATE,onVolumeUpdate:Ne.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:Ne.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(e){var t=e.parentId,n=e.parent;return t?document.querySelector(t):n}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,Ne.CORE_READY,this._onReady),this.listenTo(this.core,Ne.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,Ne.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,Ne.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,Ne.CONTAINER_PLAY,this._onPlay),this.listenTo(e,Ne.CONTAINER_PAUSE,this._onPause),this.listenTo(e,Ne.CONTAINER_STOP,this._onStop),this.listenTo(e,Ne.CONTAINER_ENDED,this._onEnded),this.listenTo(e,Ne.CONTAINER_SEEK,this._onSeek),this.listenTo(e,Ne.CONTAINER_ERROR,this._onError),this.listenTo(e,Ne.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,Ne.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,Ne.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).length>0&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(Ne.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(Ne.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(Ne.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(Ne.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(Ne.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(Ne.PLAYER_PLAY,t)}},{key:"_onPause",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(Ne.PLAYER_PAUSE,t)}},{key:"_onStop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(Ne.PLAYER_STOP,this.getCurrentTime(),e)}},{key:"_onEnded",value:function(){this.trigger(Ne.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(Ne.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(Ne.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(Ne.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.play(e),this}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.pause(e),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.stop(e),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}])}(Be);Object.assign(ht.prototype,Qe);var ft=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e.options])).container=e,n.enabled=!0,n.bindEvents(),n}return f(t,e),l(t,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}])}(Be);Object.assign(ft.prototype,Qe),ft.extend=function(e){return ne(ft,e)},ft.type="container";var pt=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e.options])).core=e,n.enabled=!0,n.bindEvents(),n}return f(t,e),l(t,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}])}(Be);Object.assign(pt.prototype,Qe),pt.extend=function(e){return ne(pt,e)},pt.type="core";var gt=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e.options])).container=e,n.enabled=!0,n.bindEvents(),n}return f(t,e),l(t,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}])}($e);Object.assign(gt.prototype,Qe),gt.extend=function(e){return ne(gt,e)},gt.type="container";var vt='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n',mt="[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n",yt={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};yt.ogv=yt.ogg,yt["3gp"]=yt["3gpp"];var At={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},bt=Object.keys(At).reduce((function(e,t){return[].concat(w(e),w(At[t]))}),[]),Et={code:"unknown",message:"unknown"},_t=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=a(this,t,[].concat(i)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._playheadMovingCheckEnabled=!e.options.disablePlayheadMovingCheck,e._setupSrc(e.options.src),e._playheadMovingCheckInterval=e.options.playheadMovingCheckInterval||500,e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var s,l=e.options.playback,u=l.preload||(U.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?s=e.options.poster:"string"==typeof e.options.poster.url&&(s=e.options.poster.url)),x.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:s,preload:u||"metadata",crossOrigin:l.crossOrigin,"x-webkit-playsinline":l.playInline}),(l.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),l.playInline&&e.$el.attr({playsinline:"playsinline"}),l.crossOrigin&&e.$el.attr({crossorigin:l.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],l.externalTracks&&e._setupExternalTracks(l.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return f(t,e),l(t,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,n=t._mimeTypesForUrl(e,At,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||bt.indexOf(n[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting",enterpictureinpicture:"_onEnterPiP",leavepictureinpicture:"_onExitPiP"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isPiPActive",get:function(){return this.el===document.pictureInPictureElement}},{key:"isLive",get:function(){return this.getPlaybackType()===tt.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"sourceMedia",get:function(){return this._src}},{key:"configure",value:function(e){S(t,"configure",this)([e]),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&Le.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};U.isMobile&&ve.options.recycleVideo&&(t.element=this.el),ge(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"load",value:function(e){this._setupSrc(e)}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==tt.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===tt.VOD||this.getPlaybackType()===tt.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Ne.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?tt.AOD:tt.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?tt.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var n=this;if(this.isPlaying()||this.el._consented)S(t,"consent",this)([e]);else{var i=function(){n.el.removeEventListener("loadedmetadata",i,!1),n.el.removeEventListener("error",i,!1),n.el._consented=!0,S(t,"consent",n)([e])};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){var e=this;this.trigger(Ne.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();return t&&t.catch&&t.catch((function(t){return Le.warn(e.name,"HTML5 play failed",t)})),t}},{key:"pause",value:function(){this.el.pause()}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&this._playheadMovingCheckEnabled&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),this._playheadMovingCheckInterval))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this.dvrEnabled&&this._updateDvr(!0),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){var e=this.getCurrentTime();this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),this.trigger(Ne.PLAYBACK_SEEK,e),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(Ne.PLAYBACK_ENDED,this.name)}},{key:"_onEnterPiP",value:function(){this.trigger(Ne.PLAYBACK_PIP_ENTER,this.name)}},{key:"_onExitPiP",value:function(){this.trigger(Ne.PLAYBACK_PIP_EXIT,this.name)}},{key:"enterPiP",value:function(){var e=this;this.el.requestPictureInPicture().then((function(){Le.info(e.name,"enter PIP success")})).catch((function(t){Le.warn(e.name,"enter PIP failed",t)}))}},{key:"exitPiP",value:function(){var e=this;document.exitPictureInPicture().then((function(){Le.info(e.name,"exit PIP success")})).catch((function(t){Le.warn(e.name,"exit PIP failed",t)}))}},{key:"_handleBufferingEvents",value:function(){var e=this._loadStarted&&!this.el.ended&&!this._stopped,t=this.el.readyState<this.el.HAVE_FUTURE_DATA,n=!this.el.ended&&!this.el.paused&&!this._playheadMoving,i=e&&t;this._playheadMovingCheckEnabled&&(i=i||e&&n),this._isBuffering!==i&&(this._isBuffering=i,i?this.trigger(Ne.PLAYBACK_BUFFERING,this.name):this.trigger(Ne.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||Et,t=e.code,n=e.message,i=t===Et.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?Xe.Levels.WARN:Xe.Levels.FATAL});i?Le.warn(this.name,"HTML5 unknown error: ",r):this.trigger(Ne.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this._stopPlayheadMovingChecks(),this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),this.$el.off("contextmenu"),S(t,"destroy",this)([]),this.el.removeAttribute("src"),this.el.load(),this._src=null,ve.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(Ne.PLAYBACK_DVR,e),this.trigger(Ne.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(Le.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=se();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(Ne.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(w(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(Ne.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var n=t._mimeTypesForUrl(e,yt,this.options.mimeType);return 0===n.length&&(n=t._mimeTypesForUrl(e,At,this.options.mimeType)),(n[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(Ne.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(Ne.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(Ne.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===t.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0,t=function(){return e++};return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:t(),name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(ue(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(Ne.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return Ye(vt)}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=ze.getStyleFor(mt.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}])}(tt);_t._mimeTypesForUrl=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[0].match(/.*\.(.*)$/)||[])[1],i=t||n&&e[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},_t._canPlay=function(e,t,n,i){var r=_t._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},_t.canPlay=function(e,t){return _t._canPlay("audio",At,e,t)||_t._canPlay("video",yt,e,t)};var kt=function(e){function t(){return o(this,t),a(this,t,arguments)}return f(t,e),l(t,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Ne.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return tt.AOD}}])}(_t);kt.canPlay=function(e,t){var n={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return _t._canPlay("audio",n,e,t)};var Tt="[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n",St=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e])).el.src=e.src,n}return f(t,e),l(t,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return tt.NO_OP}},{key:"render",value:function(){var e=ze.getStyleFor(Tt.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(Ne.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(Ne.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(Ne.PLAYBACK_ERROR,{message:t},this.name)}}])}(tt);St.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var wt="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>",Ct="[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n",It=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=a(this,t,[].concat(i)))._noiseFrameNum=-1,e}return f(t,e),l(t,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"template",get:function(){return Ye(wt)}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=ze.getStyleFor(Ct.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(Ne.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<r;)o<0&&(o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24),o-=1,e[l++]=s;this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=Z((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(ee(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}])}(tt);It.canPlay=function(e){return!0};var Rt=function(e){function t(e){var n;return o(this,t),(n=a(this,t,[e]))._initializeMessages(),n}return f(t,e),l(t,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||de()}},{key:"_initializeMessages",value:function(){var e={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não suporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}};this._messages=x.extend(!0,e,this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}])}(pt),Dt=function(e){function t(){return o(this,t),a(this,t,arguments)}return f(t,e),l(t,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.11.5"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Ne.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}}])}(pt),Lt="0.11.5";ct.registerPlugin(Rt),ct.registerPlugin(Dt),ct.registerPlayback(It),ct.registerPlayback(St),ct.registerPlayback(kt),ct.registerPlayback(_t);var Pt={Player:ht,Events:Ne,Browser:U,ContainerPlugin:ft,UIContainerPlugin:gt,CorePlugin:pt,UICorePlugin:Je,Playback:tt,Container:et,Core:at,PlayerError:Xe,Loader:ct,BaseObject:Be,UIObject:$e,Utils:ye,HTML5Audio:kt,HTML5Video:_t,HTMLImg:St,Log:Le,Styler:ze,version:Lt,template:Ye,$:x};e.$=x,e.BaseObject=Be,e.Browser=U,e.Container=et,e.ContainerPlugin=ft,e.Core=at,e.CorePlugin=pt,e.Events=Ne,e.HTML5Audio=kt,e.HTML5Video=_t,e.HTMLImg=St,e.Loader=ct,e.Log=Le,e.Playback=tt,e.Player=ht,e.PlayerError=Xe,e.Styler=ze,e.UIContainerPlugin=gt,e.UICorePlugin=Je,e.UIObject=$e,e.Utils=ye,e.default=Pt,e.template=Ye,e.version=Lt,Object.defineProperty(e,"__esModule",{value:!0})}(e)})),Ug=function(e){if(xs){var t=function(t){h(i,t);var n=m(i);function i(){return l(this,i),n.apply(this,arguments)}return c(i,[{key:"load",value:function(t,n,r){if("manifest"===t.type){var a=r.onSuccess;r.onSuccess=function(t,n,i,r){var o={pop:r.getResponseHeader("x-pop"),host:r.getResponseHeader("x-host")};e.trigger(Gn.WM_STREAMING_DATA_LOADED,o),a(t,n,i)}}A(f(i.prototype),"load",this).call(this,t,n,r)}}]),i}(xs.DefaultConfig.loader);return e.video.isLive?t:void 0}},Vg={enableWorker:!0,backBufferLength:1/0,liveBackBufferLength:90,lowLatencyMode:!0,capLevelToPlayerSize:!0,enableWebVTT:!1},Hg=i(i({},Vg),{},{maxLiveSyncPlaybackRate:Fg.Browser.isSafari?1:1.05}),jg=function(e){e.getNetworkingEngine().registerRequestFilter((function(e,t){e!==tg.net.NetworkingEngine.RequestType.LICENSE&&(t.allowCrossSiteCredentials=!0)}))},Kg=function(e){e.shakaConfiguration=e.shakaConfiguration||{};var t=function(e){return{maxAttempts:"manifest"===e?4:8}};["drm","manifest","streaming"].forEach((function(n){return e.shakaConfiguration[n]=function(n){return i(i({},e.shakaConfiguration[n]||{}),{},{retryParameters:t(n)})}(n)}))},Gg=jn.LocalStorage,Wg=jn.getHostname,Yg=jn.getHostAndPathName,zg=window.WM&&window.WM.Settings||{},qg={limited:ne.isFirefox&&ne.isAndroid,preferredLevel:Gg.load("selectedlevel",parseInt),changeFavicon:!1,mediacontrol:{plugins:sg()},chromecast:{appId:function(){if(zg.CastSenders){var e=Object.keys(zg.CastSenders).find((function(e){return e===Wg()||e===Yg()}));return e&&zg.CastSenders[e]}}()},preload:"none",hlsMinimumDvrSize:120,useDvrControls:!1,useBackgroundButton:!1,useHardwareVideoDecoder:!1,playback:{controls:!1,preload:"none",playInline:!0,recycleVideo:ne.isMobile,setHLSJSConfig:function(e,t){var n=function(e){return e.hlsRecoverAttempts=1,{manifestLoadingMaxRetry:3,fragLoadingMaxRetry:7,levelLoadingMaxRetry:7}}(e);e.playback.hlsjsConfig=i(i(i(i({},Vg),n),{},{abrEwmaDefaultEstimate:Ef.initialBandwidthEstimateForHLSJS},e.HLSJSConfiguration||{}),{},{pLoader:Ug(t)}),e.hlsPlayback={preload:!t.isLive}},setShakaConfig:function(e,t){e.shakaOnBeforeLoad=jg,e.shakaMinimumDvrSize=180,e.shakaConfiguration=e.shakaConfiguration||{},Kg(e),function(e){var t;e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{preferredAudioLanguage:(null===(t=e.defaultAudio)||void 0===t?void 0:t.language)||"por"})}(e),t.isLive||(function(e){e.shakaConfiguration=e.shakaConfiguration||{},e.shakaConfiguration.streaming=i(i({},e.shakaConfiguration.streaming||{}),{bufferingGoal:120,rebufferingGoal:2,bufferBehind:30})}(e),function(e){var t=((window.WM&&window.WM.Settings||{}).ShakaConfig||{})["shaka-config-set-control"]||{};e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{streaming:i(i({},e.shakaConfiguration.streaming||{}),t.streaming),abr:i(i(i({},e.shakaConfiguration.abr||{}),t.abr),{},{defaultBandwidthEstimate:Ef.initialBandwidthEstimateForShaka})})}(e),function(e){e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{manifest:i(i({},e.shakaConfiguration.manifest||{}),{},{dash:i(i({},e.shakaConfiguration.manifest&&e.shakaConfiguration.manifest.dash||{}),{},{ignoreMinBufferTime:!0})})})}(e))},setHLSJSlowLatencyConfig:function(e,t){var n=t.video.selectedResource.hasLowLatency;e.playback.hlsjsConfig=i(i({},e.playback.hlsjsConfig),n?Hg:Vg)},recoverableErros:Bg},gaAccount:null,gaTrackerName:null,allowLocation:!1,disableVideoTagContextMenu:!0,stretched:!1,maxQualityLevel:"max",allowRestrictedContent:zg.allowRestrictedContent,videoInfo:{inlineEnabled:!1,fullscreenEnabled:!0},includeResetStyle:!0,customStyle:{mainStyle:rg,resetStyle:'.clappr-player#wp3-player-0 div, .clappr-player#wp3-player-0 span, .clappr-player#wp3-player-0 applet, .clappr-player#wp3-player-0 object, .clappr-player#wp3-player-0 iframe,\n.clappr-player#wp3-player-0 h1, .clappr-player#wp3-player-0 h2, .clappr-player#wp3-player-0 h3, .clappr-player#wp3-player-0 h4, .clappr-player#wp3-player-0 h5, .clappr-player#wp3-player-0 h6, .clappr-player#wp3-player-0 p, .clappr-player#wp3-player-0 blockquote, .clappr-player#wp3-player-0 pre,\n.clappr-player#wp3-player-0 a, .clappr-player#wp3-player-0 abbr, .clappr-player#wp3-player-0 acronym, .clappr-player#wp3-player-0 address, .clappr-player#wp3-player-0 big, .clappr-player#wp3-player-0 cite, .clappr-player#wp3-player-0 code,\n.clappr-player#wp3-player-0 del, .clappr-player#wp3-player-0 dfn, .clappr-player#wp3-player-0 em, .clappr-player#wp3-player-0 img, .clappr-player#wp3-player-0 ins, .clappr-player#wp3-player-0 kbd, .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 s, .clappr-player#wp3-player-0 samp,\n.clappr-player#wp3-player-0 small, .clappr-player#wp3-player-0 strike, .clappr-player#wp3-player-0 strong, .clappr-player#wp3-player-0 sub, .clappr-player#wp3-player-0 sup, .clappr-player#wp3-player-0 tt, .clappr-player#wp3-player-0 var,\n.clappr-player#wp3-player-0 b, .clappr-player#wp3-player-0 u, .clappr-player#wp3-player-0 i, .clappr-player#wp3-player-0 center,\n.clappr-player#wp3-player-0 dl, .clappr-player#wp3-player-0 dt, .clappr-player#wp3-player-0 dd, .clappr-player#wp3-player-0 ol, .clappr-player#wp3-player-0 ul, .clappr-player#wp3-player-0 li,\n.clappr-player#wp3-player-0 fieldset, .clappr-player#wp3-player-0 form, .clappr-player#wp3-player-0 label, .clappr-player#wp3-player-0 legend,\n.clappr-player#wp3-player-0 table, .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 tbody, .clappr-player#wp3-player-0 tfoot, .clappr-player#wp3-player-0 thead, .clappr-player#wp3-player-0 tr, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td,\n.clappr-player#wp3-player-0 article, .clappr-player#wp3-player-0 aside, .clappr-player#wp3-player-0 canvas, .clappr-player#wp3-player-0 details, .clappr-player#wp3-player-0 embed,\n.clappr-player#wp3-player-0 figure, .clappr-player#wp3-player-0 figcaption, .clappr-player#wp3-player-0 footer, .clappr-player#wp3-player-0 header, .clappr-player#wp3-player-0 hgroup,\n.clappr-player#wp3-player-0 menu, .clappr-player#wp3-player-0 nav, .clappr-player#wp3-player-0 output, .clappr-player#wp3-player-0 ruby, .clappr-player#wp3-player-0 section, .clappr-player#wp3-player-0 summary,\n.clappr-player#wp3-player-0 time, .clappr-player#wp3-player-0 mark, .clappr-player#wp3-player-0 audio, .clappr-player#wp3-player-0 video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline;\n}\n.clappr-player#wp3-player-0 table {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n.clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle;\n}\n.clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 blockquote {\n  quotes: none;\n}\n.clappr-player#wp3-player-0 q:before, .clappr-player#wp3-player-0 q:after, .clappr-player#wp3-player-0 blockquote:before, .clappr-player#wp3-player-0 blockquote:after {\n  content: "";\n  content: none;\n}\n.clappr-player#wp3-player-0 a img {\n  border: none;\n}'},customErrors:fl,shouldDeviceUseWebVTT:!0,clickToPauseConfig:{onClickPayload:{userInvoked:!0}}};Object.values(ag).forEach((function(e){return st.registerPlugin(e)})),st.registerPlugin(yg),st.registerPlugin(Ef),st.registerPlugin(kg),st.registerPlugin(Tg),st.registerPlugin(Ng),og.forEach((function(e){return st.registerPlayback(e)}));var $g=jn.DOM.hasPlayerElement,Xg=window.WM&&window.WM.Settings||{},Qg=Xg&&Xg.Domains||[],Jg=function(e){h(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,n);var a=n.hasSourceMapped(r.source);a&&(r.source=a);var o=i(i({},qg),r);return o.clapprStats={runEach:1e3,onReport:function(t){return e.onMetricsReceived(t)}},o.mediacontrol.plugins=sg(o.mediaControl&&o.mediaControl.plugins),o.stretched&&(o.width=o.stretchWidth||o.width,o.height=o.stretchHeight||o.height),n.overrideOptions(o),o.plugins&&(o.plugins.loadExternalPluginsFirst=!1),!o.includeResetStyle&&delete o.customStyle.resetStyle,"string"==typeof(e=t.call(this,o)).options.defaultAudio&&(e.options.defaultAudio=e._forceNewAudioFormat(e.options)),"string"==typeof e.options.defaultSubtitle&&(e.options.defaultSubtitle=e._forceNewSubtitleFormat(e.options)),e}return c(n,[{key:"eventsMapping",get:function(){return Object.assign(A(f(n.prototype),"eventsMapping",this),{onPipAdded:Gn.PLAYER_PIP_ADDED,onPipDiscarded:Gn.PLAYER_PIP_DISCARDED,onMasterAdded:Gn.PLAYER_MASTER_ADDED,onMasterChanged:Gn.PLAYER_MASTER_CHANGED,onPipToMaster:Gn.PLAYER_PIPTOMASTER,onMediaControlShow:Gn.PLAYER_MEDIACONTROL_SHOW,onMediaControlHide:Gn.PLAYER_MEDIACONTROL_HIDE,onBackButtonClicked:Gn.BACK_BUTTON_CLICKED,onDrawerWillShow:Gn.WILL_SHOW_DRAWER,onDrawerWillHide:Gn.WILL_HIDE_DRAWER,onDrawerShow:Gn.DID_SHOW_DRAWER,onDrawerHide:Gn.DID_HIDE_DRAWER,onDrawerShowHint:Gn.DID_SHOW_DRAWER_HINT,onDrawerHideHint:Gn.DID_HIDE_DRAWER_HINT,onSubtitleChanged:Gn.WM_SUBTITLE_CHANGED,onAudioChanged:Gn.WM_AUDIO_CHANGED,onDidLoadCuepoints:Gn.DID_LOAD_CUEPOINTS,onDidReachCuepoint:Gn.DID_REACH_CUEPOINT})}},{key:"defaultOptions",get:function(){return qg}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"onMetricsReceived",value:function(e){this.container.trigger(Gn.WM_STATS_REPORTED,e)}},{key:"normalizeSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sources||(void 0===e.source?[]:["".concat(e.source)]);return 0===(t=t.map((function(e){return"".concat(e||"")}))).length?["no.op"]:t}},{key:"isUnsupportedBrowser",value:function(){return ne.version<{chrome:41,firefox:38,ie:12,msie:12,safari:8}[ne.name.toLowerCase()]}},{key:"attachTo",value:function(e){$(e).html(""),this.element=e,this.options.parentElement=e,this.options.customStyle&&this._renderCustomStyles(e,this.options.customStyle),this.core&&this.core.destroy(),A(f(n.prototype),"attachTo",this).call(this,e),this.core.$el.attr("id","wp3-player-".concat(this.core.options.playerId)),this.core.$el.addClass("clappr-player"),this.validatePlayerEnvironment()}},{key:"validatePlayerEnvironment",value:function(){var e=this.playback&&"function"==typeof this.playback.onError,t=!n.isAllowedDomain(window.location.hostname)&&!n.isDevMode()&&e,i=this.isUnsupportedBrowser()&&e;t&&this.playback.onError(fl.NOT_ALLOWED_DOMAIN,{useCodePrefix:!1}),i&&this.playback.onError(fl.UNSUPPORTED_BROWSER,{useCodePrefix:!1})}},{key:"load",value:function(e){if($g(this.element)){var t=n.hasSourceMapped(e)||e;A(f(n.prototype),"load",this).call(this,t),this.validatePlayerEnvironment()}}},{key:"configure",value:function(e){var t=n.hasSourceMapped(e.source);t&&(e.source=t),this.options.stretched&&(e.width||e.height)&&(e.width=this.options.stretchWidth||e.width,e.height=this.options.stretchHeight||e.height),this.hasSourceChanged(e)||(delete e.sources,delete e.source),"string"==typeof e.defaultAudio&&(e.defaultAudio=this._forceNewAudioFormat(e)),"string"==typeof e.defaultSubtitle&&(e.defaultSubtitle=this._forceNewSubtitleFormat(e)),n.overrideOptions(e,this.options),e.plugins&&(e.plugins.loadExternalPluginsFirst=!1),A(f(n.prototype),"configure",this).call(this,e),this.validatePlayerEnvironment()}},{key:"hasSourceChanged",value:function(e){var t=this.normalizeSources(this.options),n=this.normalizeSources(e);return t[0]!==n[0]}},{key:"_forceNewAudioFormat",value:function(e){return{language:e.defaultAudio}}},{key:"_forceNewSubtitleFormat",value:function(e){return{language:e.defaultSubtitle,role:"subtitle"}}},{key:"_addEventListeners",value:function(){var e=this;A(f(n.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,Gn.WM_PIP_ADDED,this.onPipAdded),this.listenTo(this.core,Gn.WM_PIP_DISCARDED,this.onPipDiscarded),this.listenTo(this.core,Gn.WM_MASTER_ADDED,this.onMasterAdded),this.listenTo(this.core,Gn.WM_MASTER_CHANGED,this.onMasterChanged),this.listenTo(this.core,Gn.BACK_BUTTON_CLICKED,this.onBackButtonClicked),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_SHOW,(function(){return e.trigger(Gn.PLAYER_MEDIACONTROL_SHOW)})),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_HIDE,(function(){return e.trigger(Gn.PLAYER_MEDIACONTROL_HIDE)})),this.listenTo(this.core,Gn.WILL_SHOW_DRAWER,this.onDrawerWillShow),this.listenTo(this.core,Gn.WILL_HIDE_DRAWER,this.onDrawerWillHide),this.listenTo(this.core,Gn.DID_SHOW_DRAWER,this.onDrawerShow),this.listenTo(this.core,Gn.DID_HIDE_DRAWER,this.onDrawerHide),this.listenTo(this.core,Gn.DID_SHOW_DRAWER_HINT,this.onDrawerShowHint),this.listenTo(this.core,Gn.DID_HIDE_DRAWER_HINT,this.onDrawerHideHint)}},{key:"_addContainerEventListeners",value:function(){A(f(n.prototype),"_addContainerEventListeners",this).call(this),this.listenTo(this.container,Gn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Gn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Gn.DID_LOAD_CUEPOINTS,this.onDidLoadCuepoints),this.listenTo(this.container,Gn.DID_REACH_CUEPOINT,this.onDidReachCuepoint),this.listenTo(this.container,Gn.WM_AUDIO_CHANGED,this.onAudioChanged)}},{key:"onDrawerWillShow",value:function(){this.trigger(Gn.WILL_SHOW_DRAWER)}},{key:"onDrawerWillHide",value:function(){this.trigger(Gn.WILL_HIDE_DRAWER)}},{key:"onDrawerHide",value:function(){this.trigger(Gn.DID_HIDE_DRAWER)}},{key:"onDrawerShow",value:function(){this.trigger(Gn.DID_SHOW_DRAWER)}},{key:"onDrawerHideHint",value:function(){this.trigger(Gn.DID_HIDE_DRAWER_HINT)}},{key:"onDrawerShowHint",value:function(){this.trigger(Gn.DID_SHOW_DRAWER_HINT)}},{key:"onDidLoadCuepoints",value:function(e){this.trigger(Gn.DID_LOAD_CUEPOINTS,e)}},{key:"onDidReachCuepoint",value:function(e){this.trigger(Gn.DID_REACH_CUEPOINT,e)}},{key:"onSubtitleChanged",value:function(e){this.trigger(Gn.WM_SUBTITLE_CHANGED,e)}},{key:"onAudioChanged",value:function(e){this.trigger(Gn.WM_AUDIO_CHANGED,e)}},{key:"onBackButtonClicked",value:function(){this.trigger(Gn.BACK_BUTTON_CLICKED)}},{key:"onPipAdded",value:function(){this.trigger(Gn.PLAYER_PIP_ADDED)}},{key:"onPipDiscarded",value:function(){this.trigger(Gn.PLAYER_PIP_DISCARDED)}},{key:"onMasterAdded",value:function(){this.trigger(Gn.PLAYER_MASTER_ADDED)}},{key:"onMasterChanged",value:function(){this.trigger(Gn.PLAYER_MASTER_CHANGED)}},{key:"onPipToMaster",value:function(){this.trigger(Gn.PLAYER_PIPTOMASTER)}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}}],[{key:"version",get:function(){return"7.154.0"}},{key:"allVersions",get:function(){return{Player:"7.154.0",PlayerCore:"1.90.0",PlayerPlugins:"1.159.0",Clappr:kt,ShakaPlayer:tg.Player.version,HLSjs:xs.version}}},{key:"overrideOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.chromeless&&t.chromeless&&(e.chromeless=t.chromeless),e.videoInfo&&(e.videoInfo=i(i({},qg.videoInfo),e.videoInfo));var n=e.chromecast||{},r=n.appId||qg.chromecast.appId;e.chromecast={enabled:n.enabled&&!ne.isChromecast&&!!r,appId:r,enableBingeWatch:n.enableBingeWatch}}},{key:"hasSourceMapped",value:function(e){return ne.isChrome&&Xg.sourceMapping&&Xg.sourceMapping[e]}}]),n}(Jn);return Jg.isDevMode=function(){return!1},Jg.isAllowedDomain=function(e){return!Xg.Domains||Qg.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Clappr,e.Drawer=Dl,e.DrawerBottom=Dl,e.Environment=Kt,e.Errors=fl,e.Events=Gn,e.MediaControlPlugin=Tr,e.Playbacks=og,e.Player=Jg,e.Plugins=ag,e.Styler=Kn,e.mergeMediaControlPlugins=sg,e.playerStyle=rg,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
